{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.constructor.js","webpack:///./node_modules/markdown-it-link-attributes/index.js","webpack:///./node_modules/vue-upload-component/dist/vue-upload-component.js","webpack:///./node_modules/activestorage/app/assets/javascripts/activestorage.js"],"names":["DESCRIPTORS","global","isForced","inheritIfRequired","defineProperty","f","getOwnPropertyNames","isRegExp","getFlags","stickyHelpers","redefine","fails","enforceInternalState","enforce","setSpecies","MATCH","wellKnownSymbol","NativeRegExp","RegExp","RegExpPrototype","prototype","re1","re2","CORRECT_NEW","UNSUPPORTED_Y","RegExpWrapper","pattern","flags","sticky","thisIsRegExp","this","patternIsRegExp","flagsAreUndefined","undefined","constructor","source","call","indexOf","replace","result","proxy","key","configurable","get","set","it","keys","index","length","markdownitLinkAttributes","md","configs","Array","isArray","Object","freeze","defaultRender","renderer","rules","link_open","tokens","idx","options","env","self","config","link","i","href","attrs","attrIndex","matcher","findFirstMatchingConfig","attributes","forEach","attr","value","attrPush","applyAttributes","renderToken","module","exports","factory","_typeof2","Symbol","iterator","obj","createRequest","xhr","XMLHttpRequest","open","method","url","responseType","headers","setRequestHeader","request","body","Promise","resolve","reject","onload","status","response","JSON","parse","err","onerror","send","stringify","sendRequest","_createClass","defineProperties","target","props","descriptor","enumerable","writable","Constructor","protoProps","staticProps","ChunkUploadHandler","file","instance","TypeError","_classCallCheck","chunks","sessionId","chunkSize","speedInterval","start","end","fileSize","push","blob","slice","startOffset","active","retries","maxRetries","progress","stopChunks","chunksUploading","chunk","abort","stopSpeedCalc","startChunking","_this","promise","_this2","assign","action","startBody","phase","mime_type","fileType","size","name","fileName","then","res","data","session_id","end_offset","createChunks","catch","maxActiveChunks","uploadNextChunk","startSpeedCalc","hasChunksToUpload","uploadChunk","chunksToUpload","finish","_this3","updateFileProgress","upload","addEventListener","evt","lengthComputable","Math","round","loaded","total","FormData","append","sendFormRequest","uploadBody","start_offset","uploaded","_this4","finishBody","_this5","speed","lastUploadedBytes","window","setInterval","uploadedBytes","clearInterval","parseInt","maxActive","type","_this6","completedProgress","chunksUploaded","uploadingProgress","reduce","min","filter","normalizeComponent_1","template","style","script","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","hook","render","staticRenderFns","_compiled","functional","_scopeId","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","originalRender","h","existing","beforeCreate","concat","InputFile","_vm","_h","$createElement","_self","_c","$parent","inputId","accept","capture","disabled","directory","features","multiple","html5","on","change","methods","e","addInputFile","files","test","navigator","userAgent","$destroy","el","$el","_extends","arguments","hasOwnProperty","_typeof","_toConsumableArray","arr","arr2","from","n","CHUNK_DEFAULT_OPTIONS","minSize","handler","script$1","components","String","default","Boolean","maximum","Number","addIndex","postAction","putAction","customAction","Function","timeout","drop","dropDirectory","extensions","thread","chunkEnabled","dropActive","uploading","destroy","mounted","input","document","createElement","webkitdirectory","ondrop","maps","id","$nextTick","$forceUpdate","watchDrop","beforeDestroy","computed","fileObject","error","success","chunkOptions","className","watch","_active","watchActive","oldMaps","newFile","oldFile","emitFile","_key","clear","emitInput","_files","addFiles","Blob","webkitRelativePath","relativePath","Element","random","toString","substr","emitFilter","newFiles","_newFiles","splice","apply","_i","_file2","_i2","names","split","__vuex__","addDataTransfer","dataTransfer","items","item","getAsEntry","getAsFile","webkitGetAsEntry","getEntry","results","_i3","entry","path","isFile","isDirectory","dirReader","createReader","readEntries","entries","id1","id2","file1","file2","index1","index2","remove","console","update","isPrevent","$emit","setTimeout","code","message","map","trim","join","search","shouldUseChunkUpload","uploadPut","uploadHtml5","uploadHtml4","HandlerClass","querys","encodeURIComponent","queryString","uploadXhr","form","File","filename","_file","speedTime","speedLoaded","onprogress","speedTime2","Date","now","toFixed","interval","complete","fn","responseText","contentType","getResponseHeader","onabort","ontimeout","onKeydown","keyCode","preventDefault","iframe","src","setAttribute","appendChild","removeEventListener","doc","contentWindow","contentDocument","innerHTML","getResponseData","submit","parentNode","removeChild","_el","dropElement","onDragenter","onDragleave","onDocumentDrop","onDragover","onDrop","querySelector","dt","types","contains","nodeName","explicitOriginalTarget","fromElement","clientX","clientY","innerWidth","innerHeight","isOldIE","toLowerCase","HEAD","head","getElementsByTagName","styles","FileUpload","class","_t","_v","inject","media","css","group","ids","Set","has","sources","btoa","unescape","element","styleSheet","cssText","textNode","createTextNode","nodes","childNodes","insertBefore","addStyle","sparkMd5","createCommonjsModule","hex_chr","md5cycle","x","k","a","b","c","d","md5blk","s","md5blks","charCodeAt","md5blk_array","md51","tail","tmp","lo","hi","state","substring","match","md51_array","subarray","Uint8Array","rhex","j","hex","toUtf8","str","utf8Str2ArrayBuffer","returnUInt8Array","buff","ArrayBuffer","arrayBuffer2Utf8Str","fromCharCode","concatenateArrayBuffers","first","second","byteLength","buffer","hexToBinaryString","bytes","SparkMD5","reset","clamp","val","max","to","num","targetArray","sourceArray","begin","appendBinary","contents","_buff","_length","_hash","raw","ret","_finish","getState","hash","setState","hashBinary","content","classCallCheck","createClass","fileSlice","mozSlice","webkitSlice","FileChecksum","chunkCount","ceil","chunkIndex","callback","create","md5Buffer","fileReader","FileReader","event","fileReaderDidLoad","fileReaderDidError","readNextChunk","binaryDigest","base64digest","readAsArrayBuffer","findElement","root","selector","dispatchEvent","eventInit","bubbles","cancelable","detail","createEvent","initEvent","toArray$1","BlobRecord","checksum","content_type","byte_size","getAttribute","getMetaValue","requestDidLoad","requestDidError","direct_upload","directUploadData","toJSON","_xhr","BlobUpload","_blob$directUploadDat","DirectUpload","delegate","notify","object","methodName","_len","messages","DirectUploadController","directUpload","dispatch","hiddenInput","insertAdjacentElement","dispatchError","signed_id","defaultPrevented","alert","uploadRequestDidProgress","DirectUploadsController","inputs","querySelectorAll","controllers","createDirectUploadControllers","startNextController","controller","shift","processingAttribute","submitButtonsByForm","WeakMap","started","didClick","didSubmitForm","didSubmitRemoteElement","tagName","handleFormSubmissionEvent","hasAttribute","disable","removeAttribute","enable","button","focus","click","display","delete","submitForm","ActiveStorage"],"mappings":"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","file":"js/5-dfd9c84232e472fde43f.chunk.js","sourcesContent":["var DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar isRegExp = require('../internals/is-regexp');\nvar getFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar enforceInternalState = require('../internals/internal-state').enforce;\nvar setSpecies = require('../internals/set-species');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = global.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\n\nvar FORCED = DESCRIPTORS && isForced('RegExp', (!CORRECT_NEW || UNSUPPORTED_Y || fails(function () {\n  re2[MATCH] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';\n})));\n\n// `RegExp` constructor\n// https://tc39.es/ecma262/#sec-regexp-constructor\nif (FORCED) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = this instanceof RegExpWrapper;\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    var sticky;\n\n    if (!thisIsRegExp && patternIsRegExp && pattern.constructor === RegExpWrapper && flagsAreUndefined) {\n      return pattern;\n    }\n\n    if (CORRECT_NEW) {\n      if (patternIsRegExp && !flagsAreUndefined) pattern = pattern.source;\n    } else if (pattern instanceof RegExpWrapper) {\n      if (flagsAreUndefined) flags = getFlags.call(pattern);\n      pattern = pattern.source;\n    }\n\n    if (UNSUPPORTED_Y) {\n      sticky = !!flags && flags.indexOf('y') > -1;\n      if (sticky) flags = flags.replace(/y/g, '');\n    }\n\n    var result = inheritIfRequired(\n      CORRECT_NEW ? new NativeRegExp(pattern, flags) : NativeRegExp(pattern, flags),\n      thisIsRegExp ? this : RegExpPrototype,\n      RegExpWrapper\n    );\n\n    if (UNSUPPORTED_Y && sticky) {\n      var state = enforceInternalState(result);\n      state.sticky = true;\n    }\n\n    return result;\n  };\n  var proxy = function (key) {\n    key in RegExpWrapper || defineProperty(RegExpWrapper, key, {\n      configurable: true,\n      get: function () { return NativeRegExp[key]; },\n      set: function (it) { NativeRegExp[key] = it; }\n    });\n  };\n  var keys = getOwnPropertyNames(NativeRegExp);\n  var index = 0;\n  while (keys.length > index) proxy(keys[index++]);\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  redefine(global, 'RegExp', RegExpWrapper);\n}\n\n// https://tc39.es/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n","\"use strict\"; // Adapted from https://github.com/markdown-it/markdown-it/blob/fbc6b0fed563ba7c00557ab638fd19752f8e759d/docs/architecture.md\n\nfunction findFirstMatchingConfig(link, configs) {\n  var i, config;\n  var href = link.attrs[link.attrIndex(\"href\")][1];\n\n  for (i = 0; i < configs.length; ++i) {\n    config = configs[i]; // If there is a matcher function defined then call it\n    // Matcher Function should return a boolean indicating\n    // whether or not it matched. If it matched, use that\n    // configuration, otherwise, try the next one.\n\n    if (typeof config.matcher === \"function\") {\n      if (config.matcher(href, config)) {\n        return config;\n      } else {\n        continue;\n      }\n    }\n\n    return config;\n  }\n}\n\nfunction applyAttributes(idx, tokens, attributes) {\n  Object.keys(attributes).forEach(function (attr) {\n    var attrIndex;\n    var value = attributes[attr];\n\n    if (attr === \"className\") {\n      // when dealing with applying classes\n      // programatically, some programmers\n      // may prefer to use the className syntax\n      attr = \"class\";\n    }\n\n    attrIndex = tokens[idx].attrIndex(attr);\n\n    if (attrIndex < 0) {\n      // attr doesn't exist, add new attribute\n      tokens[idx].attrPush([attr, value]);\n    } else {\n      // attr already exists, overwrite it\n      tokens[idx].attrs[attrIndex][1] = value; // replace value of existing attr\n    }\n  });\n}\n\nfunction markdownitLinkAttributes(md, configs) {\n  if (!configs) {\n    configs = [];\n  } else {\n    configs = Array.isArray(configs) ? configs : [configs];\n  }\n\n  Object.freeze(configs);\n  var defaultRender = md.renderer.rules.link_open || this.defaultRender;\n\n  md.renderer.rules.link_open = function (tokens, idx, options, env, self) {\n    var config = findFirstMatchingConfig(tokens[idx], configs);\n    var attributes = config && config.attrs;\n\n    if (attributes) {\n      applyAttributes(idx, tokens, attributes);\n    } // pass token to default renderer.\n\n\n    return defaultRender(tokens, idx, options, env, self);\n  };\n}\n\nmarkdownitLinkAttributes.defaultRender = function (tokens, idx, options, env, self) {\n  return self.renderToken(tokens, idx, options);\n};\n\nmodule.exports = markdownitLinkAttributes;","function _typeof2(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\n/*!\n * Name: vue-upload-component\n * Version: 2.8.21\n * Author: Marco Lang\n */\n(function (global, factory) {\n  (typeof exports === \"undefined\" ? \"undefined\" : _typeof2(exports)) === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : global.VueUploadComponent = factory();\n})(this, function () {\n  'use strict';\n  /**\n   * Creates a XHR request\n   *\n   * @param {Object} options\n   */\n\n  var createRequest = function createRequest(options) {\n    var xhr = new XMLHttpRequest();\n    xhr.open(options.method || 'GET', options.url);\n    xhr.responseType = 'json';\n\n    if (options.headers) {\n      Object.keys(options.headers).forEach(function (key) {\n        xhr.setRequestHeader(key, options.headers[key]);\n      });\n    }\n\n    return xhr;\n  };\n  /**\n   * Sends a XHR request with certain body\n   *\n   * @param {XMLHttpRequest} xhr\n   * @param {Object} body\n   */\n\n\n  var sendRequest = function sendRequest(xhr, body) {\n    return new Promise(function (resolve, reject) {\n      xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var response;\n\n          try {\n            response = JSON.parse(xhr.response);\n          } catch (err) {\n            response = xhr.response;\n          }\n\n          resolve(response);\n        } else {\n          reject(xhr.response);\n        }\n      };\n\n      xhr.onerror = function () {\n        return reject(xhr.response);\n      };\n\n      xhr.send(JSON.stringify(body));\n    });\n  };\n  /**\n   * Sends a XHR request with certain form data\n   *\n   * @param {XMLHttpRequest} xhr\n   * @param {Object} data\n   */\n\n\n  var sendFormRequest = function sendFormRequest(xhr, data) {\n    var body = new FormData();\n\n    for (var name in data) {\n      body.append(name, data[name]);\n    }\n\n    return new Promise(function (resolve, reject) {\n      xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var response;\n\n          try {\n            response = JSON.parse(xhr.response);\n          } catch (err) {\n            response = xhr.response;\n          }\n\n          resolve(response);\n        } else {\n          reject(xhr.response);\n        }\n      };\n\n      xhr.onerror = function () {\n        return reject(xhr.response);\n      };\n\n      xhr.send(body);\n    });\n  };\n  /**\n   * Creates and sends XHR request\n   *\n   * @param {Object} options\n   *\n   * @returns Promise\n   */\n\n\n  function request(options) {\n    var xhr = createRequest(options);\n    return sendRequest(xhr, options.body);\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var ChunkUploadHandler = function () {\n    /**\n     * Constructor\n     *\n     * @param {File} file\n     * @param {Object} options\n     */\n    function ChunkUploadHandler(file, options) {\n      _classCallCheck(this, ChunkUploadHandler);\n\n      this.file = file;\n      this.options = options;\n      this.chunks = [];\n      this.sessionId = null;\n      this.chunkSize = null;\n      this.speedInterval = null;\n    }\n    /**\n     * Gets the max retries from options\n     */\n\n\n    _createClass(ChunkUploadHandler, [{\n      key: 'createChunks',\n\n      /**\n       * Creates all the chunks in the initial state\n       */\n      value: function createChunks() {\n        this.chunks = [];\n        var start = 0;\n        var end = this.chunkSize;\n\n        while (start < this.fileSize) {\n          this.chunks.push({\n            blob: this.file.file.slice(start, end),\n            startOffset: start,\n            active: false,\n            retries: this.maxRetries\n          });\n          start = end;\n          end = start + this.chunkSize;\n        }\n      }\n      /**\n       * Updates the progress of the file with the handler's progress\n       */\n\n    }, {\n      key: 'updateFileProgress',\n      value: function updateFileProgress() {\n        this.file.progress = this.progress;\n      }\n      /**\n       * Paues the upload process\n       * - Stops all active requests\n       * - Sets the file not active\n       */\n\n    }, {\n      key: 'pause',\n      value: function pause() {\n        this.file.active = false;\n        this.stopChunks();\n      }\n      /**\n       * Stops all the current chunks\n       */\n\n    }, {\n      key: 'stopChunks',\n      value: function stopChunks() {\n        this.chunksUploading.forEach(function (chunk) {\n          chunk.xhr.abort();\n          chunk.active = false;\n        });\n        this.stopSpeedCalc();\n      }\n      /**\n       * Resumes the file upload\n       * - Sets the file active\n       * - Starts the following chunks\n       */\n\n    }, {\n      key: 'resume',\n      value: function resume() {\n        this.file.active = true;\n        this.startChunking();\n      }\n      /**\n       * Starts the file upload\n       *\n       * @returns Promise\n       * - resolve  The file was uploaded\n       * - reject   The file upload failed\n       */\n\n    }, {\n      key: 'upload',\n      value: function upload() {\n        var _this = this;\n\n        this.promise = new Promise(function (resolve, reject) {\n          _this.resolve = resolve;\n          _this.reject = reject;\n        });\n        this.start();\n        return this.promise;\n      }\n      /**\n       * Start phase\n       * Sends a request to the backend to initialise the chunks\n       */\n\n    }, {\n      key: 'start',\n      value: function start() {\n        var _this2 = this;\n\n        request({\n          method: 'POST',\n          headers: Object.assign({}, this.headers, {\n            'Content-Type': 'application/json'\n          }),\n          url: this.action,\n          body: Object.assign(this.startBody, {\n            phase: 'start',\n            mime_type: this.fileType,\n            size: this.fileSize,\n            name: this.fileName\n          })\n        }).then(function (res) {\n          if (res.status !== 'success') {\n            _this2.file.response = res;\n            return _this2.reject('server');\n          }\n\n          _this2.sessionId = res.data.session_id;\n          _this2.chunkSize = res.data.end_offset;\n\n          _this2.createChunks();\n\n          _this2.startChunking();\n        }).catch(function (res) {\n          _this2.file.response = res;\n\n          _this2.reject('server');\n        });\n      }\n      /**\n       * Starts to upload chunks\n       */\n\n    }, {\n      key: 'startChunking',\n      value: function startChunking() {\n        for (var i = 0; i < this.maxActiveChunks; i++) {\n          this.uploadNextChunk();\n        }\n\n        this.startSpeedCalc();\n      }\n      /**\n       * Uploads the next chunk\n       * - Won't do anything if the process is paused\n       * - Will start finish phase if there are no more chunks to upload\n       */\n\n    }, {\n      key: 'uploadNextChunk',\n      value: function uploadNextChunk() {\n        if (this.file.active) {\n          if (this.hasChunksToUpload) {\n            return this.uploadChunk(this.chunksToUpload[0]);\n          }\n\n          if (this.chunksUploading.length === 0) {\n            return this.finish();\n          }\n        }\n      }\n      /**\n       * Uploads a chunk\n       * - Sends the chunk to the backend\n       * - Sets the chunk as uploaded if everything went well\n       * - Decreases the number of retries if anything went wrong\n       * - Fails if there are no more retries\n       *\n       * @param {Object} chunk\n       */\n\n    }, {\n      key: 'uploadChunk',\n      value: function uploadChunk(chunk) {\n        var _this3 = this;\n\n        chunk.progress = 0;\n        chunk.active = true;\n        this.updateFileProgress();\n        chunk.xhr = createRequest({\n          method: 'POST',\n          headers: this.headers,\n          url: this.action\n        });\n        chunk.xhr.upload.addEventListener('progress', function (evt) {\n          if (evt.lengthComputable) {\n            chunk.progress = Math.round(evt.loaded / evt.total * 100);\n          }\n        }, false);\n        sendFormRequest(chunk.xhr, Object.assign(this.uploadBody, {\n          phase: 'upload',\n          session_id: this.sessionId,\n          start_offset: chunk.startOffset,\n          chunk: chunk.blob\n        })).then(function (res) {\n          chunk.active = false;\n\n          if (res.status === 'success') {\n            chunk.uploaded = true;\n          } else {\n            if (chunk.retries-- <= 0) {\n              _this3.stopChunks();\n\n              return _this3.reject('upload');\n            }\n          }\n\n          _this3.uploadNextChunk();\n        }).catch(function () {\n          chunk.active = false;\n\n          if (chunk.retries-- <= 0) {\n            _this3.stopChunks();\n\n            return _this3.reject('upload');\n          }\n\n          _this3.uploadNextChunk();\n        });\n      }\n      /**\n       * Finish phase\n       * Sends a request to the backend to finish the process\n       */\n\n    }, {\n      key: 'finish',\n      value: function finish() {\n        var _this4 = this;\n\n        this.updateFileProgress();\n        this.stopSpeedCalc();\n        request({\n          method: 'POST',\n          headers: Object.assign({}, this.headers, {\n            'Content-Type': 'application/json'\n          }),\n          url: this.action,\n          body: Object.assign(this.finishBody, {\n            phase: 'finish',\n            session_id: this.sessionId\n          })\n        }).then(function (res) {\n          _this4.file.response = res;\n\n          if (res.status !== 'success') {\n            return _this4.reject('server');\n          }\n\n          _this4.resolve(res);\n        }).catch(function (res) {\n          _this4.file.response = res;\n\n          _this4.reject('server');\n        });\n      }\n      /**\n       * Sets an interval to calculate and\n       * set upload speed every 3 seconds\n       */\n\n    }, {\n      key: 'startSpeedCalc',\n      value: function startSpeedCalc() {\n        var _this5 = this;\n\n        this.file.speed = 0;\n        var lastUploadedBytes = 0;\n\n        if (!this.speedInterval) {\n          this.speedInterval = window.setInterval(function () {\n            var uploadedBytes = _this5.progress / 100 * _this5.fileSize;\n            _this5.file.speed = uploadedBytes - lastUploadedBytes;\n            lastUploadedBytes = uploadedBytes;\n          }, 1000);\n        }\n      }\n      /**\n       * Removes the upload speed interval\n       */\n\n    }, {\n      key: 'stopSpeedCalc',\n      value: function stopSpeedCalc() {\n        this.speedInterval && window.clearInterval(this.speedInterval);\n        this.speedInterval = null;\n        this.file.speed = 0;\n      }\n    }, {\n      key: 'maxRetries',\n      get: function get() {\n        return parseInt(this.options.maxRetries, 10);\n      }\n      /**\n       * Gets the max number of active chunks being uploaded at once from options\n       */\n\n    }, {\n      key: 'maxActiveChunks',\n      get: function get() {\n        return parseInt(this.options.maxActive, 10);\n      }\n      /**\n       * Gets the file type\n       */\n\n    }, {\n      key: 'fileType',\n      get: function get() {\n        return this.file.type;\n      }\n      /**\n       * Gets the file size\n       */\n\n    }, {\n      key: 'fileSize',\n      get: function get() {\n        return this.file.size;\n      }\n      /**\n       * Gets the file name\n       */\n\n    }, {\n      key: 'fileName',\n      get: function get() {\n        return this.file.name;\n      }\n      /**\n       * Gets action (url) to upload the file\n       */\n\n    }, {\n      key: 'action',\n      get: function get() {\n        return this.options.action || null;\n      }\n      /**\n       * Gets the body to be merged when sending the request in start phase\n       */\n\n    }, {\n      key: 'startBody',\n      get: function get() {\n        return this.options.startBody || {};\n      }\n      /**\n       * Gets the body to be merged when sending the request in upload phase\n       */\n\n    }, {\n      key: 'uploadBody',\n      get: function get() {\n        return this.options.uploadBody || {};\n      }\n      /**\n       * Gets the body to be merged when sending the request in finish phase\n       */\n\n    }, {\n      key: 'finishBody',\n      get: function get() {\n        return this.options.finishBody || {};\n      }\n      /**\n       * Gets the headers of the requests from options\n       */\n\n    }, {\n      key: 'headers',\n      get: function get() {\n        return this.options.headers || {};\n      }\n      /**\n       * Whether it's ready to upload files or not\n       */\n\n    }, {\n      key: 'readyToUpload',\n      get: function get() {\n        return !!this.chunks;\n      }\n      /**\n       * Gets the progress of the chunk upload\n       * - Gets all the completed chunks\n       * - Gets the progress of all the chunks that are being uploaded\n       */\n\n    }, {\n      key: 'progress',\n      get: function get() {\n        var _this6 = this;\n\n        var completedProgress = this.chunksUploaded.length / this.chunks.length * 100;\n        var uploadingProgress = this.chunksUploading.reduce(function (progress, chunk) {\n          return progress + (chunk.progress | 0) / _this6.chunks.length;\n        }, 0);\n        return Math.min(completedProgress + uploadingProgress, 100);\n      }\n      /**\n       * Gets all the chunks that are pending to be uploaded\n       */\n\n    }, {\n      key: 'chunksToUpload',\n      get: function get() {\n        return this.chunks.filter(function (chunk) {\n          return !chunk.active && !chunk.uploaded;\n        });\n      }\n      /**\n       * Whether there are chunks to upload or not\n       */\n\n    }, {\n      key: 'hasChunksToUpload',\n      get: function get() {\n        return this.chunksToUpload.length > 0;\n      }\n      /**\n       * Gets all the chunks that are uploading\n       */\n\n    }, {\n      key: 'chunksUploading',\n      get: function get() {\n        return this.chunks.filter(function (chunk) {\n          return !!chunk.xhr && !!chunk.active;\n        });\n      }\n      /**\n       * Gets all the chunks that have finished uploading\n       */\n\n    }, {\n      key: 'chunksUploaded',\n      get: function get() {\n        return this.chunks.filter(function (chunk) {\n          return !!chunk.uploaded;\n        });\n      }\n    }]);\n\n    return ChunkUploadHandler;\n  }(); //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n\n\n  var script = {\n    methods: {\n      change: function change(e) {\n        this.$parent.addInputFile(e.target);\n\n        if (e.target.files) {\n          e.target.value = '';\n\n          if (e.target.files.length && !/safari/i.test(navigator.userAgent)) {\n            e.target.type = '';\n            e.target.type = 'file';\n          }\n        } else {\n          // ie9 fix #219\n          this.$destroy(); // eslint-disable-next-line\n\n          new this.constructor({\n            parent: this.$parent,\n            el: this.$el\n          });\n        }\n      }\n    }\n  };\n\n  function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier\n  /* server only */\n  , shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n    if (typeof shadowMode !== 'boolean') {\n      createInjectorSSR = createInjector;\n      createInjector = shadowMode;\n      shadowMode = false;\n    } // Vue.extend constructor export interop.\n\n\n    var options = typeof script === 'function' ? script.options : script; // render functions\n\n    if (template && template.render) {\n      options.render = template.render;\n      options.staticRenderFns = template.staticRenderFns;\n      options._compiled = true; // functional template\n\n      if (isFunctionalTemplate) {\n        options.functional = true;\n      }\n    } // scopedId\n\n\n    if (scopeId) {\n      options._scopeId = scopeId;\n    }\n\n    var hook;\n\n    if (moduleIdentifier) {\n      // server build\n      hook = function hook(context) {\n        // 2.3 injection\n        context = context || // cached call\n        this.$vnode && this.$vnode.ssrContext || // stateful\n        this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext; // functional\n        // 2.2 with runInNewContext: true\n\n        if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n          context = __VUE_SSR_CONTEXT__;\n        } // inject component styles\n\n\n        if (style) {\n          style.call(this, createInjectorSSR(context));\n        } // register component module identifier for async chunk inference\n\n\n        if (context && context._registeredComponents) {\n          context._registeredComponents.add(moduleIdentifier);\n        }\n      }; // used by ssr in case component is cached and beforeCreate\n      // never gets called\n\n\n      options._ssrRegister = hook;\n    } else if (style) {\n      hook = shadowMode ? function () {\n        style.call(this, createInjectorShadow(this.$root.$options.shadowRoot));\n      } : function (context) {\n        style.call(this, createInjector(context));\n      };\n    }\n\n    if (hook) {\n      if (options.functional) {\n        // register for functional component in vue file\n        var originalRender = options.render;\n\n        options.render = function renderWithStyleInjection(h, context) {\n          hook.call(context);\n          return originalRender(h, context);\n        };\n      } else {\n        // inject component registration as beforeCreate hook\n        var existing = options.beforeCreate;\n        options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n      }\n    }\n\n    return script;\n  }\n\n  var normalizeComponent_1 = normalizeComponent;\n  /* script */\n\n  var __vue_script__ = script;\n  /* template */\n\n  var __vue_render__ = function __vue_render__() {\n    var _vm = this;\n\n    var _h = _vm.$createElement;\n\n    var _c = _vm._self._c || _h;\n\n    return _c('input', {\n      attrs: {\n        \"type\": \"file\",\n        \"name\": _vm.$parent.name,\n        \"id\": _vm.$parent.inputId || _vm.$parent.name,\n        \"accept\": _vm.$parent.accept,\n        \"capture\": _vm.$parent.capture,\n        \"disabled\": _vm.$parent.disabled,\n        \"webkitdirectory\": _vm.$parent.directory && _vm.$parent.features.directory,\n        \"directory\": _vm.$parent.directory && _vm.$parent.features.directory,\n        \"multiple\": _vm.$parent.multiple && _vm.$parent.features.html5\n      },\n      on: {\n        \"change\": _vm.change\n      }\n    });\n  };\n\n  var __vue_staticRenderFns__ = [];\n  /* style */\n\n  var __vue_inject_styles__ = undefined;\n  /* scoped */\n\n  var __vue_scope_id__ = undefined;\n  /* module identifier */\n\n  var __vue_module_identifier__ = undefined;\n  /* functional template */\n\n  var __vue_is_functional_template__ = false;\n  /* style inject */\n\n  /* style inject SSR */\n\n  var InputFile = normalizeComponent_1({\n    render: __vue_render__,\n    staticRenderFns: __vue_staticRenderFns__\n  }, __vue_inject_styles__, __vue_script__, __vue_scope_id__, __vue_is_functional_template__, __vue_module_identifier__, undefined, undefined);\n\n  var _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  var _typeof = typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\" ? function (obj) {\n    return _typeof2(obj);\n  } : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n  };\n\n  function _toConsumableArray(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n        arr2[i] = arr[i];\n      }\n\n      return arr2;\n    } else {\n      return Array.from(arr);\n    }\n  }\n\n  var CHUNK_DEFAULT_OPTIONS = {\n    headers: {},\n    action: '',\n    minSize: 1048576,\n    maxActive: 3,\n    maxRetries: 5,\n    handler: ChunkUploadHandler\n  };\n  var script$1 = {\n    components: {\n      InputFile: InputFile\n    },\n    props: {\n      inputId: {\n        type: String\n      },\n      name: {\n        type: String,\n        default: 'file'\n      },\n      accept: {\n        type: String\n      },\n      capture: {},\n      disabled: {},\n      multiple: {\n        type: Boolean\n      },\n      maximum: {\n        type: Number,\n        default: function _default() {\n          return this.multiple ? 0 : 1;\n        }\n      },\n      addIndex: {\n        type: [Boolean, Number]\n      },\n      directory: {\n        type: Boolean\n      },\n      postAction: {\n        type: String\n      },\n      putAction: {\n        type: String\n      },\n      customAction: {\n        type: Function\n      },\n      headers: {\n        type: Object,\n        default: Object\n      },\n      data: {\n        type: Object,\n        default: Object\n      },\n      timeout: {\n        type: Number,\n        default: 0\n      },\n      drop: {\n        default: false\n      },\n      dropDirectory: {\n        type: Boolean,\n        default: true\n      },\n      size: {\n        type: Number,\n        default: 0\n      },\n      extensions: {\n        default: Array\n      },\n      value: {\n        type: Array,\n        default: Array\n      },\n      thread: {\n        type: Number,\n        default: 1\n      },\n      // Chunk upload enabled\n      chunkEnabled: {\n        type: Boolean,\n        default: false\n      },\n      // Chunk upload properties\n      chunk: {\n        type: Object,\n        default: function _default() {\n          return CHUNK_DEFAULT_OPTIONS;\n        }\n      }\n    },\n    data: function data() {\n      return {\n        files: this.value,\n        features: {\n          html5: true,\n          directory: false,\n          drop: false\n        },\n        active: false,\n        dropActive: false,\n        uploading: 0,\n        destroy: false\n      };\n    },\n\n    /**\n     * mounted\n     * @return {[type]} [description]\n     */\n    mounted: function mounted() {\n      var input = document.createElement('input');\n      input.type = 'file';\n      input.multiple = true; // html5 特征\n\n      if (window.FormData && input.files) {\n        // 上传目录特征\n        if (typeof input.webkitdirectory === 'boolean' || typeof input.directory === 'boolean') {\n          this.features.directory = true;\n        } // 拖拽特征\n\n\n        if (this.features.html5 && typeof input.ondrop !== 'undefined') {\n          this.features.drop = true;\n        }\n      } else {\n        this.features.html5 = false;\n      } // files 定位缓存\n\n\n      this.maps = {};\n\n      if (this.files) {\n        for (var i = 0; i < this.files.length; i++) {\n          var file = this.files[i];\n          this.maps[file.id] = file;\n        }\n      }\n\n      this.$nextTick(function () {\n        var _this = this; // 更新下父级\n\n\n        if (this.$parent) {\n          this.$parent.$forceUpdate(); // 拖拽渲染\n\n          this.$parent.$nextTick(function () {\n            _this.watchDrop(_this.drop);\n          });\n        } else {\n          // 拖拽渲染\n          this.watchDrop(this.drop);\n        }\n      });\n    },\n\n    /**\n     * beforeDestroy\n     * @return {[type]} [description]\n     */\n    beforeDestroy: function beforeDestroy() {\n      // 已销毁\n      this.destroy = true; // 设置成不激活\n\n      this.active = false; // 销毁拖拽事件\n\n      this.watchDrop(false);\n    },\n    computed: {\n      /**\n       * uploading 正在上传的线程\n       * @return {[type]} [description]\n       */\n\n      /**\n       * uploaded 文件列表是否全部已上传\n       * @return {[type]} [description]\n       */\n      uploaded: function uploaded() {\n        var file = void 0;\n\n        for (var i = 0; i < this.files.length; i++) {\n          file = this.files[i];\n\n          if (file.fileObject && !file.error && !file.success) {\n            return false;\n          }\n        }\n\n        return true;\n      },\n      chunkOptions: function chunkOptions() {\n        return Object.assign(CHUNK_DEFAULT_OPTIONS, this.chunk);\n      },\n      className: function className() {\n        return ['file-uploads', this.features.html5 ? 'file-uploads-html5' : 'file-uploads-html4', this.features.directory && this.directory ? 'file-uploads-directory' : undefined, this.features.drop && this.drop ? 'file-uploads-drop' : undefined, this.disabled ? 'file-uploads-disabled' : undefined];\n      }\n    },\n    watch: {\n      active: function active(_active) {\n        this.watchActive(_active);\n      },\n      dropActive: function dropActive() {\n        if (this.$parent) {\n          this.$parent.$forceUpdate();\n        }\n      },\n      drop: function drop(value) {\n        this.watchDrop(value);\n      },\n      value: function value(files) {\n        if (this.files === files) {\n          return;\n        }\n\n        this.files = files;\n        var oldMaps = this.maps; // 重写 maps 缓存\n\n        this.maps = {};\n\n        for (var i = 0; i < this.files.length; i++) {\n          var file = this.files[i];\n          this.maps[file.id] = file;\n        } // add, update\n\n\n        for (var key in this.maps) {\n          var newFile = this.maps[key];\n          var oldFile = oldMaps[key];\n\n          if (newFile !== oldFile) {\n            this.emitFile(newFile, oldFile);\n          }\n        } // delete\n\n\n        for (var _key in oldMaps) {\n          if (!this.maps[_key]) {\n            this.emitFile(undefined, oldMaps[_key]);\n          }\n        }\n      }\n    },\n    methods: {\n      // 清空\n      clear: function clear() {\n        if (this.files.length) {\n          var files = this.files;\n          this.files = []; // 定位\n\n          this.maps = {}; // 事件\n\n          this.emitInput();\n\n          for (var i = 0; i < files.length; i++) {\n            this.emitFile(undefined, files[i]);\n          }\n        }\n\n        return true;\n      },\n      // 选择\n      get: function get(id) {\n        if (!id) {\n          return false;\n        }\n\n        if ((typeof id === 'undefined' ? 'undefined' : _typeof(id)) === 'object') {\n          return this.maps[id.id] || false;\n        }\n\n        return this.maps[id] || false;\n      },\n      // 添加\n      add: function add(_files) {\n        var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.addIndex;\n        var files = _files;\n        var isArray = files instanceof Array; // 不是数组整理成数组\n\n        if (!isArray) {\n          files = [files];\n        } // 遍历规范对象\n\n\n        var addFiles = [];\n\n        for (var i = 0; i < files.length; i++) {\n          var file = files[i];\n\n          if (this.features.html5 && file instanceof Blob) {\n            file = {\n              file: file,\n              size: file.size,\n              name: file.webkitRelativePath || file.relativePath || file.name || 'unknown',\n              type: file.type\n            };\n          }\n\n          var fileObject = false;\n          if (file.fileObject === false) ;else if (file.fileObject) {\n            fileObject = true;\n          } else if (typeof Element !== 'undefined' && file.el instanceof Element) {\n            fileObject = true;\n          } else if (typeof Blob !== 'undefined' && file.file instanceof Blob) {\n            fileObject = true;\n          }\n\n          if (fileObject) {\n            file = _extends({\n              fileObject: true,\n              size: -1,\n              name: 'Filename',\n              type: '',\n              active: false,\n              error: '',\n              success: false,\n              putAction: this.putAction,\n              postAction: this.postAction,\n              timeout: this.timeout\n            }, file, {\n              response: {},\n              progress: '0.00',\n              // 只读\n              speed: 0 // 只读\n              // xhr: false,                // 只读\n              // iframe: false,             // 只读\n\n            });\n            file.data = _extends({}, this.data, file.data ? file.data : {});\n            file.headers = _extends({}, this.headers, file.headers ? file.headers : {});\n          } // 必须包含 id\n\n\n          if (!file.id) {\n            file.id = Math.random().toString(36).substr(2);\n          }\n\n          if (this.emitFilter(file, undefined)) {\n            continue;\n          } // 最大数量限制\n\n\n          if (this.maximum > 1 && addFiles.length + this.files.length >= this.maximum) {\n            break;\n          }\n\n          addFiles.push(file); // 最大数量限制\n\n          if (this.maximum === 1) {\n            break;\n          }\n        } // 没有文件\n\n\n        if (!addFiles.length) {\n          return false;\n        } // 如果是 1 清空\n\n\n        if (this.maximum === 1) {\n          this.clear();\n        } // 添加进去 files\n\n\n        var newFiles = void 0;\n\n        if (index === true || index === 0) {\n          newFiles = addFiles.concat(this.files);\n        } else if (index) {\n          var _newFiles;\n\n          newFiles = this.files.concat([]);\n\n          (_newFiles = newFiles).splice.apply(_newFiles, [index, 0].concat(addFiles));\n        } else {\n          newFiles = this.files.concat(addFiles);\n        }\n\n        this.files = newFiles; // 定位\n\n        for (var _i = 0; _i < addFiles.length; _i++) {\n          var _file2 = addFiles[_i];\n          this.maps[_file2.id] = _file2;\n        } // 事件\n\n\n        this.emitInput();\n\n        for (var _i2 = 0; _i2 < addFiles.length; _i2++) {\n          this.emitFile(addFiles[_i2], undefined);\n        }\n\n        return isArray ? addFiles : addFiles[0];\n      },\n      // 添加表单文件\n      addInputFile: function addInputFile(el) {\n        var files = [];\n\n        if (el.files) {\n          for (var i = 0; i < el.files.length; i++) {\n            var file = el.files[i];\n            files.push({\n              size: file.size,\n              name: file.webkitRelativePath || file.relativePath || file.name,\n              type: file.type,\n              file: file\n            });\n          }\n        } else {\n          var names = el.value.replace(/\\\\/g, '/').split('/');\n          delete el.__vuex__;\n          files.push({\n            name: names[names.length - 1],\n            el: el\n          });\n        }\n\n        return this.add(files);\n      },\n      // 添加 DataTransfer\n      addDataTransfer: function addDataTransfer(dataTransfer) {\n        var _this2 = this;\n\n        var files = [];\n\n        if (dataTransfer.items && dataTransfer.items.length) {\n          var items = [];\n\n          for (var i = 0; i < dataTransfer.items.length; i++) {\n            var item = dataTransfer.items[i];\n\n            if (item.getAsEntry) {\n              item = item.getAsEntry() || item.getAsFile();\n            } else if (item.webkitGetAsEntry) {\n              item = item.webkitGetAsEntry() || item.getAsFile();\n            } else {\n              item = item.getAsFile();\n            }\n\n            if (item) {\n              items.push(item);\n            }\n          }\n\n          return new Promise(function (resolve, reject) {\n            var forEach = function forEach(i) {\n              var item = items[i]; // 结束 文件数量大于 最大数量\n\n              if (!item || _this2.maximum > 0 && files.length >= _this2.maximum) {\n                return resolve(_this2.add(files));\n              }\n\n              _this2.getEntry(item).then(function (results) {\n                files.push.apply(files, _toConsumableArray(results));\n                forEach(i + 1);\n              });\n            };\n\n            forEach(0);\n          });\n        }\n\n        if (dataTransfer.files.length) {\n          for (var _i3 = 0; _i3 < dataTransfer.files.length; _i3++) {\n            files.push(dataTransfer.files[_i3]);\n\n            if (this.maximum > 0 && files.length >= this.maximum) {\n              break;\n            }\n          }\n\n          return Promise.resolve(this.add(files));\n        }\n\n        return Promise.resolve([]);\n      },\n      // 获得 entry\n      getEntry: function getEntry(entry) {\n        var _this3 = this;\n\n        var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        return new Promise(function (resolve, reject) {\n          if (entry.isFile) {\n            entry.file(function (file) {\n              resolve([{\n                size: file.size,\n                name: path + file.name,\n                type: file.type,\n                file: file\n              }]);\n            });\n          } else if (entry.isDirectory && _this3.dropDirectory) {\n            var files = [];\n            var dirReader = entry.createReader();\n\n            var readEntries = function readEntries() {\n              dirReader.readEntries(function (entries) {\n                var forEach = function forEach(i) {\n                  if (!entries[i] && i === 0 || _this3.maximum > 0 && files.length >= _this3.maximum) {\n                    return resolve(files);\n                  }\n\n                  if (!entries[i]) {\n                    return readEntries();\n                  }\n\n                  _this3.getEntry(entries[i], path + entry.name + '/').then(function (results) {\n                    files.push.apply(files, _toConsumableArray(results));\n                    forEach(i + 1);\n                  });\n                };\n\n                forEach(0);\n              });\n            };\n\n            readEntries();\n          } else {\n            resolve([]);\n          }\n        });\n      },\n      replace: function replace(id1, id2) {\n        var file1 = this.get(id1);\n        var file2 = this.get(id2);\n\n        if (!file1 || !file2 || file1 === file2) {\n          return false;\n        }\n\n        var files = this.files.concat([]);\n        var index1 = files.indexOf(file1);\n        var index2 = files.indexOf(file2);\n\n        if (index1 === -1 || index2 === -1) {\n          return false;\n        }\n\n        files[index1] = file2;\n        files[index2] = file1;\n        this.files = files;\n        this.emitInput();\n        return true;\n      },\n      // 移除\n      remove: function remove(id) {\n        var file = this.get(id);\n\n        if (file) {\n          if (this.emitFilter(undefined, file)) {\n            return false;\n          }\n\n          var files = this.files.concat([]);\n          var index = files.indexOf(file);\n\n          if (index === -1) {\n            console.error('remove', file);\n            return false;\n          }\n\n          files.splice(index, 1);\n          this.files = files; // 定位\n\n          delete this.maps[file.id]; // 事件\n\n          this.emitInput();\n          this.emitFile(undefined, file);\n        }\n\n        return file;\n      },\n      // 更新\n      update: function update(id, data) {\n        var file = this.get(id);\n\n        if (file) {\n          var newFile = _extends({}, file, data); // 停用必须加上错误\n\n\n          if (file.fileObject && file.active && !newFile.active && !newFile.error && !newFile.success) {\n            newFile.error = 'abort';\n          }\n\n          if (this.emitFilter(newFile, file)) {\n            return false;\n          }\n\n          var files = this.files.concat([]);\n          var index = files.indexOf(file);\n\n          if (index === -1) {\n            console.error('update', file);\n            return false;\n          }\n\n          files.splice(index, 1, newFile);\n          this.files = files; // 删除  旧定位 写入 新定位 （已便支持修改id)\n\n          delete this.maps[file.id];\n          this.maps[newFile.id] = newFile; // 事件\n\n          this.emitInput();\n          this.emitFile(newFile, file);\n          return newFile;\n        }\n\n        return false;\n      },\n      // 预处理 事件 过滤器\n      emitFilter: function emitFilter(newFile, oldFile) {\n        var isPrevent = false;\n        this.$emit('input-filter', newFile, oldFile, function () {\n          isPrevent = true;\n          return isPrevent;\n        });\n        return isPrevent;\n      },\n      // 处理后 事件 分发\n      emitFile: function emitFile(newFile, oldFile) {\n        this.$emit('input-file', newFile, oldFile);\n\n        if (newFile && newFile.fileObject && newFile.active && (!oldFile || !oldFile.active)) {\n          this.uploading++; // 激活\n\n          this.$nextTick(function () {\n            var _this4 = this;\n\n            setTimeout(function () {\n              _this4.upload(newFile).then(function () {\n                // eslint-disable-next-line\n                newFile = _this4.get(newFile);\n\n                if (newFile && newFile.fileObject) {\n                  _this4.update(newFile, {\n                    active: false,\n                    success: !newFile.error\n                  });\n                }\n              }).catch(function (e) {\n                _this4.update(newFile, {\n                  active: false,\n                  success: false,\n                  error: e.code || e.error || e.message || e\n                });\n              });\n            }, parseInt(Math.random() * 50 + 50, 10));\n          });\n        } else if ((!newFile || !newFile.fileObject || !newFile.active) && oldFile && oldFile.fileObject && oldFile.active) {\n          // 停止\n          this.uploading--;\n        } // 自动延续激活\n\n\n        if (this.active && (Boolean(newFile) !== Boolean(oldFile) || newFile.active !== oldFile.active)) {\n          this.watchActive(true);\n        }\n      },\n      emitInput: function emitInput() {\n        this.$emit('input', this.files);\n      },\n      // 上传\n      upload: function upload(id) {\n        var file = this.get(id); // 被删除\n\n        if (!file) {\n          return Promise.reject('not_exists');\n        } // 不是文件对象\n\n\n        if (!file.fileObject) {\n          return Promise.reject('file_object');\n        } // 有错误直接响应\n\n\n        if (file.error) {\n          return Promise.reject(file.error);\n        } // 已完成直接响应\n\n\n        if (file.success) {\n          return Promise.resolve(file);\n        } // 后缀\n\n\n        var extensions = this.extensions;\n\n        if (extensions && (extensions.length || typeof extensions.length === 'undefined')) {\n          if ((typeof extensions === 'undefined' ? 'undefined' : _typeof(extensions)) !== 'object' || !(extensions instanceof RegExp)) {\n            if (typeof extensions === 'string') {\n              extensions = extensions.split(',').map(function (value) {\n                return value.trim();\n              }).filter(function (value) {\n                return value;\n              });\n            }\n\n            extensions = new RegExp('\\\\.(' + extensions.join('|').replace(/\\./g, '\\\\.') + ')$', 'i');\n          }\n\n          if (file.name.search(extensions) === -1) {\n            return Promise.reject('extension');\n          }\n        } // 大小\n\n\n        if (this.size > 0 && file.size >= 0 && file.size > this.size) {\n          return Promise.reject('size');\n        }\n\n        if (this.customAction) {\n          return this.customAction(file, this);\n        }\n\n        if (this.features.html5) {\n          if (this.shouldUseChunkUpload(file)) {\n            return this.uploadChunk(file);\n          }\n\n          if (file.putAction) {\n            return this.uploadPut(file);\n          }\n\n          if (file.postAction) {\n            return this.uploadHtml5(file);\n          }\n        }\n\n        if (file.postAction) {\n          return this.uploadHtml4(file);\n        }\n\n        return Promise.reject('No action configured');\n      },\n\n      /**\n       * Whether this file should be uploaded using chunk upload or not\n       *\n       * @param Object file\n       */\n      shouldUseChunkUpload: function shouldUseChunkUpload(file) {\n        return this.chunkEnabled && !!this.chunkOptions.handler && file.size > this.chunkOptions.minSize;\n      },\n\n      /**\n       * Upload a file using Chunk method\n       *\n       * @param File file\n       */\n      uploadChunk: function uploadChunk(file) {\n        var HandlerClass = this.chunkOptions.handler;\n        file.chunk = new HandlerClass(file, this.chunkOptions);\n        return file.chunk.upload();\n      },\n      uploadPut: function uploadPut(file) {\n        var querys = [];\n        var value = void 0;\n\n        for (var key in file.data) {\n          value = file.data[key];\n\n          if (value !== null && value !== undefined) {\n            querys.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n          }\n        }\n\n        var queryString = querys.length ? (file.putAction.indexOf('?') === -1 ? '?' : '&') + querys.join('&') : '';\n        var xhr = new XMLHttpRequest();\n        xhr.open('PUT', file.putAction + queryString);\n        return this.uploadXhr(xhr, file, file.file);\n      },\n      uploadHtml5: function uploadHtml5(file) {\n        var form = new window.FormData();\n        var value = void 0;\n\n        for (var key in file.data) {\n          value = file.data[key];\n\n          if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && typeof value.toString !== 'function') {\n            if (value instanceof File) {\n              form.append(key, value, value.name);\n            } else {\n              form.append(key, JSON.stringify(value));\n            }\n          } else if (value !== null && value !== undefined) {\n            form.append(key, value);\n          }\n        }\n\n        form.append(this.name, file.file, file.file.filename || file.name);\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', file.postAction);\n        return this.uploadXhr(xhr, file, form);\n      },\n      uploadXhr: function uploadXhr(xhr, _file, body) {\n        var _this5 = this;\n\n        var file = _file;\n        var speedTime = 0;\n        var speedLoaded = 0; // 进度条\n\n        xhr.upload.onprogress = function (e) {\n          // 还未开始上传 已删除 未激活\n          file = _this5.get(file);\n\n          if (!e.lengthComputable || !file || !file.fileObject || !file.active) {\n            return;\n          } // 进度 速度 每秒更新一次\n\n\n          var speedTime2 = Math.round(Date.now() / 1000);\n\n          if (speedTime2 === speedTime) {\n            return;\n          }\n\n          speedTime = speedTime2;\n          file = _this5.update(file, {\n            progress: (e.loaded / e.total * 100).toFixed(2),\n            speed: e.loaded - speedLoaded\n          });\n          speedLoaded = e.loaded;\n        }; // 检查激活状态\n\n\n        var interval = setInterval(function () {\n          file = _this5.get(file);\n\n          if (file && file.fileObject && !file.success && !file.error && file.active) {\n            return;\n          }\n\n          if (interval) {\n            clearInterval(interval);\n            interval = false;\n          }\n\n          try {\n            xhr.abort();\n            xhr.timeout = 1;\n          } catch (e) {}\n        }, 100);\n        return new Promise(function (resolve, reject) {\n          var complete = void 0;\n\n          var fn = function fn(e) {\n            // 已经处理过了\n            if (complete) {\n              return;\n            }\n\n            complete = true;\n\n            if (interval) {\n              clearInterval(interval);\n              interval = false;\n            }\n\n            file = _this5.get(file); // 不存在直接响应\n\n            if (!file) {\n              return reject('not_exists');\n            } // 不是文件对象\n\n\n            if (!file.fileObject) {\n              return reject('file_object');\n            } // 有错误自动响应\n\n\n            if (file.error) {\n              return reject(file.error);\n            } // 未激活\n\n\n            if (!file.active) {\n              return reject('abort');\n            } // 已完成 直接相应\n\n\n            if (file.success) {\n              return resolve(file);\n            }\n\n            var data = {};\n\n            switch (e.type) {\n              case 'timeout':\n              case 'abort':\n                data.error = e.type;\n                break;\n\n              case 'error':\n                if (!xhr.status) {\n                  data.error = 'network';\n                } else if (xhr.status >= 500) {\n                  data.error = 'server';\n                } else if (xhr.status >= 400) {\n                  data.error = 'denied';\n                }\n\n                break;\n\n              default:\n                if (xhr.status >= 500) {\n                  data.error = 'server';\n                } else if (xhr.status >= 400) {\n                  data.error = 'denied';\n                } else {\n                  data.progress = '100.00';\n                }\n\n            }\n\n            if (xhr.responseText) {\n              var contentType = xhr.getResponseHeader('Content-Type');\n\n              if (contentType && contentType.indexOf('/json') !== -1) {\n                data.response = JSON.parse(xhr.responseText);\n              } else {\n                data.response = xhr.responseText;\n              }\n            } // 更新\n\n\n            file = _this5.update(file, data); // 相应错误\n\n            if (file.error) {\n              return reject(file.error);\n            } // 响应\n\n\n            return resolve(file);\n          }; // 事件\n\n\n          xhr.onload = fn;\n          xhr.onerror = fn;\n          xhr.onabort = fn;\n          xhr.ontimeout = fn; // 超时\n\n          if (file.timeout) {\n            xhr.timeout = file.timeout;\n          } // headers\n\n\n          for (var key in file.headers) {\n            xhr.setRequestHeader(key, file.headers[key]);\n          } // 更新 xhr\n\n\n          file = _this5.update(file, {\n            xhr: xhr\n          }); // 开始上传\n\n          xhr.send(body);\n        });\n      },\n      uploadHtml4: function uploadHtml4(_file) {\n        var _this6 = this;\n\n        var file = _file;\n\n        var onKeydown = function onKeydown(e) {\n          if (e.keyCode === 27) {\n            e.preventDefault();\n          }\n        };\n\n        var iframe = document.createElement('iframe');\n        iframe.id = 'upload-iframe-' + file.id;\n        iframe.name = 'upload-iframe-' + file.id;\n        iframe.src = 'about:blank';\n        iframe.setAttribute('style', 'width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;');\n        var form = document.createElement('form');\n        form.action = file.postAction;\n        form.name = 'upload-form-' + file.id;\n        form.setAttribute('method', 'POST');\n        form.setAttribute('target', 'upload-iframe-' + file.id);\n        form.setAttribute('enctype', 'multipart/form-data');\n        var value = void 0;\n        var input = void 0;\n\n        for (var key in file.data) {\n          value = file.data[key];\n\n          if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && typeof value.toString !== 'function') {\n            value = JSON.stringify(value);\n          }\n\n          if (value !== null && value !== undefined) {\n            input = document.createElement('input');\n            input.type = 'hidden';\n            input.name = key;\n            input.value = value;\n            form.appendChild(input);\n          }\n        }\n\n        form.appendChild(file.el);\n        document.body.appendChild(iframe).appendChild(form);\n\n        var getResponseData = function getResponseData() {\n          var doc = void 0;\n\n          try {\n            if (iframe.contentWindow) {\n              doc = iframe.contentWindow.document;\n            }\n          } catch (err) {}\n\n          if (!doc) {\n            try {\n              doc = iframe.contentDocument ? iframe.contentDocument : iframe.document;\n            } catch (err) {\n              doc = iframe.document;\n            }\n          }\n\n          if (doc && doc.body) {\n            return doc.body.innerHTML;\n          }\n\n          return null;\n        };\n\n        return new Promise(function (resolve, reject) {\n          setTimeout(function () {\n            file = _this6.update(file, {\n              iframe: iframe\n            }); // 不存在\n\n            if (!file) {\n              return reject('not_exists');\n            } // 定时检查\n\n\n            var interval = setInterval(function () {\n              file = _this6.get(file);\n\n              if (file && file.fileObject && !file.success && !file.error && file.active) {\n                return;\n              }\n\n              if (interval) {\n                clearInterval(interval);\n                interval = false;\n              }\n\n              iframe.onabort({\n                type: file ? 'abort' : 'not_exists'\n              });\n            }, 100);\n            var complete = void 0;\n\n            var fn = function fn(e) {\n              // 已经处理过了\n              if (complete) {\n                return;\n              }\n\n              complete = true;\n\n              if (interval) {\n                clearInterval(interval);\n                interval = false;\n              } // 关闭 esc 事件\n\n\n              document.body.removeEventListener('keydown', onKeydown);\n              file = _this6.get(file); // 不存在直接响应\n\n              if (!file) {\n                return reject('not_exists');\n              } // 不是文件对象\n\n\n              if (!file.fileObject) {\n                return reject('file_object');\n              } // 有错误自动响应\n\n\n              if (file.error) {\n                return reject(file.error);\n              } // 未激活\n\n\n              if (!file.active) {\n                return reject('abort');\n              } // 已完成 直接相应\n\n\n              if (file.success) {\n                return resolve(file);\n              }\n\n              var response = getResponseData();\n              var data = {};\n\n              switch (e.type) {\n                case 'abort':\n                  data.error = 'abort';\n                  break;\n\n                case 'error':\n                  if (file.error) {\n                    data.error = file.error;\n                  } else if (response === null) {\n                    data.error = 'network';\n                  } else {\n                    data.error = 'denied';\n                  }\n\n                  break;\n\n                default:\n                  if (file.error) {\n                    data.error = file.error;\n                  } else if (data === null) {\n                    data.error = 'network';\n                  } else {\n                    data.progress = '100.00';\n                  }\n\n              }\n\n              if (response !== null) {\n                if (response && response.substr(0, 1) === '{' && response.substr(response.length - 1, 1) === '}') {\n                  try {\n                    response = JSON.parse(response);\n                  } catch (err) {}\n                }\n\n                data.response = response;\n              } // 更新\n\n\n              file = _this6.update(file, data);\n\n              if (file.error) {\n                return reject(file.error);\n              } // 响应\n\n\n              return resolve(file);\n            }; // 添加事件\n\n\n            iframe.onload = fn;\n            iframe.onerror = fn;\n            iframe.onabort = fn; // 禁止 esc 键\n\n            document.body.addEventListener('keydown', onKeydown); // 提交\n\n            form.submit();\n          }, 50);\n        }).then(function (res) {\n          iframe.parentNode && iframe.parentNode.removeChild(iframe);\n          return res;\n        }).catch(function (res) {\n          iframe.parentNode && iframe.parentNode.removeChild(iframe);\n          return res;\n        });\n      },\n      watchActive: function watchActive(active) {\n        var file = void 0;\n        var index = 0;\n\n        while (file = this.files[index]) {\n          index++;\n          if (!file.fileObject) ;else if (active && !this.destroy) {\n            if (this.uploading >= this.thread || this.uploading && !this.features.html5) {\n              break;\n            }\n\n            if (!file.active && !file.error && !file.success) {\n              this.update(file, {\n                active: true\n              });\n            }\n          } else {\n            if (file.active) {\n              this.update(file, {\n                active: false\n              });\n            }\n          }\n        }\n\n        if (this.uploading === 0) {\n          this.active = false;\n        }\n      },\n      watchDrop: function watchDrop(_el) {\n        var el = _el;\n\n        if (!this.features.drop) {\n          return;\n        } // 移除挂载\n\n\n        if (this.dropElement) {\n          try {\n            document.removeEventListener('dragenter', this.onDragenter, false);\n            document.removeEventListener('dragleave', this.onDragleave, false);\n            document.removeEventListener('drop', this.onDocumentDrop, false);\n            this.dropElement.removeEventListener('dragover', this.onDragover, false);\n            this.dropElement.removeEventListener('drop', this.onDrop, false);\n          } catch (e) {}\n        }\n\n        if (!el) {\n          el = false;\n        } else if (typeof el === 'string') {\n          el = document.querySelector(el) || this.$root.$el.querySelector(el);\n        } else if (el === true) {\n          el = this.$parent.$el;\n        }\n\n        this.dropElement = el;\n\n        if (this.dropElement) {\n          document.addEventListener('dragenter', this.onDragenter, false);\n          document.addEventListener('dragleave', this.onDragleave, false);\n          document.addEventListener('drop', this.onDocumentDrop, false);\n          this.dropElement.addEventListener('dragover', this.onDragover, false);\n          this.dropElement.addEventListener('drop', this.onDrop, false);\n        }\n      },\n      onDragenter: function onDragenter(e) {\n        e.preventDefault();\n\n        if (this.dropActive) {\n          return;\n        }\n\n        if (!e.dataTransfer) {\n          return;\n        }\n\n        var dt = e.dataTransfer;\n\n        if (dt.files && dt.files.length) {\n          this.dropActive = true;\n        } else if (!dt.types) {\n          this.dropActive = true;\n        } else if (dt.types.indexOf && dt.types.indexOf('Files') !== -1) {\n          this.dropActive = true;\n        } else if (dt.types.contains && dt.types.contains('Files')) {\n          this.dropActive = true;\n        }\n      },\n      onDragleave: function onDragleave(e) {\n        e.preventDefault();\n\n        if (!this.dropActive) {\n          return;\n        }\n\n        if (e.target.nodeName === 'HTML' || e.target === e.explicitOriginalTarget || !e.fromElement && (e.clientX <= 0 || e.clientY <= 0 || e.clientX >= window.innerWidth || e.clientY >= window.innerHeight)) {\n          this.dropActive = false;\n        }\n      },\n      onDragover: function onDragover(e) {\n        e.preventDefault();\n      },\n      onDocumentDrop: function onDocumentDrop() {\n        this.dropActive = false;\n      },\n      onDrop: function onDrop(e) {\n        e.preventDefault();\n        this.addDataTransfer(e.dataTransfer);\n      }\n    }\n  };\n  var isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\n\n  function createInjector(context) {\n    return function (id, style) {\n      return addStyle(id, style);\n    };\n  }\n\n  var HEAD = document.head || document.getElementsByTagName('head')[0];\n  var styles = {};\n\n  function addStyle(id, css) {\n    var group = isOldIE ? css.media || 'default' : id;\n    var style = styles[group] || (styles[group] = {\n      ids: new Set(),\n      styles: []\n    });\n\n    if (!style.ids.has(id)) {\n      style.ids.add(id);\n      var code = css.source;\n\n      if (css.map) {\n        // https://developer.chrome.com/devtools/docs/javascript-debugging\n        // this makes source maps inside style tags work properly in Chrome\n        code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'; // http://stackoverflow.com/a/26603875\n\n        code += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + ' */';\n      }\n\n      if (!style.element) {\n        style.element = document.createElement('style');\n        style.element.type = 'text/css';\n        if (css.media) style.element.setAttribute('media', css.media);\n        HEAD.appendChild(style.element);\n      }\n\n      if ('styleSheet' in style.element) {\n        style.styles.push(code);\n        style.element.styleSheet.cssText = style.styles.filter(Boolean).join('\\n');\n      } else {\n        var index = style.ids.size - 1;\n        var textNode = document.createTextNode(code);\n        var nodes = style.element.childNodes;\n        if (nodes[index]) style.element.removeChild(nodes[index]);\n        if (nodes.length) style.element.insertBefore(textNode, nodes[index]);else style.element.appendChild(textNode);\n      }\n    }\n  }\n\n  var browser = createInjector;\n  /* script */\n\n  var __vue_script__$1 = script$1;\n  /* template */\n\n  var __vue_render__$1 = function __vue_render__() {\n    var _vm = this;\n\n    var _h = _vm.$createElement;\n\n    var _c = _vm._self._c || _h;\n\n    return _c('span', {\n      class: _vm.className\n    }, [_vm._t(\"default\"), _vm._v(\" \"), _c('label', {\n      attrs: {\n        \"for\": _vm.inputId || _vm.name\n      }\n    }), _vm._v(\" \"), _c('input-file')], 2);\n  };\n\n  var __vue_staticRenderFns__$1 = [];\n  /* style */\n\n  var __vue_inject_styles__$1 = function __vue_inject_styles__(inject) {\n    if (!inject) return;\n    inject(\"data-v-76d380b6_0\", {\n      source: \".file-uploads{overflow:hidden;position:relative;text-align:center;display:inline-block}.file-uploads.file-uploads-html4 input,.file-uploads.file-uploads-html5 label{background:#fff;opacity:0;font-size:20em;z-index:1;top:0;left:0;right:0;bottom:0;position:absolute;width:100%;height:100%}.file-uploads.file-uploads-html4 label,.file-uploads.file-uploads-html5 input{background:rgba(255,255,255,0);overflow:hidden;position:fixed;width:1px;height:1px;z-index:-1;opacity:0}\",\n      map: undefined,\n      media: undefined\n    });\n  };\n  /* scoped */\n\n\n  var __vue_scope_id__$1 = undefined;\n  /* module identifier */\n\n  var __vue_module_identifier__$1 = undefined;\n  /* functional template */\n\n  var __vue_is_functional_template__$1 = false;\n  /* style inject SSR */\n\n  var FileUpload = normalizeComponent_1({\n    render: __vue_render__$1,\n    staticRenderFns: __vue_staticRenderFns__$1\n  }, __vue_inject_styles__$1, __vue_script__$1, __vue_scope_id__$1, __vue_is_functional_template__$1, __vue_module_identifier__$1, browser, undefined);\n  var FileUpload$1 = /*#__PURE__*/Object.freeze({\n    default: FileUpload\n  });\n\n  function getCjsExportFromNamespace(n) {\n    return n && n['default'] || n;\n  }\n\n  var require$$0 = getCjsExportFromNamespace(FileUpload$1);\n  var src = require$$0;\n  return src;\n});","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n(function (global, factory) {\n  (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === \"object\" && typeof module !== \"undefined\" ? factory(exports) : typeof define === \"function\" && define.amd ? define([\"exports\"], factory) : factory(global.ActiveStorage = {});\n})(this, function (exports) {\n  \"use strict\";\n\n  function createCommonjsModule(fn, module) {\n    return module = {\n      exports: {}\n    }, fn(module, module.exports), module.exports;\n  }\n\n  var sparkMd5 = createCommonjsModule(function (module, exports) {\n    (function (factory) {\n      {\n        module.exports = factory();\n      }\n    })(function (undefined) {\n      var hex_chr = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\n\n      function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n      }\n\n      function md5blk(s) {\n        var md5blks = [],\n            i;\n\n        for (i = 0; i < 64; i += 4) {\n          md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n\n        return md5blks;\n      }\n\n      function md5blk_array(a) {\n        var md5blks = [],\n            i;\n\n        for (i = 0; i < 64; i += 4) {\n          md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n\n        return md5blks;\n      }\n\n      function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n          md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3);\n        }\n\n        tail[i >> 2] |= 128 << (i % 4 << 3);\n\n        if (i > 55) {\n          md5cycle(state, tail);\n\n          for (i = 0; i < 16; i += 1) {\n            tail[i] = 0;\n          }\n        }\n\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(state, tail);\n        return state;\n      }\n\n      function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n          md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        a = i - 64 < n ? a.subarray(i - 64) : new Uint8Array(0);\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= a[i] << (i % 4 << 3);\n        }\n\n        tail[i >> 2] |= 128 << (i % 4 << 3);\n\n        if (i > 55) {\n          md5cycle(state, tail);\n\n          for (i = 0; i < 16; i += 1) {\n            tail[i] = 0;\n          }\n        }\n\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(state, tail);\n        return state;\n      }\n\n      function rhex(n) {\n        var s = \"\",\n            j;\n\n        for (j = 0; j < 4; j += 1) {\n          s += hex_chr[n >> j * 8 + 4 & 15] + hex_chr[n >> j * 8 & 15];\n        }\n\n        return s;\n      }\n\n      function hex(x) {\n        var i;\n\n        for (i = 0; i < x.length; i += 1) {\n          x[i] = rhex(x[i]);\n        }\n\n        return x.join(\"\");\n      }\n\n      if (hex(md51(\"hello\")) !== \"5d41402abc4b2a76b9719d911017c592\") ;\n\n      if (typeof ArrayBuffer !== \"undefined\" && !ArrayBuffer.prototype.slice) {\n        (function () {\n          function clamp(val, length) {\n            val = val | 0 || 0;\n\n            if (val < 0) {\n              return Math.max(val + length, 0);\n            }\n\n            return Math.min(val, length);\n          }\n\n          ArrayBuffer.prototype.slice = function (from, to) {\n            var length = this.byteLength,\n                begin = clamp(from, length),\n                end = length,\n                num,\n                target,\n                targetArray,\n                sourceArray;\n\n            if (to !== undefined) {\n              end = clamp(to, length);\n            }\n\n            if (begin > end) {\n              return new ArrayBuffer(0);\n            }\n\n            num = end - begin;\n            target = new ArrayBuffer(num);\n            targetArray = new Uint8Array(target);\n            sourceArray = new Uint8Array(this, begin, num);\n            targetArray.set(sourceArray);\n            return target;\n          };\n        })();\n      }\n\n      function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n          str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n      }\n\n      function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n            buff = new ArrayBuffer(length),\n            arr = new Uint8Array(buff),\n            i;\n\n        for (i = 0; i < length; i += 1) {\n          arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n      }\n\n      function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n      }\n\n      function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n        return returnUInt8Array ? result : result.buffer;\n      }\n\n      function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n          bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n      }\n\n      function SparkMD5() {\n        this.reset();\n      }\n\n      SparkMD5.prototype.append = function (str) {\n        this.appendBinary(toUtf8(str));\n        return this;\n      };\n\n      SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n          md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n        return this;\n      };\n\n      SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= buff.charCodeAt(i) << (i % 4 << 3);\n        }\n\n        this._finish(tail, length);\n\n        ret = hex(this._hash);\n\n        if (raw) {\n          ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n        return ret;\n      };\n\n      SparkMD5.prototype.reset = function () {\n        this._buff = \"\";\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n        return this;\n      };\n\n      SparkMD5.prototype.getState = function () {\n        return {\n          buff: this._buff,\n          length: this._length,\n          hash: this._hash\n        };\n      };\n\n      SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n        return this;\n      };\n\n      SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n      };\n\n      SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n        tail[i >> 2] |= 128 << (i % 4 << 3);\n\n        if (i > 55) {\n          md5cycle(this._hash, tail);\n\n          for (i = 0; i < 16; i += 1) {\n            tail[i] = 0;\n          }\n        }\n\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n      };\n\n      SparkMD5.hash = function (str, raw) {\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n      };\n\n      SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n        return raw ? hexToBinaryString(ret) : ret;\n      };\n\n      SparkMD5.ArrayBuffer = function () {\n        this.reset();\n      };\n\n      SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n          md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = i - 64 < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n        return this;\n      };\n\n      SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= buff[i] << (i % 4 << 3);\n        }\n\n        this._finish(tail, length);\n\n        ret = hex(this._hash);\n\n        if (raw) {\n          ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n        return ret;\n      };\n\n      SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n        return this;\n      };\n\n      SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n        return state;\n      };\n\n      SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n        return SparkMD5.prototype.setState.call(this, state);\n      };\n\n      SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n      SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n      SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n        return raw ? hexToBinaryString(ret) : ret;\n      };\n\n      return SparkMD5;\n    });\n  });\n\n  var classCallCheck = function classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n\n  var createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var fileSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice;\n\n  var FileChecksum = function () {\n    createClass(FileChecksum, null, [{\n      key: \"create\",\n      value: function create(file, callback) {\n        var instance = new FileChecksum(file);\n        instance.create(callback);\n      }\n    }]);\n\n    function FileChecksum(file) {\n      classCallCheck(this, FileChecksum);\n      this.file = file;\n      this.chunkSize = 2097152;\n      this.chunkCount = Math.ceil(this.file.size / this.chunkSize);\n      this.chunkIndex = 0;\n    }\n\n    createClass(FileChecksum, [{\n      key: \"create\",\n      value: function create(callback) {\n        var _this = this;\n\n        this.callback = callback;\n        this.md5Buffer = new sparkMd5.ArrayBuffer();\n        this.fileReader = new FileReader();\n        this.fileReader.addEventListener(\"load\", function (event) {\n          return _this.fileReaderDidLoad(event);\n        });\n        this.fileReader.addEventListener(\"error\", function (event) {\n          return _this.fileReaderDidError(event);\n        });\n        this.readNextChunk();\n      }\n    }, {\n      key: \"fileReaderDidLoad\",\n      value: function fileReaderDidLoad(event) {\n        this.md5Buffer.append(event.target.result);\n\n        if (!this.readNextChunk()) {\n          var binaryDigest = this.md5Buffer.end(true);\n          var base64digest = btoa(binaryDigest);\n          this.callback(null, base64digest);\n        }\n      }\n    }, {\n      key: \"fileReaderDidError\",\n      value: function fileReaderDidError(event) {\n        this.callback(\"Error reading \" + this.file.name);\n      }\n    }, {\n      key: \"readNextChunk\",\n      value: function readNextChunk() {\n        if (this.chunkIndex < this.chunkCount || this.chunkIndex == 0 && this.chunkCount == 0) {\n          var start = this.chunkIndex * this.chunkSize;\n          var end = Math.min(start + this.chunkSize, this.file.size);\n          var bytes = fileSlice.call(this.file, start, end);\n          this.fileReader.readAsArrayBuffer(bytes);\n          this.chunkIndex++;\n          return true;\n        } else {\n          return false;\n        }\n      }\n    }]);\n    return FileChecksum;\n  }();\n\n  function getMetaValue(name) {\n    var element = findElement(document.head, 'meta[name=\"' + name + '\"]');\n\n    if (element) {\n      return element.getAttribute(\"content\");\n    }\n  }\n\n  function findElements(root, selector) {\n    if (typeof root == \"string\") {\n      selector = root;\n      root = document;\n    }\n\n    var elements = root.querySelectorAll(selector);\n    return toArray$1(elements);\n  }\n\n  function findElement(root, selector) {\n    if (typeof root == \"string\") {\n      selector = root;\n      root = document;\n    }\n\n    return root.querySelector(selector);\n  }\n\n  function dispatchEvent(element, type) {\n    var eventInit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var disabled = element.disabled;\n    var bubbles = eventInit.bubbles,\n        cancelable = eventInit.cancelable,\n        detail = eventInit.detail;\n    var event = document.createEvent(\"Event\");\n    event.initEvent(type, bubbles || true, cancelable || true);\n    event.detail = detail || {};\n\n    try {\n      element.disabled = false;\n      element.dispatchEvent(event);\n    } finally {\n      element.disabled = disabled;\n    }\n\n    return event;\n  }\n\n  function toArray$1(value) {\n    if (Array.isArray(value)) {\n      return value;\n    } else if (Array.from) {\n      return Array.from(value);\n    } else {\n      return [].slice.call(value);\n    }\n  }\n\n  var BlobRecord = function () {\n    function BlobRecord(file, checksum, url) {\n      var _this = this;\n\n      classCallCheck(this, BlobRecord);\n      this.file = file;\n      this.attributes = {\n        filename: file.name,\n        content_type: file.type,\n        byte_size: file.size,\n        checksum: checksum\n      };\n      this.xhr = new XMLHttpRequest();\n      this.xhr.open(\"POST\", url, true);\n      this.xhr.responseType = \"json\";\n      this.xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n      this.xhr.setRequestHeader(\"Accept\", \"application/json\");\n      this.xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n      this.xhr.setRequestHeader(\"X-CSRF-Token\", getMetaValue(\"csrf-token\"));\n      this.xhr.addEventListener(\"load\", function (event) {\n        return _this.requestDidLoad(event);\n      });\n      this.xhr.addEventListener(\"error\", function (event) {\n        return _this.requestDidError(event);\n      });\n    }\n\n    createClass(BlobRecord, [{\n      key: \"create\",\n      value: function create(callback) {\n        this.callback = callback;\n        this.xhr.send(JSON.stringify({\n          blob: this.attributes\n        }));\n      }\n    }, {\n      key: \"requestDidLoad\",\n      value: function requestDidLoad(event) {\n        if (this.status >= 200 && this.status < 300) {\n          var response = this.response;\n          var direct_upload = response.direct_upload;\n          delete response.direct_upload;\n          this.attributes = response;\n          this.directUploadData = direct_upload;\n          this.callback(null, this.toJSON());\n        } else {\n          this.requestDidError(event);\n        }\n      }\n    }, {\n      key: \"requestDidError\",\n      value: function requestDidError(event) {\n        this.callback('Error creating Blob for \"' + this.file.name + '\". Status: ' + this.status);\n      }\n    }, {\n      key: \"toJSON\",\n      value: function toJSON() {\n        var result = {};\n\n        for (var key in this.attributes) {\n          result[key] = this.attributes[key];\n        }\n\n        return result;\n      }\n    }, {\n      key: \"status\",\n      get: function get$$1() {\n        return this.xhr.status;\n      }\n    }, {\n      key: \"response\",\n      get: function get$$1() {\n        var _xhr = this.xhr,\n            responseType = _xhr.responseType,\n            response = _xhr.response;\n\n        if (responseType == \"json\") {\n          return response;\n        } else {\n          return JSON.parse(response);\n        }\n      }\n    }]);\n    return BlobRecord;\n  }();\n\n  var BlobUpload = function () {\n    function BlobUpload(blob) {\n      var _this = this;\n\n      classCallCheck(this, BlobUpload);\n      this.blob = blob;\n      this.file = blob.file;\n      var _blob$directUploadDat = blob.directUploadData,\n          url = _blob$directUploadDat.url,\n          headers = _blob$directUploadDat.headers;\n      this.xhr = new XMLHttpRequest();\n      this.xhr.open(\"PUT\", url, true);\n      this.xhr.responseType = \"text\";\n\n      for (var key in headers) {\n        this.xhr.setRequestHeader(key, headers[key]);\n      }\n\n      this.xhr.addEventListener(\"load\", function (event) {\n        return _this.requestDidLoad(event);\n      });\n      this.xhr.addEventListener(\"error\", function (event) {\n        return _this.requestDidError(event);\n      });\n    }\n\n    createClass(BlobUpload, [{\n      key: \"create\",\n      value: function create(callback) {\n        this.callback = callback;\n        this.xhr.send(this.file.slice());\n      }\n    }, {\n      key: \"requestDidLoad\",\n      value: function requestDidLoad(event) {\n        var _xhr = this.xhr,\n            status = _xhr.status,\n            response = _xhr.response;\n\n        if (status >= 200 && status < 300) {\n          this.callback(null, response);\n        } else {\n          this.requestDidError(event);\n        }\n      }\n    }, {\n      key: \"requestDidError\",\n      value: function requestDidError(event) {\n        this.callback('Error storing \"' + this.file.name + '\". Status: ' + this.xhr.status);\n      }\n    }]);\n    return BlobUpload;\n  }();\n\n  var id = 0;\n\n  var DirectUpload = function () {\n    function DirectUpload(file, url, delegate) {\n      classCallCheck(this, DirectUpload);\n      this.id = ++id;\n      this.file = file;\n      this.url = url;\n      this.delegate = delegate;\n    }\n\n    createClass(DirectUpload, [{\n      key: \"create\",\n      value: function create(callback) {\n        var _this = this;\n\n        FileChecksum.create(this.file, function (error, checksum) {\n          if (error) {\n            callback(error);\n            return;\n          }\n\n          var blob = new BlobRecord(_this.file, checksum, _this.url);\n          notify(_this.delegate, \"directUploadWillCreateBlobWithXHR\", blob.xhr);\n          blob.create(function (error) {\n            if (error) {\n              callback(error);\n            } else {\n              var upload = new BlobUpload(blob);\n              notify(_this.delegate, \"directUploadWillStoreFileWithXHR\", upload.xhr);\n              upload.create(function (error) {\n                if (error) {\n                  callback(error);\n                } else {\n                  callback(null, blob.toJSON());\n                }\n              });\n            }\n          });\n        });\n      }\n    }]);\n    return DirectUpload;\n  }();\n\n  function notify(object, methodName) {\n    if (object && typeof object[methodName] == \"function\") {\n      for (var _len = arguments.length, messages = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        messages[_key - 2] = arguments[_key];\n      }\n\n      return object[methodName].apply(object, messages);\n    }\n  }\n\n  var DirectUploadController = function () {\n    function DirectUploadController(input, file) {\n      classCallCheck(this, DirectUploadController);\n      this.input = input;\n      this.file = file;\n      this.directUpload = new DirectUpload(this.file, this.url, this);\n      this.dispatch(\"initialize\");\n    }\n\n    createClass(DirectUploadController, [{\n      key: \"start\",\n      value: function start(callback) {\n        var _this = this;\n\n        var hiddenInput = document.createElement(\"input\");\n        hiddenInput.type = \"hidden\";\n        hiddenInput.name = this.input.name;\n        this.input.insertAdjacentElement(\"beforebegin\", hiddenInput);\n        this.dispatch(\"start\");\n        this.directUpload.create(function (error, attributes) {\n          if (error) {\n            hiddenInput.parentNode.removeChild(hiddenInput);\n\n            _this.dispatchError(error);\n          } else {\n            hiddenInput.value = attributes.signed_id;\n          }\n\n          _this.dispatch(\"end\");\n\n          callback(error);\n        });\n      }\n    }, {\n      key: \"uploadRequestDidProgress\",\n      value: function uploadRequestDidProgress(event) {\n        var progress = event.loaded / event.total * 100;\n\n        if (progress) {\n          this.dispatch(\"progress\", {\n            progress: progress\n          });\n        }\n      }\n    }, {\n      key: \"dispatch\",\n      value: function dispatch(name) {\n        var detail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        detail.file = this.file;\n        detail.id = this.directUpload.id;\n        return dispatchEvent(this.input, \"direct-upload:\" + name, {\n          detail: detail\n        });\n      }\n    }, {\n      key: \"dispatchError\",\n      value: function dispatchError(error) {\n        var event = this.dispatch(\"error\", {\n          error: error\n        });\n\n        if (!event.defaultPrevented) {\n          alert(error);\n        }\n      }\n    }, {\n      key: \"directUploadWillCreateBlobWithXHR\",\n      value: function directUploadWillCreateBlobWithXHR(xhr) {\n        this.dispatch(\"before-blob-request\", {\n          xhr: xhr\n        });\n      }\n    }, {\n      key: \"directUploadWillStoreFileWithXHR\",\n      value: function directUploadWillStoreFileWithXHR(xhr) {\n        var _this2 = this;\n\n        this.dispatch(\"before-storage-request\", {\n          xhr: xhr\n        });\n        xhr.upload.addEventListener(\"progress\", function (event) {\n          return _this2.uploadRequestDidProgress(event);\n        });\n      }\n    }, {\n      key: \"url\",\n      get: function get$$1() {\n        return this.input.getAttribute(\"data-direct-upload-url\");\n      }\n    }]);\n    return DirectUploadController;\n  }();\n\n  var inputSelector = \"input[type=file][data-direct-upload-url]:not([disabled])\";\n\n  var DirectUploadsController = function () {\n    function DirectUploadsController(form) {\n      classCallCheck(this, DirectUploadsController);\n      this.form = form;\n      this.inputs = findElements(form, inputSelector).filter(function (input) {\n        return input.files.length;\n      });\n    }\n\n    createClass(DirectUploadsController, [{\n      key: \"start\",\n      value: function start(callback) {\n        var _this = this;\n\n        var controllers = this.createDirectUploadControllers();\n\n        var startNextController = function startNextController() {\n          var controller = controllers.shift();\n\n          if (controller) {\n            controller.start(function (error) {\n              if (error) {\n                callback(error);\n\n                _this.dispatch(\"end\");\n              } else {\n                startNextController();\n              }\n            });\n          } else {\n            callback();\n\n            _this.dispatch(\"end\");\n          }\n        };\n\n        this.dispatch(\"start\");\n        startNextController();\n      }\n    }, {\n      key: \"createDirectUploadControllers\",\n      value: function createDirectUploadControllers() {\n        var controllers = [];\n        this.inputs.forEach(function (input) {\n          toArray$1(input.files).forEach(function (file) {\n            var controller = new DirectUploadController(input, file);\n            controllers.push(controller);\n          });\n        });\n        return controllers;\n      }\n    }, {\n      key: \"dispatch\",\n      value: function dispatch(name) {\n        var detail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return dispatchEvent(this.form, \"direct-uploads:\" + name, {\n          detail: detail\n        });\n      }\n    }]);\n    return DirectUploadsController;\n  }();\n\n  var processingAttribute = \"data-direct-uploads-processing\";\n  var submitButtonsByForm = new WeakMap();\n  var started = false;\n\n  function start() {\n    if (!started) {\n      started = true;\n      document.addEventListener(\"click\", didClick, true);\n      document.addEventListener(\"submit\", didSubmitForm);\n      document.addEventListener(\"ajax:before\", didSubmitRemoteElement);\n    }\n  }\n\n  function didClick(event) {\n    var target = event.target;\n\n    if ((target.tagName == \"INPUT\" || target.tagName == \"BUTTON\") && target.type == \"submit\" && target.form) {\n      submitButtonsByForm.set(target.form, target);\n    }\n  }\n\n  function didSubmitForm(event) {\n    handleFormSubmissionEvent(event);\n  }\n\n  function didSubmitRemoteElement(event) {\n    if (event.target.tagName == \"FORM\") {\n      handleFormSubmissionEvent(event);\n    }\n  }\n\n  function handleFormSubmissionEvent(event) {\n    var form = event.target;\n\n    if (form.hasAttribute(processingAttribute)) {\n      event.preventDefault();\n      return;\n    }\n\n    var controller = new DirectUploadsController(form);\n    var inputs = controller.inputs;\n\n    if (inputs.length) {\n      event.preventDefault();\n      form.setAttribute(processingAttribute, \"\");\n      inputs.forEach(disable);\n      controller.start(function (error) {\n        form.removeAttribute(processingAttribute);\n\n        if (error) {\n          inputs.forEach(enable);\n        } else {\n          submitForm(form);\n        }\n      });\n    }\n  }\n\n  function submitForm(form) {\n    var button = submitButtonsByForm.get(form) || findElement(form, \"input[type=submit], button[type=submit]\");\n\n    if (button) {\n      var _button = button,\n          disabled = _button.disabled;\n      button.disabled = false;\n      button.focus();\n      button.click();\n      button.disabled = disabled;\n    } else {\n      button = document.createElement(\"input\");\n      button.type = \"submit\";\n      button.style.display = \"none\";\n      form.appendChild(button);\n      button.click();\n      form.removeChild(button);\n    }\n\n    submitButtonsByForm.delete(form);\n  }\n\n  function disable(input) {\n    input.disabled = true;\n  }\n\n  function enable(input) {\n    input.disabled = false;\n  }\n\n  function autostart() {\n    if (window.ActiveStorage) {\n      start();\n    }\n  }\n\n  setTimeout(autostart, 1);\n  exports.start = start;\n  exports.DirectUpload = DirectUpload;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n});"],"sourceRoot":""}