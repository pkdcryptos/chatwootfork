/*! For license information please see 37-0d9ba3bef558b2b25146.chunk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{1e3:function(t,e,n){"use strict";var r=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,o=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/;t.exports=function(t,e){var n,i,s,a,c,u,h=t.pos;return 60===t.src.charCodeAt(h)&&(!((n=t.src.slice(h)).indexOf(">")<0)&&(o.test(n)?(a=(i=n.match(o))[0].slice(1,-1),c=t.md.normalizeLink(a),!!t.md.validateLink(c)&&(e||((u=t.push("link_open","a",1)).attrs=[["href",c]],u.markup="autolink",u.info="auto",(u=t.push("text","",0)).content=t.md.normalizeLinkText(a),(u=t.push("link_close","a",-1)).markup="autolink",u.info="auto"),t.pos+=i[0].length,!0)):!!r.test(n)&&(a=(s=n.match(r))[0].slice(1,-1),c=t.md.normalizeLink("mailto:"+a),!!t.md.validateLink(c)&&(e||((u=t.push("link_open","a",1)).attrs=[["href",c]],u.markup="autolink",u.info="auto",(u=t.push("text","",0)).content=t.md.normalizeLinkText(a),(u=t.push("link_close","a",-1)).markup="autolink",u.info="auto"),t.pos+=s[0].length,!0))))}},1001:function(t,e,n){"use strict";var r=n(759).HTML_TAG_RE;t.exports=function(t,e){var n,o,i,s=t.pos;return!!t.md.options.html&&(i=t.posMax,!(60!==t.src.charCodeAt(s)||s+2>=i)&&(!(33!==(n=t.src.charCodeAt(s+1))&&63!==n&&47!==n&&!function(t){var e=32|t;return e>=97&&e<=122}(n))&&(!!(o=t.src.slice(s).match(r))&&(e||(t.push("html_inline","",0).content=t.src.slice(s,s+o[0].length)),t.pos+=o[0].length,!0))))}},1002:function(t,e,n){"use strict";var r=n(758),o=n(107).has,i=n(107).isValidEntityCode,s=n(107).fromCodePoint,a=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,c=/^&([a-z][a-z0-9]{1,31});/i;t.exports=function(t,e){var n,u,h=t.pos,l=t.posMax;if(38!==t.src.charCodeAt(h))return!1;if(h+1<l)if(35===t.src.charCodeAt(h+1)){if(u=t.src.slice(h).match(a))return e||(n="x"===u[1][0].toLowerCase()?parseInt(u[1].slice(1),16):parseInt(u[1],10),t.pending+=i(n)?s(n):s(65533)),t.pos+=u[0].length,!0}else if((u=t.src.slice(h).match(c))&&o(r,u[1]))return e||(t.pending+=r[u[1]]),t.pos+=u[0].length,!0;return e||(t.pending+="&"),t.pos++,!0}},1003:function(t,e,n){"use strict";function r(t,e){var n,r,o,i,s,a,c,u,h={},l=e.length;for(n=0;n<l;n++)if((o=e[n]).length=o.length||0,o.close){for(h.hasOwnProperty(o.marker)||(h[o.marker]=[-1,-1,-1]),s=h[o.marker][o.length%3],a=-1,r=n-o.jump-1;r>s;r-=i.jump+1)if((i=e[r]).marker===o.marker&&(-1===a&&(a=r),i.open&&i.end<0&&i.level===o.level&&(c=!1,(i.close||o.open)&&(i.length+o.length)%3===0&&(i.length%3===0&&o.length%3===0||(c=!0)),!c))){u=r>0&&!e[r-1].open?e[r-1].jump+1:0,o.jump=n-r+u,o.open=!1,i.end=n,i.jump=u,i.close=!1,a=-1;break}-1!==a&&(h[o.marker][(o.length||0)%3]=a)}}t.exports=function(t){var e,n=t.tokens_meta,o=t.tokens_meta.length;for(r(0,t.delimiters),e=0;e<o;e++)n[e]&&n[e].delimiters&&r(0,n[e].delimiters)}},1004:function(t,e,n){"use strict";t.exports=function(t){var e,n,r=0,o=t.tokens,i=t.tokens.length;for(e=n=0;e<i;e++)o[e].nesting<0&&r--,o[e].level=r,o[e].nesting>0&&r++,"text"===o[e].type&&e+1<i&&"text"===o[e+1].type?o[e+1].content=o[e].content+o[e+1].content:(e!==n&&(o[n]=o[e]),n++);e!==n&&(o.length=n)}},1005:function(t,e,n){"use strict";var r=n(633),o=n(107).isWhiteSpace,i=n(107).isPunctChar,s=n(107).isMdAsciiPunct;function a(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[]}a.prototype.pushPending=function(){var t=new r("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t},a.prototype.push=function(t,e,n){this.pending&&this.pushPending();var o=new r(t,e,n),i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),o.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(o),this.tokens_meta.push(i),o},a.prototype.scanDelims=function(t,e){var n,r,a,c,u,h,l,p,f,d=t,m=!0,v=!0,y=this.posMax,g=this.src.charCodeAt(t);for(n=t>0?this.src.charCodeAt(t-1):32;d<y&&this.src.charCodeAt(d)===g;)d++;return a=d-t,r=d<y?this.src.charCodeAt(d):32,l=s(n)||i(String.fromCharCode(n)),f=s(r)||i(String.fromCharCode(r)),h=o(n),(p=o(r))?m=!1:f&&(h||l||(m=!1)),h?v=!1:l&&(p||f||(v=!1)),e?(c=m,u=v):(c=m&&(!v||l),u=v&&(!m||f)),{can_open:c,can_close:u,length:a}},a.prototype.Token=r,t.exports=a},1006:function(t,e,n){"use strict";function r(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach((function(e){e&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t}function o(t){return Object.prototype.toString.call(t)}function i(t){return"[object Function]"===o(t)}function s(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var a={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var c={"http:":{validate:function(t,e,n){var r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){var r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&":"===t[e-3]||e>=3&&"/"===t[e-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){var r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},u="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function h(t){var e=t.re=n(1007)(t.__opts__),r=t.__tlds__.slice();function a(t){return t.replace("%TLDS%",e.src_tlds)}t.onCompile(),t.__tlds_replaced__||r.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),r.push(e.src_xn),e.src_tlds=r.join("|"),e.email_fuzzy=RegExp(a(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(a(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(a(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(a(e.tpl_host_fuzzy_test),"i");var c=[];function u(t,e){throw new Error('(LinkifyIt) Invalid schema "'+t+'": '+e)}t.__compiled__={},Object.keys(t.__schemas__).forEach((function(e){var n=t.__schemas__[e];if(null!==n){var r={validate:null,link:null};if(t.__compiled__[e]=r,"[object Object]"===o(n))return!function(t){return"[object RegExp]"===o(t)}(n.validate)?i(n.validate)?r.validate=n.validate:u(e,n):r.validate=function(t){return function(e,n){var r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}(n.validate),void(i(n.normalize)?r.normalize=n.normalize:n.normalize?u(e,n):r.normalize=function(t,e){e.normalize(t)});!function(t){return"[object String]"===o(t)}(n)?u(e,n):c.push(e)}})),c.forEach((function(e){t.__compiled__[t.__schemas__[e]]&&(t.__compiled__[e].validate=t.__compiled__[t.__schemas__[e]].validate,t.__compiled__[e].normalize=t.__compiled__[t.__schemas__[e]].normalize)})),t.__compiled__[""]={validate:null,normalize:function(t,e){e.normalize(t)}};var h=Object.keys(t.__compiled__).filter((function(e){return e.length>0&&t.__compiled__[e]})).map(s).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><\uff5c]|"+e.src_ZPCc+"))("+h+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><\uff5c]|"+e.src_ZPCc+"))("+h+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),function(t){t.__index__=-1,t.__text_cache__=""}(t)}function l(t,e){var n=t.__index__,r=t.__last_index__,o=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=o,this.text=o,this.url=o}function p(t,e){var n=new l(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function f(t,e){if(!(this instanceof f))return new f(t,e);var n;e||(n=t,Object.keys(n||{}).reduce((function(t,e){return t||a.hasOwnProperty(e)}),!1)&&(e=t,t={})),this.__opts__=r({},a,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},c,t),this.__compiled__={},this.__tlds__=u,this.__tlds_replaced__=!1,this.re={},h(this)}f.prototype.add=function(t,e){return this.__schemas__[t]=e,h(this),this},f.prototype.set=function(t){return this.__opts__=r(this.__opts__,t),this},f.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var e,n,r,o,i,s,a,c;if(this.re.schema_test.test(t))for((a=this.re.schema_search).lastIndex=0;null!==(e=a.exec(t));)if(o=this.testSchemaAt(t,e[2],a.lastIndex)){this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+o;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||c<this.__index__)&&null!==(n=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(i=n.index+n[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&t.indexOf("@")>=0&&null!==(r=t.match(this.re.email_fuzzy))&&(i=r.index+r[1].length,s=r.index+r[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=s)),this.__index__>=0},f.prototype.pretest=function(t){return this.re.pretest.test(t)},f.prototype.testSchemaAt=function(t,e,n){return this.__compiled__[e.toLowerCase()]?this.__compiled__[e.toLowerCase()].validate(t,n,this):0},f.prototype.match=function(t){var e=0,n=[];this.__index__>=0&&this.__text_cache__===t&&(n.push(p(this,e)),e=this.__last_index__);for(var r=e?t.slice(e):t;this.test(r);)n.push(p(this,e)),r=r.slice(this.__last_index__),e+=this.__last_index__;return n.length?n:null},f.prototype.tlds=function(t,e){return t=Array.isArray(t)?t:[t],e?(this.__tlds__=this.__tlds__.concat(t).sort().filter((function(t,e,n){return t!==n[e-1]})).reverse(),h(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,h(this),this)},f.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),"mailto:"!==t.schema||/^mailto:/i.test(t.url)||(t.url="mailto:"+t.url)},f.prototype.onCompile=function(){},t.exports=f},1007:function(t,e,n){"use strict";t.exports=function(t){var e={};e.src_Any=n(356).source,e.src_Cc=n(357).source,e.src_Z=n(358).source,e.src_P=n(284).source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");return e.src_pseudo_letter="(?:(?![><\uff5c]|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|[><\uff5c]|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+"[><\uff5c]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy='(^|[><\uff5c]|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+e.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+e.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}},1008:function(t,e,n){"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},1009:function(t,e,n){"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},1010:function(t,e,n){"use strict";t.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},1011:function(t,e,n){"use strict";var r=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function o(t,e){var n,o,i=t.posMax,s=t.pos;if(94!==t.src.charCodeAt(s))return!1;if(e)return!1;if(s+2>=i)return!1;for(t.pos=s+1;t.pos<i;){if(94===t.src.charCodeAt(t.pos)){n=!0;break}t.md.inline.skipToken(t)}return n&&s+1!==t.pos?(o=t.src.slice(s+1,t.pos)).match(/(^|[^\\])(\\\\)*\s/)?(t.pos=s,!1):(t.posMax=t.pos,t.pos=s+1,t.push("sup_open","sup",1).markup="^",t.push("text","",0).content=o.replace(r,"$1"),t.push("sup_close","sup",-1).markup="^",t.pos=t.posMax+1,t.posMax=i,!0):(t.pos=s,!1)}t.exports=function(t){t.inline.ruler.after("emphasis","sup",o)}},1012:function(t,e,n){var r=n(66);t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},1013:function(t,e,n){"use strict";var r=n(77),o=n(61);t.exports=function(t){var e=String(o(this)),n="",i=r(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},1038:function(t,e,n){"use strict";function r(t){this.content=t}n.r(e),n.d(e,"CellBookmark",(function(){return Af})),n.d(e,"CellSelection",(function(){return Nf})),n.d(e,"ResizeState",(function(){return od})),n.d(e,"TableMap",(function(){return uf})),n.d(e,"TableView",(function(){return td})),n.d(e,"__clipCells",(function(){return Bf})),n.d(e,"__insertCells",(function(){return Lf})),n.d(e,"__pastedCells",(function(){return Ff})),n.d(e,"addColSpan",(function(){return Tf})),n.d(e,"addColumn",(function(){return dd})),n.d(e,"addColumnAfter",(function(){return vd})),n.d(e,"addColumnBefore",(function(){return md})),n.d(e,"addRow",(function(){return bd})),n.d(e,"addRowAfter",(function(){return xd})),n.d(e,"addRowBefore",(function(){return wd})),n.d(e,"cellAround",(function(){return yf})),n.d(e,"colCount",(function(){return Cf})),n.d(e,"columnIsHeader",(function(){return Ef})),n.d(e,"columnResizing",(function(){return rd})),n.d(e,"columnResizingPluginKey",(function(){return nd})),n.d(e,"deleteColumn",(function(){return gd})),n.d(e,"deleteRow",(function(){return Cd})),n.d(e,"deleteTable",(function(){return jd})),n.d(e,"findCell",(function(){return Sf})),n.d(e,"fixTables",(function(){return jf})),n.d(e,"fixTablesKey",(function(){return If})),n.d(e,"goToNextCell",(function(){return Dd})),n.d(e,"handlePaste",(function(){return Zf})),n.d(e,"inSameTable",(function(){return xf})),n.d(e,"isInTable",(function(){return gf})),n.d(e,"mergeCells",(function(){return Md})),n.d(e,"moveCellForward",(function(){return wf})),n.d(e,"nextCell",(function(){return Of})),n.d(e,"pointsAtCell",(function(){return bf})),n.d(e,"removeColSpan",(function(){return _f})),n.d(e,"removeColumn",(function(){return yd})),n.d(e,"removeRow",(function(){return Sd})),n.d(e,"rowIsHeader",(function(){return kd})),n.d(e,"selectedRect",(function(){return fd})),n.d(e,"selectionCell",(function(){return kf})),n.d(e,"setCellAttr",(function(){return Ed})),n.d(e,"splitCell",(function(){return _d})),n.d(e,"splitCellWithType",(function(){return Td})),n.d(e,"tableEditing",(function(){return Fd})),n.d(e,"tableEditingKey",(function(){return vf})),n.d(e,"tableNodeTypes",(function(){return mf})),n.d(e,"tableNodes",(function(){return df})),n.d(e,"toggleHeader",(function(){return Ad})),n.d(e,"toggleHeaderCell",(function(){return Id})),n.d(e,"toggleHeaderColumn",(function(){return Rd})),n.d(e,"toggleHeaderRow",(function(){return zd})),n.d(e,"updateColumnsOnResize",(function(){return ed})),r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var o=n&&n!=t?this.remove(n):this,i=o.find(t),s=o.content.slice();return-1==i?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var o=this.remove(e),i=o.content.slice(),s=o.find(t);return i.splice(-1==s?i.length:s,0,e,n),new r(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=r.from(t)).size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=r.from(t)).size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};var o=r;function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var a=0;o.text[a]==i.text[a];a++)n++;return n}if(o.content.size||i.content.size){var c=s(o.content,i.content,n+1);if(null!=c)return c}n+=o.nodeSize}else n+=o.nodeSize}}function a(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=t.child(--o),c=e.child(--i),u=s.nodeSize;if(s!=c){if(!s.sameMarkup(c))return{a:n,b:r};if(s.isText&&s.text!=c.text){for(var h=0,l=Math.min(s.text.length,c.text.length);h<l&&s.text[s.text.length-h-1]==c.text[c.text.length-h-1];)h++,n--,r--;return{a:n,b:r}}if(s.content.size||c.content.size){var p=a(s.content,c.content,n-1,r-1);if(p)return p}n-=u,r-=u}else n-=u,r-=u}}var c=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},u={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};c.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var u=s+1;a.nodesBetween(Math.max(0,t-u),Math.min(a.content.size,e-u),n,r+u)}s=c}},c.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},c.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},c.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new c(r,this.size+t.size)},c.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var s=this.content[o],a=i+s.nodeSize;a>t&&((i<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=a}return new c(n,r)},c.prototype.cutByIndex=function(t,e){return t==e?c.empty:0==t&&e==this.content.length?this:new c(this.content.slice(t,e))},c.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new c(r,o)},c.prototype.addToStart=function(t){return new c([t].concat(this.content),this.size+t.nodeSize)},c.prototype.addToEnd=function(t){return new c(this.content.concat(t),this.size+t.nodeSize)},c.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},u.firstChild.get=function(){return this.content.length?this.content[0]:null},u.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},u.childCount.get=function(){return this.content.length},c.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},c.prototype.maybeChild=function(t){return this.content[t]},c.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},c.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),s(this,t,e)},c.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),a(this,t,e,n)},c.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return l(0,t);if(t==this.size)return l(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?l(n+1,o):l(n,r);r=o}},c.prototype.toString=function(){return"<"+this.toStringInner()+">"},c.prototype.toStringInner=function(){return this.content.join(", ")},c.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},c.fromJSON=function(t,e){if(!e)return c.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new c(e.map(t.nodeFromJSON))},c.fromArray=function(t){if(!t.length)return c.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new c(e||t,n)},c.from=function(t){if(!t)return c.empty;if(t instanceof c)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new c([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(c.prototype,u);var h={index:0,offset:0};function l(t,e){return h.index=t,h.offset=e,h}function p(t,e){if(t===e)return!0;if(!t||"object"!=i(t)||!e||"object"!=i(e))return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!p(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!p(t[o],e[o]))return!1;for(var s in e)if(!(s in t))return!1}return!0}c.empty=new c([],0);var f=function(t,e){this.type=t,this.attrs=e};function d(t){var e=Error.call(this,t);return e.__proto__=d.prototype,e}f.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},f.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},f.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},f.prototype.eq=function(t){return this==t||this.type==t.type&&p(this.attrs,t.attrs)},f.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},f.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},f.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},f.setFrom=function(t){if(!t||0==t.length)return f.none;if(t instanceof f)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},f.none=[],d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="ReplaceError";var m=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},v={size:{configurable:!0}};function y(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,u=a.offset;if(i==e||s.isText){if(u!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(y(s.content,e-i-1,n-i-1)))}function g(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=g(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function k(t,e,n){if(n.openStart>t.depth)throw new d("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new d("Inconsistent open depths");return b(t,e,n,0)}function b(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=b(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(c.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return O(i,M(t,a.start,a.end,e,r))}var u=t.parent,h=u.content;return O(u,h.cut(0,t.parentOffset).append(n.content).append(h.cut(e.parentOffset)))}return O(i,_(t,e,r))}function w(t,e){if(!e.type.compatibleContent(t.type))throw new d("Cannot join "+e.type.name+" onto "+t.type.name)}function x(t,e,n){var r=t.node(n);return w(r,e.node(n)),r}function S(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function C(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(S(t.nodeAfter,r),i++));for(var a=i;a<s;a++)S(o.child(a),r);e&&e.depth==n&&e.textOffset&&S(e.nodeBefore,r)}function O(t,e){if(!t.type.validContent(e))throw new d("Invalid content for node "+t.type.name);return t.copy(e)}function M(t,e,n,r,o){var i=t.depth>o&&x(t,e,o+1),s=r.depth>o&&x(n,r,o+1),a=[];return C(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(w(i,s),S(O(i,M(t,e,n,r,o+1)),a)):(i&&S(O(i,_(t,e,o+1)),a),C(e,n,o,a),s&&S(O(s,_(n,r,o+1)),a)),C(r,null,o,a),new c(a)}function _(t,e,n){var r=[];(C(null,t,n,r),t.depth>n)&&S(O(x(t,e,n+1),_(t,e,n+1)),r);return C(e,null,n,r),new c(r)}v.size.get=function(){return this.content.size-this.openStart-this.openEnd},m.prototype.insertAt=function(t,e){var n=g(this.content,t+this.openStart,e,null);return n&&new m(n,this.openStart,this.openEnd)},m.prototype.removeBetween=function(t,e){return new m(y(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},m.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},m.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},m.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},m.fromJSON=function(t,e){if(!e)return m.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new m(c.fromJSON(t,e.content),n,r)},m.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new m(t,n,r)},Object.defineProperties(m.prototype,v),m.empty=new m(c.empty,0,0);var T=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},E={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};T.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},E.parent.get=function(){return this.node(this.depth)},E.doc.get=function(){return this.node(0)},T.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},T.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},T.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},T.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},T.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},T.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},T.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},E.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},E.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},E.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},T.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r},T.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return f.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},T.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},T.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},T.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new R(this,t,n)},T.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},T.prototype.max=function(t){return t.pos>this.pos?t:this},T.prototype.min=function(t){return t.pos<this.pos?t:this},T.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},T.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,u=o-c;if(n.push(i,a,r+c),!u)break;if((i=i.child(a)).isText)break;o=u-1,r+=c+1}return new T(e,n,o)},T.resolveCached=function(t,e){for(var n=0;n<N.length;n++){var r=N[n];if(r.pos==e&&r.doc==t)return r}var o=N[A]=T.resolve(t,e);return A=(A+1)%z,o},Object.defineProperties(T.prototype,E);var N=[],A=0,z=12,R=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},I={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};I.start.get=function(){return this.$from.before(this.depth+1)},I.end.get=function(){return this.$to.after(this.depth+1)},I.parent.get=function(){return this.$from.node(this.depth)},I.startIndex.get=function(){return this.$from.index(this.depth)},I.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(R.prototype,I);var D=Object.create(null),j=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||c.empty,this.marks=r||f.none},F={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};F.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},F.childCount.get=function(){return this.content.childCount},j.prototype.child=function(t){return this.content.child(t)},j.prototype.maybeChild=function(t){return this.content.maybeChild(t)},j.prototype.forEach=function(t){this.content.forEach(t)},j.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},j.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},F.textContent.get=function(){return this.textBetween(0,this.content.size,"")},j.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},F.firstChild.get=function(){return this.content.firstChild},F.lastChild.get=function(){return this.content.lastChild},j.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},j.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},j.prototype.hasMarkup=function(t,e,n){return this.type==t&&p(this.attrs,e||t.defaultAttrs||D)&&f.sameSet(this.marks,n||f.none)},j.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},j.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},j.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},j.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return m.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new m(a,r.depth-i,o.depth-i)},j.prototype.replace=function(t,e,n){return k(this.resolve(t),this.resolve(e),n)},j.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}},j.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},j.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},j.prototype.resolve=function(t){return T.resolveCached(this,t)},j.prototype.resolveNoCache=function(t){return T.resolve(this,t)},j.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},F.isBlock.get=function(){return this.type.isBlock},F.isTextblock.get=function(){return this.type.isTextblock},F.inlineContent.get=function(){return this.type.inlineContent},F.isInline.get=function(){return this.type.isInline},F.isText.get=function(){return this.type.isText},F.isLeaf.get=function(){return this.type.isLeaf},F.isAtom.get=function(){return this.type.isAtom},j.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),B(this.marks,t)},j.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},j.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=c.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},j.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},j.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},j.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=f.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!f.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},j.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},j.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=c.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(j.prototype,F);var P=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):B(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(j);function B(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var q=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},$={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};q.parse=function(t,e){var n=new L(t,e);if(null==n.next)return q.empty;var r=V(n);n.next&&n.err("Unexpected trailing text");var o=function(t){var e=Object.create(null);return n(G(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];G(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new q(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(Z);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}(function(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var u=n();return o(i(t.expr,e),u),o(i(t.expr,u),u),[r(u)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var h=e,l=0;l<t.min;l++){var p=n();o(i(t.expr,h),p),h=p}if(-1==t.max)o(i(t.expr,h),h);else for(var f=t.min;f<t.max;f++){var d=n();r(h,d),o(i(t.expr,h),d),h=d}return[r(h)]}if("name"==t.type)return[r(e,null,t.value)]}}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],u=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(u)&&r.push(u)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},q.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},q.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},$.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},$.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},q.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},q.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(i,s){var a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return c.from(s.map((function(t){return t.createAndFill()})));for(var u=0;u<i.next.length;u+=2){var h=i.next[u],l=i.next[u+1];if(!h.isText&&!h.hasRequiredAttrs()&&-1==r.indexOf(l)){r.push(l);var p=o(l,s.concat(h));if(p)return p}}}(this,[])},q.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},q.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},$.edgeCount.get=function(){return this.next.length>>1},q.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},q.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(q.prototype,$),q.empty=new q(!0);var L=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},J={next:{configurable:!0}};function V(t){var e=[];do{e.push(W(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function W(t){var e=[];do{e.push(H(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function H(t){for(var e=function(t){if(t.eat("(")){var e=V(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}0==o.length&&t.err("No node type or group '"+e+"' found");return o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=K(t,e)}return e}function U(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function K(t,e){var n=U(t),r=n;return t.eat(",")&&(r="}"!=t.next?U(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Z(t,e){return e-t}function G(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||e(c)}}(e),n.sort(Z)}function Y(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function X(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function Q(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new nt(t[n]);return e}J.next.get=function(){return this.tokens[this.pos]},L.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},L.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(L.prototype,J);var tt=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=Q(n.attrs),this.defaultAttrs=Y(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},et={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};et.isInline.get=function(){return!this.isBlock},et.isTextblock.get=function(){return this.isBlock&&this.inlineContent},et.isLeaf.get=function(){return this.contentMatch==q.empty},et.isAtom.get=function(){return this.isLeaf||this.spec.atom},tt.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},tt.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},tt.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:X(this.attrs,t)},tt.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new j(this,this.computeAttrs(t),c.from(e),f.setFrom(n))},tt.prototype.createChecked=function(t,e,n){if(e=c.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new j(this,this.computeAttrs(t),e,f.setFrom(n))},tt.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=c.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(c.empty,!0);return o?new j(this,t,e.append(o),f.setFrom(n)):null},tt.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},tt.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},tt.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},tt.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:f.empty:t},tt.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new tt(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(tt.prototype,et);var nt=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},rt={isRequired:{configurable:!0}};rt.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(nt.prototype,rt);var ot=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=Q(r.attrs),this.rank=e,this.excluded=null;var o=Y(this.attrs);this.instance=o&&new f(this,o)};ot.prototype.create=function(t){return!t&&this.instance?this.instance:new f(this,X(this.attrs,t))},ot.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new ot(t,r++,e,o)})),n},ot.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},ot.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},ot.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var it=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=o.from(t.nodes),this.spec.marks=o.from(t.marks),this.nodes=tt.compile(this.spec.nodes,this),this.marks=ot.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var i=this.nodes[r],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=q.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?st(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var c in this.marks){var u=this.marks[c],h=u.spec.excludes;u.excluded=null==h?[u]:""==h?[]:st(this,h.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function st(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}it.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof tt))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},it.prototype.text=function(t,e){var n=this.nodes.text;return new P(n,n.defaultAttrs,t,f.setFrom(e))},it.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},it.prototype.nodeFromJSON=function(t){return j.fromJSON(this,t)},it.prototype.markFromJSON=function(t){return f.fromJSON(this,t)},it.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var at=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};at.prototype.parse=function(t,e){void 0===e&&(e={});var n=new ft(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},at.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new ft(this,e,!0);return n.addAll(t,null,e.from,e.to),m.maxOpen(n.finish())},at.prototype.matchTag=function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(mt(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},at.prototype.matchStyle=function(t,e,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var s=i.getAttrs(e);if(!1===s)continue;i.attrs=s}return i}}},at.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=vt(t)),t.mark=e}))};for(var o in t.marks)r(o);var i;for(var s in t.nodes)i=void 0,(i=t.nodes[s].spec.parseDOM)&&i.forEach((function(t){n(t=vt(t)),t.node=s}));return e},at.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new at(t,at.schemaRules(t)))};var ct={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ut={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ht={ol:!0,ul:!0};function lt(t){return(t?1:0)|("full"===t?2:0)}var pt=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=f.none,this.pendingMarks=r,this.stashMarks=[]};pt.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(c.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},pt.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=c.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(c.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},pt.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},pt.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):yt(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var ft=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=lt(e.preserveWhitespace)|(n?4:0);r=o?new pt(o.type,o.attrs,f.none,f.none,!0,e.topMatch||o.type.contentMatch,i):new pt(n?null:t.schema.topNodeType,null,f.none,f.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},dt={top:{configurable:!0},currentPos:{configurable:!0}};function mt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function vt(t){var e={};for(var n in t)e[n]=t[n];return e}function yt(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[];return function t(n){i.push(n);for(var r=0;r<n.edgeCount;r++){var o=n.edge(r),s=o.type,a=o.next;if(s==e)return!0;if(i.indexOf(a)<0&&t(a))return!0}}(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}dt.top.get=function(){return this.nodes[this.open]},ft.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},ft.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(2&n.options||(n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},ft.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();ht.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&ht.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(o?o.ignore:ut.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var i,s=this.top,a=this.needsBlock;if(ct.hasOwnProperty(r))i=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),i&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,o,!1===o.consuming?n:null)},ft.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},ft.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},ft.prototype.readStyles=function(t){var e=f.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(t[n],t[n+1],this,r);if(!o)continue t;if(o.ignore)return null;if(e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;r=o}return e},ft.prototype.addElementByRule=function(t,e,n){var r,o,i,s=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):r=this.enter(o,e.attrs,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=e.contentElement;"string"==typeof c?c=t.querySelector(c):"function"==typeof c&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,r)}r&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},ft.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&ct.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},ft.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},ft.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},ft.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},ft.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?-5&o.options:lt(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new pt(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},ft.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},ft.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},ft.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},dt.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},ft.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},ft.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},ft.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},ft.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},ft.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1);return function t(s,a){for(;s>=0;s--){var c=n[s];if(""==c){if(s==n.length-1||0==s)continue;for(;a>=i;a--)if(t(s-1,a))return!0;return!1}var u=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;a--}return!0}(n.length-1,this.open)},ft.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},ft.prototype.addPendingMark=function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},ft.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(ft.prototype,dt);var gt=function(t,e){this.nodes=t||{},this.marks=e||{}};function kt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function bt(t){return t.document||window.document}gt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=bt(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<t.marks.length;){var c=t.marks[s++],u=r.serializeMark(c,t.isInline,e);u&&(i.push(c,o),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(r.serializeNode(t,e))})),n},gt.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=gt.renderSpec(bt(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},gt.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},gt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&gt.renderSpec(bt(n),r(t,e))},gt.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var s=null,a=n?t.createElementNS(n,r):t.createElement(r),c=e[1],u=1;if(c&&"object"==i(c)&&null==c.nodeType&&!Array.isArray(c))for(var h in u=2,c)if(null!=c[h]){var l=h.indexOf(" ");l>0?a.setAttributeNS(h.slice(0,l),h.slice(l+1),c[h]):a.setAttribute(h,c[h])}for(var p=u;p<e.length;p++){var f=e[p];if(0===f){if(p<e.length-1||p>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}var d=gt.renderSpec(t,f,n),m=d.dom,v=d.contentDOM;if(a.appendChild(m),v){if(s)throw new RangeError("Multiple content holes");s=v}}return{dom:a,contentDOM:s}},gt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new gt(this.nodesFromSchema(t),this.marksFromSchema(t)))},gt.nodesFromSchema=function(t){var e=kt(t.nodes);return e.text||(e.text=function(t){return t.text}),e},gt.marksFromSchema=function(t){return kt(t.marks)};var wt=Math.pow(2,16);function xt(t){return 65535&t}var St=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},Ct=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};Ct.prototype.recover=function(t){var e=0,n=xt(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/wt}(t)},Ct.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},Ct.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},Ct.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var c=this.ranges[s+o],u=this.ranges[s+i],h=a+c;if(t<=h){var l=a+r+((c?t==a?-1:t==h?1:e:e)<0?0:u);if(n)return l;var p=t==(e<0?a:h)?null:s/3+(t-a)*wt;return new St(l,e<0?t!=a:t!=h,p)}r+=u-c}return n?t+r:new St(t+r)},Ct.prototype.touches=function(t,e){for(var n=0,r=xt(e),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var c=this.ranges[s+o];if(t<=a+c&&s==3*r)return!0;n+=this.ranges[s+i]-c}return!1},Ct.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+e],u=this.ranges[r+n];t(s,s+c,a,a+u),o+=u-c}},Ct.prototype.invert=function(){return new Ct(this.ranges,!this.inverted)},Ct.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},Ct.offset=function(t){return 0==t?Ct.empty:new Ct(t<0?[0,-t,0]:[0,0,t])},Ct.empty=new Ct([]);var Ot=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function Mt(t){var e=Error.call(this,t);return e.__proto__=Mt.prototype,e}Ot.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new Ot(this.maps,this.mirror,t,e)},Ot.prototype.copy=function(){return new Ot(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Ot.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},Ot.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},Ot.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},Ot.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},Ot.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},Ot.prototype.invert=function(){var t=new Ot;return t.appendMappingInverted(this),t},Ot.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},Ot.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},Ot.prototype._map=function(t,e,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,t=this.maps[s].recover(i.recover);continue}}i.deleted&&(r=!0),t=i.pos}return n?t:new St(t,r)},Mt.prototype=Object.create(Error.prototype),Mt.prototype.constructor=Mt,Mt.prototype.name="TransformError";var _t=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Ot},Tt={before:{configurable:!0},docChanged:{configurable:!0}};function Et(){throw new Error("Override me")}Tt.before.get=function(){return this.docs.length?this.docs[0]:this.doc},_t.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new Mt(e.failed);return this},_t.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},Tt.docChanged.get=function(){return this.steps.length>0},_t.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(_t.prototype,Tt);var Nt=Object.create(null),At=function(){};At.prototype.apply=function(t){return Et()},At.prototype.getMap=function(){return Ct.empty},At.prototype.invert=function(t){return Et()},At.prototype.map=function(t){return Et()},At.prototype.merge=function(t){return null},At.prototype.toJSON=function(){return Et()},At.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Nt[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},At.jsonID=function(t,e){if(t in Nt)throw new RangeError("Duplicate use of step JSON ID "+t);return Nt[t]=e,e.prototype.jsonID=t,e};var zt=function(t,e){this.doc=t,this.failed=e};zt.ok=function(t){return new zt(t,null)},zt.fail=function(t){return new zt(null,t)},zt.fromReplace=function(t,e,n,r){try{return zt.ok(t.replace(e,n,r))}catch(o){if(o instanceof d)return zt.fail(o.message);throw o}};var Rt=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&Dt(t,this.from,this.to)?zt.fail("Structure replace would overwrite content"):zt.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new Ct([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?m.empty:new m(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?m.empty:new m(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,m.fromJSON(t,n.slice),!!n.structure)},e}(At);At.jsonID("replace",Rt);var It=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(Dt(t,this.from,this.gapFrom)||Dt(t,this.gapTo,this.to)))return zt.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return zt.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?zt.fromReplace(t,this.from,this.to,n):zt.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new Ct([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,m.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(At);function Dt(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function jt(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(jt(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return c.fromArray(r)}At.jsonID("replaceAround",It),_t.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,o=t.depth,i=n.before(o+1),s=r.after(o+1),a=i,u=s,h=c.empty,l=0,p=o,f=!1;p>e;p--)f||n.index(p)>0?(f=!0,h=c.from(n.node(p).copy(h)),l++):a--;for(var d=c.empty,v=0,y=o,g=!1;y>e;y--)g||r.after(y+1)<r.end(y)?(g=!0,d=c.from(r.node(y).copy(d)),v++):u++;return this.step(new It(a,u,i,s,new m(h.append(d),l,v),h.size-l,!0))},_t.prototype.wrap=function(t,e){for(var n=c.empty,r=e.length-1;r>=0;r--)n=c.from(e[r].type.create(e[r].attrs,n));var o=t.start,i=t.end;return this.step(new It(o,i,o,i,new m(n,0,0),e.length,!0))},_t.prototype.setBlockType=function(t,e,n,r){var o=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(o.doc,o.mapping.slice(i).map(e),n)){o.clearIncompatible(o.mapping.slice(i).map(e,1),n);var s=o.mapping.slice(i),a=s.map(e,1),u=s.map(e+t.nodeSize,1);return o.step(new It(a,u,a+1,u-1,new m(c.from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},_t.prototype.setNodeMarkup=function(t,e,n,r){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var i=e.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,i);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new It(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new m(c.from(i),0,0),1,!0))},_t.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),o=c.empty,i=c.empty,s=r.depth,a=r.depth-e,u=e-1;s>a;s--,u--){o=c.from(r.node(s).copy(o));var h=n&&n[u];i=c.from(h?h.type.create(h.attrs,i):r.node(s).copy(i))}return this.step(new Rt(t,t,new m(o.append(i),e,e),!0))},_t.prototype.join=function(t,e){void 0===e&&(e=1);var n=new Rt(t-e,t+e,m.empty,!0);return this.step(n)};var Ft=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new m(jt(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return zt.fromReplace(t,this.from,this.to,i)},e.prototype.invert=function(){return new Pt(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(At);At.jsonID("addMark",Ft);var Pt=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new m(jt(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return zt.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new Ft(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(At);function Bt(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}At.jsonID("removeMark",Pt),_t.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,u){if(r.isInline){var h=r.marks;if(!n.isInSet(h)&&u.type.allowsMarkType(n.type)){for(var l=Math.max(c,t),p=Math.min(c+r.nodeSize,e),f=n.addToSet(h),d=0;d<h.length;d++)h[d].isInSet(f)||(s&&s.to==l&&s.mark.eq(h[d])?s.to=p:o.push(s=new Pt(l,p,h[d])));a&&a.to==l?a.to=p:i.push(a=new Ft(l,p,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},_t.prototype.removeMark=function(t,e,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(t,e,(function(r,s){if(r.isInline){i++;var a=null;if(n instanceof ot)for(var c,u=r.marks;c=n.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u);else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var h=Math.min(s+r.nodeSize,e),l=0;l<a.length;l++){for(var p=a[l],f=void 0,d=0;d<o.length;d++){var m=o[d];m.step==i-1&&p.eq(o[d].style)&&(f=m)}f?(f.to=h,f.step=i):o.push({style:p,from:Math.max(s,t),to:h,step:i})}}})),o.forEach((function(t){return r.step(new Pt(t.from,t.to,t.style))})),this},_t.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),o=[],i=t+1,s=0;s<r.childCount;s++){var a=r.child(s),u=i+a.nodeSize,h=n.matchType(a.type,a.attrs);if(h){n=h;for(var l=0;l<a.marks.length;l++)e.allowsMarkType(a.marks[l].type)||this.step(new Pt(i,u,a.marks[l]))}else o.push(new Rt(i,u,m.empty));i=u}if(!n.validEnd){var p=n.fillBefore(c.empty,!0);this.replace(i,i,new m(p,0,0))}for(var f=o.length-1;f>=0;f--)this.step(o[f]);return this},_t.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=m.empty);var r=function(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=m.empty),e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);return Bt(o,i,r)?new Rt(e,n,r):new qt(o,i,r).fit()}(this.doc,t,e,n);return r&&this.step(r),this},_t.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new m(c.from(n),0,0))},_t.prototype.delete=function(t,e){return this.replace(t,e,m.empty)},_t.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var qt=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var r=0;r<=t.depth;r++){var o=t.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(r))})}this.placed=c.empty;for(var i=t.depth;i>0;i--)this.placed=c.from(t.node(i).copy(this.placed))},$t={depth:{configurable:!0}};function Lt(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(Lt(t.firstChild.content,e-1,n)))}function Jt(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Jt(t.lastChild.content,e-1,n)))}function Vt(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function Wt(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,Wt(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(c.empty,!0)))),t.copy(r)}function Ht(t,e,n,r,o){var i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function Ut(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(Ut(i.content,e+1,n,r,i)))}if(e>r){var s=o.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(c.empty,!0))}return t}function Kt(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}function Zt(t){return Zt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function Gt(t,e,n){return Gt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ee(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},Gt(t,e,n||t)}function Yt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}function Xt(t,e){return Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Xt(t,e)}function Qt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ee(t);if(e){var o=ee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return te(this,n)}}function te(t,e){return!e||"object"!==Zt(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ee(t){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ee(t)}function ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oe(t,e,n){return e&&re(t.prototype,e),n&&re(t,n),t}$t.depth.get=function(){return this.frontier.length-1},qt.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;for(var i=this.placed,s=r.depth,a=o.depth;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;var c=new m(i,s,a);return e>-1?new It(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new Rt(r.pos,o.pos,c):void 0},qt.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var n=void 0,r=(e?(n=Vt(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,o=this.depth;o>=0;o--){var i=this.frontier[o],s=i.type,a=i.match,u=void 0,h=void 0;if(1==t&&(r?a.matchType(r.type)||(h=a.fillBefore(c.from(r),!1)):s.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:o,parent:n,inject:h};if(2==t&&r&&(u=a.findWrapping(r.type)))return{sliceDepth:e,frontierDepth:o,parent:n,wrap:u};if(n&&a.matchType(n.type))break}},qt.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=Vt(e,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new m(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)},qt.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=Vt(e,n);if(o.childCount<=1&&n>0){var i=e.size-n<=n+o.size;this.unplaced=new m(Lt(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new m(Lt(e,n,1),n,r)},qt.prototype.placeNodes=function(t){for(var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,o=t.inject,i=t.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var s=0;s<i.length;s++)this.openFrontierNode(i[s]);var a=this.unplaced,u=r?r.content:a.content,h=a.openStart-e,l=0,p=[],f=this.frontier[n],d=f.match,v=f.type;if(o){for(var y=0;y<o.childCount;y++)p.push(o.child(y));d=d.matchFragment(o)}for(var g=u.size+e-(a.content.size-a.openEnd);l<u.childCount;){var k=u.child(l),b=d.matchType(k.type);if(!b)break;(++l>1||0==h||k.content.size)&&(d=b,p.push(Wt(k.mark(v.allowedMarks(k.marks)),1==l?h:0,l==u.childCount?g:-1)))}var w=l==u.childCount;w||(g=-1),this.placed=Jt(this.placed,n,c.from(p)),this.frontier[n].match=d,w&&g<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var x=0,S=u;x<g;x++){var C=S.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),S=C.content}this.unplaced=w?0==e?m.empty:new m(Lt(a.content,e-1,1),e-1,g<0?a.openEnd:e-1):new m(Lt(a.content,e,l),a.openStart,a.openEnd)},qt.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!Ht(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},qt.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=Ht(t,e,o,r,i);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],u=c.match,h=Ht(t,a,c.type,u,!0);if(!h||h.childCount)continue t}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}},qt.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Jt(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t},qt.prototype.openFrontierNode=function(t,e,n){var r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=Jt(this.placed,this.depth,c.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},qt.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(c.empty,!0);t.childCount&&(this.placed=Jt(this.placed,this.frontier.length,t))},Object.defineProperties(qt.prototype,$t),_t.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),o=this.doc.resolve(e);if(Bt(r,o,n))return this.step(new Rt(t,e,n));var i=Kt(r,this.doc.resolve(e));0==i[i.length-1]&&i.pop();var s=-(r.depth+1);i.unshift(s);for(var a=r.depth,c=r.pos-1;a>0;a--,c--){var u=r.node(a).type.spec;if(u.defining||u.isolating)break;i.indexOf(a)>-1?s=a:r.before(a)==c&&i.splice(1,0,-a)}for(var h=i.indexOf(s),l=[],p=n.openStart,f=n.content,d=0;;d++){var v=f.firstChild;if(l.push(v),d==n.openStart)break;f=v.content}p>0&&l[p-1].type.spec.defining&&r.node(h).type!=l[p-1].type?p-=1:p>=2&&l[p-1].isTextblock&&l[p-2].type.spec.defining&&r.node(h).type!=l[p-2].type&&(p-=2);for(var y=n.openStart;y>=0;y--){var g=(y+p+1)%(n.openStart+1),k=l[g];if(k)for(var b=0;b<i.length;b++){var w=i[(b+h)%i.length],x=!0;w<0&&(x=!1,w=-w);var S=r.node(w-1),C=r.index(w-1);if(S.canReplaceWith(C,C,k.type,k.marks))return this.replace(r.before(w),x?o.after(w):e,new m(Ut(n.content,0,n.openStart,g),g,n.openEnd))}}for(var O=this.steps.length,M=i.length-1;M>=0&&(this.replace(t,e,n),!(this.steps.length>O));M--){var _=i[M];_<0||(t=r.before(_),e=o.after(_))}return this},_t.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new m(c.from(n),0,0))},_t.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=Kt(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)};var ie=Object.create(null),se=function(){function t(e,n,r){ne(this,t),this.$anchor=e,this.$head=n,this.ranges=r||[new ae(e.min(n),e.max(n))]}return oe(t,[{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"replace",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.empty,n=e.content.lastChild,r=null,o=0;o<e.openEnd;o++)r=n,n=n.lastChild;for(var i=t.steps.length,s=this.ranges,a=0;a<s.length;a++){var c=s[a],u=c.$from,h=c.$to,l=t.mapping.slice(i);t.replaceRange(l.map(u.pos),l.map(h.pos),a?m.empty:e),0==a&&ye(t,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=t.mapping.slice(n),u=c.map(s.pos),h=c.map(a.pos);o?t.deleteRange(u,h):(t.replaceRangeWith(u,h,e),ye(t,n,e.isInline?-1:1))}}},{key:"getBookmark",value:function(){return he.between(this.$anchor,this.$head).getBookmark()}}],[{key:"findFrom",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.parent.inlineContent?new he(t):ve(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?ve(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):ve(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}return null}},{key:"near",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(t,e)||this.findFrom(t,-e)||new de(t.node(0))}},{key:"atStart",value:function(t){return ve(t,t,0,0,1)||new de(t)}},{key:"atEnd",value:function(t){return ve(t,t,t.content.size,t.childCount,-1)||new de(t)}},{key:"fromJSON",value:function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=ie[e.type];if(!n)throw new RangeError("No selection type ".concat(e.type," defined"));return n.fromJSON(t,e)}},{key:"jsonID",value:function(t,e){if(t in ie)throw new RangeError("Duplicate use of selection JSON ID "+t);return ie[t]=e,e.prototype.jsonID=t,e}}]),t}();se.prototype.visible=!0;var ae=function t(e,n){ne(this,t),this.$from=e,this.$to=n},ce=!1;function ue(t){ce||t.parent.inlineContent||(ce=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}var he=function(t){Yt(n,t);var e=Qt(n);function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return ne(this,n),ue(t),ue(r),e.call(this,t,r)}return oe(n,[{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}},{key:"map",value:function(t,e){var r=t.resolve(e.map(this.head));if(!r.parent.inlineContent)return se.near(r);var o=t.resolve(e.map(this.anchor));return new n(o.parent.inlineContent?o:r,r)}},{key:"replace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.empty;if(Gt(ee(n.prototype),"replace",this).call(this,t,e),e==m.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}},{key:"eq",value:function(t){return t instanceof n&&t.anchor==this.anchor&&t.head==this.head}},{key:"getBookmark",value:function(){return new le(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(t.resolve(e.anchor),t.resolve(e.head))}},{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))}},{key:"between",value:function(t,e,r){var o=t.pos-e.pos;if(r&&!o||(r=o>=0?1:-1),!e.parent.inlineContent){var i=se.findFrom(e,r,!0)||se.findFrom(e,-r,!0);if(!i)return se.near(e,r);e=i.$head}return t.parent.inlineContent||(0==o||(t=(se.findFrom(t,-r,!0)||se.findFrom(t,r,!0)).$anchor).pos<e.pos!=o<0)&&(t=e),new n(t,e)}}]),n}(se);se.jsonID("text",he);var le=function(){function t(e,n){ne(this,t),this.anchor=e,this.head=n}return oe(t,[{key:"map",value:function(e){return new t(e.map(this.anchor),e.map(this.head))}},{key:"resolve",value:function(t){return he.between(t.resolve(this.anchor),t.resolve(this.head))}}]),t}(),pe=function(t){Yt(n,t);var e=Qt(n);function n(t){var r;ne(this,n);var o=t.nodeAfter,i=t.node(0).resolve(t.pos+o.nodeSize);return(r=e.call(this,t,i)).node=o,r}return oe(n,[{key:"map",value:function(t,e){var r=e.mapResult(this.anchor),o=r.deleted,i=r.pos,s=t.resolve(i);return o?se.near(s):new n(s)}},{key:"content",value:function(){return new m(c.from(this.node),0,0)}},{key:"eq",value:function(t){return t instanceof n&&t.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new fe(this.anchor)}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(t.resolve(e.anchor))}},{key:"create",value:function(t,e){return new n(t.resolve(e))}},{key:"isSelectable",value:function(t){return!t.isText&&!1!==t.type.spec.selectable}}]),n}(se);pe.prototype.visible=!1,se.jsonID("node",pe);var fe=function(){function t(e){ne(this,t),this.anchor=e}return oe(t,[{key:"map",value:function(e){var n=e.mapResult(this.anchor),r=n.deleted,o=n.pos;return r?new le(o,o):new t(o)}},{key:"resolve",value:function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&pe.isSelectable(n)?new pe(e):se.near(e)}}]),t}(),de=function(t){Yt(n,t);var e=Qt(n);function n(t){return ne(this,n),e.call(this,t.resolve(0),t.resolve(t.content.size))}return oe(n,[{key:"replace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.empty;if(e==m.empty){t.delete(0,t.doc.content.size);var r=se.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else Gt(ee(n.prototype),"replace",this).call(this,t,e)}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(t){return new n(t)}},{key:"eq",value:function(t){return t instanceof n}},{key:"getBookmark",value:function(){return me}}],[{key:"fromJSON",value:function(t){return new n(t)}}]),n}(se);se.jsonID("all",de);var me={map:function(){return this},resolve:function(t){return new de(t)}};function ve(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e.inlineContent)return he.create(t,n);for(var s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){var a=e.child(s);if(a.isAtom){if(!i&&pe.isSelectable(a))return pe.create(t,n-(o<0?a.nodeSize:0))}else{var c=ve(t,a,n+o,o<0?a.childCount:0,o,i);if(c)return c}n+=a.nodeSize*o}return null}function ye(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o,i=t.steps[r];if(i instanceof Rt||i instanceof It)t.mapping.maps[r].forEach((function(t,e,n,r){null==o&&(o=r)})),t.setSelection(se.near(t.doc.resolve(o),n))}}function ge(t,e){return e&&t?t.bind(e):t}var ke=function t(e,n,r){ne(this,t),this.name=e,this.init=ge(n.init,r),this.apply=ge(n.apply,r)};new ke("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new ke("selection",{init:function(t,e){return t.selection||se.atStart(e.doc)},apply:function(t){return t.selection}}),new ke("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new ke("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}});function be(t,e,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=be(o,e,{})),n[r]=o}return n}var we=function(){function t(e){ne(this,t),this.spec=e,this.props={},e.props&&be(e.props,this,this.props),this.key=e.key?e.key.key:Se("plugin")}return oe(t,[{key:"getState",value:function(t){return t[this.key]}}]),t}(),xe=Object.create(null);function Se(t){return t in xe?t+"$"+ ++xe[t]:(xe[t]=0,t+"$")}var Ce=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";ne(this,t),this.key=Se(e)}return oe(t,[{key:"get",value:function(t){return t.config.pluginsByKey[this.key]}},{key:"getState",value:function(t){return t[this.key]}}]),t}();function Oe(t){this.content=t}Oe.prototype={constructor:Oe,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return-1==o?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new Oe(i)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new Oe(n)},addToStart:function(t,e){return new Oe([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Oe(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(-1==i?o.length:i,0,e,n),new Oe(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=Oe.from(t)).size?new Oe(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=Oe.from(t)).size?new Oe(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Oe.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},Oe.from=function(t){if(t instanceof Oe)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Oe(e)};var Me=Oe;function _e(t){return _e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(t)}function Te(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var a=Te(o.content,i.content,n+1);if(null!=a)return a}n+=o.nodeSize}else n+=o.nodeSize}}function Ee(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=t.child(--o),a=e.child(--i),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){for(var u=0,h=Math.min(s.text.length,a.text.length);u<h&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var l=Ee(s.content,a.content,n-1,r-1);if(l)return l}n-=c,r-=c}else n-=c,r-=c}}var Ne=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},Ae={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};Ne.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var u=s+1;a.nodesBetween(Math.max(0,t-u),Math.min(a.content.size,e-u),n,r+u)}s=c}},Ne.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},Ne.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},Ne.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new Ne(r,this.size+t.size)},Ne.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var s=this.content[o],a=i+s.nodeSize;a>t&&((i<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=a}return new Ne(n,r)},Ne.prototype.cutByIndex=function(t,e){return t==e?Ne.empty:0==t&&e==this.content.length?this:new Ne(this.content.slice(t,e))},Ne.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new Ne(r,o)},Ne.prototype.addToStart=function(t){return new Ne([t].concat(this.content),this.size+t.nodeSize)},Ne.prototype.addToEnd=function(t){return new Ne(this.content.concat(t),this.size+t.nodeSize)},Ne.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},Ae.firstChild.get=function(){return this.content.length?this.content[0]:null},Ae.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},Ae.childCount.get=function(){return this.content.length},Ne.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},Ne.prototype.maybeChild=function(t){return this.content[t]},Ne.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},Ne.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),Te(this,t,e)},Ne.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),Ee(this,t,e,n)},Ne.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return Re(0,t);if(t==this.size)return Re(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?Re(n+1,o):Re(n,r);r=o}},Ne.prototype.toString=function(){return"<"+this.toStringInner()+">"},Ne.prototype.toStringInner=function(){return this.content.join(", ")},Ne.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},Ne.fromJSON=function(t,e){if(!e)return Ne.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ne(e.map(t.nodeFromJSON))},Ne.fromArray=function(t){if(!t.length)return Ne.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new Ne(e||t,n)},Ne.from=function(t){if(!t)return Ne.empty;if(t instanceof Ne)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Ne([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(Ne.prototype,Ae);var ze={index:0,offset:0};function Re(t,e){return ze.index=t,ze.offset=e,ze}function Ie(t,e){if(t===e)return!0;if(!t||"object"!=_e(t)||!e||"object"!=_e(e))return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!Ie(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!Ie(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}Ne.empty=new Ne([],0);var De=function(t,e){this.type=t,this.attrs=e};function je(t){var e=Error.call(this,t);return e.__proto__=je.prototype,e}De.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},De.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},De.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},De.prototype.eq=function(t){return this==t||this.type==t.type&&Ie(this.attrs,t.attrs)},De.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},De.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},De.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},De.setFrom=function(t){if(!t||0==t.length)return De.none;if(t instanceof De)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},De.none=[],je.prototype=Object.create(Error.prototype),je.prototype.constructor=je,je.prototype.name="ReplaceError";var Fe=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},Pe={size:{configurable:!0}};function Be(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,u=a.offset;if(i==e||s.isText){if(u!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(Be(s.content,e-i-1,n-i-1)))}function qe(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=qe(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function $e(t,e,n){if(n.openStart>t.depth)throw new je("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new je("Inconsistent open depths");return Le(t,e,n,0)}function Le(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=Le(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(Ne.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return Ue(i,Ke(t,a.start,a.end,e,r))}var c=t.parent,u=c.content;return Ue(c,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}return Ue(i,Ze(t,e,r))}function Je(t,e){if(!e.type.compatibleContent(t.type))throw new je("Cannot join "+e.type.name+" onto "+t.type.name)}function Ve(t,e,n){var r=t.node(n);return Je(r,e.node(n)),r}function We(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function He(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(We(t.nodeAfter,r),i++));for(var a=i;a<s;a++)We(o.child(a),r);e&&e.depth==n&&e.textOffset&&We(e.nodeBefore,r)}function Ue(t,e){if(!t.type.validContent(e))throw new je("Invalid content for node "+t.type.name);return t.copy(e)}function Ke(t,e,n,r,o){var i=t.depth>o&&Ve(t,e,o+1),s=r.depth>o&&Ve(n,r,o+1),a=[];return He(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(Je(i,s),We(Ue(i,Ke(t,e,n,r,o+1)),a)):(i&&We(Ue(i,Ze(t,e,o+1)),a),He(e,n,o,a),s&&We(Ue(s,Ze(n,r,o+1)),a)),He(r,null,o,a),new Ne(a)}function Ze(t,e,n){var r=[];(He(null,t,n,r),t.depth>n)&&We(Ue(Ve(t,e,n+1),Ze(t,e,n+1)),r);return He(e,null,n,r),new Ne(r)}Pe.size.get=function(){return this.content.size-this.openStart-this.openEnd},Fe.prototype.insertAt=function(t,e){var n=qe(this.content,t+this.openStart,e,null);return n&&new Fe(n,this.openStart,this.openEnd)},Fe.prototype.removeBetween=function(t,e){return new Fe(Be(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},Fe.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},Fe.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},Fe.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},Fe.fromJSON=function(t,e){if(!e)return Fe.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new Fe(Ne.fromJSON(t,e.content),n,r)},Fe.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new Fe(t,n,r)},Object.defineProperties(Fe.prototype,Pe),Fe.empty=new Fe(Ne.empty,0,0);var Ge=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},Ye={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};Ge.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},Ye.parent.get=function(){return this.node(this.depth)},Ye.doc.get=function(){return this.node(0)},Ge.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},Ge.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},Ge.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},Ge.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},Ge.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},Ge.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},Ge.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},Ye.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},Ye.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},Ye.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},Ge.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r},Ge.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return De.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},Ge.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},Ge.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},Ge.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new en(this,t,n)},Ge.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},Ge.prototype.max=function(t){return t.pos>this.pos?t:this},Ge.prototype.min=function(t){return t.pos<this.pos?t:this},Ge.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},Ge.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,u=o-c;if(n.push(i,a,r+c),!u)break;if((i=i.child(a)).isText)break;o=u-1,r+=c+1}return new Ge(e,n,o)},Ge.resolveCached=function(t,e){for(var n=0;n<Xe.length;n++){var r=Xe[n];if(r.pos==e&&r.doc==t)return r}var o=Xe[Qe]=Ge.resolve(t,e);return Qe=(Qe+1)%tn,o},Object.defineProperties(Ge.prototype,Ye);var Xe=[],Qe=0,tn=12,en=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},nn={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};nn.start.get=function(){return this.$from.before(this.depth+1)},nn.end.get=function(){return this.$to.after(this.depth+1)},nn.parent.get=function(){return this.$from.node(this.depth)},nn.startIndex.get=function(){return this.$from.index(this.depth)},nn.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(en.prototype,nn);var rn=Object.create(null),on=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||Ne.empty,this.marks=r||De.none},sn={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};sn.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},sn.childCount.get=function(){return this.content.childCount},on.prototype.child=function(t){return this.content.child(t)},on.prototype.maybeChild=function(t){return this.content.maybeChild(t)},on.prototype.forEach=function(t){this.content.forEach(t)},on.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},on.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},sn.textContent.get=function(){return this.textBetween(0,this.content.size,"")},on.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},sn.firstChild.get=function(){return this.content.firstChild},sn.lastChild.get=function(){return this.content.lastChild},on.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},on.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},on.prototype.hasMarkup=function(t,e,n){return this.type==t&&Ie(this.attrs,e||t.defaultAttrs||rn)&&De.sameSet(this.marks,n||De.none)},on.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},on.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},on.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},on.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return Fe.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new Fe(a,r.depth-i,o.depth-i)},on.prototype.replace=function(t,e,n){return $e(this.resolve(t),this.resolve(e),n)},on.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}},on.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},on.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},on.prototype.resolve=function(t){return Ge.resolveCached(this,t)},on.prototype.resolveNoCache=function(t){return Ge.resolve(this,t)},on.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},sn.isBlock.get=function(){return this.type.isBlock},sn.isTextblock.get=function(){return this.type.isTextblock},sn.inlineContent.get=function(){return this.type.inlineContent},sn.isInline.get=function(){return this.type.isInline},sn.isText.get=function(){return this.type.isText},sn.isLeaf.get=function(){return this.type.isLeaf},sn.isAtom.get=function(){return this.type.isAtom},on.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),cn(this.marks,t)},on.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},on.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=Ne.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},on.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},on.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},on.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=De.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!De.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},on.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},on.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=Ne.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(on.prototype,sn);var an=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):cn(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(on);function cn(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var un=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},hn={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};un.parse=function(t,e){var n=new ln(t,e);if(null==n.next)return un.empty;var r=fn(n);n.next&&n.err("Unexpected trailing text");var o=function(t){var e=Object.create(null);return n(kn(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];kn(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new un(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(gn);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}(function(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var u=n();return o(i(t.expr,e),u),o(i(t.expr,u),u),[r(u)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var h=e,l=0;l<t.min;l++){var p=n();o(i(t.expr,h),p),h=p}if(-1==t.max)o(i(t.expr,h),h);else for(var f=t.min;f<t.max;f++){var d=n();r(h,d),o(i(t.expr,h),d),h=d}return[r(h)]}if("name"==t.type)return[r(e,null,t.value)]}}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],u=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(u)&&r.push(u)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},un.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},un.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},hn.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},hn.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},un.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},un.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(i,s){var a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return Ne.from(s.map((function(t){return t.createAndFill()})));for(var c=0;c<i.next.length;c+=2){var u=i.next[c],h=i.next[c+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(h)){r.push(h);var l=o(h,s.concat(u));if(l)return l}}}(this,[])},un.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},un.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},hn.edgeCount.get=function(){return this.next.length>>1},un.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},un.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(un.prototype,hn),un.empty=new un(!0);var ln=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},pn={next:{configurable:!0}};function fn(t){var e=[];do{e.push(dn(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function dn(t){var e=[];do{e.push(mn(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function mn(t){for(var e=function(t){if(t.eat("(")){var e=fn(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}0==o.length&&t.err("No node type or group '"+e+"' found");return o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=yn(t,e)}return e}function vn(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function yn(t,e){var n=vn(t),r=n;return t.eat(",")&&(r="}"!=t.next?vn(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function gn(t,e){return e-t}function kn(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||e(c)}}(e),n.sort(gn)}function bn(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function wn(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function xn(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new On(t[n]);return e}pn.next.get=function(){return this.tokens[this.pos]},ln.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},ln.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(ln.prototype,pn);var Sn=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=xn(n.attrs),this.defaultAttrs=bn(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},Cn={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Cn.isInline.get=function(){return!this.isBlock},Cn.isTextblock.get=function(){return this.isBlock&&this.inlineContent},Cn.isLeaf.get=function(){return this.contentMatch==un.empty},Cn.isAtom.get=function(){return this.isLeaf||this.spec.atom},Sn.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},Sn.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},Sn.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:wn(this.attrs,t)},Sn.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new on(this,this.computeAttrs(t),Ne.from(e),De.setFrom(n))},Sn.prototype.createChecked=function(t,e,n){if(e=Ne.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new on(this,this.computeAttrs(t),e,De.setFrom(n))},Sn.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=Ne.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(Ne.empty,!0);return o?new on(this,t,e.append(o),De.setFrom(n)):null},Sn.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},Sn.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},Sn.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},Sn.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:De.empty:t},Sn.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new Sn(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(Sn.prototype,Cn);var On=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},Mn={isRequired:{configurable:!0}};Mn.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(On.prototype,Mn);var _n=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=xn(r.attrs),this.rank=e,this.excluded=null;var o=bn(this.attrs);this.instance=o&&new De(this,o)};_n.prototype.create=function(t){return!t&&this.instance?this.instance:new De(this,wn(this.attrs,t))},_n.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new _n(t,r++,e,o)})),n},_n.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},_n.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},_n.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var Tn=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=Me.from(t.nodes),this.spec.marks=Me.from(t.marks),this.nodes=Sn.compile(this.spec.nodes,this),this.marks=_n.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],i=o.spec.content||"",s=o.spec.marks;o.contentMatch=n[i]||(n[i]=un.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==s?null:s?En(this,s.split(" ")):""!=s&&o.inlineContent?null:[]}for(var a in this.marks){var c=this.marks[a],u=c.spec.excludes;c.excluded=null==u?[c]:""==u?[]:En(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function En(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}Tn.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof Sn))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},Tn.prototype.text=function(t,e){var n=this.nodes.text;return new an(n,n.defaultAttrs,t,De.setFrom(e))},Tn.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},Tn.prototype.nodeFromJSON=function(t){return on.fromJSON(this,t)},Tn.prototype.markFromJSON=function(t){return De.fromJSON(this,t)},Tn.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var Nn=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};Nn.prototype.parse=function(t,e){void 0===e&&(e={});var n=new jn(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},Nn.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new jn(this,e,!0);return n.addAll(t,null,e.from,e.to),Fe.maxOpen(n.finish())},Nn.prototype.matchTag=function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(Pn(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},Nn.prototype.matchStyle=function(t,e,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var s=i.getAttrs(e);if(!1===s)continue;i.attrs=s}return i}}},Nn.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=Bn(t)),t.mark=e}))};for(var o in t.marks)r(o);var i;for(var s in t.nodes)i=void 0,(i=t.nodes[s].spec.parseDOM)&&i.forEach((function(t){n(t=Bn(t)),t.node=s}));return e},Nn.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new Nn(t,Nn.schemaRules(t)))};var An={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},zn={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Rn={ol:!0,ul:!0};function In(t){return(t?1:0)|("full"===t?2:0)}var Dn=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=De.none,this.pendingMarks=r,this.stashMarks=[]};Dn.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(Ne.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},Dn.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=Ne.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(Ne.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},Dn.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},Dn.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):qn(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var jn=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=In(e.preserveWhitespace)|(n?4:0);r=o?new Dn(o.type,o.attrs,De.none,De.none,!0,e.topMatch||o.type.contentMatch,i):new Dn(n?null:t.schema.topNodeType,null,De.none,De.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},Fn={top:{configurable:!0},currentPos:{configurable:!0}};function Pn(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Bn(t){var e={};for(var n in t)e[n]=t[n];return e}function qn(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[];return function t(n){i.push(n);for(var r=0;r<n.edgeCount;r++){var o=n.edge(r),s=o.type,a=o.next;if(s==e)return!0;if(i.indexOf(a)<0&&t(a))return!0}}(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}Fn.top.get=function(){return this.nodes[this.open]},jn.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},jn.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(2&n.options||(n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},jn.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();Rn.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&Rn.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(o?o.ignore:zn.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var i,s=this.top,a=this.needsBlock;if(An.hasOwnProperty(r))i=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),i&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,o,!1===o.consuming?n:null)},jn.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},jn.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},jn.prototype.readStyles=function(t){var e=De.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(t[n],t[n+1],this,r);if(!o)continue t;if(o.ignore)return null;if(e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;r=o}return e},jn.prototype.addElementByRule=function(t,e,n){var r,o,i,s=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):r=this.enter(o,e.attrs,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=e.contentElement;"string"==typeof c?c=t.querySelector(c):"function"==typeof c&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,r)}r&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},jn.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&An.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},jn.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},jn.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},jn.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},jn.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?-5&o.options:In(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new Dn(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},jn.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},jn.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},jn.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},Fn.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},jn.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},jn.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},jn.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},jn.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},jn.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1);return function t(s,a){for(;s>=0;s--){var c=n[s];if(""==c){if(s==n.length-1||0==s)continue;for(;a>=i;a--)if(t(s-1,a))return!0;return!1}var u=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;a--}return!0}(n.length-1,this.open)},jn.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},jn.prototype.addPendingMark=function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},jn.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(jn.prototype,Fn);var $n=function(t,e){this.nodes=t||{},this.marks=e||{}};function Ln(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Jn(t){return t.document||window.document}function Vn(t){return Vn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(t)}function Wn(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var a=Wn(o.content,i.content,n+1);if(null!=a)return a}n+=o.nodeSize}else n+=o.nodeSize}}function Hn(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=t.child(--o),a=e.child(--i),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){for(var u=0,h=Math.min(s.text.length,a.text.length);u<h&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var l=Hn(s.content,a.content,n-1,r-1);if(l)return l}n-=c,r-=c}else n-=c,r-=c}}$n.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=Jn(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<t.marks.length;){var c=t.marks[s++],u=r.serializeMark(c,t.isInline,e);u&&(i.push(c,o),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(r.serializeNode(t,e))})),n},$n.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=$n.renderSpec(Jn(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},$n.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},$n.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&$n.renderSpec(Jn(n),r(t,e))},$n.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==_e(a)&&null==a.nodeType&&!Array.isArray(a))for(var u in c=2,a)if(null!=a[u]){var h=u.indexOf(" ");h>0?s.setAttributeNS(u.slice(0,h),u.slice(h+1),a[u]):s.setAttribute(u,a[u])}for(var l=c;l<e.length;l++){var p=e[l];if(0===p){if(l<e.length-1||l>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var f=$n.renderSpec(t,p,n),d=f.dom,m=f.contentDOM;if(s.appendChild(d),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},$n.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new $n(this.nodesFromSchema(t),this.marksFromSchema(t)))},$n.nodesFromSchema=function(t){var e=Ln(t.nodes);return e.text||(e.text=function(t){return t.text}),e},$n.marksFromSchema=function(t){return Ln(t.marks)};var Un=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},Kn={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};Un.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var u=s+1;a.nodesBetween(Math.max(0,t-u),Math.min(a.content.size,e-u),n,r+u)}s=c}},Un.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},Un.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},Un.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new Un(r,this.size+t.size)},Un.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var s=this.content[o],a=i+s.nodeSize;a>t&&((i<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=a}return new Un(n,r)},Un.prototype.cutByIndex=function(t,e){return t==e?Un.empty:0==t&&e==this.content.length?this:new Un(this.content.slice(t,e))},Un.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new Un(r,o)},Un.prototype.addToStart=function(t){return new Un([t].concat(this.content),this.size+t.nodeSize)},Un.prototype.addToEnd=function(t){return new Un(this.content.concat(t),this.size+t.nodeSize)},Un.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},Kn.firstChild.get=function(){return this.content.length?this.content[0]:null},Kn.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},Kn.childCount.get=function(){return this.content.length},Un.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},Un.prototype.maybeChild=function(t){return this.content[t]},Un.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},Un.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),Wn(this,t,e)},Un.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),Hn(this,t,e,n)},Un.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return Gn(0,t);if(t==this.size)return Gn(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?Gn(n+1,o):Gn(n,r);r=o}},Un.prototype.toString=function(){return"<"+this.toStringInner()+">"},Un.prototype.toStringInner=function(){return this.content.join(", ")},Un.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},Un.fromJSON=function(t,e){if(!e)return Un.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new Un(e.map(t.nodeFromJSON))},Un.fromArray=function(t){if(!t.length)return Un.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new Un(e||t,n)},Un.from=function(t){if(!t)return Un.empty;if(t instanceof Un)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Un([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(Un.prototype,Kn);var Zn={index:0,offset:0};function Gn(t,e){return Zn.index=t,Zn.offset=e,Zn}function Yn(t,e){if(t===e)return!0;if(!t||"object"!=Vn(t)||!e||"object"!=Vn(e))return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!Yn(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!Yn(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}Un.empty=new Un([],0);var Xn=function(t,e){this.type=t,this.attrs=e};function Qn(t){var e=Error.call(this,t);return e.__proto__=Qn.prototype,e}Xn.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},Xn.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},Xn.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},Xn.prototype.eq=function(t){return this==t||this.type==t.type&&Yn(this.attrs,t.attrs)},Xn.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},Xn.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},Xn.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},Xn.setFrom=function(t){if(!t||0==t.length)return Xn.none;if(t instanceof Xn)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},Xn.none=[],Qn.prototype=Object.create(Error.prototype),Qn.prototype.constructor=Qn,Qn.prototype.name="ReplaceError";var tr=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},er={size:{configurable:!0}};function nr(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,u=a.offset;if(i==e||s.isText){if(u!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(nr(s.content,e-i-1,n-i-1)))}function rr(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=rr(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function or(t,e,n){if(n.openStart>t.depth)throw new Qn("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Qn("Inconsistent open depths");return ir(t,e,n,0)}function ir(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=ir(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(Un.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return hr(i,lr(t,a.start,a.end,e,r))}var c=t.parent,u=c.content;return hr(c,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}return hr(i,pr(t,e,r))}function sr(t,e){if(!e.type.compatibleContent(t.type))throw new Qn("Cannot join "+e.type.name+" onto "+t.type.name)}function ar(t,e,n){var r=t.node(n);return sr(r,e.node(n)),r}function cr(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ur(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(cr(t.nodeAfter,r),i++));for(var a=i;a<s;a++)cr(o.child(a),r);e&&e.depth==n&&e.textOffset&&cr(e.nodeBefore,r)}function hr(t,e){if(!t.type.validContent(e))throw new Qn("Invalid content for node "+t.type.name);return t.copy(e)}function lr(t,e,n,r,o){var i=t.depth>o&&ar(t,e,o+1),s=r.depth>o&&ar(n,r,o+1),a=[];return ur(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(sr(i,s),cr(hr(i,lr(t,e,n,r,o+1)),a)):(i&&cr(hr(i,pr(t,e,o+1)),a),ur(e,n,o,a),s&&cr(hr(s,pr(n,r,o+1)),a)),ur(r,null,o,a),new Un(a)}function pr(t,e,n){var r=[];(ur(null,t,n,r),t.depth>n)&&cr(hr(ar(t,e,n+1),pr(t,e,n+1)),r);return ur(e,null,n,r),new Un(r)}er.size.get=function(){return this.content.size-this.openStart-this.openEnd},tr.prototype.insertAt=function(t,e){var n=rr(this.content,t+this.openStart,e,null);return n&&new tr(n,this.openStart,this.openEnd)},tr.prototype.removeBetween=function(t,e){return new tr(nr(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},tr.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},tr.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},tr.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},tr.fromJSON=function(t,e){if(!e)return tr.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new tr(Un.fromJSON(t,e.content),n,r)},tr.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new tr(t,n,r)},Object.defineProperties(tr.prototype,er),tr.empty=new tr(Un.empty,0,0);var fr=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},dr={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};fr.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},dr.parent.get=function(){return this.node(this.depth)},dr.doc.get=function(){return this.node(0)},fr.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},fr.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},fr.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},fr.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},fr.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},fr.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},fr.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},dr.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},dr.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},dr.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},fr.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r},fr.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return Xn.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},fr.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},fr.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},fr.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new gr(this,t,n)},fr.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},fr.prototype.max=function(t){return t.pos>this.pos?t:this},fr.prototype.min=function(t){return t.pos<this.pos?t:this},fr.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},fr.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,u=o-c;if(n.push(i,a,r+c),!u)break;if((i=i.child(a)).isText)break;o=u-1,r+=c+1}return new fr(e,n,o)},fr.resolveCached=function(t,e){for(var n=0;n<mr.length;n++){var r=mr[n];if(r.pos==e&&r.doc==t)return r}var o=mr[vr]=fr.resolve(t,e);return vr=(vr+1)%yr,o},Object.defineProperties(fr.prototype,dr);var mr=[],vr=0,yr=12,gr=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},kr={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};kr.start.get=function(){return this.$from.before(this.depth+1)},kr.end.get=function(){return this.$to.after(this.depth+1)},kr.parent.get=function(){return this.$from.node(this.depth)},kr.startIndex.get=function(){return this.$from.index(this.depth)},kr.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(gr.prototype,kr);var br=Object.create(null),wr=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||Un.empty,this.marks=r||Xn.none},xr={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};xr.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},xr.childCount.get=function(){return this.content.childCount},wr.prototype.child=function(t){return this.content.child(t)},wr.prototype.maybeChild=function(t){return this.content.maybeChild(t)},wr.prototype.forEach=function(t){this.content.forEach(t)},wr.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},wr.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},xr.textContent.get=function(){return this.textBetween(0,this.content.size,"")},wr.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},xr.firstChild.get=function(){return this.content.firstChild},xr.lastChild.get=function(){return this.content.lastChild},wr.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},wr.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},wr.prototype.hasMarkup=function(t,e,n){return this.type==t&&Yn(this.attrs,e||t.defaultAttrs||br)&&Xn.sameSet(this.marks,n||Xn.none)},wr.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},wr.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},wr.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},wr.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return tr.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new tr(a,r.depth-i,o.depth-i)},wr.prototype.replace=function(t,e,n){return or(this.resolve(t),this.resolve(e),n)},wr.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}},wr.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},wr.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},wr.prototype.resolve=function(t){return fr.resolveCached(this,t)},wr.prototype.resolveNoCache=function(t){return fr.resolve(this,t)},wr.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},xr.isBlock.get=function(){return this.type.isBlock},xr.isTextblock.get=function(){return this.type.isTextblock},xr.inlineContent.get=function(){return this.type.inlineContent},xr.isInline.get=function(){return this.type.isInline},xr.isText.get=function(){return this.type.isText},xr.isLeaf.get=function(){return this.type.isLeaf},xr.isAtom.get=function(){return this.type.isAtom},wr.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Cr(this.marks,t)},wr.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},wr.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=Un.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},wr.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},wr.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},wr.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=Xn.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!Xn.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},wr.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},wr.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=Un.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(wr.prototype,xr);var Sr=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Cr(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(wr);function Cr(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var Or=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},Mr={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Or.parse=function(t,e){var n=new _r(t,e);if(null==n.next)return Or.empty;var r=Er(n);n.next&&n.err("Unexpected trailing text");var o=function(t){var e=Object.create(null);return n(Dr(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];Dr(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new Or(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(Ir);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}(function(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var u=n();return o(i(t.expr,e),u),o(i(t.expr,u),u),[r(u)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var h=e,l=0;l<t.min;l++){var p=n();o(i(t.expr,h),p),h=p}if(-1==t.max)o(i(t.expr,h),h);else for(var f=t.min;f<t.max;f++){var d=n();r(h,d),o(i(t.expr,h),d),h=d}return[r(h)]}if("name"==t.type)return[r(e,null,t.value)]}}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],u=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(u)&&r.push(u)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},Or.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},Or.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},Mr.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},Mr.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},Or.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},Or.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(i,s){var a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return Un.from(s.map((function(t){return t.createAndFill()})));for(var c=0;c<i.next.length;c+=2){var u=i.next[c],h=i.next[c+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(h)){r.push(h);var l=o(h,s.concat(u));if(l)return l}}}(this,[])},Or.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},Or.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},Mr.edgeCount.get=function(){return this.next.length>>1},Or.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},Or.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(Or.prototype,Mr),Or.empty=new Or(!0);var _r=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},Tr={next:{configurable:!0}};function Er(t){var e=[];do{e.push(Nr(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function Nr(t){var e=[];do{e.push(Ar(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function Ar(t){for(var e=function(t){if(t.eat("(")){var e=Er(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}0==o.length&&t.err("No node type or group '"+e+"' found");return o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=Rr(t,e)}return e}function zr(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function Rr(t,e){var n=zr(t),r=n;return t.eat(",")&&(r="}"!=t.next?zr(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Ir(t,e){return e-t}function Dr(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||e(c)}}(e),n.sort(Ir)}function jr(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Fr(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function Pr(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new $r(t[n]);return e}Tr.next.get=function(){return this.tokens[this.pos]},_r.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},_r.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(_r.prototype,Tr);var Br=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=Pr(n.attrs),this.defaultAttrs=jr(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},qr={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};qr.isInline.get=function(){return!this.isBlock},qr.isTextblock.get=function(){return this.isBlock&&this.inlineContent},qr.isLeaf.get=function(){return this.contentMatch==Or.empty},qr.isAtom.get=function(){return this.isLeaf||this.spec.atom},Br.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},Br.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},Br.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:Fr(this.attrs,t)},Br.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new wr(this,this.computeAttrs(t),Un.from(e),Xn.setFrom(n))},Br.prototype.createChecked=function(t,e,n){if(e=Un.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new wr(this,this.computeAttrs(t),e,Xn.setFrom(n))},Br.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=Un.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(Un.empty,!0);return o?new wr(this,t,e.append(o),Xn.setFrom(n)):null},Br.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},Br.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},Br.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},Br.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:Xn.empty:t},Br.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new Br(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(Br.prototype,qr);var $r=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},Lr={isRequired:{configurable:!0}};Lr.isRequired.get=function(){return!this.hasDefault},Object.defineProperties($r.prototype,Lr);var Jr=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=Pr(r.attrs),this.rank=e,this.excluded=null;var o=jr(this.attrs);this.instance=o&&new Xn(this,o)};Jr.prototype.create=function(t){return!t&&this.instance?this.instance:new Xn(this,Fr(this.attrs,t))},Jr.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new Jr(t,r++,e,o)})),n},Jr.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},Jr.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},Jr.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var Vr=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=Me.from(t.nodes),this.spec.marks=Me.from(t.marks),this.nodes=Br.compile(this.spec.nodes,this),this.marks=Jr.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],i=o.spec.content||"",s=o.spec.marks;o.contentMatch=n[i]||(n[i]=Or.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==s?null:s?Wr(this,s.split(" ")):""!=s&&o.inlineContent?null:[]}for(var a in this.marks){var c=this.marks[a],u=c.spec.excludes;c.excluded=null==u?[c]:""==u?[]:Wr(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Wr(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}Vr.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof Br))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},Vr.prototype.text=function(t,e){var n=this.nodes.text;return new Sr(n,n.defaultAttrs,t,Xn.setFrom(e))},Vr.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},Vr.prototype.nodeFromJSON=function(t){return wr.fromJSON(this,t)},Vr.prototype.markFromJSON=function(t){return Xn.fromJSON(this,t)},Vr.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var Hr=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};Hr.prototype.parse=function(t,e){void 0===e&&(e={});var n=new Xr(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},Hr.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new Xr(this,e,!0);return n.addAll(t,null,e.from,e.to),tr.maxOpen(n.finish())},Hr.prototype.matchTag=function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(to(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},Hr.prototype.matchStyle=function(t,e,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var s=i.getAttrs(e);if(!1===s)continue;i.attrs=s}return i}}},Hr.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=eo(t)),t.mark=e}))};for(var o in t.marks)r(o);var i;for(var s in t.nodes)i=void 0,(i=t.nodes[s].spec.parseDOM)&&i.forEach((function(t){n(t=eo(t)),t.node=s}));return e},Hr.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new Hr(t,Hr.schemaRules(t)))};var Ur={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Kr={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Zr={ol:!0,ul:!0};function Gr(t){return(t?1:0)|("full"===t?2:0)}var Yr=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=Xn.none,this.pendingMarks=r,this.stashMarks=[]};Yr.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(Un.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},Yr.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=Un.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(Un.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},Yr.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},Yr.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):no(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var Xr=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=Gr(e.preserveWhitespace)|(n?4:0);r=o?new Yr(o.type,o.attrs,Xn.none,Xn.none,!0,e.topMatch||o.type.contentMatch,i):new Yr(n?null:t.schema.topNodeType,null,Xn.none,Xn.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},Qr={top:{configurable:!0},currentPos:{configurable:!0}};function to(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function eo(t){var e={};for(var n in t)e[n]=t[n];return e}function no(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[];return function t(n){i.push(n);for(var r=0;r<n.edgeCount;r++){var o=n.edge(r),s=o.type,a=o.next;if(s==e)return!0;if(i.indexOf(a)<0&&t(a))return!0}}(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}Qr.top.get=function(){return this.nodes[this.open]},Xr.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},Xr.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(2&n.options||(n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},Xr.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();Zr.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&Zr.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(o?o.ignore:Kr.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var i,s=this.top,a=this.needsBlock;if(Ur.hasOwnProperty(r))i=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),i&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,o,!1===o.consuming?n:null)},Xr.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},Xr.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},Xr.prototype.readStyles=function(t){var e=Xn.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(t[n],t[n+1],this,r);if(!o)continue t;if(o.ignore)return null;if(e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;r=o}return e},Xr.prototype.addElementByRule=function(t,e,n){var r,o,i,s=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):r=this.enter(o,e.attrs,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=e.contentElement;"string"==typeof c?c=t.querySelector(c):"function"==typeof c&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,r)}r&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},Xr.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&Ur.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},Xr.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},Xr.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},Xr.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},Xr.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?-5&o.options:Gr(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new Yr(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},Xr.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},Xr.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},Xr.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},Qr.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},Xr.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},Xr.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},Xr.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},Xr.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},Xr.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1);return function t(s,a){for(;s>=0;s--){var c=n[s];if(""==c){if(s==n.length-1||0==s)continue;for(;a>=i;a--)if(t(s-1,a))return!0;return!1}var u=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;a--}return!0}(n.length-1,this.open)},Xr.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},Xr.prototype.addPendingMark=function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},Xr.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(Xr.prototype,Qr);var ro=function(t,e){this.nodes=t||{},this.marks=e||{}};function oo(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function io(t){return t.document||window.document}ro.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=io(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<t.marks.length;){var c=t.marks[s++],u=r.serializeMark(c,t.isInline,e);u&&(i.push(c,o),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(r.serializeNode(t,e))})),n},ro.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=ro.renderSpec(io(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},ro.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},ro.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&ro.renderSpec(io(n),r(t,e))},ro.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==Vn(a)&&null==a.nodeType&&!Array.isArray(a))for(var u in c=2,a)if(null!=a[u]){var h=u.indexOf(" ");h>0?s.setAttributeNS(u.slice(0,h),u.slice(h+1),a[u]):s.setAttribute(u,a[u])}for(var l=c;l<e.length;l++){var p=e[l];if(0===p){if(l<e.length-1||l>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var f=ro.renderSpec(t,p,n),d=f.dom,m=f.contentDOM;if(s.appendChild(d),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},ro.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new ro(this.nodesFromSchema(t),this.marksFromSchema(t)))},ro.nodesFromSchema=function(t){var e=oo(t.nodes);return e.text||(e.text=function(t){return t.text}),e},ro.marksFromSchema=function(t){return oo(t.marks)};var so=Math.pow(2,16);function ao(t){return 65535&t}var co=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},uo=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};uo.prototype.recover=function(t){var e=0,n=ao(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/so}(t)},uo.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},uo.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},uo.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var c=this.ranges[s+o],u=this.ranges[s+i],h=a+c;if(t<=h){var l=a+r+((c?t==a?-1:t==h?1:e:e)<0?0:u);if(n)return l;var p=t==(e<0?a:h)?null:s/3+(t-a)*so;return new co(l,e<0?t!=a:t!=h,p)}r+=u-c}return n?t+r:new co(t+r)},uo.prototype.touches=function(t,e){for(var n=0,r=ao(e),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var c=this.ranges[s+o];if(t<=a+c&&s==3*r)return!0;n+=this.ranges[s+i]-c}return!1},uo.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+e],u=this.ranges[r+n];t(s,s+c,a,a+u),o+=u-c}},uo.prototype.invert=function(){return new uo(this.ranges,!this.inverted)},uo.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},uo.offset=function(t){return 0==t?uo.empty:new uo(t<0?[0,-t,0]:[0,0,t])},uo.empty=new uo([]);var ho=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function lo(t){var e=Error.call(this,t);return e.__proto__=lo.prototype,e}ho.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new ho(this.maps,this.mirror,t,e)},ho.prototype.copy=function(){return new ho(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},ho.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},ho.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},ho.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},ho.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},ho.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},ho.prototype.invert=function(){var t=new ho;return t.appendMappingInverted(this),t},ho.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},ho.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},ho.prototype._map=function(t,e,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,t=this.maps[s].recover(i.recover);continue}}i.deleted&&(r=!0),t=i.pos}return n?t:new co(t,r)},lo.prototype=Object.create(Error.prototype),lo.prototype.constructor=lo,lo.prototype.name="TransformError";var po=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new ho},fo={before:{configurable:!0},docChanged:{configurable:!0}};function mo(){throw new Error("Override me")}fo.before.get=function(){return this.docs.length?this.docs[0]:this.doc},po.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new lo(e.failed);return this},po.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},fo.docChanged.get=function(){return this.steps.length>0},po.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(po.prototype,fo);var vo=Object.create(null),yo=function(){};yo.prototype.apply=function(t){return mo()},yo.prototype.getMap=function(){return uo.empty},yo.prototype.invert=function(t){return mo()},yo.prototype.map=function(t){return mo()},yo.prototype.merge=function(t){return null},yo.prototype.toJSON=function(){return mo()},yo.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=vo[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},yo.jsonID=function(t,e){if(t in vo)throw new RangeError("Duplicate use of step JSON ID "+t);return vo[t]=e,e.prototype.jsonID=t,e};var go=function(t,e){this.doc=t,this.failed=e};go.ok=function(t){return new go(t,null)},go.fail=function(t){return new go(null,t)},go.fromReplace=function(t,e,n,r){try{return go.ok(t.replace(e,n,r))}catch(o){if(o instanceof Qn)return go.fail(o.message);throw o}};var ko=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&wo(t,this.from,this.to)?go.fail("Structure replace would overwrite content"):go.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new uo([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?tr.empty:new tr(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?tr.empty:new tr(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,tr.fromJSON(t,n.slice),!!n.structure)},e}(yo);yo.jsonID("replace",ko);var bo=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(wo(t,this.from,this.gapFrom)||wo(t,this.gapTo,this.to)))return go.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return go.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?go.fromReplace(t,this.from,this.to,n):go.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new uo([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,tr.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(yo);function wo(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function xo(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(xo(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return Un.fromArray(r)}yo.jsonID("replaceAround",bo),po.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,o=t.depth,i=n.before(o+1),s=r.after(o+1),a=i,c=s,u=Un.empty,h=0,l=o,p=!1;l>e;l--)p||n.index(l)>0?(p=!0,u=Un.from(n.node(l).copy(u)),h++):a--;for(var f=Un.empty,d=0,m=o,v=!1;m>e;m--)v||r.after(m+1)<r.end(m)?(v=!0,f=Un.from(r.node(m).copy(f)),d++):c++;return this.step(new bo(a,c,i,s,new tr(u.append(f),h,d),u.size-h,!0))},po.prototype.wrap=function(t,e){for(var n=Un.empty,r=e.length-1;r>=0;r--)n=Un.from(e[r].type.create(e[r].attrs,n));var o=t.start,i=t.end;return this.step(new bo(o,i,o,i,new tr(n,0,0),e.length,!0))},po.prototype.setBlockType=function(t,e,n,r){var o=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(o.doc,o.mapping.slice(i).map(e),n)){o.clearIncompatible(o.mapping.slice(i).map(e,1),n);var s=o.mapping.slice(i),a=s.map(e,1),c=s.map(e+t.nodeSize,1);return o.step(new bo(a,c,a+1,c-1,new tr(Un.from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},po.prototype.setNodeMarkup=function(t,e,n,r){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var i=e.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,i);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new bo(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new tr(Un.from(i),0,0),1,!0))},po.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),o=Un.empty,i=Un.empty,s=r.depth,a=r.depth-e,c=e-1;s>a;s--,c--){o=Un.from(r.node(s).copy(o));var u=n&&n[c];i=Un.from(u?u.type.create(u.attrs,i):r.node(s).copy(i))}return this.step(new ko(t,t,new tr(o.append(i),e,e),!0))},po.prototype.join=function(t,e){void 0===e&&(e=1);var n=new ko(t-e,t+e,tr.empty,!0);return this.step(n)};var So=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new tr(xo(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return go.fromReplace(t,this.from,this.to,i)},e.prototype.invert=function(){return new Co(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(yo);yo.jsonID("addMark",So);var Co=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new tr(xo(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return go.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new So(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(yo);function Oo(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}yo.jsonID("removeMark",Co),po.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,u){if(r.isInline){var h=r.marks;if(!n.isInSet(h)&&u.type.allowsMarkType(n.type)){for(var l=Math.max(c,t),p=Math.min(c+r.nodeSize,e),f=n.addToSet(h),d=0;d<h.length;d++)h[d].isInSet(f)||(s&&s.to==l&&s.mark.eq(h[d])?s.to=p:o.push(s=new Co(l,p,h[d])));a&&a.to==l?a.to=p:i.push(a=new So(l,p,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},po.prototype.removeMark=function(t,e,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(t,e,(function(r,s){if(r.isInline){i++;var a=null;if(n instanceof Jr)for(var c,u=r.marks;c=n.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u);else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var h=Math.min(s+r.nodeSize,e),l=0;l<a.length;l++){for(var p=a[l],f=void 0,d=0;d<o.length;d++){var m=o[d];m.step==i-1&&p.eq(o[d].style)&&(f=m)}f?(f.to=h,f.step=i):o.push({style:p,from:Math.max(s,t),to:h,step:i})}}})),o.forEach((function(t){return r.step(new Co(t.from,t.to,t.style))})),this},po.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),o=[],i=t+1,s=0;s<r.childCount;s++){var a=r.child(s),c=i+a.nodeSize,u=n.matchType(a.type,a.attrs);if(u){n=u;for(var h=0;h<a.marks.length;h++)e.allowsMarkType(a.marks[h].type)||this.step(new Co(i,c,a.marks[h]))}else o.push(new ko(i,c,tr.empty));i=c}if(!n.validEnd){var l=n.fillBefore(Un.empty,!0);this.replace(i,i,new tr(l,0,0))}for(var p=o.length-1;p>=0;p--)this.step(o[p]);return this},po.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=tr.empty);var r=function(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=tr.empty),e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);return Oo(o,i,r)?new ko(e,n,r):new Mo(o,i,r).fit()}(this.doc,t,e,n);return r&&this.step(r),this},po.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new tr(Un.from(n),0,0))},po.prototype.delete=function(t,e){return this.replace(t,e,tr.empty)},po.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var Mo=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var r=0;r<=t.depth;r++){var o=t.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(r))})}this.placed=Un.empty;for(var i=t.depth;i>0;i--)this.placed=Un.from(t.node(i).copy(this.placed))},_o={depth:{configurable:!0}};function To(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(To(t.firstChild.content,e-1,n)))}function Eo(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Eo(t.lastChild.content,e-1,n)))}function No(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function Ao(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,Ao(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Un.empty,!0)))),t.copy(r)}function zo(t,e,n,r,o){var i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function Ro(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(Ro(i.content,e+1,n,r,i)))}if(e>r){var s=o.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(Un.empty,!0))}return t}function Io(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}function Do(t){return Do="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Do(t)}_o.depth.get=function(){return this.frontier.length-1},Mo.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;for(var i=this.placed,s=r.depth,a=o.depth;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;var c=new tr(i,s,a);return e>-1?new bo(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new ko(r.pos,o.pos,c):void 0},Mo.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var n=void 0,r=(e?(n=No(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,o=this.depth;o>=0;o--){var i=this.frontier[o],s=i.type,a=i.match,c=void 0,u=void 0;if(1==t&&(r?a.matchType(r.type)||(u=a.fillBefore(Un.from(r),!1)):s.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:o,parent:n,inject:u};if(2==t&&r&&(c=a.findWrapping(r.type)))return{sliceDepth:e,frontierDepth:o,parent:n,wrap:c};if(n&&a.matchType(n.type))break}},Mo.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=No(e,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new tr(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)},Mo.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=No(e,n);if(o.childCount<=1&&n>0){var i=e.size-n<=n+o.size;this.unplaced=new tr(To(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new tr(To(e,n,1),n,r)},Mo.prototype.placeNodes=function(t){for(var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,o=t.inject,i=t.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var s=0;s<i.length;s++)this.openFrontierNode(i[s]);var a=this.unplaced,c=r?r.content:a.content,u=a.openStart-e,h=0,l=[],p=this.frontier[n],f=p.match,d=p.type;if(o){for(var m=0;m<o.childCount;m++)l.push(o.child(m));f=f.matchFragment(o)}for(var v=c.size+e-(a.content.size-a.openEnd);h<c.childCount;){var y=c.child(h),g=f.matchType(y.type);if(!g)break;(++h>1||0==u||y.content.size)&&(f=g,l.push(Ao(y.mark(d.allowedMarks(y.marks)),1==h?u:0,h==c.childCount?v:-1)))}var k=h==c.childCount;k||(v=-1),this.placed=Eo(this.placed,n,Un.from(l)),this.frontier[n].match=f,k&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var b=0,w=c;b<v;b++){var x=w.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),w=x.content}this.unplaced=k?0==e?tr.empty:new tr(To(a.content,e-1,1),e-1,v<0?a.openEnd:e-1):new tr(To(a.content,e,h),a.openStart,a.openEnd)},Mo.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!zo(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},Mo.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=zo(t,e,o,r,i);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],u=c.match,h=zo(t,a,c.type,u,!0);if(!h||h.childCount)continue t}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}},Mo.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Eo(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t},Mo.prototype.openFrontierNode=function(t,e,n){var r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=Eo(this.placed,this.depth,Un.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},Mo.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(Un.empty,!0);t.childCount&&(this.placed=Eo(this.placed,this.frontier.length,t))},Object.defineProperties(Mo.prototype,_o),po.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),o=this.doc.resolve(e);if(Oo(r,o,n))return this.step(new ko(t,e,n));var i=Io(r,this.doc.resolve(e));0==i[i.length-1]&&i.pop();var s=-(r.depth+1);i.unshift(s);for(var a=r.depth,c=r.pos-1;a>0;a--,c--){var u=r.node(a).type.spec;if(u.defining||u.isolating)break;i.indexOf(a)>-1?s=a:r.before(a)==c&&i.splice(1,0,-a)}for(var h=i.indexOf(s),l=[],p=n.openStart,f=n.content,d=0;;d++){var m=f.firstChild;if(l.push(m),d==n.openStart)break;f=m.content}p>0&&l[p-1].type.spec.defining&&r.node(h).type!=l[p-1].type?p-=1:p>=2&&l[p-1].isTextblock&&l[p-2].type.spec.defining&&r.node(h).type!=l[p-2].type&&(p-=2);for(var v=n.openStart;v>=0;v--){var y=(v+p+1)%(n.openStart+1),g=l[y];if(g)for(var k=0;k<i.length;k++){var b=i[(k+h)%i.length],w=!0;b<0&&(w=!1,b=-b);var x=r.node(b-1),S=r.index(b-1);if(x.canReplaceWith(S,S,g.type,g.marks))return this.replace(r.before(b),w?o.after(b):e,new tr(Ro(n.content,0,n.openStart,y),y,n.openEnd))}}for(var C=this.steps.length,O=i.length-1;O>=0&&(this.replace(t,e,n),!(this.steps.length>C));O--){var M=i[O];M<0||(t=r.before(M),e=o.after(M))}return this},po.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new tr(Un.from(n),0,0))},po.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=Io(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)};var jo=Object.create(null),Fo=function(t,e,n){this.ranges=n||[new Bo(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},Po={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};Po.anchor.get=function(){return this.$anchor.pos},Po.head.get=function(){return this.$head.pos},Po.from.get=function(){return this.$from.pos},Po.to.get=function(){return this.$to.pos},Po.$from.get=function(){return this.ranges[0].$from},Po.$to.get=function(){return this.ranges[0].$to},Po.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},Fo.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},Fo.prototype.replace=function(t,e){void 0===e&&(e=Fe.empty);for(var n=e.content.lastChild,r=null,o=0;o<e.openEnd;o++)r=n,n=n.lastChild;for(var i=t.steps.length,s=this.ranges,a=0;a<s.length;a++){var c=s[a],u=c.$from,h=c.$to,l=t.mapping.slice(i);t.replaceRange(l.map(u.pos),l.map(h.pos),a?Fe.empty:e),0==a&&Uo(t,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}},Fo.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=t.mapping.slice(n),u=c.map(s.pos),h=c.map(a.pos);o?t.deleteRange(u,h):(t.replaceRangeWith(u,h,e),Uo(t,n,e.isInline?-1:1))}},Fo.findFrom=function(t,e,n){var r=t.parent.inlineContent?new qo(t):Ho(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?Ho(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):Ho(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}},Fo.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new Vo(t.node(0))},Fo.atStart=function(t){return Ho(t,t,0,0,1)||new Vo(t)},Fo.atEnd=function(t){return Ho(t,t,t.content.size,t.childCount,-1)||new Vo(t)},Fo.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=jo[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},Fo.jsonID=function(t,e){if(t in jo)throw new RangeError("Duplicate use of selection JSON ID "+t);return jo[t]=e,e.prototype.jsonID=t,e},Fo.prototype.getBookmark=function(){return qo.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(Fo.prototype,Po),Fo.prototype.visible=!0;var Bo=function(t,e){this.$from=t,this.$to=e},qo=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=n.resolve(r.map(this.anchor));return new e(i.parent.inlineContent?i:o,o)},e.prototype.replace=function(e,n){if(void 0===n&&(n=Fe.empty),t.prototype.replace.call(this,e,n),n==Fe.empty){var r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new $o(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,o,!0)||t.findFrom(r,-o,!0);if(!s)return t.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i||(n=(t.findFrom(n,-o,!0)||t.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0)&&(n=r),new e(n,r)},Object.defineProperties(e.prototype,n),e}(Fo);Fo.jsonID("text",qo);var $o=function(t,e){this.anchor=t,this.head=e};$o.prototype.map=function(t){return new $o(t.map(this.anchor),t.map(this.head))},$o.prototype.resolve=function(t){return qo.between(t.resolve(this.anchor),t.resolve(this.head))};var Lo=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=n.resolve(s);return i?t.near(a):new e(a)},e.prototype.content=function(){return new Fe(Ne.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new Jo(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(Fo);Lo.prototype.visible=!1,Fo.jsonID("node",Lo);var Jo=function(t){this.anchor=t};Jo.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new $o(r,r):new Jo(r)},Jo.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&Lo.isSelectable(n)?new Lo(e):Fo.near(e)};var Vo=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=Fe.empty),n==Fe.empty){e.delete(0,e.doc.content.size);var r=t.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return Wo},e}(Fo);Fo.jsonID("all",Vo);var Wo={map:function(){return this},resolve:function(t){return new Vo(t)}};function Ho(t,e,n,r,o,i){if(e.inlineContent)return qo.create(t,n);for(var s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){var a=e.child(s);if(a.isAtom){if(!i&&Lo.isSelectable(a))return Lo.create(t,n-(o<0?a.nodeSize:0))}else{var c=Ho(t,a,n+o,o<0?a.childCount:0,o,i);if(c)return c}n+=a.nodeSize*o}}function Uo(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o,i=t.steps[r];if(i instanceof ko||i instanceof bo)t.mapping.maps[r].forEach((function(t,e,n,r){null==o&&(o=r)})),t.setSelection(Fo.near(t.doc.resolve(o),n))}}var Ko=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return De.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||De.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=n==e?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,o)),this.selection.empty||this.setSelection(Fo.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,n),e}(po);function Zo(t,e){return e&&t?t.bind(e):t}var Go=function(t,e,n){this.name=t,this.init=Zo(e.init,n),this.apply=Zo(e.apply,n)},Yo=[new Go("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new Go("selection",{init:function(t,e){return t.selection||Fo.atStart(e.doc)},apply:function(t){return t.selection}}),new Go("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Go("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],Xo=function(t,e){var n=this;this.schema=t,this.fields=Yo.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new Go(t.key,t.spec.state,t))}))},Qo=function(t){this.config=t},ti={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};ti.schema.get=function(){return this.config.schema},ti.plugins.get=function(){return this.config.plugins},Qo.prototype.apply=function(t){return this.applyTransaction(t).state},Qo.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},Qo.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,c=r?r[i].state:this,u=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(u&&n.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",t),!r){r=[];for(var h=0;h<this.config.plugins.length;h++)r.push(h<i?{state:n,n:e.length}:{state:this,n:0})}e.push(u),n=n.applyInner(u),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}},Qo.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new Qo(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<ei.length;i++)ei[i](this,t,e);return e},ti.tr.get=function(){return new Ko(this)},Qo.create=function(t){for(var e=new Xo(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new Qo(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},Qo.prototype.reconfigure=function(t){for(var e=new Xo(this.schema,t.plugins),n=e.fields,r=new Qo(e),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(t,r)}return r},Qo.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==Do(t))for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e},Qo.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var r=new Xo(t.schema,t.plugins),o=new Qo(r);return r.fields.forEach((function(r){if("doc"==r.name)o.doc=on.fromJSON(t.schema,e.doc);else if("selection"==r.name)o.selection=Fo.fromJSON(o.doc,e.selection);else if("storedMarks"==r.name)e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var i in n){var s=n[i],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,i))return void(o[r.name]=a.fromJSON.call(s,t,e[i],o))}o[r.name]=r.init(t,o)}})),o},Qo.addApplyListener=function(t){ei.push(t)},Qo.removeApplyListener=function(t){var e=ei.indexOf(t);e>-1&&ei.splice(e,1)},Object.defineProperties(Qo.prototype,ti);var ei=[];function ni(t,e,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=ni(o,e,{})),n[r]=o}return n}(function(t){this.props={},t.props&&ni(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:oi("plugin")}).prototype.getState=function(t){return t[this.key]};var ri=Object.create(null);function oi(t){return t in ri?t+"$"+ ++ri[t]:(ri[t]=0,t+"$")}var ii=function(t){void 0===t&&(t="key"),this.key=oi(t)};function si(t){this.content=t}ii.prototype.get=function(t){return t.config.pluginsByKey[this.key]},ii.prototype.getState=function(t){return t[this.key]},si.prototype={constructor:si,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return-1==o?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new si(i)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new si(n)},addToStart:function(t,e){return new si([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new si(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(-1==i?o.length:i,0,e,n),new si(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=si.from(t)).size?new si(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=si.from(t)).size?new si(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=si.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach((function(e,n){t[e]=n})),t},get size(){return this.content.length>>1}},si.from=function(t){if(t instanceof si)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new si(e)};function ai(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fi(t,e)}function ci(t){var e=pi();return function(){var n,r=di(t);if(e){var o=di(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ui(this,n)}}function ui(t,e){return!e||"object"!==mi(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hi(t){var e="function"===typeof Map?new Map:void 0;return hi=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return li(t,arguments,di(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),fi(r,t)},hi(t)}function li(t,e,n){return li=pi()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&fi(o,n.prototype),o},li.apply(null,arguments)}function pi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function fi(t,e){return fi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fi(t,e)}function di(t){return di=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},di(t)}function mi(t){return mi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mi(t)}function vi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gi(t,e,n){return e&&yi(t.prototype,e),n&&yi(t,n),t}function ki(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var a=ki(o.content,i.content,n+1);if(null!=a)return a}n+=o.nodeSize}else n+=o.nodeSize}}function bi(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=t.child(--o),a=e.child(--i),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){for(var u=0,h=Math.min(s.text.length,a.text.length);u<h&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var l=bi(s.content,a.content,n-1,r-1);if(l)return l}n-=c,r-=c}else n-=c,r-=c}}var wi=function(){function t(e,n){if(vi(this,t),this.content=e,this.size=n||0,null==n)for(var r=0;r<e.length;r++)this.size+=e[r].nodeSize}return gi(t,[{key:"nodesBetween",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o||null,i)&&a.content.size){var u=s+1;a.nodesBetween(Math.max(0,t-u),Math.min(a.content.size,e-u),n,r+u)}s=c}}},{key:"descendants",value:function(t){this.nodesBetween(0,this.size,t)}},{key:"textBetween",value:function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf?(r?o+="function"===typeof r?r(s):r:s.type.spec.leafText&&(o+=s.type.spec.leafText(s)),i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o}},{key:"append",value:function(e){if(!e.size)return this;if(!this.size)return e;var n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new t(o,this.size+e.size)}},{key:"cut",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&n==this.size)return this;var r=[],o=0;if(n>e)for(var i=0,s=0;s<n;i++){var a=this.content[i],c=s+a.nodeSize;c>e&&((s<e||c>n)&&(a=a.isText?a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=c}return new t(r,o)}},{key:"cutByIndex",value:function(e,n){return e==n?t.empty:0==e&&n==this.content.length?this:new t(this.content.slice(e,n))}},{key:"replaceChild",value:function(e,n){var r=this.content[e];if(r==n)return this;var o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new t(o,i)}},{key:"addToStart",value:function(e){return new t([e].concat(this.content),this.size+e.nodeSize)}},{key:"addToEnd",value:function(e){return new t(this.content.concat(e),this.size+e.nodeSize)}},{key:"eq",value:function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}},{key:"maybeChild",value:function(t){return this.content[t]||null}},{key:"forEach",value:function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}}},{key:"findDiffStart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return ki(this,t,e)}},{key:"findDiffEnd",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.size;return bi(this,t,e,n)}},{key:"findIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==t)return Si(0,t);if(t==this.size)return Si(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position ".concat(t," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var o=this.child(n),i=r+o.nodeSize;if(i>=t)return i==t||e>0?Si(n+1,i):Si(n,r);r=i}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new t(n.map(e.nodeFromJSON))}},{key:"fromArray",value:function(e){if(!e.length)return t.empty;for(var n,r=0,o=0;o<e.length;o++){var i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new t(n||e,r)}},{key:"from",value:function(e){if(!e)return t.empty;if(e instanceof t)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new t([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}]),t}();wi.empty=new wi([],0);var xi={index:0,offset:0};function Si(t,e){return xi.index=t,xi.offset=e,xi}function Ci(t,e){if(t===e)return!0;if(!t||"object"!=mi(t)||!e||"object"!=mi(e))return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!Ci(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!Ci(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}var Oi=function(){function t(e,n){vi(this,t),this.type=e,this.attrs=n}return gi(t,[{key:"addToSet",value:function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e}},{key:"removeFromSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}},{key:"isInSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}},{key:"eq",value:function(t){return this==t||this.type==t.type&&Ci(this.attrs,t.attrs)}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t}}],[{key:"fromJSON",value:function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type ".concat(e.type," in this schema"));return n.create(e.attrs)}},{key:"sameSet",value:function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}},{key:"setFrom",value:function(e){if(!e||Array.isArray(e)&&0==e.length)return t.none;if(e instanceof t)return[e];var n=e.slice();return n.sort((function(t,e){return t.type.rank-e.type.rank})),n}}]),t}();Oi.none=[];var Mi=function(t){ai(n,t);var e=ci(n);function n(){return vi(this,n),e.apply(this,arguments)}return n}(hi(Error)),_i=function(){function t(e,n,r){vi(this,t),this.content=e,this.openStart=n,this.openEnd=r}return gi(t,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(e,n){var r=Ei(this.content,e+this.openStart,n);return r&&new t(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(e,n){return new t(Ti(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;var r=n.openStart||0,o=n.openEnd||0;if("number"!=typeof r||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new t(wi.fromJSON(e,n.content),r,o)}},{key:"maxOpen",value:function(e){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,o=0,i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(var s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new t(e,r,o)}}]),t}();function Ti(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,u=a.offset;if(i==e||s.isText){if(u!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(Ti(s.content,e-i-1,n-i-1)))}function Ei(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=Ei(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function Ni(t,e,n){if(n.openStart>t.depth)throw new Mi("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Mi("Inconsistent open depths");return Ai(t,e,n,0)}function Ai(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=Ai(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(wi.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return ji(i,Fi(t,a.start,a.end,e,r))}var c=t.parent,u=c.content;return ji(c,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}return ji(i,Pi(t,e,r))}function zi(t,e){if(!e.type.compatibleContent(t.type))throw new Mi("Cannot join "+e.type.name+" onto "+t.type.name)}function Ri(t,e,n){var r=t.node(n);return zi(r,e.node(n)),r}function Ii(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Di(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(Ii(t.nodeAfter,r),i++));for(var a=i;a<s;a++)Ii(o.child(a),r);e&&e.depth==n&&e.textOffset&&Ii(e.nodeBefore,r)}function ji(t,e){return t.type.checkContent(e),t.copy(e)}function Fi(t,e,n,r,o){var i=t.depth>o&&Ri(t,e,o+1),s=r.depth>o&&Ri(n,r,o+1),a=[];return Di(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(zi(i,s),Ii(ji(i,Fi(t,e,n,r,o+1)),a)):(i&&Ii(ji(i,Pi(t,e,o+1)),a),Di(e,n,o,a),s&&Ii(ji(s,Pi(n,r,o+1)),a)),Di(r,null,o,a),new wi(a)}function Pi(t,e,n){var r=[];(Di(null,t,n,r),t.depth>n)&&Ii(ji(Ri(t,e,n+1),Pi(t,e,n+1)),r);return Di(e,null,n,r),new wi(r)}_i.empty=new _i(wi.empty,0,0);var Bi=function(){function t(e,n,r){vi(this,t),this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}return gi(t,[{key:"resolveDepth",value:function(t){return null==t?this.depth:t<0?this.depth+t:t}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"node",value:function(t){return this.path[3*this.resolveDepth(t)]}},{key:"index",value:function(t){return this.path[3*this.resolveDepth(t)+1]}},{key:"indexAfter",value:function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}},{key:"start",value:function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}},{key:"end",value:function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}},{key:"before",value:function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}},{key:"after",value:function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r}},{key:"nodeBefore",get:function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}},{key:"posAtIndex",value:function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r}},{key:"marks",value:function(){var t=this.parent,e=this.index();if(0==t.content.size)return Oi.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i}},{key:"marksAcross",value:function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}},{key:"sharedDepth",value:function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}},{key:"blockRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=arguments.length>1?arguments[1]:void 0;if(t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new Ji(this,t,n);return null}},{key:"sameParent",value:function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}},{key:"max",value:function(t){return t.pos>this.pos?t:this}},{key:"min",value:function(t){return t.pos<this.pos?t:this}},{key:"toString",value:function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}}],[{key:"resolve",value:function(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],o=0,i=n,s=e;;){var a=s.content.findIndex(i),c=a.index,u=a.offset,h=i-u;if(r.push(s,c,o+u),!h)break;if((s=s.child(c)).isText)break;i=h-1,o+=u+1}return new t(n,r,i)}},{key:"resolveCached",value:function(e,n){for(var r=0;r<qi.length;r++){var o=qi[r];if(o.pos==n&&o.doc==e)return o}var i=qi[$i]=t.resolve(e,n);return $i=($i+1)%Li,i}}]),t}(),qi=[],$i=0,Li=12,Ji=function(){function t(e,n,r){vi(this,t),this.$from=e,this.$to=n,this.depth=r}return gi(t,[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}]),t}(),Vi=Object.create(null),Wi=function(){function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oi.none;vi(this,t),this.type=e,this.attrs=n,this.marks=o,this.content=r||wi.empty}return gi(t,[{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"child",value:function(t){return this.content.child(t)}},{key:"maybeChild",value:function(t){return this.content.maybeChild(t)}},{key:"forEach",value:function(t){this.content.forEach(t)}},{key:"nodesBetween",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(t,e,n,r,this)}},{key:"descendants",value:function(t){this.nodesBetween(0,this.content.size,t)}},{key:"textContent",get:function(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}},{key:"textBetween",value:function(t,e,n,r){return this.content.textBetween(t,e,n,r)}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"eq",value:function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}},{key:"sameMarkup",value:function(t){return this.hasMarkup(t.type,t.attrs,t.marks)}},{key:"hasMarkup",value:function(t,e,n){return this.type==t&&Ci(this.attrs,e||t.defaultAttrs||Vi)&&Oi.sameSet(this.marks,n||Oi.none)}},{key:"copy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new t(this.type,this.attrs,e,this.marks)}},{key:"mark",value:function(e){return e==this.marks?this:new t(this.type,this.attrs,this.content,e)}},{key:"cut",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}},{key:"slice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t==e)return _i.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i),c=a.content.cut(r.pos-s,o.pos-s);return new _i(c,r.depth-i,o.depth-i)}},{key:"replace",value:function(t,e,n){return Ni(this.resolve(t),this.resolve(e),n)}},{key:"nodeAt",value:function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}}},{key:"childAfter",value:function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}}},{key:"childBefore",value:function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}},{key:"resolve",value:function(t){return Bi.resolveCached(this,t)}},{key:"resolveNoCache",value:function(t){return Bi.resolve(this,t)}},{key:"rangeHasMark",value:function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Hi(this.marks,t)}},{key:"contentMatchAt",value:function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}},{key:"canReplace",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wi.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}},{key:"canReplaceWith",value:function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd}},{key:"canAppend",value:function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}},{key:"check",value:function(){this.type.checkContent(this.content);for(var t=Oi.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!Oi.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map((function(t){return t.type.name}))));this.content.forEach((function(t){return t.check()}))}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t}}],[{key:"fromJSON",value:function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=wi.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)}}]),t}();Wi.prototype.text=void 0;function Hi(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var Ui=function(){function t(e){vi(this,t),this.validEnd=e,this.next=[],this.wrapCache=[]}return gi(t,[{key:"matchType",value:function(t){for(var e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}},{key:"matchFragment",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.childCount,r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r}},{key:"inlineContent",get:function(){return 0!=this.next.length&&this.next[0].type.isInline}},{key:"defaultType",get:function(){for(var t=0;t<this.next.length;t++){var e=this.next[t].type;if(!e.isText&&!e.hasRequiredAttrs())return e}return null}},{key:"compatible",value:function(t){for(var e=0;e<this.next.length;e++)for(var n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}},{key:"fillBefore",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];function o(i,s){var a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return wi.from(s.map((function(t){return t.createAndFill()})));for(var c=0;c<i.next.length;c++){var u=i.next[c],h=u.type,l=u.next;if(!h.isText&&!h.hasRequiredAttrs()&&-1==r.indexOf(l)){r.push(l);var p=o(l,s.concat(h));if(p)return p}}return null}return o(this,[])}},{key:"findWrapping",value:function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}},{key:"computeWrapping",value:function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a++){var c=o.next[a],u=c.type,h=c.next;u.isLeaf||u.hasRequiredAttrs()||u.name in e||r.type&&!h.validEnd||(n.push({match:u.contentMatch,type:u,via:r}),e[u.name]=!0)}}return null}},{key:"edgeCount",get:function(){return this.next.length}},{key:"edge",value:function(t){if(t>=this.next.length)throw new RangeError("There's no ".concat(t,"th edge in this content match"));return this.next[t]}},{key:"toString",value:function(){var t=[];return function e(n){t.push(n);for(var r=0;r<n.next.length;r++)-1==t.indexOf(n.next[r].next)&&e(n.next[r].next)}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o++)r+=(o?", ":"")+e.next[o].type.name+"->"+t.indexOf(e.next[o].next);return r})).join("\n")}}],[{key:"parse",value:function(e,n){var r=new Ki(e,n);if(null==r.next)return t.empty;var o=Zi(r);r.next&&r.err("Unexpected trailing text");var i=function(t){var e=Object.create(null);return n(es(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){for(var i,s=0;s<o.length;s++)o[s][0]==n&&(i=o[s][1]);es(t,r).forEach((function(t){i||o.push([n,i=[]]),-1==i.indexOf(t)&&i.push(t)}))}}))}));for(var i=e[r.join(",")]=new Ui(r.indexOf(t.length-1)>-1),s=0;s<o.length;s++){var a=o[s][1].sort(ts);i.next.push({type:o[s][0],next:e[a.join(",")]||n(a)})}return i}}(function(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"!=t.type){if("star"==t.type){var s=n();return r(e,s),o(i(t.expr,s),s),[r(s)]}if("plus"==t.type){var a=n();return o(i(t.expr,e),a),o(i(t.expr,a),a),[r(a)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var c=e,u=0;u<t.min;u++){var h=n();o(i(t.expr,c),h),c=h}if(-1==t.max)o(i(t.expr,c),c);else for(var l=t.min;l<t.max;l++){var p=n();r(c,p),o(i(t.expr,c),p),c=p}return[r(c)]}if("name"==t.type)return[r(e,void 0,t.value)];throw new Error("Unknown expr type")}for(var f=0;;f++){var d=i(t.exprs[f],e);if(f==t.exprs.length-1)return d;o(d,e=n())}}}(o));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a++){var c=o.next[a],u=c.type,h=c.next;s.push(u.name),!i||u.isText||u.hasRequiredAttrs()||(i=!1),-1==r.indexOf(h)&&r.push(h)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,r),i}}]),t}();Ui.empty=new Ui(!0);var Ki=function(){function t(e,n){vi(this,t),this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}return gi(t,[{key:"next",get:function(){return this.tokens[this.pos]}},{key:"eat",value:function(t){return this.next==t&&(this.pos++||!0)}},{key:"err",value:function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}]),t}();function Zi(t){var e=[];do{e.push(Gi(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function Gi(t){var e=[];do{e.push(Yi(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function Yi(t){for(var e=function(t){if(t.eat("(")){var e=Zi(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}0==o.length&&t.err("No node type or group '"+e+"' found");return o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=Qi(t,e)}return e}function Xi(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function Qi(t,e){var n=Xi(t),r=n;return t.eat(",")&&(r="}"!=t.next?Xi(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function ts(t,e){return e-t}function es(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||e(c)}}(e),n.sort(ts)}var ns=function(){function t(e,n){var r=this;vi(this,t),this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach((function(t){t.tag?r.tags.push(t):t.style&&r.styles.push(t)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}return gi(t,[{key:"parse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new cs(this,e,!1);return n.addAll(t,e.from,e.to),n.finish()}},{key:"parseSlice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new cs(this,e,!0);return n.addAll(t,e.from,e.to),_i.maxOpen(n.finish())}},{key:"matchTag",value:function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(us(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i||void 0}return o}}}},{key:"matchStyle",value:function(t,e,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o],s=i.style;if(!(0!=s.indexOf(t)||i.context&&!n.matchesContext(i.context)||s.length>t.length&&(61!=s.charCodeAt(t.length)||s.slice(t.length+1)!=e))){if(i.getAttrs){var a=i.getAttrs(e);if(!1===a)continue;i.attrs=a||void 0}return i}}}}],[{key:"schemaRules",value:function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=hs(t)),t.mark=e}))};for(var o in t.marks)r(o);var i=function(e){var r=t.nodes[e].spec.parseDOM;r&&r.forEach((function(t){n(t=hs(t)),t.node=e}))};for(var s in t.nodes)i(s);return e}},{key:"fromSchema",value:function(e){return e.cached.domParser||(e.cached.domParser=new t(e,t.schemaRules(e)))}}]),t}(),rs={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},os={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},is={ol:!0,ul:!0};function ss(t,e,n){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&n}var as=function(){function t(e,n,r,o,i,s,a){vi(this,t),this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=o,this.solid=i,this.options=a,this.content=[],this.activeMarks=Oi.none,this.stashMarks=[],this.match=s||(4&a?null:e.contentMatch)}return gi(t,[{key:"findWrapping",value:function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(wi.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}},{key:"finish",value:function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];if(n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))){var r=n;n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-e[0].length))}}var o=wi.from(this.content);return!t&&this.match&&(o=o.append(this.match.fillBefore(wi.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o}},{key:"popFromStashMark",value:function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}},{key:"applyPending",value:function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):ls(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}},{key:"inlineContext",value:function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!rs.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}]),t}(),cs=function(){function t(e,n,r){vi(this,t),this.parser=e,this.options=n,this.isOpen=r,this.open=0;var o,i=n.topNode,s=ss(null,n.preserveWhitespace,0)|(r?4:0);o=i?new as(i.type,i.attrs,Oi.none,Oi.none,!0,n.topMatch||i.type.contentMatch,s):new as(r?null:e.schema.topNodeType,null,Oi.none,Oi.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}return gi(t,[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}}},{key:"addTextNode",value:function(t){var e=t.nodeValue,n=this.top;if(2&n.options||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}},{key:"addElement",value:function(t,e){var n,r=t.nodeName.toLowerCase();is.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&is.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(o?o.ignore:os.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var i,s=this.top,a=this.needsBlock;if(rs.hasOwnProperty(r))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),i=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),i&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,o,!1===o.consuming?n:void 0)}},{key:"leafFallback",value:function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}},{key:"ignoreFallback",value:function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}},{key:"readStyles",value:function(t){var e=Oi.none;t:for(var n=0;n<t.length;n+=2)for(var r=void 0;;){var o=this.parser.matchStyle(t[n],t[n+1],this,r);if(!o)continue t;if(o.ignore)return null;if(e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;r=o}return e}},{key:"addElementByRule",value:function(t,e,n){var r,o,i,s=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):r=this.enter(o,e.attrs||null,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=t;"string"==typeof e.contentElement?c=t.querySelector(e.contentElement):"function"==typeof e.contentElement?c=e.contentElement(t):e.contentElement&&(c=e.contentElement),this.findAround(t,c,!0),this.addAll(c)}r&&this.sync(a)&&this.open--,i&&this.removePendingMark(i,a)}},{key:"addAll",value:function(t,e,n){for(var r=e||0,o=e?t.childNodes[e]:t.firstChild,i=null==n?null:t.childNodes[n];o!=i;o=o.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(o);this.findAtPoint(t,r)}},{key:"findPlace",value:function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0}},{key:"insertNode",value:function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1}},{key:"enter",value:function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r}},{key:"enterInner",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t);var i=ss(t,r,o.options);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new as(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++}},{key:"closeExtra",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}},{key:"sync",value:function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t}},{key:"findAtPoint",value:function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}},{key:"findAround",value:function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}}},{key:"findInText",value:function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}},{key:"matchesContext",value:function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1);return function t(s,a){for(;s>=0;s--){var c=n[s];if(""==c){if(s==n.length-1||0==s)continue;for(;a>=i;a--)if(t(s-1,a))return!0;return!1}var u=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;a--}return!0}(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}}},{key:"addPendingMark",value:function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}},{key:"removePendingMark",value:function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}}}]),t}();function us(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function hs(t){var e={};for(var n in t)e[n]=t[n];return e}function ls(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(!o.allowsMarkType(t))return"continue";var i=[];return function t(n){i.push(n);for(var r=0;r<n.edgeCount;r++){var o=n.edge(r),s=o.type,a=o.next;if(s==e)return!0;if(i.indexOf(a)<0&&t(a))return!0}}(o.contentMatch)?{v:!0}:void 0};for(var o in n){var i=r(o);if("continue"!==i&&"object"===mi(i))return i.v}}var ps=function(){function t(e,n){vi(this,t),this.nodes=e,this.marks=n}return gi(t,[{key:"serializeFragment",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;r||(r=ds(n).createDocumentFragment());var o=r,i=[];return t.forEach((function(t){if(i.length||t.marks.length){for(var r=0,s=0;r<i.length&&s<t.marks.length;){var a=t.marks[s];if(e.marks[a.type.name]){if(!a.eq(i[r][0])||!1===a.type.spec.spanning)break;r++,s++}else s++}for(;r<i.length;)o=i.pop()[1];for(;s<t.marks.length;){var c=t.marks[s++],u=e.serializeMark(c,t.isInline,n);u&&(i.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(e.serializeNodeInner(t,n))})),r}},{key:"serializeNodeInner",value:function(e,n){var r=t.renderSpec(ds(n),this.nodes[e.type.name](e)),o=r.dom,i=r.contentDOM;if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return o}},{key:"serializeNode",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}},{key:"serializeMark",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.marks[e.type.name];return o&&t.renderSpec(ds(r),o(e,n))}}],[{key:"renderSpec",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("string"==typeof n)return{dom:e.createTextNode(n)};if(null!=n.nodeType)return{dom:n};if(n.dom&&null!=n.dom.nodeType)return n;var o,i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));var a=r?e.createElementNS(r,i):e.createElement(i),c=n[1],u=1;if(c&&"object"==mi(c)&&null==c.nodeType&&!Array.isArray(c))for(var h in u=2,c)if(null!=c[h]){var l=h.indexOf(" ");l>0?a.setAttributeNS(h.slice(0,l),h.slice(l+1),c[h]):a.setAttribute(h,c[h])}for(var p=u;p<n.length;p++){var f=n[p];if(0===f){if(p<n.length-1||p>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}var d=t.renderSpec(e,f,r),m=d.dom,v=d.contentDOM;if(a.appendChild(m),v){if(o)throw new RangeError("Multiple content holes");o=v}}return{dom:a,contentDOM:o}}},{key:"fromSchema",value:function(e){return e.cached.domSerializer||(e.cached.domSerializer=new t(this.nodesFromSchema(e),this.marksFromSchema(e)))}},{key:"nodesFromSchema",value:function(t){var e=fs(t.nodes);return e.text||(e.text=function(t){return t.text}),e}},{key:"marksFromSchema",value:function(t){return fs(t.marks)}}]),t}();function fs(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function ds(t){return t.document||window.document}function ms(t){return ms="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ms(t)}function vs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ys(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gs(t,e,n){return e&&ys(t.prototype,e),n&&ys(t,n),t}var ks=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},bs=function(t,e,n,r){return n&&(xs(t,e,n,r,-1)||xs(t,e,n,r,1))},ws=/^(img|br|input|textarea|hr)$/i;function xs(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:Ss(t))){var i=t.parentNode;if(!i||1!=i.nodeType||Os(t)||ws.test(t.nodeName)||"false"==t.contentEditable)return!1;e=ks(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?Ss(t):0}}}function Ss(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Cs(t,e,n){for(var r=0==e,o=e==Ss(t);r||o;){if(t==n)return!0;var i=ks(t);if(!(t=t.parentNode))return!1;r=r&&0==i,o=o&&i==Ss(t)}}function Os(t){for(var e,n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var Ms=function(t){return t.focusNode&&bs(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function _s(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}var Ts="undefined"!=typeof navigator?navigator:null,Es="undefined"!=typeof document?document:null,Ns=Ts&&Ts.userAgent||"",As=/Edge\/(\d+)/.exec(Ns),zs=/MSIE \d/.exec(Ns),Rs=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ns),Is=!!(zs||Rs||As),Ds=zs?document.documentMode:Rs?+Rs[1]:As?+As[1]:0,js=!Is&&/gecko\/(\d+)/i.test(Ns);js&&(/Firefox\/(\d+)/.exec(Ns)||[0,0])[1];var Fs=!Is&&/Chrome\/(\d+)/.exec(Ns),Ps=!!Fs,Bs=Fs?+Fs[1]:0,qs=!Is&&!!Ts&&/Apple Computer/.test(Ts.vendor),$s=qs&&(/Mobile\/\w+/.test(Ns)||!!Ts&&Ts.maxTouchPoints>2),Ls=$s||!!Ts&&/Mac/.test(Ts.platform),Js=/Android \d/.test(Ns),Vs=!!Es&&"webkitFontSmoothing"in Es.documentElement.style,Ws=Vs?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var Hs=function(t){t&&(this.nodeName=t)};Hs.prototype=Object.create(null);new Hs;function Us(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;var o=t.docView.nearestDesc(n.focusNode),i=o&&0==o.size,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;var a,c,u=r.resolve(s);if(Ms(n)){for(a=u;o&&!o.node;)o=o.parent;var h=o.node;if(o&&h.isAtom&&Lo.isSelectable(h)&&o.parent&&(!h.isInline||!Cs(n.focusNode,n.focusOffset,o.dom))){var l=o.posBefore;c=new Lo(s==l?u:r.resolve(l))}}else{var p=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(p<0)return null;a=r.resolve(p)}if(!c){var f="pointer"==e||t.state.selection.head<u.pos&&!i?1:-1;c=oa(t,a,u,f)}return c}function Ks(t){return t.editable?t.hasFocus():ia(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Zs(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.state.selection;if(na(t,n),Ks(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ps){var r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&bs(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)ea(t);else{var i,s,a=n.anchor,c=n.head;!Gs||n instanceof qo||(n.$from.parent.inlineContent||(i=Ys(t,n.from)),n.empty||n.$from.parent.inlineContent||(s=Ys(t,n.to))),t.docView.setSelection(a,c,t.root,e),Gs&&(i&&Qs(i),s&&Qs(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&ta(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}var Gs=qs||Ps&&Bs<63;function Ys(t,e){var n=t.docView.domFromPos(e,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(qs&&i&&"false"==i.contentEditable)return Xs(i);if((!i||"false"==i.contentEditable)&&(!s||"false"==s.contentEditable)){if(i)return Xs(i);if(s)return Xs(s)}}function Xs(t){return t.contentEditable="true",qs&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Qs(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function ta(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);var n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout((function(){Ks(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}function ea(t){var e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,ks(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&Is&&Ds<=11&&(r.disabled=!0,r.disabled=!1)}function na(t,e){if(e instanceof Lo){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(ra(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else ra(t)}function ra(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function oa(t,e,n,r){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||qo.between(e,n,r)}function ia(t){var e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function sa(t,e){var n=t.selection,r=n.$anchor,o=n.$head,i=e>0?r.max(o):r.min(o),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Fo.findFrom(s,e)}function aa(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function ca(t,e,n){var r=t.state.selection;if(!(r instanceof qo)){if(r instanceof Lo&&r.node.isInline)return aa(t,new qo(e>0?r.$to:r.$from));var o=sa(t.state,e);return!!o&&aa(t,o)}if(!r.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var i=sa(t.state,e);return!!(i&&i instanceof Lo)&&aa(t,i)}if(!(Ls&&n.indexOf("m")>-1)){var s,a=r.$head,c=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter;if(!c||c.isText)return!1;var u=e<0?a.pos-c.nodeSize:a.pos;return!!(c.isAtom||(s=t.docView.descAt(u))&&!s.contentDOM)&&(Lo.isSelectable(c)?aa(t,new Lo(e<0?t.state.doc.resolve(a.pos-c.nodeSize):a)):!!Vs&&aa(t,new qo(t.state.doc.resolve(e<0?u:u+c.nodeSize))))}}function ua(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function ha(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function la(t){var e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,s=!1;for(js&&1==n.nodeType&&r<ua(n)&&ha(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var a=n.childNodes[r-1];if(ha(a))o=n,i=--r;else{if(3!=a.nodeType)break;r=(n=a).nodeValue.length}}else{if(fa(n))break;for(var c=n.previousSibling;c&&ha(c);)o=n.parentNode,i=ks(c),c=c.previousSibling;if(c)r=ua(n=c);else{if((n=n.parentNode)==t.dom)break;r=0}}s?da(t,n,r):o&&da(t,o,i)}}function pa(t){var e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(n){for(var o,i,s=ua(n);;)if(r<s){if(1!=n.nodeType)break;if(!ha(n.childNodes[r]))break;o=n,i=++r}else{if(fa(n))break;for(var a=n.nextSibling;a&&ha(a);)o=a.parentNode,i=ks(a)+1,a=a.nextSibling;if(a)r=0,s=ua(n=a);else{if((n=n.parentNode)==t.dom)break;r=s=0}}o&&da(t,o,i)}}function fa(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function da(t,e,n){var r=t.domSelection();if(Ms(r)){var o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();var i=t.state;setTimeout((function(){t.state==i&&Zs(t)}),50)}function ma(t,e,n){var r=t.state.selection;if(r instanceof qo&&!r.empty||n.indexOf("s")>-1)return!1;if(Ls&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var s=sa(t.state,e);if(s&&s instanceof Lo)return aa(t,s)}if(!o.parent.inlineContent){var a=e<0?o:i,c=r instanceof Vo?Fo.near(a,e):Fo.findFrom(a,e);return!!c&&aa(t,c)}return!1}function va(t,e){if(!(t.state.selection instanceof qo))return!0;var n=t.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var a=t.state.tr;return e<0?a.delete(r.pos-s.nodeSize,r.pos):a.delete(r.pos,r.pos+s.nodeSize),t.dispatch(a),!0}return!1}function ya(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function ga(t,e){var n=e.keyCode,r=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==n||Ls&&72==n&&"c"==r?va(t,-1)||la(t):46==n||Ls&&68==n&&"c"==r?va(t,1)||pa(t):13==n||27==n||(37==n||Ls&&66==n&&"c"==r?ca(t,-1,r)||la(t):39==n||Ls&&70==n&&"c"==r?ca(t,1,r)||pa(t):38==n||Ls&&80==n&&"c"==r?ma(t,-1,r)||la(t):40==n||Ls&&78==n&&"c"==r?function(t){if(!qs||t.state.selection.$head.parentOffset>0)return!1;var e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;ya(t,o,"true"),setTimeout((function(){return ya(t,o,"false")}),20)}return!1}(t)||ma(t,1,r)||pa(t):r==(Ls?"m":"c")&&(66==n||73==n||89==n||90==n))}function ka(t,e){t.someProp("transformCopied",(function(n){e=n(e,t)}));for(var n=[],r=e,o=r.content,i=r.openStart,s=r.openEnd;i>1&&s>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,s--;var a=o.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),o=a.content}var c=t.someProp("clipboardSerializer")||ps.fromSchema(t.state.schema),u=Ea(),h=u.createElement("div");h.appendChild(c.serializeFragment(o,{document:u}));for(var l,p=h.firstChild,f=0;p&&1==p.nodeType&&(l=_a[p.nodeName.toLowerCase()]);){for(var d=l.length-1;d>=0;d--){for(var m=u.createElement(l[d]);h.firstChild;)m.appendChild(h.firstChild);h.appendChild(m),f++}p=h.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice","".concat(i," ").concat(s).concat(f?" -".concat(f):""," ").concat(JSON.stringify(n))),{dom:h,text:t.someProp("clipboardTextSerializer",(function(n){return n(e,t)}))||e.content.textBetween(0,e.content.size,"\n\n")}}function ba(t,e,n,r,o){var i,s,a=o.parent.type.spec.code;if(!n&&!e)return null;var c=e&&(r||a||!n);if(c){if(t.someProp("transformPastedText",(function(n){e=n(e,a||r,t)})),a)return e?new _i(wi.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):_i.empty;var u=t.someProp("clipboardTextParser",(function(n){return n(e,o,r,t)}));if(u)s=u;else{var h=o.marks(),l=t.state.schema,p=ps.fromSchema(l);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((function(t){var e=i.appendChild(document.createElement("p"));t&&e.appendChild(p.serializeNode(l.text(t,h)))}))}}else t.someProp("transformPastedHTML",(function(e){n=e(n,t)})),i=function(t){var e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=Ea().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(t);(n=o&&_a[o[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""));if(r.innerHTML=t,n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n),Vs&&function(t){for(var e=t.querySelectorAll(Ps?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<e.length;n++){var r=e[n];1==r.childNodes.length&&"\xa0"==r.textContent&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}(i);var f=i&&i.querySelector("[data-pm-slice]"),d=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(d&&d[3])for(var m=+d[3];m>0;m--){for(var v=i.firstChild;v&&1!=v.nodeType;)v=v.nextSibling;if(!v)break;i=v}if(!s){var y=t.someProp("clipboardParser")||t.someProp("domParser")||ns.fromSchema(t.state.schema);s=y.parseSlice(i,{preserveWhitespace:!(!c&&!d),context:o,ruleFromNode:function(t){return"BR"!=t.nodeName||t.nextSibling||!t.parentNode||wa.test(t.parentNode.nodeName)?null:{ignore:!0}}})}if(d)s=function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(u){return t}for(var o=t.content,i=t.openStart,s=t.openEnd,a=n.length-2;a>=0;a-=2){var c=r.nodes[n[a]];if(!c||c.hasRequiredAttrs())break;o=wi.from(c.create(n[a+1],o)),i++,s++}return new _i(o,i,s)}(Ma(s,+d[1],+d[2]),d[4]);else if(s=_i.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n).contentMatchAt(e.index(n)),o=void 0,i=[];if(t.forEach((function(t){if(i){var e,n=r.findWrapping(t.type);if(!n)return i=null;if(e=i.length&&o.length&&Sa(n,o,t,i[i.length-1],0))i[i.length-1]=e;else{i.length&&(i[i.length-1]=Ca(i[i.length-1],o.length));var s=xa(t,n);i.push(s),r=r.matchType(s.type),o=n}}})),i)return{v:wi.from(i)}},r=e.depth;r>=0;r--){var o=n(r);if("object"===ms(o))return o.v}return t}(s.content,o),!0),s.openStart||s.openEnd){for(var g=0,k=0,b=s.content.firstChild;g<s.openStart&&!b.type.spec.isolating;g++,b=b.firstChild);for(var w=s.content.lastChild;k<s.openEnd&&!w.type.spec.isolating;k++,w=w.lastChild);s=Ma(s,g,k)}return t.someProp("transformPasted",(function(e){s=e(s,t)})),s}var wa=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function xa(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.length-1;r>=n;r--)t=e[r].create(null,wi.from(t));return t}function Sa(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){var i=Sa(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(wi.from(xa(n,t,o+1))))}}function Ca(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,Ca(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(wi.empty,!0);return t.copy(n.append(r))}function Oa(t,e,n,r,o,i){var s=e<0?t.firstChild:t.lastChild,a=s.content;return o<r-1&&(a=Oa(a,e,n,r,o+1,i)),o>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,t.childCount>1||i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(wi.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function Ma(t,e,n){return e<t.openStart&&(t=new _i(Oa(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new _i(Oa(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var _a={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Ta=null;function Ea(){return Ta||(Ta=document.implementation.createHTMLDocument("title"))}var Na={},Aa={};function za(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Ra(t){return{left:t.clientX,top:t.clientY}}function Ia(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if("object"===ms(c))return c.v}return!1}function Da(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function ja(t,e,n,r,o){return Ia(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(function(n){return n(t,e,r)}))||(o?function(t,e){if(-1==e)return!1;var n,r,o=t.state.selection;o instanceof Lo&&(n=o.node);for(var i=t.state.doc.resolve(e),s=i.depth+1;s>0;s--){var a=s>i.depth?i.nodeAfter:i.node(s);if(Lo.isSelectable(a)){r=n&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=r&&(Da(t,Lo.create(t.state.doc,r),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),r=n.nodeAfter;return!!(r&&r.isAtom&&Lo.isSelectable(r))&&(Da(t,new Lo(n),"pointer"),!0)}(t,n))}function Fa(t,e,n,r){return Ia(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function Pa(t,e,n,r){return Ia(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(function(n){return n(t,e,r)}))||function(t,e,n){if(0!=n.button)return!1;var r=t.state.doc;if(-1==e)return!!r.inlineContent&&(Da(t,qo.create(r,0,r.content.size),"pointer"),!0);for(var o=r.resolve(e),i=o.depth+1;i>0;i--){var s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)Da(t,qo.create(r,a+1,a+1+s.content.size),"pointer");else{if(!Lo.isSelectable(s))continue;Da(t,Lo.create(r,a),"pointer")}return!0}}(t,n,r)}function Ba(t){return Ha(t)}Aa.keydown=function(t,e){var n=e;if(t.input.shiftKey=16==n.keyCode||n.shiftKey,!La(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!Js||!Ps||13!=n.keyCode))if(229!=n.keyCode&&t.domObserver.forceFlush(),!$s||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)t.someProp("handleKeyDown",(function(e){return e(t,n)}))||ga(t,n)?n.preventDefault():za(t,"key");else{var r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout((function(){t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",(function(e){return e(t,_s(13,"Enter"))})),t.input.lastIOSEnter=0)}),200)}},Aa.keyup=function(t,e){16==e.keyCode&&(t.input.shiftKey=!1)},Aa.keypress=function(t,e){var n=e;if(!(La(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ls&&n.metaKey))if(t.someProp("handleKeyPress",(function(e){return e(t,n)})))n.preventDefault();else{var r=t.state.selection;if(!(r instanceof qo)||!r.$from.sameParent(r.$to)){var o=String.fromCharCode(n.charCode);t.someProp("handleTextInput",(function(e){return e(t,r.$from.pos,r.$to.pos,o)}))||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}}};var qa=Ls?"metaKey":"ctrlKey";Na.mousedown=function(t,e){var n=e;t.input.shiftKey=n.shiftKey;var r=Ba(t),o=Date.now(),i="singleClick";o-t.input.lastClick.time<500&&function(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}(n,t.input.lastClick)&&!n[qa]&&("singleClick"==t.input.lastClick.type?i="doubleClick":"doubleClick"==t.input.lastClick.type&&(i="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};var s=t.posAtCoords(Ra(n));s&&("singleClick"==i?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new $a(t,s,n,!!r)):("doubleClick"==i?Fa:Pa)(t,s.pos,s.inside,n)?n.preventDefault():za(t,"pointer"))};var $a=function(){function t(e,n,r,o){var i,s,a=this;if(vs(this,t),this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[qa],this.allowDefault=r.shiftKey,n.inside>-1)i=e.state.doc.nodeAt(n.inside),s=n.inside;else{var c=e.state.doc.resolve(n.pos);i=c.parent,s=c.depth?c.before():0}var u=o?null:r.target,h=u?e.docView.nearestDesc(u,!0):null;this.target=h?h.dom:null;var l=e.state.selection;(0==r.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||l instanceof Lo&&l.from<=s&&l.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!js||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){a.view.input.mouseDown==a&&a.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),za(e,"pointer")}return gs(t,[{key:"done",value:function(){var t=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return Zs(t.view)})),this.view.input.mouseDown=null}},{key:"up",value:function(t){if(this.done(),this.view.dom.contains(t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Ra(t))),this.updateAllowDefault(t),this.allowDefault||!e?za(this.view,"pointer"):ja(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||qs&&this.mightDrag&&!this.mightDrag.node.isAtom||Ps&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(Da(this.view,Fo.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):za(this.view,"pointer")}}},{key:"move",value:function(t){this.updateAllowDefault(t),za(this.view,"pointer"),0==t.buttons&&this.done()}},{key:"updateAllowDefault",value:function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}]),t}();function La(t,e){return!!t.composing||!!(qs&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}Na.touchstart=function(t){t.input.lastTouch=Date.now(),Ba(t),za(t,"pointer")},Na.touchmove=function(t){t.input.lastTouch=Date.now(),za(t,"pointer")},Na.contextmenu=function(t){return Ba(t)};var Ja=Js?5e3:-1;function Va(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout((function(){return Ha(t)}),e))}function Wa(t){var e;for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=((e=document.createEvent("Event")).initEvent("event",!0,!0),e.timeStamp));t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Ha(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(Js&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Wa(t),e||t.docView&&t.docView.dirty){var n=Us(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}Aa.compositionstart=Aa.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),Ha(t,!0),t.markCursor=null;else if(Ha(t),js&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.domSelectionRange(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){t.domSelection().collapse(s,s.nodeValue.length);break}o=s,i=-1}t.input.composing=!0}Va(t,Ja)},Aa.compositionend=function(t,e){t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,Va(t,20))};var Ua=Is&&Ds<15||$s&&Ws<604;function Ka(t,e,n,r){var o=ba(t,e,n,t.input.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",(function(e){return e(t,r,o||_i.empty)})))return!0;if(!o)return!1;var i=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(o),s=i?t.state.tr.replaceSelectionWith(i,t.input.shiftKey):t.state.tr.replaceSelection(o);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Na.copy=Aa.cut=function(t,e){var n=e,r=t.state.selection,o="cut"==n.type;if(!r.empty){var i=Ua?null:n.clipboardData,s=ka(t,r.content()),a=s.dom,c=s.text;i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",c)):function(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Aa.paste=function(t,e){var n=e;if(!t.composing||Js){var r=Ua?null:n.clipboardData;r&&Ka(t,r.getData("text/plain"),r.getData("text/html"),n)?n.preventDefault():function(t,e){if(t.dom.parentNode){var n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ka(t,r.value,null,e):Ka(t,r.textContent,r.innerHTML,e)}),50)}}(t,n)}};var Za=function t(e,n){vs(this,t),this.slice=e,this.move=n},Ga=Ls?"altKey":"ctrlKey";for(var Ya in Na.dragstart=function(t,e){var n=e,r=t.input.mouseDown;if(r&&r.done(),n.dataTransfer){var o=t.state.selection,i=o.empty?null:t.posAtCoords(Ra(n));if(i&&i.pos>=o.from&&i.pos<=(o instanceof Lo?o.to-1:o.to));else if(r&&r.mightDrag)t.dispatch(t.state.tr.setSelection(Lo.create(t.state.doc,r.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){var s=t.docView.nearestDesc(n.target,!0);s&&s.node.type.spec.draggable&&s!=t.docView&&t.dispatch(t.state.tr.setSelection(Lo.create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),c=ka(t,a),u=c.dom,h=c.text;n.dataTransfer.clearData(),n.dataTransfer.setData(Ua?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ua||n.dataTransfer.setData("text/plain",h),t.dragging=new Za(a,!n[Ga])}},Na.dragend=function(t){var e=t.dragging;window.setTimeout((function(){t.dragging==e&&(t.dragging=null)}),50)},Aa.dragover=Aa.dragenter=function(t,e){return e.preventDefault()},Aa.drop=function(t,e){var n=e,r=t.dragging;if(t.dragging=null,n.dataTransfer){var o=t.posAtCoords(Ra(n));if(o){var i=t.state.doc.resolve(o.pos),s=r&&r.slice;s?t.someProp("transformPasted",(function(e){s=e(s,t)})):s=ba(t,n.dataTransfer.getData(Ua?"Text":"text/plain"),Ua?null:n.dataTransfer.getData("text/html"),!1,i);var a=!(!r||n[Ga]);if(t.someProp("handleDrop",(function(e){return e(t,n,s||_i.empty,a)})))n.preventDefault();else if(s){n.preventDefault();var c=s?function(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,u=r.index(a)+(c>0?1:0),h=r.node(a),l=!1;if(1==s)l=h.canReplace(u,u,o);else{var p=h.contentMatchAt(u).findWrapping(o.firstChild.type);l=p&&h.canReplaceWith(u,u,p[0])}if(l)return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}(t.state.doc,i.pos,s):i.pos;null==c&&(c=i.pos);var u=t.state.tr;a&&u.deleteSelection();var h=u.mapping.map(c),l=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,p=u.doc;if(l?u.replaceRangeWith(h,h,s.content.firstChild):u.replaceRange(h,h,s),!u.doc.eq(p)){var f=u.doc.resolve(h);if(l&&Lo.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new Lo(f));else{var d=u.mapping.map(c);u.mapping.maps[u.mapping.maps.length-1].forEach((function(t,e,n,r){return d=r})),u.setSelection(oa(t,f,u.doc.resolve(d)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))}}}}},Na.focus=function(t){t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Zs(t)}),20))},Na.blur=function(t,e){var n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},Na.beforeinput=function(t,e){if(Ps&&Js&&"deleteContentBackward"==e.inputType){t.domObserver.flushSoon();var n=t.input.domChangeCount;setTimeout((function(){if(t.input.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,_s(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},Aa)Na[Ya]=Aa[Ya];function Xa(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var Qa=function(){function t(e,n){vs(this,t),this.toDOM=e,this.spec=n||oc,this.side=this.spec.side||0}return gs(t,[{key:"map",value:function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new nc(i-n,i-n,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(e){return this==e||e instanceof t&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Xa(this.spec,e.spec))}},{key:"destroy",value:function(t){this.spec.destroy&&this.spec.destroy(t)}}]),t}(),tc=function(){function t(e,n){vs(this,t),this.attrs=e,this.spec=n||oc}return gs(t,[{key:"map",value:function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new nc(o,i,this)}},{key:"valid",value:function(t,e){return e.from<e.to}},{key:"eq",value:function(e){return this==e||e instanceof t&&Xa(this.attrs,e.attrs)&&Xa(this.spec,e.spec)}},{key:"destroy",value:function(){}}],[{key:"is",value:function(e){return e.type instanceof t}}]),t}(),ec=function(){function t(e,n){vs(this,t),this.attrs=e,this.spec=n||oc}return gs(t,[{key:"map",value:function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new nc(o.pos-n,i.pos-n,this)}},{key:"valid",value:function(t,e){var n,r=t.content.findIndex(e.from),o=r.index,i=r.offset;return i==e.from&&!(n=t.child(o)).isText&&i+n.nodeSize==e.to}},{key:"eq",value:function(e){return this==e||e instanceof t&&Xa(this.attrs,e.attrs)&&Xa(this.spec,e.spec)}},{key:"destroy",value:function(){}}]),t}(),nc=function(){function t(e,n,r){vs(this,t),this.from=e,this.to=n,this.type=r}return gs(t,[{key:"copy",value:function(e,n){return new t(e,n,this.type)}},{key:"eq",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}},{key:"map",value:function(t,e,n){return this.type.map(t,this,e,n)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof tc}}],[{key:"widget",value:function(e,n,r){return new t(e,e,new Qa(n,r))}},{key:"inline",value:function(e,n,r,o){return new t(e,n,new tc(r,o))}},{key:"node",value:function(e,n,r,o){return new t(e,n,new ec(r,o))}}]),t}(),rc=[],oc={},ic=function(){function t(e,n){vs(this,t),this.local=e.length?e:rc,this.children=n.length?n:rc}return gs(t,[{key:"find",value:function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r}},{key:"findInner",value:function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=e&&s.to>=t&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var c=this.children[a]+1;this.children[a+2].findInner(t-c,e-c,n,r+c,o)}}},{key:"map",value:function(t,e,n){return this==sc||0==t.maps.length?this:this.mapInner(t,e,0,0,n||oc)}},{key:"mapInner",value:function(e,n,r,o,i){for(var s,a=0;a<this.local.length;a++){var c=this.local[a].map(e,r,o);c&&c.type.valid(n,c)?(s||(s=[])).push(c):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?cc(this.children,s||[],e,n,r,o,i):s?new t(s.sort(fc),rc):sc}},{key:"add",value:function(e,n){return n.length?this==sc?t.create(e,n):this.addInner(e,n,0):this}},{key:"addInner",value:function(e,n,r){var o,i=this,s=0;e.forEach((function(t,e){var a,c=e+r;if(a=hc(n,t,c)){for(o||(o=i.children.slice());s<o.length&&o[s]<e;)s+=3;o[s]==e?o[s+2]=o[s+2].addInner(t,a,c+1):o.splice(s,0,e,e+t.nodeSize,pc(a,t,c+1,oc)),s+=3}}));for(var a=uc(s?lc(n):n,-r),c=0;c<a.length;c++)a[c].type.valid(e,a[c])||a.splice(c--,1);return new t(a.length?this.local.concat(a).sort(fc):this.local,o||this.children)}},{key:"remove",value:function(t){return 0==t.length||this==sc?this:this.removeInner(t,0)}},{key:"removeInner",value:function(e,n){for(var r=this.children,o=this.local,i=0;i<r.length;i+=3){for(var s,a=void 0,c=r[i]+n,u=r[i+1]+n,h=0;h<e.length;h++)(s=e[h])&&s.from>c&&s.to<u&&(e[h]=null,(a||(a=[])).push(s));if(a){r==this.children&&(r=this.children.slice());var l=r[i+2].removeInner(a,c+1);l!=sc?r[i+2]=l:(r.splice(i,3),i-=3)}}if(o.length)for(var p,f=0;f<e.length;f++)if(p=e[f])for(var d=0;d<o.length;d++)o[d].eq(p,n)&&(o==this.local&&(o=this.local.slice()),o.splice(d--,1));return r==this.children&&o==this.local?this:o.length||r.length?new t(o,r):sc}},{key:"forChild",value:function(e,n){if(this==sc)return this;if(n.isLeaf)return t.empty;for(var r,o,i=0;i<this.children.length;i+=3)if(this.children[i]>=e){this.children[i]==e&&(r=this.children[i+2]);break}for(var s=e+1,a=s+n.content.size,c=0;c<this.local.length;c++){var u=this.local[c];if(u.from<a&&u.to>s&&u.type instanceof tc){var h=Math.max(s,u.from)-s,l=Math.min(a,u.to)-s;h<l&&(o||(o=[])).push(u.copy(h,l))}}if(o){var p=new t(o.sort(fc),rc);return r?new ac([p,r]):p}return r||sc}},{key:"eq",value:function(e){if(this==e)return!0;if(!(e instanceof t)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}},{key:"locals",value:function(t){return dc(this.localsInner(t))}},{key:"localsInner",value:function(t){if(this==sc)return rc;if(t.inlineContent||!this.local.some(tc.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof tc||e.push(this.local[n]);return e}}],[{key:"create",value:function(t,e){return e.length?pc(e,t,0,oc):sc}}]),t}();ic.empty=new ic([],[]),ic.removeOverlap=dc;var sc=ic.empty,ac=function(){function t(e){vs(this,t),this.members=e}return gs(t,[{key:"map",value:function(e,n){var r=this.members.map((function(t){return t.map(e,n,oc)}));return t.from(r)}},{key:"forChild",value:function(e,n){if(n.isLeaf)return ic.empty;for(var r=[],o=0;o<this.members.length;o++){var i=this.members[o].forChild(e,n);i!=sc&&(i instanceof t?r=r.concat(i.members):r.push(i))}return t.from(r)}},{key:"eq",value:function(e){if(!(e instanceof t)||e.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}},{key:"locals",value:function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?dc(n?e:e.sort(fc)):rc}}],[{key:"from",value:function(e){switch(e.length){case 0:return sc;case 1:return e[0];default:return new t(e.every((function(t){return t instanceof ic}))?e:e.reduce((function(t,e){return t.concat(e instanceof ic?e:e.members)}),[]))}}}]),t}();function cc(t,e,n,r,o,i,s){for(var a=t.slice(),c=function(t,e){var r=0;n.maps[t].forEach((function(t,n,i,s){for(var c=s-i-(n-t),u=0;u<a.length;u+=3){var h=a[u+1];if(!(h<0||t>h+e-r)){var l=a[u]+e-r;n>=l?a[u+1]=t<=l?-2:-1:i>=o&&c&&(a[u]+=c,a[u+1]+=c)}}r+=c})),e=n.maps[t].map(e,-1),h=e},u=0,h=i;u<n.maps.length;u++)c(u,h);for(var l=!1,p=0;p<a.length;p+=3)if(a[p+1]<0){if(-2==a[p+1]){l=!0,a[p+1]=-1;continue}var f=n.map(t[p]+i),d=f-o;if(d<0||d>=r.content.size){l=!0;continue}var m=n.map(t[p+1]+i,-1)-o,v=r.content.findIndex(d),y=v.index,g=v.offset,k=r.maybeChild(y);if(k&&g==d&&g+k.nodeSize==m){var b=a[p+2].mapInner(n,k,f+1,t[p]+i+1,s);b!=sc?(a[p]=d,a[p+1]=m,a[p+2]=b):(a[p+1]=-2,l=!0)}else l=!0}if(l){var w=function(t,e,n,r,o,i,s){function a(t,e){for(var i=0;i<t.local.length;i++){var c=t.local[i].map(r,o,e);c?n.push(c):s.onRemove&&s.onRemove(t.local[i].spec)}for(var u=0;u<t.children.length;u+=3)a(t.children[u+2],t.children[u]+e+1)}for(var c=0;c<t.length;c+=3)-1==t[c+1]&&a(t[c+2],e[c]+i+1);return n}(a,t,e,n,o,i,s),x=pc(w,r,0,s);e=x.local;for(var S=0;S<a.length;S+=3)a[S+1]<0&&(a.splice(S,3),S-=3);for(var C=0,O=0;C<x.children.length;C+=3){for(var M=x.children[C];O<a.length&&a[O]<M;)O+=3;a.splice(O,0,x.children[C],x.children[C+1],x.children[C+2])}}return new ic(e.sort(fc),a)}function uc(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new nc(o.from+e,o.to+e,o.type))}return n}function hc(t,e,n){if(e.isLeaf)return null;for(var r,o=n+e.nodeSize,i=null,s=0;s<t.length;s++)(r=t[s])&&r.from>n&&r.to<o&&((i||(i=[])).push(r),t[s]=null);return i}function lc(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function pc(t,e,n,r){var o=[],i=!1;e.forEach((function(e,s){var a=hc(t,e,s+n);if(a){i=!0;var c=pc(a,e,n+s+1,r);c!=sc&&o.push(s,s+e.nodeSize,c)}}));for(var s=uc(i?lc(t):t,-n).sort(fc),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new ic(s,o):sc}function fc(t,e){return t.from-e.from||t.to-e.to}function dc(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),mc(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),mc(e,o+1,i.copy(r.to,i.to)))}}return e}function mc(t,e,n){for(;e<t.length&&fc(n,t[e])>0;)e++;t.splice(e,0,n)}new WeakMap;var vc=n(365);function yc(t){this.content=t}yc.prototype={constructor:yc,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return-1==o?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new yc(i)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new yc(n)},addToStart:function(t,e){return new yc([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new yc(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(-1==i?o.length:i,0,e,n),new yc(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=yc.from(t)).size?new yc(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=yc.from(t)).size?new yc(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=yc.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},yc.from=function(t){if(t instanceof yc)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new yc(e)};var gc=yc;function kc(t){return kc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kc(t)}function bc(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var a=bc(o.content,i.content,n+1);if(null!=a)return a}n+=o.nodeSize}else n+=o.nodeSize}}function wc(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=t.child(--o),a=e.child(--i),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){for(var u=0,h=Math.min(s.text.length,a.text.length);u<h&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var l=wc(s.content,a.content,n-1,r-1);if(l)return l}n-=c,r-=c}else n-=c,r-=c}}var xc=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},Sc={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};xc.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var u=s+1;a.nodesBetween(Math.max(0,t-u),Math.min(a.content.size,e-u),n,r+u)}s=c}},xc.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},xc.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},xc.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new xc(r,this.size+t.size)},xc.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var s=this.content[o],a=i+s.nodeSize;a>t&&((i<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=a}return new xc(n,r)},xc.prototype.cutByIndex=function(t,e){return t==e?xc.empty:0==t&&e==this.content.length?this:new xc(this.content.slice(t,e))},xc.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new xc(r,o)},xc.prototype.addToStart=function(t){return new xc([t].concat(this.content),this.size+t.nodeSize)},xc.prototype.addToEnd=function(t){return new xc(this.content.concat(t),this.size+t.nodeSize)},xc.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},Sc.firstChild.get=function(){return this.content.length?this.content[0]:null},Sc.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},Sc.childCount.get=function(){return this.content.length},xc.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},xc.prototype.maybeChild=function(t){return this.content[t]},xc.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},xc.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),bc(this,t,e)},xc.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),wc(this,t,e,n)},xc.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return Oc(0,t);if(t==this.size)return Oc(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?Oc(n+1,o):Oc(n,r);r=o}},xc.prototype.toString=function(){return"<"+this.toStringInner()+">"},xc.prototype.toStringInner=function(){return this.content.join(", ")},xc.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},xc.fromJSON=function(t,e){if(!e)return xc.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new xc(e.map(t.nodeFromJSON))},xc.fromArray=function(t){if(!t.length)return xc.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new xc(e||t,n)},xc.from=function(t){if(!t)return xc.empty;if(t instanceof xc)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new xc([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(xc.prototype,Sc);var Cc={index:0,offset:0};function Oc(t,e){return Cc.index=t,Cc.offset=e,Cc}function Mc(t,e){if(t===e)return!0;if(!t||"object"!=kc(t)||!e||"object"!=kc(e))return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!Mc(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!Mc(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}xc.empty=new xc([],0);var _c=function(t,e){this.type=t,this.attrs=e};function Tc(t){var e=Error.call(this,t);return e.__proto__=Tc.prototype,e}_c.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},_c.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},_c.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},_c.prototype.eq=function(t){return this==t||this.type==t.type&&Mc(this.attrs,t.attrs)},_c.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},_c.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},_c.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},_c.setFrom=function(t){if(!t||0==t.length)return _c.none;if(t instanceof _c)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},_c.none=[],Tc.prototype=Object.create(Error.prototype),Tc.prototype.constructor=Tc,Tc.prototype.name="ReplaceError";var Ec=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},Nc={size:{configurable:!0}};function Ac(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,u=a.offset;if(i==e||s.isText){if(u!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(Ac(s.content,e-i-1,n-i-1)))}function zc(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=zc(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function Rc(t,e,n){if(n.openStart>t.depth)throw new Tc("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Tc("Inconsistent open depths");return Ic(t,e,n,0)}function Ic(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=Ic(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(xc.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return Bc(i,qc(t,a.start,a.end,e,r))}var c=t.parent,u=c.content;return Bc(c,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}return Bc(i,$c(t,e,r))}function Dc(t,e){if(!e.type.compatibleContent(t.type))throw new Tc("Cannot join "+e.type.name+" onto "+t.type.name)}function jc(t,e,n){var r=t.node(n);return Dc(r,e.node(n)),r}function Fc(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Pc(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(Fc(t.nodeAfter,r),i++));for(var a=i;a<s;a++)Fc(o.child(a),r);e&&e.depth==n&&e.textOffset&&Fc(e.nodeBefore,r)}function Bc(t,e){if(!t.type.validContent(e))throw new Tc("Invalid content for node "+t.type.name);return t.copy(e)}function qc(t,e,n,r,o){var i=t.depth>o&&jc(t,e,o+1),s=r.depth>o&&jc(n,r,o+1),a=[];return Pc(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(Dc(i,s),Fc(Bc(i,qc(t,e,n,r,o+1)),a)):(i&&Fc(Bc(i,$c(t,e,o+1)),a),Pc(e,n,o,a),s&&Fc(Bc(s,$c(n,r,o+1)),a)),Pc(r,null,o,a),new xc(a)}function $c(t,e,n){var r=[];(Pc(null,t,n,r),t.depth>n)&&Fc(Bc(jc(t,e,n+1),$c(t,e,n+1)),r);return Pc(e,null,n,r),new xc(r)}Nc.size.get=function(){return this.content.size-this.openStart-this.openEnd},Ec.prototype.insertAt=function(t,e){var n=zc(this.content,t+this.openStart,e,null);return n&&new Ec(n,this.openStart,this.openEnd)},Ec.prototype.removeBetween=function(t,e){return new Ec(Ac(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},Ec.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},Ec.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},Ec.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},Ec.fromJSON=function(t,e){if(!e)return Ec.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new Ec(xc.fromJSON(t,e.content),n,r)},Ec.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new Ec(t,n,r)},Object.defineProperties(Ec.prototype,Nc),Ec.empty=new Ec(xc.empty,0,0);var Lc=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},Jc={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};Lc.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},Jc.parent.get=function(){return this.node(this.depth)},Jc.doc.get=function(){return this.node(0)},Lc.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},Lc.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},Lc.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},Lc.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},Lc.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},Lc.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},Lc.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},Jc.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},Jc.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},Jc.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},Lc.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r},Lc.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return _c.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},Lc.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},Lc.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},Lc.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new Uc(this,t,n)},Lc.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},Lc.prototype.max=function(t){return t.pos>this.pos?t:this},Lc.prototype.min=function(t){return t.pos<this.pos?t:this},Lc.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},Lc.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,u=o-c;if(n.push(i,a,r+c),!u)break;if((i=i.child(a)).isText)break;o=u-1,r+=c+1}return new Lc(e,n,o)},Lc.resolveCached=function(t,e){for(var n=0;n<Vc.length;n++){var r=Vc[n];if(r.pos==e&&r.doc==t)return r}var o=Vc[Wc]=Lc.resolve(t,e);return Wc=(Wc+1)%Hc,o},Object.defineProperties(Lc.prototype,Jc);var Vc=[],Wc=0,Hc=12,Uc=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},Kc={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Kc.start.get=function(){return this.$from.before(this.depth+1)},Kc.end.get=function(){return this.$to.after(this.depth+1)},Kc.parent.get=function(){return this.$from.node(this.depth)},Kc.startIndex.get=function(){return this.$from.index(this.depth)},Kc.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(Uc.prototype,Kc);var Zc=Object.create(null),Gc=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||xc.empty,this.marks=r||_c.none},Yc={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Yc.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Yc.childCount.get=function(){return this.content.childCount},Gc.prototype.child=function(t){return this.content.child(t)},Gc.prototype.maybeChild=function(t){return this.content.maybeChild(t)},Gc.prototype.forEach=function(t){this.content.forEach(t)},Gc.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},Gc.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},Yc.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Gc.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},Yc.firstChild.get=function(){return this.content.firstChild},Yc.lastChild.get=function(){return this.content.lastChild},Gc.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},Gc.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},Gc.prototype.hasMarkup=function(t,e,n){return this.type==t&&Mc(this.attrs,e||t.defaultAttrs||Zc)&&_c.sameSet(this.marks,n||_c.none)},Gc.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},Gc.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},Gc.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},Gc.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return Ec.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new Ec(a,r.depth-i,o.depth-i)},Gc.prototype.replace=function(t,e,n){return Rc(this.resolve(t),this.resolve(e),n)},Gc.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}},Gc.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},Gc.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},Gc.prototype.resolve=function(t){return Lc.resolveCached(this,t)},Gc.prototype.resolveNoCache=function(t){return Lc.resolve(this,t)},Gc.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},Yc.isBlock.get=function(){return this.type.isBlock},Yc.isTextblock.get=function(){return this.type.isTextblock},Yc.inlineContent.get=function(){return this.type.inlineContent},Yc.isInline.get=function(){return this.type.isInline},Yc.isText.get=function(){return this.type.isText},Yc.isLeaf.get=function(){return this.type.isLeaf},Yc.isAtom.get=function(){return this.type.isAtom},Gc.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Qc(this.marks,t)},Gc.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},Gc.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=xc.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},Gc.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},Gc.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},Gc.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=_c.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!_c.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},Gc.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},Gc.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=xc.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(Gc.prototype,Yc);var Xc=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Qc(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(Gc);function Qc(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var tu=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},eu={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};tu.parse=function(t,e){var n=new nu(t,e);if(null==n.next)return tu.empty;var r=ou(n);n.next&&n.err("Unexpected trailing text");var o=function(t){var e=Object.create(null);return n(hu(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];hu(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new tu(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(uu);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}(function(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var u=n();return o(i(t.expr,e),u),o(i(t.expr,u),u),[r(u)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var h=e,l=0;l<t.min;l++){var p=n();o(i(t.expr,h),p),h=p}if(-1==t.max)o(i(t.expr,h),h);else for(var f=t.min;f<t.max;f++){var d=n();r(h,d),o(i(t.expr,h),d),h=d}return[r(h)]}if("name"==t.type)return[r(e,null,t.value)]}}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],u=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(u)&&r.push(u)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},tu.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},tu.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},eu.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},eu.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},tu.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},tu.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(i,s){var a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return xc.from(s.map((function(t){return t.createAndFill()})));for(var c=0;c<i.next.length;c+=2){var u=i.next[c],h=i.next[c+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(h)){r.push(h);var l=o(h,s.concat(u));if(l)return l}}}(this,[])},tu.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},tu.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},eu.edgeCount.get=function(){return this.next.length>>1},tu.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},tu.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(tu.prototype,eu),tu.empty=new tu(!0);var nu=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},ru={next:{configurable:!0}};function ou(t){var e=[];do{e.push(iu(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function iu(t){var e=[];do{e.push(su(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function su(t){for(var e=function(t){if(t.eat("(")){var e=ou(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}0==o.length&&t.err("No node type or group '"+e+"' found");return o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=cu(t,e)}return e}function au(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function cu(t,e){var n=au(t),r=n;return t.eat(",")&&(r="}"!=t.next?au(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function uu(t,e){return e-t}function hu(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||e(c)}}(e),n.sort(uu)}function lu(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function pu(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function fu(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new vu(t[n]);return e}ru.next.get=function(){return this.tokens[this.pos]},nu.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},nu.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(nu.prototype,ru);var du=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=fu(n.attrs),this.defaultAttrs=lu(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},mu={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};mu.isInline.get=function(){return!this.isBlock},mu.isTextblock.get=function(){return this.isBlock&&this.inlineContent},mu.isLeaf.get=function(){return this.contentMatch==tu.empty},mu.isAtom.get=function(){return this.isLeaf||this.spec.atom},du.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},du.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},du.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:pu(this.attrs,t)},du.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Gc(this,this.computeAttrs(t),xc.from(e),_c.setFrom(n))},du.prototype.createChecked=function(t,e,n){if(e=xc.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new Gc(this,this.computeAttrs(t),e,_c.setFrom(n))},du.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=xc.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(xc.empty,!0);return o?new Gc(this,t,e.append(o),_c.setFrom(n)):null},du.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},du.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},du.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},du.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:_c.empty:t},du.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new du(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(du.prototype,mu);var vu=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},yu={isRequired:{configurable:!0}};yu.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(vu.prototype,yu);var gu=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=fu(r.attrs),this.rank=e,this.excluded=null;var o=lu(this.attrs);this.instance=o&&new _c(this,o)};gu.prototype.create=function(t){return!t&&this.instance?this.instance:new _c(this,pu(this.attrs,t))},gu.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new gu(t,r++,e,o)})),n},gu.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},gu.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},gu.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var ku=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=gc.from(t.nodes),this.spec.marks=gc.from(t.marks),this.nodes=du.compile(this.spec.nodes,this),this.marks=gu.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],i=o.spec.content||"",s=o.spec.marks;o.contentMatch=n[i]||(n[i]=tu.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==s?null:s?bu(this,s.split(" ")):""!=s&&o.inlineContent?null:[]}for(var a in this.marks){var c=this.marks[a],u=c.spec.excludes;c.excluded=null==u?[c]:""==u?[]:bu(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function bu(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}ku.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof du))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},ku.prototype.text=function(t,e){var n=this.nodes.text;return new Xc(n,n.defaultAttrs,t,_c.setFrom(e))},ku.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},ku.prototype.nodeFromJSON=function(t){return Gc.fromJSON(this,t)},ku.prototype.markFromJSON=function(t){return _c.fromJSON(this,t)},ku.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var wu=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};wu.prototype.parse=function(t,e){void 0===e&&(e={});var n=new _u(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},wu.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new _u(this,e,!0);return n.addAll(t,null,e.from,e.to),Ec.maxOpen(n.finish())},wu.prototype.matchTag=function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(Eu(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},wu.prototype.matchStyle=function(t,e,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var s=i.getAttrs(e);if(!1===s)continue;i.attrs=s}return i}}},wu.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=Nu(t)),t.mark=e}))};for(var o in t.marks)r(o);var i;for(var s in t.nodes)i=void 0,(i=t.nodes[s].spec.parseDOM)&&i.forEach((function(t){n(t=Nu(t)),t.node=s}));return e},wu.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new wu(t,wu.schemaRules(t)))};var xu={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Su={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Cu={ol:!0,ul:!0};function Ou(t){return(t?1:0)|("full"===t?2:0)}var Mu=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=_c.none,this.pendingMarks=r,this.stashMarks=[]};Mu.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(xc.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},Mu.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=xc.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(xc.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},Mu.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},Mu.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):Au(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var _u=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=Ou(e.preserveWhitespace)|(n?4:0);r=o?new Mu(o.type,o.attrs,_c.none,_c.none,!0,e.topMatch||o.type.contentMatch,i):new Mu(n?null:t.schema.topNodeType,null,_c.none,_c.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},Tu={top:{configurable:!0},currentPos:{configurable:!0}};function Eu(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Nu(t){var e={};for(var n in t)e[n]=t[n];return e}function Au(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[];return function t(n){i.push(n);for(var r=0;r<n.edgeCount;r++){var o=n.edge(r),s=o.type,a=o.next;if(s==e)return!0;if(i.indexOf(a)<0&&t(a))return!0}}(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}Tu.top.get=function(){return this.nodes[this.open]},_u.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},_u.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(2&n.options||(n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},_u.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();Cu.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&Cu.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(o?o.ignore:Su.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var i,s=this.top,a=this.needsBlock;if(xu.hasOwnProperty(r))i=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),i&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,o,!1===o.consuming?n:null)},_u.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},_u.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},_u.prototype.readStyles=function(t){var e=_c.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(t[n],t[n+1],this,r);if(!o)continue t;if(o.ignore)return null;if(e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;r=o}return e},_u.prototype.addElementByRule=function(t,e,n){var r,o,i,s=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):r=this.enter(o,e.attrs,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=e.contentElement;"string"==typeof c?c=t.querySelector(c):"function"==typeof c&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,r)}r&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},_u.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&xu.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},_u.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},_u.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},_u.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},_u.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?-5&o.options:Ou(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new Mu(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},_u.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},_u.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},_u.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},Tu.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},_u.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},_u.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},_u.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},_u.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},_u.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1);return function t(s,a){for(;s>=0;s--){var c=n[s];if(""==c){if(s==n.length-1||0==s)continue;for(;a>=i;a--)if(t(s-1,a))return!0;return!1}var u=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;a--}return!0}(n.length-1,this.open)},_u.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},_u.prototype.addPendingMark=function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},_u.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(_u.prototype,Tu);var zu=function(t,e){this.nodes=t||{},this.marks=e||{}};function Ru(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Iu(t){return t.document||window.document}zu.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=Iu(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<t.marks.length;){var c=t.marks[s++],u=r.serializeMark(c,t.isInline,e);u&&(i.push(c,o),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(r.serializeNode(t,e))})),n},zu.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=zu.renderSpec(Iu(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},zu.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},zu.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&zu.renderSpec(Iu(n),r(t,e))},zu.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==kc(a)&&null==a.nodeType&&!Array.isArray(a))for(var u in c=2,a)if(null!=a[u]){var h=u.indexOf(" ");h>0?s.setAttributeNS(u.slice(0,h),u.slice(h+1),a[u]):s.setAttribute(u,a[u])}for(var l=c;l<e.length;l++){var p=e[l];if(0===p){if(l<e.length-1||l>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var f=zu.renderSpec(t,p,n),d=f.dom,m=f.contentDOM;if(s.appendChild(d),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},zu.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new zu(this.nodesFromSchema(t),this.marksFromSchema(t)))},zu.nodesFromSchema=function(t){var e=Ru(t.nodes);return e.text||(e.text=function(t){return t.text}),e},zu.marksFromSchema=function(t){return Ru(t.marks)};var Du=Math.pow(2,16);function ju(t){return 65535&t}var Fu=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},Pu=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};Pu.prototype.recover=function(t){var e=0,n=ju(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/Du}(t)},Pu.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},Pu.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},Pu.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var c=this.ranges[s+o],u=this.ranges[s+i],h=a+c;if(t<=h){var l=a+r+((c?t==a?-1:t==h?1:e:e)<0?0:u);if(n)return l;var p=t==(e<0?a:h)?null:s/3+(t-a)*Du;return new Fu(l,e<0?t!=a:t!=h,p)}r+=u-c}return n?t+r:new Fu(t+r)},Pu.prototype.touches=function(t,e){for(var n=0,r=ju(e),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var c=this.ranges[s+o];if(t<=a+c&&s==3*r)return!0;n+=this.ranges[s+i]-c}return!1},Pu.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+e],u=this.ranges[r+n];t(s,s+c,a,a+u),o+=u-c}},Pu.prototype.invert=function(){return new Pu(this.ranges,!this.inverted)},Pu.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},Pu.offset=function(t){return 0==t?Pu.empty:new Pu(t<0?[0,-t,0]:[0,0,t])},Pu.empty=new Pu([]);var Bu=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function qu(t){var e=Error.call(this,t);return e.__proto__=qu.prototype,e}Bu.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new Bu(this.maps,this.mirror,t,e)},Bu.prototype.copy=function(){return new Bu(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Bu.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},Bu.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},Bu.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},Bu.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},Bu.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},Bu.prototype.invert=function(){var t=new Bu;return t.appendMappingInverted(this),t},Bu.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},Bu.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},Bu.prototype._map=function(t,e,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,t=this.maps[s].recover(i.recover);continue}}i.deleted&&(r=!0),t=i.pos}return n?t:new Fu(t,r)},qu.prototype=Object.create(Error.prototype),qu.prototype.constructor=qu,qu.prototype.name="TransformError";var $u=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Bu},Lu={before:{configurable:!0},docChanged:{configurable:!0}};function Ju(){throw new Error("Override me")}Lu.before.get=function(){return this.docs.length?this.docs[0]:this.doc},$u.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new qu(e.failed);return this},$u.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},Lu.docChanged.get=function(){return this.steps.length>0},$u.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties($u.prototype,Lu);var Vu=Object.create(null),Wu=function(){};Wu.prototype.apply=function(t){return Ju()},Wu.prototype.getMap=function(){return Pu.empty},Wu.prototype.invert=function(t){return Ju()},Wu.prototype.map=function(t){return Ju()},Wu.prototype.merge=function(t){return null},Wu.prototype.toJSON=function(){return Ju()},Wu.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Vu[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},Wu.jsonID=function(t,e){if(t in Vu)throw new RangeError("Duplicate use of step JSON ID "+t);return Vu[t]=e,e.prototype.jsonID=t,e};var Hu=function(t,e){this.doc=t,this.failed=e};Hu.ok=function(t){return new Hu(t,null)},Hu.fail=function(t){return new Hu(null,t)},Hu.fromReplace=function(t,e,n,r){try{return Hu.ok(t.replace(e,n,r))}catch(o){if(o instanceof Tc)return Hu.fail(o.message);throw o}};var Uu=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&Zu(t,this.from,this.to)?Hu.fail("Structure replace would overwrite content"):Hu.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new Pu([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?Ec.empty:new Ec(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?Ec.empty:new Ec(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,Ec.fromJSON(t,n.slice),!!n.structure)},e}(Wu);Wu.jsonID("replace",Uu);var Ku=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(Zu(t,this.from,this.gapFrom)||Zu(t,this.gapTo,this.to)))return Hu.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Hu.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?Hu.fromReplace(t,this.from,this.to,n):Hu.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new Pu([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,Ec.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(Wu);function Zu(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function Gu(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(Gu(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return xc.fromArray(r)}Wu.jsonID("replaceAround",Ku),$u.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,o=t.depth,i=n.before(o+1),s=r.after(o+1),a=i,c=s,u=xc.empty,h=0,l=o,p=!1;l>e;l--)p||n.index(l)>0?(p=!0,u=xc.from(n.node(l).copy(u)),h++):a--;for(var f=xc.empty,d=0,m=o,v=!1;m>e;m--)v||r.after(m+1)<r.end(m)?(v=!0,f=xc.from(r.node(m).copy(f)),d++):c++;return this.step(new Ku(a,c,i,s,new Ec(u.append(f),h,d),u.size-h,!0))},$u.prototype.wrap=function(t,e){for(var n=xc.empty,r=e.length-1;r>=0;r--)n=xc.from(e[r].type.create(e[r].attrs,n));var o=t.start,i=t.end;return this.step(new Ku(o,i,o,i,new Ec(n,0,0),e.length,!0))},$u.prototype.setBlockType=function(t,e,n,r){var o=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(o.doc,o.mapping.slice(i).map(e),n)){o.clearIncompatible(o.mapping.slice(i).map(e,1),n);var s=o.mapping.slice(i),a=s.map(e,1),c=s.map(e+t.nodeSize,1);return o.step(new Ku(a,c,a+1,c-1,new Ec(xc.from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},$u.prototype.setNodeMarkup=function(t,e,n,r){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var i=e.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,i);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new Ku(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new Ec(xc.from(i),0,0),1,!0))},$u.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),o=xc.empty,i=xc.empty,s=r.depth,a=r.depth-e,c=e-1;s>a;s--,c--){o=xc.from(r.node(s).copy(o));var u=n&&n[c];i=xc.from(u?u.type.create(u.attrs,i):r.node(s).copy(i))}return this.step(new Uu(t,t,new Ec(o.append(i),e,e),!0))},$u.prototype.join=function(t,e){void 0===e&&(e=1);var n=new Uu(t-e,t+e,Ec.empty,!0);return this.step(n)};var Yu=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Ec(Gu(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return Hu.fromReplace(t,this.from,this.to,i)},e.prototype.invert=function(){return new Xu(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Wu);Wu.jsonID("addMark",Yu);var Xu=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new Ec(Gu(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return Hu.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new Yu(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Wu);function Qu(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}Wu.jsonID("removeMark",Xu),$u.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,u){if(r.isInline){var h=r.marks;if(!n.isInSet(h)&&u.type.allowsMarkType(n.type)){for(var l=Math.max(c,t),p=Math.min(c+r.nodeSize,e),f=n.addToSet(h),d=0;d<h.length;d++)h[d].isInSet(f)||(s&&s.to==l&&s.mark.eq(h[d])?s.to=p:o.push(s=new Xu(l,p,h[d])));a&&a.to==l?a.to=p:i.push(a=new Yu(l,p,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},$u.prototype.removeMark=function(t,e,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(t,e,(function(r,s){if(r.isInline){i++;var a=null;if(n instanceof gu)for(var c,u=r.marks;c=n.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u);else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var h=Math.min(s+r.nodeSize,e),l=0;l<a.length;l++){for(var p=a[l],f=void 0,d=0;d<o.length;d++){var m=o[d];m.step==i-1&&p.eq(o[d].style)&&(f=m)}f?(f.to=h,f.step=i):o.push({style:p,from:Math.max(s,t),to:h,step:i})}}})),o.forEach((function(t){return r.step(new Xu(t.from,t.to,t.style))})),this},$u.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),o=[],i=t+1,s=0;s<r.childCount;s++){var a=r.child(s),c=i+a.nodeSize,u=n.matchType(a.type,a.attrs);if(u){n=u;for(var h=0;h<a.marks.length;h++)e.allowsMarkType(a.marks[h].type)||this.step(new Xu(i,c,a.marks[h]))}else o.push(new Uu(i,c,Ec.empty));i=c}if(!n.validEnd){var l=n.fillBefore(xc.empty,!0);this.replace(i,i,new Ec(l,0,0))}for(var p=o.length-1;p>=0;p--)this.step(o[p]);return this},$u.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=Ec.empty);var r=function(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=Ec.empty),e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);return Qu(o,i,r)?new Uu(e,n,r):new th(o,i,r).fit()}(this.doc,t,e,n);return r&&this.step(r),this},$u.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new Ec(xc.from(n),0,0))},$u.prototype.delete=function(t,e){return this.replace(t,e,Ec.empty)},$u.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var th=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var r=0;r<=t.depth;r++){var o=t.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(r))})}this.placed=xc.empty;for(var i=t.depth;i>0;i--)this.placed=xc.from(t.node(i).copy(this.placed))},eh={depth:{configurable:!0}};function nh(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(nh(t.firstChild.content,e-1,n)))}function rh(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(rh(t.lastChild.content,e-1,n)))}function oh(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function ih(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,ih(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(xc.empty,!0)))),t.copy(r)}function sh(t,e,n,r,o){var i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function ah(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(ah(i.content,e+1,n,r,i)))}if(e>r){var s=o.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(xc.empty,!0))}return t}function ch(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}function uh(t){return uh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uh(t)}eh.depth.get=function(){return this.frontier.length-1},th.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;for(var i=this.placed,s=r.depth,a=o.depth;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;var c=new Ec(i,s,a);return e>-1?new Ku(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new Uu(r.pos,o.pos,c):void 0},th.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var n=void 0,r=(e?(n=oh(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,o=this.depth;o>=0;o--){var i=this.frontier[o],s=i.type,a=i.match,c=void 0,u=void 0;if(1==t&&(r?a.matchType(r.type)||(u=a.fillBefore(xc.from(r),!1)):s.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:o,parent:n,inject:u};if(2==t&&r&&(c=a.findWrapping(r.type)))return{sliceDepth:e,frontierDepth:o,parent:n,wrap:c};if(n&&a.matchType(n.type))break}},th.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=oh(e,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new Ec(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)},th.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=oh(e,n);if(o.childCount<=1&&n>0){var i=e.size-n<=n+o.size;this.unplaced=new Ec(nh(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Ec(nh(e,n,1),n,r)},th.prototype.placeNodes=function(t){for(var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,o=t.inject,i=t.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var s=0;s<i.length;s++)this.openFrontierNode(i[s]);var a=this.unplaced,c=r?r.content:a.content,u=a.openStart-e,h=0,l=[],p=this.frontier[n],f=p.match,d=p.type;if(o){for(var m=0;m<o.childCount;m++)l.push(o.child(m));f=f.matchFragment(o)}for(var v=c.size+e-(a.content.size-a.openEnd);h<c.childCount;){var y=c.child(h),g=f.matchType(y.type);if(!g)break;(++h>1||0==u||y.content.size)&&(f=g,l.push(ih(y.mark(d.allowedMarks(y.marks)),1==h?u:0,h==c.childCount?v:-1)))}var k=h==c.childCount;k||(v=-1),this.placed=rh(this.placed,n,xc.from(l)),this.frontier[n].match=f,k&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var b=0,w=c;b<v;b++){var x=w.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),w=x.content}this.unplaced=k?0==e?Ec.empty:new Ec(nh(a.content,e-1,1),e-1,v<0?a.openEnd:e-1):new Ec(nh(a.content,e,h),a.openStart,a.openEnd)},th.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!sh(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},th.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=sh(t,e,o,r,i);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],u=c.match,h=sh(t,a,c.type,u,!0);if(!h||h.childCount)continue t}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}},th.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=rh(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t},th.prototype.openFrontierNode=function(t,e,n){var r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=rh(this.placed,this.depth,xc.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},th.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(xc.empty,!0);t.childCount&&(this.placed=rh(this.placed,this.frontier.length,t))},Object.defineProperties(th.prototype,eh),$u.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),o=this.doc.resolve(e);if(Qu(r,o,n))return this.step(new Uu(t,e,n));var i=ch(r,this.doc.resolve(e));0==i[i.length-1]&&i.pop();var s=-(r.depth+1);i.unshift(s);for(var a=r.depth,c=r.pos-1;a>0;a--,c--){var u=r.node(a).type.spec;if(u.defining||u.isolating)break;i.indexOf(a)>-1?s=a:r.before(a)==c&&i.splice(1,0,-a)}for(var h=i.indexOf(s),l=[],p=n.openStart,f=n.content,d=0;;d++){var m=f.firstChild;if(l.push(m),d==n.openStart)break;f=m.content}p>0&&l[p-1].type.spec.defining&&r.node(h).type!=l[p-1].type?p-=1:p>=2&&l[p-1].isTextblock&&l[p-2].type.spec.defining&&r.node(h).type!=l[p-2].type&&(p-=2);for(var v=n.openStart;v>=0;v--){var y=(v+p+1)%(n.openStart+1),g=l[y];if(g)for(var k=0;k<i.length;k++){var b=i[(k+h)%i.length],w=!0;b<0&&(w=!1,b=-b);var x=r.node(b-1),S=r.index(b-1);if(x.canReplaceWith(S,S,g.type,g.marks))return this.replace(r.before(b),w?o.after(b):e,new Ec(ah(n.content,0,n.openStart,y),y,n.openEnd))}}for(var C=this.steps.length,O=i.length-1;O>=0&&(this.replace(t,e,n),!(this.steps.length>C));O--){var M=i[O];M<0||(t=r.before(M),e=o.after(M))}return this},$u.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new Ec(xc.from(n),0,0))},$u.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=ch(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)};var hh=Object.create(null),lh=function(t,e,n){this.ranges=n||[new fh(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},ph={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};ph.anchor.get=function(){return this.$anchor.pos},ph.head.get=function(){return this.$head.pos},ph.from.get=function(){return this.$from.pos},ph.to.get=function(){return this.$to.pos},ph.$from.get=function(){return this.ranges[0].$from},ph.$to.get=function(){return this.ranges[0].$to},ph.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},lh.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},lh.prototype.replace=function(t,e){void 0===e&&(e=Ec.empty);for(var n=e.content.lastChild,r=null,o=0;o<e.openEnd;o++)r=n,n=n.lastChild;for(var i=t.steps.length,s=this.ranges,a=0;a<s.length;a++){var c=s[a],u=c.$from,h=c.$to,l=t.mapping.slice(i);t.replaceRange(l.map(u.pos),l.map(h.pos),a?Ec.empty:e),0==a&&wh(t,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}},lh.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=t.mapping.slice(n),u=c.map(s.pos),h=c.map(a.pos);o?t.deleteRange(u,h):(t.replaceRangeWith(u,h,e),wh(t,n,e.isInline?-1:1))}},lh.findFrom=function(t,e,n){var r=t.parent.inlineContent?new dh(t):bh(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?bh(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):bh(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}},lh.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new gh(t.node(0))},lh.atStart=function(t){return bh(t,t,0,0,1)||new gh(t)},lh.atEnd=function(t){return bh(t,t,t.content.size,t.childCount,-1)||new gh(t)},lh.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=hh[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},lh.jsonID=function(t,e){if(t in hh)throw new RangeError("Duplicate use of selection JSON ID "+t);return hh[t]=e,e.prototype.jsonID=t,e},lh.prototype.getBookmark=function(){return dh.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(lh.prototype,ph),lh.prototype.visible=!0;var fh=function(t,e){this.$from=t,this.$to=e},dh=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=n.resolve(r.map(this.anchor));return new e(i.parent.inlineContent?i:o,o)},e.prototype.replace=function(e,n){if(void 0===n&&(n=Ec.empty),t.prototype.replace.call(this,e,n),n==Ec.empty){var r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new mh(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,o,!0)||t.findFrom(r,-o,!0);if(!s)return t.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i||(n=(t.findFrom(n,-o,!0)||t.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0)&&(n=r),new e(n,r)},Object.defineProperties(e.prototype,n),e}(lh);lh.jsonID("text",dh);var mh=function(t,e){this.anchor=t,this.head=e};mh.prototype.map=function(t){return new mh(t.map(this.anchor),t.map(this.head))},mh.prototype.resolve=function(t){return dh.between(t.resolve(this.anchor),t.resolve(this.head))};var vh=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=n.resolve(s);return i?t.near(a):new e(a)},e.prototype.content=function(){return new Ec(xc.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new yh(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(lh);vh.prototype.visible=!1,lh.jsonID("node",vh);var yh=function(t){this.anchor=t};yh.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new mh(r,r):new yh(r)},yh.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&vh.isSelectable(n)?new vh(e):lh.near(e)};var gh=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=Ec.empty),n==Ec.empty){e.delete(0,e.doc.content.size);var r=t.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return kh},e}(lh);lh.jsonID("all",gh);var kh={map:function(){return this},resolve:function(t){return new gh(t)}};function bh(t,e,n,r,o,i){if(e.inlineContent)return dh.create(t,n);for(var s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){var a=e.child(s);if(a.isAtom){if(!i&&vh.isSelectable(a))return vh.create(t,n-(o<0?a.nodeSize:0))}else{var c=bh(t,a,n+o,o<0?a.childCount:0,o,i);if(c)return c}n+=a.nodeSize*o}}function wh(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o,i=t.steps[r];if(i instanceof Uu||i instanceof Ku)t.mapping.maps[r].forEach((function(t,e,n,r){null==o&&(o=r)})),t.setSelection(lh.near(t.doc.resolve(o),n))}}var xh=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return _c.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||_c.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=n==e?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,o)),this.selection.empty||this.setSelection(lh.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,n),e}($u);function Sh(t,e){return e&&t?t.bind(e):t}var Ch=function(t,e,n){this.name=t,this.init=Sh(e.init,n),this.apply=Sh(e.apply,n)},Oh=[new Ch("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new Ch("selection",{init:function(t,e){return t.selection||lh.atStart(e.doc)},apply:function(t){return t.selection}}),new Ch("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Ch("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],Mh=function(t,e){var n=this;this.schema=t,this.fields=Oh.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new Ch(t.key,t.spec.state,t))}))},_h=function(t){this.config=t},Th={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};Th.schema.get=function(){return this.config.schema},Th.plugins.get=function(){return this.config.plugins},_h.prototype.apply=function(t){return this.applyTransaction(t).state},_h.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},_h.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,c=r?r[i].state:this,u=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(u&&n.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",t),!r){r=[];for(var h=0;h<this.config.plugins.length;h++)r.push(h<i?{state:n,n:e.length}:{state:this,n:0})}e.push(u),n=n.applyInner(u),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}},_h.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new _h(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<Eh.length;i++)Eh[i](this,t,e);return e},Th.tr.get=function(){return new xh(this)},_h.create=function(t){for(var e=new Mh(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new _h(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},_h.prototype.reconfigure=function(t){for(var e=new Mh(this.schema,t.plugins),n=e.fields,r=new _h(e),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(t,r)}return r},_h.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==uh(t))for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e},_h.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var r=new Mh(t.schema,t.plugins),o=new _h(r);return r.fields.forEach((function(r){if("doc"==r.name)o.doc=Gc.fromJSON(t.schema,e.doc);else if("selection"==r.name)o.selection=lh.fromJSON(o.doc,e.selection);else if("storedMarks"==r.name)e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var i in n){var s=n[i],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,i))return void(o[r.name]=a.fromJSON.call(s,t,e[i],o))}o[r.name]=r.init(t,o)}})),o},_h.addApplyListener=function(t){Eh.push(t)},_h.removeApplyListener=function(t){var e=Eh.indexOf(t);e>-1&&Eh.splice(e,1)},Object.defineProperties(_h.prototype,Th);var Eh=[];function Nh(t,e,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=Nh(o,e,{})),n[r]=o}return n}var Ah=function(t){this.props={},t.props&&Nh(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:Rh("plugin")};Ah.prototype.getState=function(t){return t[this.key]};var zh=Object.create(null);function Rh(t){return t in zh?t+"$"+ ++zh[t]:(zh[t]=0,t+"$")}var Ih=function(t){void 0===t&&(t="key"),this.key=Rh(t)};Ih.prototype.get=function(t){return t.config.pluginsByKey[this.key]},Ih.prototype.getState=function(t){return t[this.key]};var Dh="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function jh(t){var e,n,r,o,i=t.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(var a=0;a<i.length-1;a++){var c=i[a];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))e=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);Dh?o=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function Fh(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function Ph(t){var e=function(t){var e=Object.create(null);for(var n in t)e[jh(n)]=t[n];return e}(t);return function(t,n){var r,o=Object(vc.b)(n),i=1==o.length&&" "!=o,s=e[Fh(o,n,!i)];if(s&&s(t.state,t.dispatch,t))return!0;if(i&&(n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(r=vc.a[n.keyCode])&&r!=o){var a=e[Fh(r,n,!0)];if(a&&a(t.state,t.dispatch,t))return!0}else if(i&&n.shiftKey){var c=e[Fh(o,n,!0)];if(c&&c(t.state,t.dispatch,t))return!0}return!1}}function Bh(t){this.content=t}Bh.prototype={constructor:Bh,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return-1==o?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new Bh(i)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new Bh(n)},addToStart:function(t,e){return new Bh([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Bh(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(-1==i?o.length:i,0,e,n),new Bh(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=Bh.from(t)).size?new Bh(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=Bh.from(t)).size?new Bh(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Bh.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},Bh.from=function(t){if(t instanceof Bh)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Bh(e)};var qh=Bh;function $h(t){return $h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$h(t)}function Lh(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var a=Lh(o.content,i.content,n+1);if(null!=a)return a}n+=o.nodeSize}else n+=o.nodeSize}}function Jh(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=t.child(--o),a=e.child(--i),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){for(var u=0,h=Math.min(s.text.length,a.text.length);u<h&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var l=Jh(s.content,a.content,n-1,r-1);if(l)return l}n-=c,r-=c}else n-=c,r-=c}}var Vh=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},Wh={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};Vh.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var u=s+1;a.nodesBetween(Math.max(0,t-u),Math.min(a.content.size,e-u),n,r+u)}s=c}},Vh.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},Vh.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},Vh.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new Vh(r,this.size+t.size)},Vh.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var s=this.content[o],a=i+s.nodeSize;a>t&&((i<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=a}return new Vh(n,r)},Vh.prototype.cutByIndex=function(t,e){return t==e?Vh.empty:0==t&&e==this.content.length?this:new Vh(this.content.slice(t,e))},Vh.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new Vh(r,o)},Vh.prototype.addToStart=function(t){return new Vh([t].concat(this.content),this.size+t.nodeSize)},Vh.prototype.addToEnd=function(t){return new Vh(this.content.concat(t),this.size+t.nodeSize)},Vh.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},Wh.firstChild.get=function(){return this.content.length?this.content[0]:null},Wh.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},Wh.childCount.get=function(){return this.content.length},Vh.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},Vh.prototype.maybeChild=function(t){return this.content[t]},Vh.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},Vh.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),Lh(this,t,e)},Vh.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),Jh(this,t,e,n)},Vh.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return Uh(0,t);if(t==this.size)return Uh(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?Uh(n+1,o):Uh(n,r);r=o}},Vh.prototype.toString=function(){return"<"+this.toStringInner()+">"},Vh.prototype.toStringInner=function(){return this.content.join(", ")},Vh.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},Vh.fromJSON=function(t,e){if(!e)return Vh.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new Vh(e.map(t.nodeFromJSON))},Vh.fromArray=function(t){if(!t.length)return Vh.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new Vh(e||t,n)},Vh.from=function(t){if(!t)return Vh.empty;if(t instanceof Vh)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Vh([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(Vh.prototype,Wh);var Hh={index:0,offset:0};function Uh(t,e){return Hh.index=t,Hh.offset=e,Hh}function Kh(t,e){if(t===e)return!0;if(!t||"object"!=$h(t)||!e||"object"!=$h(e))return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!Kh(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!Kh(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}Vh.empty=new Vh([],0);var Zh=function(t,e){this.type=t,this.attrs=e};function Gh(t){var e=Error.call(this,t);return e.__proto__=Gh.prototype,e}Zh.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},Zh.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},Zh.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},Zh.prototype.eq=function(t){return this==t||this.type==t.type&&Kh(this.attrs,t.attrs)},Zh.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},Zh.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},Zh.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},Zh.setFrom=function(t){if(!t||0==t.length)return Zh.none;if(t instanceof Zh)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},Zh.none=[],Gh.prototype=Object.create(Error.prototype),Gh.prototype.constructor=Gh,Gh.prototype.name="ReplaceError";var Yh=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},Xh={size:{configurable:!0}};function Qh(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,u=a.offset;if(i==e||s.isText){if(u!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(Qh(s.content,e-i-1,n-i-1)))}function tl(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=tl(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function el(t,e,n){if(n.openStart>t.depth)throw new Gh("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Gh("Inconsistent open depths");return nl(t,e,n,0)}function nl(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=nl(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(Vh.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return al(i,cl(t,a.start,a.end,e,r))}var c=t.parent,u=c.content;return al(c,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}return al(i,ul(t,e,r))}function rl(t,e){if(!e.type.compatibleContent(t.type))throw new Gh("Cannot join "+e.type.name+" onto "+t.type.name)}function ol(t,e,n){var r=t.node(n);return rl(r,e.node(n)),r}function il(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function sl(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(il(t.nodeAfter,r),i++));for(var a=i;a<s;a++)il(o.child(a),r);e&&e.depth==n&&e.textOffset&&il(e.nodeBefore,r)}function al(t,e){if(!t.type.validContent(e))throw new Gh("Invalid content for node "+t.type.name);return t.copy(e)}function cl(t,e,n,r,o){var i=t.depth>o&&ol(t,e,o+1),s=r.depth>o&&ol(n,r,o+1),a=[];return sl(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(rl(i,s),il(al(i,cl(t,e,n,r,o+1)),a)):(i&&il(al(i,ul(t,e,o+1)),a),sl(e,n,o,a),s&&il(al(s,ul(n,r,o+1)),a)),sl(r,null,o,a),new Vh(a)}function ul(t,e,n){var r=[];(sl(null,t,n,r),t.depth>n)&&il(al(ol(t,e,n+1),ul(t,e,n+1)),r);return sl(e,null,n,r),new Vh(r)}Xh.size.get=function(){return this.content.size-this.openStart-this.openEnd},Yh.prototype.insertAt=function(t,e){var n=tl(this.content,t+this.openStart,e,null);return n&&new Yh(n,this.openStart,this.openEnd)},Yh.prototype.removeBetween=function(t,e){return new Yh(Qh(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},Yh.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},Yh.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},Yh.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},Yh.fromJSON=function(t,e){if(!e)return Yh.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new Yh(Vh.fromJSON(t,e.content),n,r)},Yh.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new Yh(t,n,r)},Object.defineProperties(Yh.prototype,Xh),Yh.empty=new Yh(Vh.empty,0,0);var hl=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},ll={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};hl.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},ll.parent.get=function(){return this.node(this.depth)},ll.doc.get=function(){return this.node(0)},hl.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},hl.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},hl.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},hl.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},hl.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},hl.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},hl.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},ll.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},ll.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},ll.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},hl.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r},hl.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return Zh.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},hl.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},hl.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},hl.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new ml(this,t,n)},hl.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},hl.prototype.max=function(t){return t.pos>this.pos?t:this},hl.prototype.min=function(t){return t.pos<this.pos?t:this},hl.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},hl.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,u=o-c;if(n.push(i,a,r+c),!u)break;if((i=i.child(a)).isText)break;o=u-1,r+=c+1}return new hl(e,n,o)},hl.resolveCached=function(t,e){for(var n=0;n<pl.length;n++){var r=pl[n];if(r.pos==e&&r.doc==t)return r}var o=pl[fl]=hl.resolve(t,e);return fl=(fl+1)%dl,o},Object.defineProperties(hl.prototype,ll);var pl=[],fl=0,dl=12,ml=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},vl={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};vl.start.get=function(){return this.$from.before(this.depth+1)},vl.end.get=function(){return this.$to.after(this.depth+1)},vl.parent.get=function(){return this.$from.node(this.depth)},vl.startIndex.get=function(){return this.$from.index(this.depth)},vl.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(ml.prototype,vl);var yl=Object.create(null),gl=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||Vh.empty,this.marks=r||Zh.none},kl={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};kl.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},kl.childCount.get=function(){return this.content.childCount},gl.prototype.child=function(t){return this.content.child(t)},gl.prototype.maybeChild=function(t){return this.content.maybeChild(t)},gl.prototype.forEach=function(t){this.content.forEach(t)},gl.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},gl.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},kl.textContent.get=function(){return this.textBetween(0,this.content.size,"")},gl.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},kl.firstChild.get=function(){return this.content.firstChild},kl.lastChild.get=function(){return this.content.lastChild},gl.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},gl.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},gl.prototype.hasMarkup=function(t,e,n){return this.type==t&&Kh(this.attrs,e||t.defaultAttrs||yl)&&Zh.sameSet(this.marks,n||Zh.none)},gl.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},gl.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},gl.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},gl.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return Yh.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new Yh(a,r.depth-i,o.depth-i)},gl.prototype.replace=function(t,e,n){return el(this.resolve(t),this.resolve(e),n)},gl.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}},gl.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},gl.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},gl.prototype.resolve=function(t){return hl.resolveCached(this,t)},gl.prototype.resolveNoCache=function(t){return hl.resolve(this,t)},gl.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},kl.isBlock.get=function(){return this.type.isBlock},kl.isTextblock.get=function(){return this.type.isTextblock},kl.inlineContent.get=function(){return this.type.inlineContent},kl.isInline.get=function(){return this.type.isInline},kl.isText.get=function(){return this.type.isText},kl.isLeaf.get=function(){return this.type.isLeaf},kl.isAtom.get=function(){return this.type.isAtom},gl.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),wl(this.marks,t)},gl.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},gl.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=Vh.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},gl.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},gl.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},gl.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=Zh.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!Zh.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},gl.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},gl.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=Vh.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(gl.prototype,kl);var bl=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wl(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(gl);function wl(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var xl=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},Sl={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};xl.parse=function(t,e){var n=new Cl(t,e);if(null==n.next)return xl.empty;var r=Ml(n);n.next&&n.err("Unexpected trailing text");var o=function(t){var e=Object.create(null);return n(zl(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];zl(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new xl(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(Al);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}(function(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var u=n();return o(i(t.expr,e),u),o(i(t.expr,u),u),[r(u)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var h=e,l=0;l<t.min;l++){var p=n();o(i(t.expr,h),p),h=p}if(-1==t.max)o(i(t.expr,h),h);else for(var f=t.min;f<t.max;f++){var d=n();r(h,d),o(i(t.expr,h),d),h=d}return[r(h)]}if("name"==t.type)return[r(e,null,t.value)]}}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],u=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(u)&&r.push(u)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},xl.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},xl.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},Sl.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},Sl.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},xl.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},xl.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(i,s){var a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return Vh.from(s.map((function(t){return t.createAndFill()})));for(var c=0;c<i.next.length;c+=2){var u=i.next[c],h=i.next[c+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(h)){r.push(h);var l=o(h,s.concat(u));if(l)return l}}}(this,[])},xl.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},xl.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},Sl.edgeCount.get=function(){return this.next.length>>1},xl.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},xl.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(xl.prototype,Sl),xl.empty=new xl(!0);var Cl=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},Ol={next:{configurable:!0}};function Ml(t){var e=[];do{e.push(_l(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function _l(t){var e=[];do{e.push(Tl(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function Tl(t){for(var e=function(t){if(t.eat("(")){var e=Ml(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}0==o.length&&t.err("No node type or group '"+e+"' found");return o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=Nl(t,e)}return e}function El(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function Nl(t,e){var n=El(t),r=n;return t.eat(",")&&(r="}"!=t.next?El(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Al(t,e){return e-t}function zl(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||e(c)}}(e),n.sort(Al)}function Rl(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Il(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function Dl(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new Pl(t[n]);return e}Ol.next.get=function(){return this.tokens[this.pos]},Cl.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},Cl.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(Cl.prototype,Ol);var jl=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=Dl(n.attrs),this.defaultAttrs=Rl(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},Fl={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Fl.isInline.get=function(){return!this.isBlock},Fl.isTextblock.get=function(){return this.isBlock&&this.inlineContent},Fl.isLeaf.get=function(){return this.contentMatch==xl.empty},Fl.isAtom.get=function(){return this.isLeaf||this.spec.atom},jl.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},jl.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},jl.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:Il(this.attrs,t)},jl.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new gl(this,this.computeAttrs(t),Vh.from(e),Zh.setFrom(n))},jl.prototype.createChecked=function(t,e,n){if(e=Vh.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new gl(this,this.computeAttrs(t),e,Zh.setFrom(n))},jl.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=Vh.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(Vh.empty,!0);return o?new gl(this,t,e.append(o),Zh.setFrom(n)):null},jl.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},jl.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},jl.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},jl.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:Zh.empty:t},jl.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new jl(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(jl.prototype,Fl);var Pl=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},Bl={isRequired:{configurable:!0}};Bl.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(Pl.prototype,Bl);var ql=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=Dl(r.attrs),this.rank=e,this.excluded=null;var o=Rl(this.attrs);this.instance=o&&new Zh(this,o)};ql.prototype.create=function(t){return!t&&this.instance?this.instance:new Zh(this,Il(this.attrs,t))},ql.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new ql(t,r++,e,o)})),n},ql.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},ql.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},ql.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var $l=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=qh.from(t.nodes),this.spec.marks=qh.from(t.marks),this.nodes=jl.compile(this.spec.nodes,this),this.marks=ql.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],i=o.spec.content||"",s=o.spec.marks;o.contentMatch=n[i]||(n[i]=xl.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==s?null:s?Ll(this,s.split(" ")):""!=s&&o.inlineContent?null:[]}for(var a in this.marks){var c=this.marks[a],u=c.spec.excludes;c.excluded=null==u?[c]:""==u?[]:Ll(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Ll(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}$l.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof jl))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},$l.prototype.text=function(t,e){var n=this.nodes.text;return new bl(n,n.defaultAttrs,t,Zh.setFrom(e))},$l.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},$l.prototype.nodeFromJSON=function(t){return gl.fromJSON(this,t)},$l.prototype.markFromJSON=function(t){return Zh.fromJSON(this,t)},$l.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var Jl=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};Jl.prototype.parse=function(t,e){void 0===e&&(e={});var n=new Zl(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},Jl.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new Zl(this,e,!0);return n.addAll(t,null,e.from,e.to),Yh.maxOpen(n.finish())},Jl.prototype.matchTag=function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(Yl(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},Jl.prototype.matchStyle=function(t,e,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var s=i.getAttrs(e);if(!1===s)continue;i.attrs=s}return i}}},Jl.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=Xl(t)),t.mark=e}))};for(var o in t.marks)r(o);var i;for(var s in t.nodes)i=void 0,(i=t.nodes[s].spec.parseDOM)&&i.forEach((function(t){n(t=Xl(t)),t.node=s}));return e},Jl.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new Jl(t,Jl.schemaRules(t)))};var Vl={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Wl={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Hl={ol:!0,ul:!0};function Ul(t){return(t?1:0)|("full"===t?2:0)}var Kl=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=Zh.none,this.pendingMarks=r,this.stashMarks=[]};Kl.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(Vh.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},Kl.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=Vh.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(Vh.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},Kl.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},Kl.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):Ql(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var Zl=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=Ul(e.preserveWhitespace)|(n?4:0);r=o?new Kl(o.type,o.attrs,Zh.none,Zh.none,!0,e.topMatch||o.type.contentMatch,i):new Kl(n?null:t.schema.topNodeType,null,Zh.none,Zh.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},Gl={top:{configurable:!0},currentPos:{configurable:!0}};function Yl(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Xl(t){var e={};for(var n in t)e[n]=t[n];return e}function Ql(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[];return function t(n){i.push(n);for(var r=0;r<n.edgeCount;r++){var o=n.edge(r),s=o.type,a=o.next;if(s==e)return!0;if(i.indexOf(a)<0&&t(a))return!0}}(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}Gl.top.get=function(){return this.nodes[this.open]},Zl.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},Zl.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(2&n.options||(n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},Zl.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();Hl.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&Hl.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(o?o.ignore:Wl.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var i,s=this.top,a=this.needsBlock;if(Vl.hasOwnProperty(r))i=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),i&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,o,!1===o.consuming?n:null)},Zl.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},Zl.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},Zl.prototype.readStyles=function(t){var e=Zh.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(t[n],t[n+1],this,r);if(!o)continue t;if(o.ignore)return null;if(e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;r=o}return e},Zl.prototype.addElementByRule=function(t,e,n){var r,o,i,s=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):r=this.enter(o,e.attrs,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=e.contentElement;"string"==typeof c?c=t.querySelector(c):"function"==typeof c&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,r)}r&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},Zl.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&Vl.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},Zl.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},Zl.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},Zl.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},Zl.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?-5&o.options:Ul(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new Kl(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},Zl.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},Zl.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},Zl.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},Gl.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},Zl.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},Zl.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},Zl.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},Zl.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},Zl.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1);return function t(s,a){for(;s>=0;s--){var c=n[s];if(""==c){if(s==n.length-1||0==s)continue;for(;a>=i;a--)if(t(s-1,a))return!0;return!1}var u=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;a--}return!0}(n.length-1,this.open)},Zl.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},Zl.prototype.addPendingMark=function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},Zl.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(Zl.prototype,Gl);var tp=function(t,e){this.nodes=t||{},this.marks=e||{}};function ep(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function np(t){return t.document||window.document}function rp(t){return rp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(t)}function op(t){var e="function"===typeof Map?new Map:void 0;return op=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return ip(t,arguments,lp(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ap(r,t)},op(t)}function ip(t,e,n){return ip=hp()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&ap(o,n.prototype),o},ip.apply(null,arguments)}function sp(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ap(t,e)}function ap(t,e){return ap=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ap(t,e)}function cp(t){var e=hp();return function(){var n,r=lp(t);if(e){var o=lp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return up(this,n)}}function up(t,e){return!e||"object"!==rp(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hp(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function lp(t){return lp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},lp(t)}function pp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dp(t,e,n){return e&&fp(t.prototype,e),n&&fp(t,n),t}tp.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=np(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<t.marks.length;){var c=t.marks[s++],u=r.serializeMark(c,t.isInline,e);u&&(i.push(c,o),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(r.serializeNode(t,e))})),n},tp.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=tp.renderSpec(np(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},tp.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},tp.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&tp.renderSpec(np(n),r(t,e))},tp.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==$h(a)&&null==a.nodeType&&!Array.isArray(a))for(var u in c=2,a)if(null!=a[u]){var h=u.indexOf(" ");h>0?s.setAttributeNS(u.slice(0,h),u.slice(h+1),a[u]):s.setAttribute(u,a[u])}for(var l=c;l<e.length;l++){var p=e[l];if(0===p){if(l<e.length-1||l>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var f=tp.renderSpec(t,p,n),d=f.dom,m=f.contentDOM;if(s.appendChild(d),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},tp.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new tp(this.nodesFromSchema(t),this.marksFromSchema(t)))},tp.nodesFromSchema=function(t){var e=ep(t.nodes);return e.text||(e.text=function(t){return t.text}),e},tp.marksFromSchema=function(t){return ep(t.marks)};var mp=Math.pow(2,16);function vp(t){return 65535&t}var yp=function(){function t(e,n,r){pp(this,t),this.pos=e,this.delInfo=n,this.recover=r}return dp(t,[{key:"deleted",get:function(){return(8&this.delInfo)>0}},{key:"deletedBefore",get:function(){return(5&this.delInfo)>0}},{key:"deletedAfter",get:function(){return(6&this.delInfo)>0}},{key:"deletedAcross",get:function(){return(4&this.delInfo)>0}}]),t}(),gp=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(pp(this,t),this.ranges=e,this.inverted=n,!e.length&&t.empty)return t.empty}return dp(t,[{key:"recover",value:function(t){var e=0,n=vp(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/mp}(t)}},{key:"mapResult",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!1)}},{key:"map",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!0)}},{key:"_map",value:function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var c=this.ranges[s+o],u=this.ranges[s+i],h=a+c;if(t<=h){var l=a+r+((c?t==a?-1:t==h?1:e:e)<0?0:u);if(n)return l;var p=t==(e<0?a:h)?null:s/3+(t-a)*mp,f=t==a?2:t==h?1:4;return(e<0?t!=a:t!=h)&&(f|=8),new yp(l,f,p)}r+=u-c}return n?t+r:new yp(t+r,0,null)}},{key:"touches",value:function(t,e){for(var n=0,r=vp(e),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var c=this.ranges[s+o];if(t<=a+c&&s==3*r)return!0;n+=this.ranges[s+i]-c}return!1}},{key:"forEach",value:function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+e],u=this.ranges[r+n];t(s,s+c,a,a+u),o+=u-c}}},{key:"invert",value:function(){return new t(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(e){return 0==e?t.empty:new t(e<0?[0,-e,0]:[0,0,e])}}]),t}();gp.empty=new gp([]);var kp=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;pp(this,t),this.maps=e,this.mirror=n,this.from=r,this.to=o}return dp(t,[{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new t(this.maps,this.mirror,e,n)}},{key:"copy",value:function(){return new t(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}},{key:"appendMap",value:function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}},{key:"appendMapping",value:function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:void 0)}}},{key:"getMirror",value:function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}},{key:"setMirror",value:function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}},{key:"appendMappingInverted",value:function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:void 0)}}},{key:"invert",value:function(){var e=new t;return e.appendMappingInverted(this),e}},{key:"map",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}},{key:"mapResult",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!1)}},{key:"_map",value:function(t,e,n){for(var r=0,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,t=this.maps[s].recover(i.recover);continue}}r|=i.delInfo,t=i.pos}return n?t:new yp(t,r,null)}}]),t}(),bp=Object.create(null),wp=function(){function t(){pp(this,t)}return dp(t,[{key:"getMap",value:function(){return gp.empty}},{key:"merge",value:function(t){return null}}],[{key:"fromJSON",value:function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=bp[e.stepType];if(!n)throw new RangeError("No step type ".concat(e.stepType," defined"));return n.fromJSON(t,e)}},{key:"jsonID",value:function(t,e){if(t in bp)throw new RangeError("Duplicate use of step JSON ID "+t);return bp[t]=e,e.prototype.jsonID=t,e}}]),t}(),xp=function(){function t(e,n){pp(this,t),this.doc=e,this.failed=n}return dp(t,null,[{key:"ok",value:function(e){return new t(e,null)}},{key:"fail",value:function(e){return new t(null,e)}},{key:"fromReplace",value:function(e,n,r,o){try{return t.ok(e.replace(n,r,o))}catch(i){if(i instanceof Gh)return t.fail(i.message);throw i}}}]),t}();function Sp(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(Sp(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return Vh.fromArray(r)}var Cp=function(t){sp(n,t);var e=cp(n);function n(t,r,o){var i;return pp(this,n),(i=e.call(this)).from=t,i.to=r,i.mark=o,i}return dp(n,[{key:"apply",value:function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Yh(Sp(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return xp.fromReplace(t,this.from,this.to,i)}},{key:"invert",value:function(){return new Op(this.from,this.to,this.mark)}},{key:"map",value:function(t){var e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new n(e.pos,r.pos,this.mark)}},{key:"merge",value:function(t){return t instanceof n&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new n(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new n(e.from,e.to,t.markFromJSON(e.mark))}}]),n}(wp);wp.jsonID("addMark",Cp);var Op=function(t){sp(n,t);var e=cp(n);function n(t,r,o){var i;return pp(this,n),(i=e.call(this)).from=t,i.to=r,i.mark=o,i}return dp(n,[{key:"apply",value:function(t){var e=this,n=t.slice(this.from,this.to),r=new Yh(Sp(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))}),t),n.openStart,n.openEnd);return xp.fromReplace(t,this.from,this.to,r)}},{key:"invert",value:function(){return new Cp(this.from,this.to,this.mark)}},{key:"map",value:function(t){var e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new n(e.pos,r.pos,this.mark)}},{key:"merge",value:function(t){return t instanceof n&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new n(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new n(e.from,e.to,t.markFromJSON(e.mark))}}]),n}(wp);wp.jsonID("removeMark",Op);var Mp=function(t){sp(n,t);var e=cp(n);function n(t,r){var o;return pp(this,n),(o=e.call(this)).pos=t,o.mark=r,o}return dp(n,[{key:"apply",value:function(t){var e=t.nodeAt(this.pos);if(!e)return xp.fail("No node at mark step's position");var n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return xp.fromReplace(t,this.pos,this.pos+1,new Yh(Vh.from(n),0,e.isLeaf?0:1))}},{key:"invert",value:function(t){var e=t.nodeAt(this.pos);if(e){var r=this.mark.addToSet(e.marks);if(r.length==e.marks.length){for(var o=0;o<e.marks.length;o++)if(!e.marks[o].isInSet(r))return new n(this.pos,e.marks[o]);return new n(this.pos,this.mark)}}return new _p(this.pos,this.mark)}},{key:"map",value:function(t){var e=t.mapResult(this.pos,1);return e.deletedAfter?null:new n(e.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new n(e.pos,t.markFromJSON(e.mark))}}]),n}(wp);wp.jsonID("addNodeMark",Mp);var _p=function(t){sp(n,t);var e=cp(n);function n(t,r){var o;return pp(this,n),(o=e.call(this)).pos=t,o.mark=r,o}return dp(n,[{key:"apply",value:function(t){var e=t.nodeAt(this.pos);if(!e)return xp.fail("No node at mark step's position");var n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return xp.fromReplace(t,this.pos,this.pos+1,new Yh(Vh.from(n),0,e.isLeaf?0:1))}},{key:"invert",value:function(t){var e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new Mp(this.pos,this.mark):this}},{key:"map",value:function(t){var e=t.mapResult(this.pos,1);return e.deletedAfter?null:new n(e.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new n(e.pos,t.markFromJSON(e.mark))}}]),n}(wp);wp.jsonID("removeNodeMark",_p);var Tp=function(t){sp(n,t);var e=cp(n);function n(t,r,o){var i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return pp(this,n),(i=e.call(this)).from=t,i.to=r,i.slice=o,i.structure=s,i}return dp(n,[{key:"apply",value:function(t){return this.structure&&Np(t,this.from,this.to)?xp.fail("Structure replace would overwrite content"):xp.fromReplace(t,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new gp([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(t){return new n(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}},{key:"map",value:function(t){var e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deletedAcross&&r.deletedAcross?null:new n(e.pos,Math.max(e.pos,r.pos),this.slice)}},{key:"merge",value:function(t){if(!(t instanceof n)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var e=this.slice.size+t.slice.size==0?Yh.empty:new Yh(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new n(t.from,this.to,e,this.structure)}var r=this.slice.size+t.slice.size==0?Yh.empty:new Yh(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new n(this.from,this.to+(t.to-t.from),r,this.structure)}},{key:"toJSON",value:function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new n(e.from,e.to,Yh.fromJSON(t,e.slice),!!e.structure)}}]),n}(wp);wp.jsonID("replace",Tp);var Ep=function(t){sp(n,t);var e=cp(n);function n(t,r,o,i,s,a){var c,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return pp(this,n),(c=e.call(this)).from=t,c.to=r,c.gapFrom=o,c.gapTo=i,c.slice=s,c.insert=a,c.structure=u,c}return dp(n,[{key:"apply",value:function(t){if(this.structure&&(Np(t,this.from,this.gapFrom)||Np(t,this.gapTo,this.to)))return xp.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return xp.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?xp.fromReplace(t,this.from,this.to,n):xp.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new gp([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(t){var e=this.gapTo-this.gapFrom;return new n(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(t){var e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return e.deletedAcross&&r.deletedAcross||o<e.pos||i>r.pos?null:new n(e.pos,r.pos,o,i,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new n(e.from,e.to,e.gapFrom,e.gapTo,Yh.fromJSON(t,e.slice),e.insert,!!e.structure)}}]),n}(wp);function Np(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function Ap(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=t.steps.length;t.doc.nodesBetween(e,n,(function(e,n){if(e.isTextblock&&!e.hasMarkup(r,o)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(t.doc,t.mapping.slice(i).map(n),r)){t.clearIncompatible(t.mapping.slice(i).map(n,1),r);var s=t.mapping.slice(i),a=s.map(n,1),c=s.map(n+e.nodeSize,1);return t.step(new Ep(a,c,a+1,c-1,new Yh(Vh.from(r.create(o,null,e.marks)),0,0),1,!0)),!1}}))}function zp(t,e,n,r,o){var i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);var s=n.create(r,null,o||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ep(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Yh(Vh.from(s),0,0),1,!0))}function Rp(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=t.doc.resolve(e),i=Vh.empty,s=Vh.empty,a=o.depth,c=o.depth-n,u=n-1;a>c;a--,u--){i=Vh.from(o.node(a).copy(i));var h=r&&r[u];s=Vh.from(h?h.type.create(h.attrs,s):o.node(a).copy(s))}t.step(new Tp(e,e,new Yh(i.append(s),n,n),!0))}function Ip(t,e,n){var r=new Tp(e-n,e+n,Yh.empty,!0);t.step(r)}function Dp(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Yh.empty;if(e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);return jp(o,i,r)?new Tp(e,n,r):new Fp(o,i,r).fit()}function jp(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}wp.jsonID("replaceAround",Ep);var Fp=function(){function t(e,n,r){pp(this,t),this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Vh.empty;for(var o=0;o<=e.depth;o++){var i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(var s=e.depth;s>0;s--)this.placed=Vh.from(e.node(s).copy(this.placed))}return dp(t,[{key:"depth",get:function(){return this.frontier.length-1}},{key:"fit",value:function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;for(var i=this.placed,s=r.depth,a=o.depth;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;var c=new Yh(i,s,a);return e>-1?new Ep(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new Tp(r.pos,o.pos,c):null}},{key:"findFittable",value:function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var n=null,r=(e?(n=qp(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,o=this.depth;o>=0;o--){var i=this.frontier[o],s=i.type,a=i.match,c=void 0,u=null;if(1==t&&(r?a.matchType(r.type)||(u=a.fillBefore(Vh.from(r),!1)):n&&s.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:o,parent:n,inject:u};if(2==t&&r&&(c=a.findWrapping(r.type)))return{sliceDepth:e,frontierDepth:o,parent:n,wrap:c};if(n&&a.matchType(n.type))break}}},{key:"openMore",value:function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=qp(e,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new Yh(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}},{key:"dropNode",value:function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=qp(e,n);if(o.childCount<=1&&n>0){var i=e.size-n<=n+o.size;this.unplaced=new Yh(Pp(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Yh(Pp(e,n,1),n,r)}},{key:"placeNodes",value:function(t){for(var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,o=t.inject,i=t.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var s=0;s<i.length;s++)this.openFrontierNode(i[s]);var a=this.unplaced,c=r?r.content:a.content,u=a.openStart-e,h=0,l=[],p=this.frontier[n],f=p.match,d=p.type;if(o){for(var m=0;m<o.childCount;m++)l.push(o.child(m));f=f.matchFragment(o)}for(var v=c.size+e-(a.content.size-a.openEnd);h<c.childCount;){var y=c.child(h),g=f.matchType(y.type);if(!g)break;(++h>1||0==u||y.content.size)&&(f=g,l.push($p(y.mark(d.allowedMarks(y.marks)),1==h?u:0,h==c.childCount?v:-1)))}var k=h==c.childCount;k||(v=-1),this.placed=Bp(this.placed,n,Vh.from(l)),this.frontier[n].match=f,k&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var b=0,w=c;b<v;b++){var x=w.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),w=x.content}this.unplaced=k?0==e?Yh.empty:new Yh(Pp(a.content,e-1,1),e-1,v<0?a.openEnd:e-1):new Yh(Pp(a.content,e,h),a.openStart,a.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!Lp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r}},{key:"findCloseLevel",value:function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=Lp(t,e,o,r,i);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],u=c.match,h=Lp(t,a,c.type,u,!0);if(!h||h.childCount)continue t}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}}},{key:"close",value:function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Bp(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t}},{key:"openFrontierNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=Bp(this.placed,this.depth,Vh.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}},{key:"closeFrontierNode",value:function(){var t=this.frontier.pop().match.fillBefore(Vh.empty,!0);t.childCount&&(this.placed=Bp(this.placed,this.frontier.length,t))}}]),t}();function Pp(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Pp(t.firstChild.content,e-1,n)))}function Bp(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Bp(t.lastChild.content,e-1,n)))}function qp(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function $p(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,$p(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Vh.empty,!0)))),t.copy(r)}function Lp(t,e,n,r,o){var i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function Jp(t){return t.spec.defining||t.spec.definingForContent}function Vp(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(Vp(i.content,e+1,n,r,i)))}if(e>r){var s=o.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(Vh.empty,!0))}return t}function Wp(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(o==e.start(r)||r==t.depth&&r==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==o-1)&&n.push(r)}return n}var Hp=function(t){sp(n,t);var e=cp(n);function n(t,r,o){var i;return pp(this,n),(i=e.call(this)).pos=t,i.attr=r,i.value=o,i}return dp(n,[{key:"apply",value:function(t){var e=t.nodeAt(this.pos);if(!e)return xp.fail("No node at attribute step's position");var n=Object.create(null);for(var r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;var o=e.type.create(n,null,e.marks);return xp.fromReplace(t,this.pos,this.pos+1,new Yh(Vh.from(o),0,e.isLeaf?0:1))}},{key:"getMap",value:function(){return gp.empty}},{key:"invert",value:function(t){return new n(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}},{key:"map",value:function(t){var e=t.mapResult(this.pos,1);return e.deletedAfter?null:new n(e.pos,this.attr,this.value)}},{key:"toJSON",value:function(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new n(e.pos,e.attr,e.value)}}]),n}(wp);wp.jsonID("attr",Hp);var Up=Error;Up=function t(e){var n=Error.call(this,e);return n.__proto__=t.prototype,n},(Up.prototype=Object.create(Error.prototype)).constructor=Up,Up.prototype.name="TransformError";var Kp,Zp,Gp=function(){function t(e){pp(this,t),this.doc=e,this.steps=[],this.docs=[],this.mapping=new kp}return dp(t,[{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"step",value:function(t){var e=this.maybeStep(t);if(e.failed)throw new Up(e.failed);return this}},{key:"maybeStep",value:function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}},{key:"docChanged",get:function(){return this.steps.length>0}},{key:"addStep",value:function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}},{key:"replace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yh.empty,r=Dp(this.doc,t,e,n);return r&&this.step(r),this}},{key:"replaceWith",value:function(t,e,n){return this.replace(t,e,new Yh(Vh.from(n),0,0))}},{key:"delete",value:function(t,e){return this.replace(t,e,Yh.empty)}},{key:"insert",value:function(t,e){return this.replaceWith(t,t,e)}},{key:"replaceRange",value:function(t,e,n){return function(t,e,n,r){if(!r.size)return t.deleteRange(e,n);var o=t.doc.resolve(e),i=t.doc.resolve(n);if(jp(o,i,r))return t.step(new Tp(e,n,r));var s=Wp(o,t.doc.resolve(n));0==s[s.length-1]&&s.pop();var a=-(o.depth+1);s.unshift(a);for(var c=o.depth,u=o.pos-1;c>0;c--,u--){var h=o.node(c).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;s.indexOf(c)>-1?a=c:o.before(c)==u&&s.splice(1,0,-c)}for(var l=s.indexOf(a),p=[],f=r.openStart,d=r.content,m=0;;m++){var v=d.firstChild;if(p.push(v),m==r.openStart)break;d=v.content}for(var y=f-1;y>=0;y--){var g=p[y].type,k=Jp(g);if(k&&o.node(l).type!=g)f=y;else if(k||!g.isTextblock)break}for(var b=r.openStart;b>=0;b--){var w=(b+f+1)%(r.openStart+1),x=p[w];if(x)for(var S=0;S<s.length;S++){var C=s[(S+l)%s.length],O=!0;C<0&&(O=!1,C=-C);var M=o.node(C-1),_=o.index(C-1);if(M.canReplaceWith(_,_,x.type,x.marks))return t.replace(o.before(C),O?i.after(C):n,new Yh(Vp(r.content,0,r.openStart,w),w,r.openEnd))}}for(var T=t.steps.length,E=s.length-1;E>=0&&(t.replace(e,n,r),!(t.steps.length>T));E--){var N=s[E];N<0||(e=o.before(N),n=i.after(N))}}(this,t,e,n),this}},{key:"replaceRangeWith",value:function(t,e,n){return function(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){var o=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}return null}(t.doc,e,r.type);null!=o&&(e=n=o)}t.replaceRange(e,n,new Yh(Vh.from(r),0,0))}(this,t,e,n),this}},{key:"deleteRange",value:function(t,e){return function(t,e,n){for(var r=t.doc.resolve(e),o=t.doc.resolve(n),i=Wp(r,o),s=0;s<i.length;s++){var a=i[s],c=s==i.length-1;if(c&&0==a||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(c||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(var u=1;u<=r.depth&&u<=o.depth;u++)if(e-r.start(u)==r.depth-u&&n>r.end(u)&&o.end(u)-n!=o.depth-u)return t.delete(r.before(u),n);t.delete(e,n)}(this,t,e),this}},{key:"lift",value:function(t,e){return function(t,e,n){for(var r=e.$from,o=e.$to,i=e.depth,s=r.before(i+1),a=o.after(i+1),c=s,u=a,h=Vh.empty,l=0,p=i,f=!1;p>n;p--)f||r.index(p)>0?(f=!0,h=Vh.from(r.node(p).copy(h)),l++):c--;for(var d=Vh.empty,m=0,v=i,y=!1;v>n;v--)y||o.after(v+1)<o.end(v)?(y=!0,d=Vh.from(o.node(v).copy(d)),m++):u++;t.step(new Ep(c,u,s,a,new Yh(h.append(d),l,m),h.size-l,!0))}(this,t,e),this}},{key:"join",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Ip(this,t,e),this}},{key:"wrap",value:function(t,e){return function(t,e,n){for(var r=Vh.empty,o=n.length-1;o>=0;o--){if(r.size){var i=n[o].type.contentMatch.matchFragment(r);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Vh.from(n[o].type.create(n[o].attrs,r))}var s=e.start,a=e.end;t.step(new Ep(s,a,s,a,new Yh(r,0,0),n.length,!0))}(this,t,e),this}},{key:"setBlockType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Ap(this,t,e,n,r),this}},{key:"setNodeMarkup",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return zp(this,t,e,n,r),this}},{key:"setNodeAttribute",value:function(t,e,n){return this.step(new Hp(t,e,n)),this}},{key:"addNodeMark",value:function(t,e){return this.step(new Mp(t,e)),this}},{key:"removeNodeMark",value:function(t,e){if(!(e instanceof Zh)){var n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(!(e=e.isInSet(n.marks)))return this}return this.step(new _p(t,e)),this}},{key:"split",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return Rp(this,t,e,n),this}},{key:"addMark",value:function(t,e,n){return function(t,e,n,r){var o,i,s=[],a=[];t.doc.nodesBetween(e,n,(function(t,c,u){if(t.isInline){var h=t.marks;if(!r.isInSet(h)&&u.type.allowsMarkType(r.type)){for(var l=Math.max(c,e),p=Math.min(c+t.nodeSize,n),f=r.addToSet(h),d=0;d<h.length;d++)h[d].isInSet(f)||(o&&o.to==l&&o.mark.eq(h[d])?o.to=p:s.push(o=new Op(l,p,h[d])));i&&i.to==l?i.to=p:a.push(i=new Cp(l,p,r))}}})),s.forEach((function(e){return t.step(e)})),a.forEach((function(e){return t.step(e)}))}(this,t,e,n),this}},{key:"removeMark",value:function(t,e,n){return function(t,e,n,r){var o=[],i=0;t.doc.nodesBetween(e,n,(function(t,s){if(t.isInline){i++;var a=null;if(r instanceof ql)for(var c,u=t.marks;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u);else r?r.isInSet(t.marks)&&(a=[r]):a=t.marks;if(a&&a.length)for(var h=Math.min(s+t.nodeSize,n),l=0;l<a.length;l++){for(var p=a[l],f=void 0,d=0;d<o.length;d++){var m=o[d];m.step==i-1&&p.eq(o[d].style)&&(f=m)}f?(f.to=h,f.step=i):o.push({style:p,from:Math.max(s,e),to:h,step:i})}}})),o.forEach((function(e){return t.step(new Op(e.from,e.to,e.style))}))}(this,t,e,n),this}},{key:"clearIncompatible",value:function(t,e,n){return function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,o=t.doc.nodeAt(e),i=[],s=e+1,a=0;a<o.childCount;a++){var c=o.child(a),u=s+c.nodeSize,h=r.matchType(c.type);if(h){r=h;for(var l=0;l<c.marks.length;l++)n.allowsMarkType(c.marks[l].type)||t.step(new Op(s,u,c.marks[l]))}else i.push(new Tp(s,u,Yh.empty));s=u}if(!r.validEnd){var p=r.fillBefore(Vh.empty,!0);t.replace(s,s,new Yh(p,0,0))}for(var f=i.length-1;f>=0;f--)t.step(i[f])}(this,t,e,n),this}}]),t}();function Yp(t){return Yp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(t)}function Xp(t,e){return Xp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Xp(t,e)}function Qp(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ef(t);if(e){var o=ef(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tf(this,n)}}function tf(t,e){return!e||"object"!==Yp(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ef(t){return ef=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ef(t)}function nf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function of(t,e,n){return e&&rf(t.prototype,e),n&&rf(t,n),t}if("undefined"!=typeof WeakMap){var sf=new WeakMap;Kp=function(t){return sf.get(t)},Zp=function(t,e){return sf.set(t,e),e}}else{var af=[],cf=0;Kp=function(t){for(var e=0;e<af.length;e+=2)if(af[e]==t)return af[e+1]},Zp=function(t,e){return 10==cf&&(cf=0),af[cf++]=t,af[cf++]=e}}var uf=function(){function t(e,n,r,o){nf(this,t),this.width=e,this.height=n,this.map=r,this.problems=o}return of(t,[{key:"findCell",value:function(t){for(var e=0;e<this.map.length;e++){var n=this.map[e];if(n==t){for(var r=e%this.width,o=e/this.width|0,i=r+1,s=o+1,a=1;i<this.width&&this.map[e+a]==n;a++)i++;for(var c=1;s<this.height&&this.map[e+this.width*c]==n;c++)s++;return{left:r,top:o,right:i,bottom:s}}}throw new RangeError("No cell with offset "+t+" found")}},{key:"colCount",value:function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")}},{key:"nextCell",value:function(t,e,n){var r=this.findCell(t),o=r.left,i=r.right,s=r.top,a=r.bottom;return"horiz"==e?(n<0?0==o:i==this.width)?null:this.map[s*this.width+(n<0?o-1:i)]:(n<0?0==s:a==this.height)?null:this.map[o+this.width*(n<0?s-1:a)]}},{key:"rectBetween",value:function(t,e){var n=this.findCell(t),r=n.left,o=n.right,i=n.top,s=n.bottom,a=this.findCell(e),c=a.left,u=a.right,h=a.top,l=a.bottom;return{left:Math.min(r,c),top:Math.min(i,h),right:Math.max(o,u),bottom:Math.max(s,l)}}},{key:"cellsInRect",value:function(t){for(var e=[],n={},r=t.top;r<t.bottom;r++)for(var o=t.left;o<t.right;o++){var i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,o==t.left&&o&&this.map[i-1]==s||r==t.top&&r&&this.map[i-this.width]==s||e.push(s))}return e}},{key:"positionAt",value:function(t,e,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==t){for(var s=e+t*this.width,a=(t+1)*this.width;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}}}],[{key:"get",value:function(t){return Kp(t)||Zp(t,hf(t))}}]),t}();function hf(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=function(t){for(var e=-1,n=!1,r=0;r<t.childCount;r++){var o=t.child(r),i=0;if(n)for(var s=0;s<r;s++)for(var a=t.child(s),c=0;c<a.childCount;c++){var u=a.child(c);s+u.attrs.rowspan>r&&(i+=u.attrs.colspan)}for(var h=0;h<o.childCount;h++){var l=o.child(h);i+=l.attrs.colspan,l.attrs.rowspan>1&&(n=!0)}-1==e?e=i:e!=i&&(e=Math.max(e,i))}return e}(t),n=t.childCount,r=[],o=0,i=null,s=[],a=0,c=e*n;a<c;a++)r[a]=0;for(var u=0,h=0;u<n;u++){var l=t.child(u);h++;for(var p=0;;p++){for(;o<r.length&&0!=r[o];)o++;if(p==l.childCount)break;for(var f=l.child(p),d=f.attrs,m=d.colspan,v=d.rowspan,y=d.colwidth,g=0;g<v;g++){if(g+u>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:h,n:v-g});break}for(var k=o+g*e,b=0;b<m;b++){0==r[k+b]?r[k+b]=h:(i||(i=[])).push({type:"collision",row:u,pos:h,n:m-b});var w=y&&y[b];if(w){var x=(k+b)%e*2,S=s[x];null==S||S!=w&&1==s[x+1]?(s[x]=w,s[x+1]=1):S==w&&s[x+1]++}}}o+=m,h+=f.nodeSize}for(var C=(u+1)*e,O=0;o<C;)0==r[o++]&&O++;O&&(i||(i=[])).push({type:"missing",row:u,n:O}),h++}for(var M=new uf(e,n,r,i),_=!1,T=0;!_&&T<s.length;T+=2)null!=s[T]&&s[T+1]<n&&(_=!0);return _&&function(t,e,n){t.problems||(t.problems=[]);for(var r=0,o={};r<t.map.length;r++){var i=t.map[r];if(!o[i]){o[i]=!0;for(var s=n.nodeAt(i),a=null,c=0;c<s.attrs.colspan;c++){var u=e[2*((r+c)%t.width)];null==u||s.attrs.colwidth&&s.attrs.colwidth[c]==u||((a||(a=lf(s.attrs)))[c]=u)}a&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}}(M,s,t),M}function lf(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],n=0;n<t.colspan;n++)e.push(0);return e}function pf(t,e){if("string"===typeof t)return{};var n=t.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(t){return Number(t)})):null,o=Number(t.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(var s in e){var a=e[s].getFromDOM,c=a&&a(t);null!=c&&(i[s]=c)}return i}function ff(t,e){var n={};for(var r in 1!=t.attrs.colspan&&(n.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(n.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(n["data-colwidth"]=t.attrs.colwidth.join(",")),e){var o=e[r].setDOMAttr;o&&o(t.attrs[r],n)}return n}function df(t){var e=t.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in e)n[r]={default:e[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(t){return pf(t,e)}}],toDOM:function(t){return["td",ff(t,e),0]}},table_header:{content:t.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(t){return pf(t,e)}}],toDOM:function(t){return["th",ff(t,e),0]}}}}function mf(t){var e=t.cached.tableNodeTypes;if(!e)for(var n in e=t.cached.tableNodeTypes={},t.nodes){var r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}return e}var vf=new Ce("selectingCells");function yf(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function gf(t){for(var e=t.selection.$head,n=e.depth;n>0;n--)if("row"==e.node(n).type.spec.tableRole)return!0;return!1}function kf(t){var e=t.selection;return"$anchorCell"in e&&e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:"node"in e&&e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:yf(e.$head)||function(t){for(var e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){var r=e.type.spec.tableRole;if("cell"==r||"header_cell"==r)return t.doc.resolve(n)}for(var o=t.nodeBefore,i=t.pos;o;o=o.lastChild,i--){var s=o.type.spec.tableRole;if("cell"==s||"header_cell"==s)return t.doc.resolve(i-o.nodeSize)}}(e.$head)}function bf(t){return"row"==t.parent.type.spec.tableRole&&!!t.nodeAfter}function wf(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function xf(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function Sf(t){return uf.get(t.node(-1)).findCell(t.pos-t.start(-1))}function Cf(t){return uf.get(t.node(-1)).colCount(t.pos-t.start(-1))}function Of(t,e,n){var r=t.start(-1),o=uf.get(t.node(-1)).nextCell(t.pos-r,e,n);return null==o?null:t.node(0).resolve(r+o)}function Mf(t,e,n){var r={};for(var o in t)r[o]=t[o];return r[e]=n,r}function _f(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=Mf(t,"colspan",t.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some((function(t){return t>0}))||(r.colwidth=null)),r}function Tf(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=Mf(t,"colspan",t.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function Ef(t,e,n){for(var r=mf(e.type.schema).header_cell,o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var Nf=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xp(t,e)}(n,t);var e=Qp(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;nf(this,n);var i=t.node(-1),s=uf.get(i),a=t.start(-1),c=s.rectBetween(t.pos-a,o.pos-a),u=t.node(0),h=s.cellsInRect(c).filter((function(t){return t!=o.pos-a}));h.unshift(o.pos-a);var l=h.map((function(t){var e=i.nodeAt(t),n=t+a+1;return new ae(u.resolve(n),u.resolve(n+e.content.size))}));return(r=e.call(this,l[0].$from,l[0].$to,l)).$anchorCell=t,r.$headCell=o,r}return of(n,[{key:"map",value:function(t,e){var r=t.resolve(e.map(this.$anchorCell.pos)),o=t.resolve(e.map(this.$headCell.pos));if(bf(r)&&bf(o)&&xf(r,o)){var i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?n.rowSelection(r,o):i&&this.isColSelection()?n.colSelection(r,o):new n(r,o)}return he.between(r,o)}},{key:"content",value:function(){for(var t=this.$anchorCell.node(-1),e=uf.get(t),n=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],s=r.top;s<r.bottom;s++){for(var a=[],c=s*e.width+r.left,u=r.left;u<r.right;u++,c++){var h=e.map[c];if(!o[h]){o[h]=!0;var l=e.findCell(h),p=t.nodeAt(h),f=r.left-l.left,d=l.right-r.right;if(f>0||d>0){var m=p.attrs;f>0&&(m=_f(m,0,f)),d>0&&(m=_f(m,m.colspan-d,d)),p=l.left<r.left?p.type.createAndFill(m):p.type.create(m,p.content)}if(l.top<r.top||l.bottom>r.bottom){var v=Mf(p.attrs,"rowspan",Math.min(l.bottom,r.bottom)-Math.max(l.top,r.top));p=l.top<r.top?p.type.createAndFill(v):p.type.create(v,p.content)}a.push(p)}}i.push(t.child(s).copy(wi.from(a)))}var y=this.isColSelection()&&this.isRowSelection()?t:i;return new _i(wi.from(y),1,1)}},{key:"replace",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_i.empty,n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=t.mapping.slice(n);t.replace(c.map(s.pos),c.map(a.pos),o?_i.empty:e)}var u=se.findFrom(t.doc.resolve(t.mapping.slice(n).map(this.to)),-1);u&&t.setSelection(u)}},{key:"replaceWith",value:function(t,e){this.replace(t,new _i(wi.from(e),0,0))}},{key:"forEachCell",value:function(t){for(var e=this.$anchorCell.node(-1),n=uf.get(e),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)t(e.nodeAt(o[i]),r+o[i])}},{key:"isColSelection",value:function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var n=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}},{key:"isRowSelection",value:function(){var t=uf.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),n=t.colCount(this.$anchorCell.pos-e),r=t.colCount(this.$headCell.pos-e);if(Math.min(n,r)>0)return!1;var o=n+this.$anchorCell.nodeAfter.attrs.colspan,i=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==t.width}},{key:"eq",value:function(t){return t instanceof n&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}},{key:"toJSON",value:function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}},{key:"getBookmark",value:function(){return new Af(this.$anchorCell.pos,this.$headCell.pos)}}],[{key:"colSelection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=uf.get(t.node(-1)),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(e.pos-o),a=t.node(0);return i.top<=s.top?(i.top>0&&(t=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(e=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(e=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(t=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new n(t,e)}},{key:"rowSelection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=uf.get(t.node(-1)),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(e.pos-o),a=t.node(0);return i.left<=s.left?(i.left>0&&(t=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(e=a.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(e=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(t=a.resolve(o+r.map[r.width*(i.top+1)-1]))),new n(t,e)}},{key:"fromJSON",value:function(t,e){return new n(t.resolve(e.anchor),t.resolve(e.head))}},{key:"create",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return new n(t.resolve(e),t.resolve(r))}}]),n}(se);Nf.prototype.visible=!1,se.jsonID("cell",Nf);var Af=function(){function t(e,n){nf(this,t),this.anchor=e,this.head=n}return of(t,[{key:"map",value:function(e){return new t(e.map(this.anchor),e.map(this.head))}},{key:"resolve",value:function(t){var e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&xf(e,n)?new Nf(e,n):se.near(n,1)}}]),t}();function zf(t){if(!(t.selection instanceof Nf))return null;var e=[];return t.selection.forEachCell((function(t,n){e.push(nc.node(n,n+t.nodeSize,{class:"selectedCell"}))})),ic.create(t.doc,e)}function Rf(t,e,n){var r,o,i=(e||t).selection,s=(e||t).doc;if(i instanceof pe&&(o=i.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=Nf.create(s,i.from);else if("row"==o){var a=s.resolve(i.from+1);r=Nf.rowSelection(a,a)}else if(!n){var c=uf.get(i.node),u=i.from+1,h=u+c.map[c.width*c.height-1];r=Nf.create(s,u+1,h)}}else i instanceof he&&function(t){var e=t.$from,n=t.$to;if(e.pos==n.pos||e.pos<e.pos-6)return!1;for(var r=e.pos,o=n.pos,i=e.depth;i>=0&&!(e.after(i+1)<e.end(i));i--,r++);for(var s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,o--);return r==o&&/row|table/.test(e.node(i).type.spec.tableRole)}(i)?r=he.create(s,i.from):i instanceof he&&function(t){for(var e,n,r=t.$from,o=t.$to,i=r.depth;i>0;i--){var s=r.node(i);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){e=s;break}}for(var a=o.depth;a>0;a--){var c=o.node(a);if("cell"===c.type.spec.tableRole||"header_cell"===c.type.spec.tableRole){n=c;break}}return e!==n&&0===o.parentOffset}(i)&&(r=he.create(s,i.$from.start(),i.$from.end()));return r&&(e||(e=t.tr)).setSelection(r),e}var If=new Ce("fix-tables");function Df(t,e,n,r){var o=t.childCount,i=e.childCount;t:for(var s=0,a=0;s<i;s++){for(var c=e.child(s),u=a,h=Math.min(o,s+3);u<h;u++)if(t.child(u)==c){a=u+1,n+=c.nodeSize;continue t}r(c,n),a<o&&t.child(a).sameMarkup(c)?Df(t.child(a),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function jf(t,e){var n,r=function(e,r){"table"==e.type.spec.tableRole&&(n=function(t,e,n,r){var o=uf.get(e);if(!o.problems)return r;r||(r=t.tr);for(var i,s,a=[],c=0;c<o.height;c++)a.push(0);for(var u=0;u<o.problems.length;u++){var h=o.problems[u];if("collision"==h.type){for(var l=e.nodeAt(h.pos),p=0;p<l.attrs.rowspan;p++)a[h.row+p]+=h.n;r.setNodeMarkup(r.mapping.map(n+1+h.pos),null,_f(l.attrs,l.attrs.colspan-h.n,h.n))}else if("missing"==h.type)a[h.row]+=h.n;else if("overlong_rowspan"==h.type){var f=e.nodeAt(h.pos);r.setNodeMarkup(r.mapping.map(n+1+h.pos),null,Mf(f.attrs,"rowspan",f.attrs.rowspan-h.n))}else if("colwidth mismatch"==h.type){var d=e.nodeAt(h.pos);r.setNodeMarkup(r.mapping.map(n+1+h.pos),null,Mf(d.attrs,"colwidth",h.colwidth))}}for(var m=0;m<a.length;m++)a[m]&&(null==i&&(i=m),s=m);for(var v=0,y=n+1;v<o.height;v++){var g=e.child(v),k=y+g.nodeSize,b=a[v];if(b>0){var w="cell";g.firstChild&&(w=g.firstChild.type.spec.tableRole);for(var x=[],S=0;S<b;S++)x.push(mf(t.schema)[w].createAndFill());var C=0!=v&&i!=v-1||s!=v?k-1:y+1;r.insert(r.mapping.map(C),x)}y=k}return r.setMeta(If,{fixTables:!0})}(t,e,r,n))};return e?e.doc!=t.doc&&Df(e.doc,t.doc,0,r):t.doc.descendants(r),n}function Ff(t){if(!t.size)return null;for(var e=t.content,n=t.openStart,r=t.openEnd;1==e.childCount&&(n>0&&r>0||"table"==e.firstChild.type.spec.tableRole);)n--,r--,e=e.firstChild.content;var o=e.firstChild,i=o.type.spec.tableRole,s=o.type.schema,a=[];if("row"==i)for(var c=0;c<e.childCount;c++){var u=e.child(c).content,h=c?0:Math.max(0,n-1),l=c<e.childCount-1?0:Math.max(0,r-1);(h||l)&&(u=Pf(mf(s).row,new _i(u,h,l)).content),a.push(u)}else{if("cell"!=i&&"header_cell"!=i)return null;a.push(n||r?Pf(mf(s).row,new _i(e,n,r)).content:e)}return function(t,e){for(var n=[],r=0;r<e.length;r++)for(var o=e[r],i=o.childCount-1;i>=0;i--)for(var s=o.child(i).attrs,a=s.rowspan,c=s.colspan,u=r;u<r+a;u++)n[u]=(n[u]||0)+c;for(var h=0,l=0;l<n.length;l++)h=Math.max(h,n[l]);for(var p=0;p<n.length;p++)if(p>=e.length&&e.push(wi.empty),n[p]<h){for(var f=mf(t).cell.createAndFill(),d=[],m=n[p];m<h;m++)d.push(f);e[p]=e[p].append(wi.from(d))}return{height:e.length,width:h,rows:e}}(s,a)}function Pf(t,e){var n=t.createAndFill();return new Gp(n).replace(0,n.content.size,e).doc}function Bf(t,e,n){var r=t.width,o=t.height,i=t.rows;if(r!=e){for(var s=[],a=[],c=0;c<i.length;c++){for(var u=i[c],h=[],l=s[c]||0,p=0;l<e;p++){var f=u.child(p%u.childCount);l+f.attrs.colspan>e&&(f=f.type.create(_f(f.attrs,f.attrs.colspan,l+f.attrs.colspan-e),f.content)),h.push(f),l+=f.attrs.colspan;for(var d=1;d<f.attrs.rowspan;d++)s[c+d]=(s[c+d]||0)+f.attrs.colspan}a.push(wi.from(h))}i=a,r=e}if(o!=n){for(var m=[],v=0,y=0;v<n;v++,y++){for(var g=[],k=i[y%o],b=0;b<k.childCount;b++){var w=k.child(b);v+w.attrs.rowspan>n&&(w=w.type.create(Mf(w.attrs,"rowspan",Math.max(1,n-w.attrs.rowspan)),w.content)),g.push(w)}m.push(wi.from(g))}i=m,o=n}return{width:r,height:o,rows:i}}function qf(t,e,n,r,o,i,s,a){if(0==s||s==e.height)return!1;for(var c=!1,u=o;u<i;u++){var h=s*e.width+u,l=e.map[h];if(e.map[h-e.width]==l){c=!0;var p=n.nodeAt(l),f=e.findCell(l),d=f.top,m=f.left;t.setNodeMarkup(t.mapping.slice(a).map(l+r),null,Mf(p.attrs,"rowspan",s-d)),t.insert(t.mapping.slice(a).map(e.positionAt(s,m,n)),p.type.createAndFill(Mf(p.attrs,"rowspan",d+p.attrs.rowspan-s))),u+=p.attrs.colspan-1}}return c}function $f(t,e,n,r,o,i,s,a){if(0==s||s==e.width)return!1;for(var c=!1,u=o;u<i;u++){var h=u*e.width+s,l=e.map[h];if(e.map[h-1]==l){c=!0;var p=n.nodeAt(l),f=e.colCount(l),d=t.mapping.slice(a).map(l+r);t.setNodeMarkup(d,null,_f(p.attrs,s-f,p.attrs.colspan-(s-f))),t.insert(d+p.nodeSize,p.type.createAndFill(_f(p.attrs,0,s-f))),u+=p.attrs.rowspan-1}}return c}function Lf(t,e,n,r,o){var i=n?t.doc.nodeAt(n-1):t.doc,s=uf.get(i),a=r.top,c=r.left,u=c+o.width,h=a+o.height,l=t.tr,p=0;function f(){i=n?l.doc.nodeAt(n-1):l.doc,s=uf.get(i),p=l.mapping.maps.length}(function(t,e,n,r,o,i,s){var a,c,u=mf(t.doc.type.schema);if(o>e.width)for(var h=0,l=0;h<e.height;h++){var p=n.child(h);l+=p.nodeSize;var f=[],d=void 0;d=null==p.lastChild||p.lastChild.type==u.cell?a||(a=u.cell.createAndFill()):c||(c=u.header_cell.createAndFill());for(var m=e.width;m<o;m++)f.push(d);t.insert(t.mapping.slice(s).map(l-1+r),f)}if(i>e.height){for(var v=[],y=0,g=(e.height-1)*e.width;y<Math.max(e.width,o);y++){var k=!(y>=e.width)&&n.nodeAt(e.map[g+y]).type==u.header_cell;v.push(k?c||(c=u.header_cell.createAndFill()):a||(a=u.cell.createAndFill()))}for(var b=u.row.create(null,wi.from(v)),w=[],x=e.height;x<i;x++)w.push(b);t.insert(t.mapping.slice(s).map(r+n.nodeSize-2),w)}return!(!a&&!c)})(l,s,i,n,u,h,p)&&f(),qf(l,s,i,n,c,u,a,p)&&f(),qf(l,s,i,n,c,u,h,p)&&f(),$f(l,s,i,n,a,h,c,p)&&f(),$f(l,s,i,n,a,h,u,p)&&f();for(var d=a;d<h;d++){var m=s.positionAt(d,c,i),v=s.positionAt(d,u,i);l.replace(l.mapping.slice(p).map(m+n),l.mapping.slice(p).map(v+n),new _i(o.rows[d-a],0,0))}f(),l.setSelection(new Nf(l.doc.resolve(n+s.positionAt(a,c,i)),l.doc.resolve(n+s.positionAt(h-1,u-1,i)))),e(l)}var Jf=Ph({ArrowLeft:Wf("horiz",-1),ArrowRight:Wf("horiz",1),ArrowUp:Wf("vert",-1),ArrowDown:Wf("vert",1),"Shift-ArrowLeft":Hf("horiz",-1),"Shift-ArrowRight":Hf("horiz",1),"Shift-ArrowUp":Hf("vert",-1),"Shift-ArrowDown":Hf("vert",1),Backspace:Uf,"Mod-Backspace":Uf,Delete:Uf,"Mod-Delete":Uf});function Vf(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Wf(t,e){return function(n,r,o){var i=n.selection;if(i instanceof Nf)return Vf(n,r,se.near(i.$headCell,e));if("horiz"!=t&&!i.empty)return!1;var s=Yf(o,t,e);if(null==s)return!1;if("horiz"==t)return Vf(n,r,se.near(n.doc.resolve(i.head+e),e));var a,c=n.doc.resolve(s),u=Of(c,t,e);return a=u?se.near(u,1):e<0?se.near(n.doc.resolve(c.before(-1)),-1):se.near(n.doc.resolve(c.after(-1)),1),Vf(n,r,a)}}function Hf(t,e){return function(n,r,o){var i,s=n.selection;if(s instanceof Nf)i=s;else{var a=Yf(o,t,e);if(null==a)return!1;i=new Nf(n.doc.resolve(a))}var c=Of(i.$headCell,t,e);return!!c&&Vf(n,r,new Nf(i.$anchorCell,c))}}function Uf(t,e){var n=t.selection;if(!(n instanceof Nf))return!1;if(e){var r=t.tr,o=mf(t.schema).cell.createAndFill().content;n.forEachCell((function(t,e){t.content.eq(o)||r.replace(r.mapping.map(e+1),r.mapping.map(e+t.nodeSize-1),new _i(o,0,0))})),r.docChanged&&e(r)}return!0}function Kf(t,e){var n=yf(t.state.doc.resolve(e));return!!n&&(t.dispatch(t.state.tr.setSelection(new Nf(n))),!0)}function Zf(t,e,n){if(!gf(t.state))return!1;var r=Ff(n),o=t.state.selection;if(o instanceof Nf){r||(r={width:1,height:1,rows:[wi.from(Pf(mf(t.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),a=uf.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=Bf(r,a.right-a.left,a.bottom-a.top),Lf(t.state,t.dispatch,s,a,r),!0}if(r){var c=kf(t.state),u=c.start(-1);return Lf(t.state,t.dispatch,u,uf.get(c.node(-1)).findCell(c.pos-u),r),!0}return!1}function Gf(t,e){if(!e.ctrlKey&&!e.metaKey){var n,r=Xf(t,e.target);if(e.shiftKey&&t.state.selection instanceof Nf)o(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&null!=(n=yf(t.state.selection.$anchor))&&Qf(t,e).pos!=n.pos)o(n,e),e.preventDefault();else if(!r)return;t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",s)}function o(e,n){var r=Qf(t,n),o=null==vf.getState(t.state);if(!r||!xf(e,r)){if(!o)return;r=e}var i=new Nf(e,r);if(o||!t.state.selection.eq(i)){var s=t.state.tr.setSelection(i);o&&s.setMeta(vf,e.pos),t.dispatch(s)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",s),null!=vf.getState(t.state)&&t.dispatch(t.state.tr.setMeta(vf,-1))}function s(n){var s,a=vf.getState(t.state);if(null!=a)s=t.state.doc.resolve(a);else if(Xf(t,n.target)!=r&&!(s=Qf(t,e)))return i();s&&o(s,n)}}function Yf(t,e,n){if(!(t.state.selection instanceof he))return null;for(var r=t.state.selection.$head,o=r.depth-1;o>=0;o--){var i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){var s=r.before(o),a="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?s:null}}return null}function Xf(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function Qf(t,e){var n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?yf(t.state.doc.resolve(n.pos)):null}var td=function(){function t(e,n){nf(this,t),this.node=e,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ed(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}return of(t,[{key:"update",value:function(t){return t.type==this.node.type&&(this.node=t,ed(t,this.colgroup,this.table,this.cellMinWidth),!0)}},{key:"ignoreMutation",value:function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))}}]),t}();function ed(t,e,n,r,o,i){for(var s=0,a=!0,c=e.firstChild,u=t.firstChild,h=0,l=0;h<u.childCount;h++)for(var p=u.child(h).attrs,f=p.colspan,d=p.colwidth,m=0;m<f;m++,l++){var v=o==l?i:d&&d[m],y=v?v+"px":"";s+=v||r,v||(a=!1),c?(c.style.width!=y&&(c.style.width=y),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=y}for(;c;){var g=c.nextSibling;c.parentNode.removeChild(c),c=g}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}var nd=new Ce("tableColumnResizing");function rd(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.handleWidth,n=void 0===e?5:e,r=t.cellMinWidth,o=void 0===r?25:r,i=t.View,s=void 0===i?td:i,a=t.lastColumnResizable,c=void 0===a||a,u=new we({key:nd,state:{init:function(t,e){return this.spec.props.nodeViews[mf(e.schema).table.name]=function(t,e){return new s(t,o,e)},new od(-1,!1)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return nd.getState(t).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,e){id(t,e,n,o,c)},mouseleave:function(t){sd(t)},mousedown:function(t,e){ad(t,e,o)}},decorations:function(t){var e=nd.getState(t);if(e.activeHandle>-1)return pd(t,e.activeHandle)},nodeViews:{}}});return u}var od=function(){function t(e,n){nf(this,t),this.activeHandle=e,this.dragging=n}return of(t,[{key:"apply",value:function(e){var n=this,r=e.getMeta(nd);if(r&&null!=r.setHandle)return new t(r.setHandle,null);if(r&&void 0!==r.setDragging)return new t(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){var o=e.mapping.map(n.activeHandle,-1);bf(e.doc.resolve(o))||(o=null),n=new t(o,n.dragging)}return n}}]),t}();function id(t,e,n,r,o){var i=nd.getState(t.state);if(!i.dragging){var s=function(t){for(;t&&"TD"!=t.nodeName&&"TH"!=t.nodeName;)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}(e.target),a=-1;if(s){var c=s.getBoundingClientRect(),u=c.left,h=c.right;e.clientX-u<=n?a=cd(t,e,"left"):h-e.clientX<=n&&(a=cd(t,e,"right"))}if(a!=i.activeHandle){if(!o&&-1!==a){var l=t.state.doc.resolve(a),p=l.node(-1),f=uf.get(p),d=l.start(-1);if(f.colCount(l.pos-d)+l.nodeAfter.attrs.colspan-1==f.width-1)return}hd(t,a)}}}function sd(t){var e=nd.getState(t.state);e.activeHandle>-1&&!e.dragging&&hd(t,-1)}function ad(t,e,n){var r=nd.getState(t.state);if(-1==r.activeHandle||r.dragging)return!1;var o=t.state.doc.nodeAt(r.activeHandle),i=function(t,e,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var s=t.domAtPos(e),a=s.node.childNodes[s.offset].offsetWidth,c=r;if(o)for(var u=0;u<r;u++)o[u]&&(a-=o[u],c--);return a/c}(t,r.activeHandle,o.attrs);function s(e){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var r=nd.getState(t.state);r.dragging&&(!function(t,e,n){for(var r=t.state.doc.resolve(e),o=r.node(-1),i=uf.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,c=t.state.tr,u=0;u<i.height;u++){var h=u*i.width+a;if(!u||i.map[h]!=i.map[h-i.width]){var l=i.map[h],p=o.nodeAt(l).attrs,f=1==p.colspan?0:a-i.colCount(l);if(!p.colwidth||p.colwidth[f]!=n){var d=p.colwidth?p.colwidth.slice():ld(p.colspan);d[f]=n,c.setNodeMarkup(s+l,null,Mf(p,"colwidth",d))}}}c.docChanged&&t.dispatch(c)}(t,r.activeHandle,ud(r.dragging,e,n)),t.dispatch(t.state.tr.setMeta(nd,{setDragging:null})))}function a(e){if(!e.which)return s(e);var r=nd.getState(t.state);if(r.dragging){var o=ud(r.dragging,e,n);!function(t,e,n,r){var o=t.state.doc.resolve(e),i=o.node(-1),s=o.start(-1),a=uf.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,c=t.domAtPos(o.start(-1)).node;for(;"TABLE"!=c.nodeName;)c=c.parentNode;ed(i,c.firstChild,c,r,a,n)}(t,r.activeHandle,o,n)}}return t.dispatch(t.state.tr.setMeta(nd,{setDragging:{startX:e.clientX,startWidth:i}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),e.preventDefault(),!0}function cd(t,e,n){var r=t.posAtCoords({left:e.clientX,top:e.clientY});if(!r)return-1;var o=r.pos,i=yf(t.state.doc.resolve(o));if(!i)return-1;if("right"==n)return i.pos;var s=uf.get(i.node(-1)),a=i.start(-1),c=s.map.indexOf(i.pos-a);return c%s.width==0?-1:a+s.map[c-1]}function ud(t,e,n){var r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function hd(t,e){t.dispatch(t.state.tr.setMeta(nd,{setHandle:e}))}function ld(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function pd(t,e){var n=[],r=t.doc.resolve(e),o=r.node(-1);if(!o)return ic.empty;for(var i=uf.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan,c=0;c<i.height;c++){var u=a+c*i.width-1;if((a==i.width||i.map[u]!=i.map[u+1])&&(0==c||i.map[u-1]!=i.map[u-1-i.width])){var h=i.map[u],l=s+h+o.nodeAt(h).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",n.push(nc.widget(l,p))}}return ic.create(t.doc,n)}function fd(t){var e,n=t.selection,r=kf(t),o=r.node(-1),i=r.start(-1),s=uf.get(o);return(e=n instanceof Nf?s.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):s.findCell(r.pos-i)).tableStart=i,e.map=s,e.table=o,e}function dd(t,e,n){var r=e.map,o=e.tableStart,i=e.table,s=n>0?-1:0;Ef(r,i,n+s)&&(s=0==n||n==r.width?null:0);for(var a=0;a<r.height;a++){var c=a*r.width+n;if(n>0&&n<r.width&&r.map[c-1]==r.map[c]){var u=r.map[c],h=i.nodeAt(u);t.setNodeMarkup(t.mapping.map(o+u),null,Tf(h.attrs,n-r.colCount(u))),a+=h.attrs.rowspan-1}else{var l=null==s?mf(i.type.schema).cell:i.nodeAt(r.map[c+s]).type,p=r.positionAt(a,n,i);t.insert(t.mapping.map(o+p),l.createAndFill())}}return t}function md(t,e){if(!gf(t))return!1;if(e){var n=fd(t);e(dd(t.tr,n,n.left))}return!0}function vd(t,e){if(!gf(t))return!1;if(e){var n=fd(t);e(dd(t.tr,n,n.right))}return!0}function yd(t,e,n){for(var r=e.map,o=e.table,i=e.tableStart,s=t.mapping.maps.length,a=0;a<r.height;){var c=a*r.width+n,u=r.map[c],h=o.nodeAt(u);if(n>0&&r.map[c-1]==u||n<r.width-1&&r.map[c+1]==u)t.setNodeMarkup(t.mapping.slice(s).map(i+u),null,_f(h.attrs,n-r.colCount(u)));else{var l=t.mapping.slice(s).map(i+u);t.delete(l,l+h.nodeSize)}a+=h.attrs.rowspan}}function gd(t,e){if(!gf(t))return!1;if(e){var n=fd(t),r=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;yd(r,n,o),o!=n.left;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=uf.get(n.table);e(r)}return!0}function kd(t,e,n){for(var r=mf(e.type.schema).header_cell,o=0;o<t.width;o++)if(e.nodeAt(t.map[o+n*t.width]).type!=r)return!1;return!0}function bd(t,e,n){for(var r=e.map,o=e.tableStart,i=e.table,s=o,a=0;a<n;a++)s+=i.child(a).nodeSize;var c=[],u=n>0?-1:0;kd(r,i,n+u)&&(u=0==n||n==r.height?null:0);for(var h=0,l=r.width*n;h<r.width;h++,l++)if(n>0&&n<r.height&&r.map[l]==r.map[l-r.width]){var p=r.map[l],f=i.nodeAt(p).attrs;t.setNodeMarkup(o+p,null,Mf(f,"rowspan",f.rowspan+1)),h+=f.colspan-1}else{var d=null==u?mf(i.type.schema).cell:i.nodeAt(r.map[l+u*r.width]).type;c.push(d.createAndFill())}return t.insert(s,mf(i.type.schema).row.create(null,c)),t}function wd(t,e){if(!gf(t))return!1;if(e){var n=fd(t);e(bd(t.tr,n,n.top))}return!0}function xd(t,e){if(!gf(t))return!1;if(e){var n=fd(t);e(bd(t.tr,n,n.bottom))}return!0}function Sd(t,e,n){for(var r=e.map,o=e.table,i=e.tableStart,s=0,a=0;a<n;a++)s+=o.child(a).nodeSize;var c=s+o.child(n).nodeSize,u=t.mapping.maps.length;t.delete(s+i,c+i);for(var h=0,l=n*r.width;h<r.width;h++,l++){var p=r.map[l];if(n>0&&p==r.map[l-r.width]){var f=o.nodeAt(p).attrs;t.setNodeMarkup(t.mapping.slice(u).map(p+i),null,Mf(f,"rowspan",f.rowspan-1)),h+=f.colspan-1}else if(n<r.width&&p==r.map[l+r.width]){var d=o.nodeAt(p),m=d.type.create(Mf(d.attrs,"rowspan",d.attrs.rowspan-1),d.content),v=r.positionAt(n+1,h,o);t.insert(t.mapping.slice(u).map(i+v),m),h+=d.attrs.colspan-1}}}function Cd(t,e){if(!gf(t))return!1;if(e){var n=fd(t),r=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;Sd(r,n,o),o!=n.top;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=uf.get(n.table);e(r)}return!0}function Od(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function Md(t,e){var n=t.selection;if(!(n instanceof Nf)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=fd(t),o=r.map;if(function(t,e){for(var n=t.width,r=t.height,o=t.map,i=e.top*n+e.left,s=i,a=(e.bottom-1)*n+e.left,c=i+(e.right-e.left-1),u=e.top;u<e.bottom;u++){if(e.left>0&&o[s]==o[s-1]||e.right<n&&o[c]==o[c+1])return!0;s+=n,c+=n}for(var h=e.left;h<e.right;h++){if(e.top>0&&o[i]==o[i-n]||e.bottom<r&&o[a]==o[a+n])return!0;i++,a++}return!1}(o,r))return!1;if(e){for(var i,s,a=t.tr,c={},u=wi.empty,h=r.top;h<r.bottom;h++)for(var l=r.left;l<r.right;l++){var p=o.map[h*o.width+l],f=r.table.nodeAt(p);if(!c[p])if(c[p]=!0,null==i)i=p,s=f;else{Od(f)||(u=u.append(f.content));var d=a.mapping.map(p+r.tableStart);a.delete(d,d+f.nodeSize)}}if(a.setNodeMarkup(i+r.tableStart,null,Mf(Tf(s.attrs,s.attrs.colspan,r.right-r.left-s.attrs.colspan),"rowspan",r.bottom-r.top)),u.size){var m=i+1+s.content.size,v=Od(s)?i+1:m;a.replaceWith(v+r.tableStart,m+r.tableStart,u)}a.setSelection(new Nf(a.doc.resolve(i+r.tableStart))),e(a)}return!0}function _d(t,e){var n=mf(t.schema);return Td((function(t){var e=t.node;return n[e.type.spec.tableRole]}))(t,e)}function Td(t){return function(e,n){var r,o,i=e.selection;if(i instanceof Nf){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;r=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(!(r=function(t){for(var e=t.depth;e>0;e--){var n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}(i.$from)))return!1;o=yf(i.$from).pos}if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(n){var s=r.attrs,a=[],c=s.colwidth;s.rowspan>1&&(s=Mf(s,"rowspan",1)),s.colspan>1&&(s=Mf(s,"colspan",1));for(var u,h=fd(e),l=e.tr,p=0;p<h.right-h.left;p++)a.push(c?Mf(s,"colwidth",c&&c[p]?[c[p]]:null):s);for(var f=h.top;f<h.bottom;f++){var d=h.map.positionAt(f,h.left,h.table);f==h.top&&(d+=r.nodeSize);for(var m=h.left,v=0;m<h.right;m++,v++)m==h.left&&f==h.top||l.insert(u=l.mapping.map(d+h.tableStart,1),t({node:r,row:f,col:m}).createAndFill(a[v]))}l.setNodeMarkup(o,t({node:r,row:h.top,col:h.left}),a[0]),i instanceof Nf&&l.setSelection(new Nf(l.doc.resolve(i.$anchorCell.pos),u&&l.doc.resolve(u))),n(l)}return!0}}function Ed(t,e){return function(n,r){if(!gf(n))return!1;var o=kf(n);if(o.nodeAfter.attrs[t]===e)return!1;if(r){var i=n.tr;n.selection instanceof Nf?n.selection.forEachCell((function(n,r){n.attrs[t]!==e&&i.setNodeMarkup(r,null,Mf(n.attrs,t,e))})):i.setNodeMarkup(o.pos,null,Mf(o.nodeAfter.attrs,t,e)),r(i)}return!0}}function Nd(t,e,n){for(var r=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),o=0;o<r.length;o++){var i=e.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function Ad(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,n){if(!gf(e))return!1;if(n){for(var r=mf(e.schema),o=fd(e),i=e.tr,s=o.map.cellsInRect("column"==t?{left:o.left,top:0,right:o.right,bottom:o.map.height}:"row"==t?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=s.map((function(t){return o.table.nodeAt(t)})),c=0;c<s.length;c++)a[c].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[c],r.cell,a[c].attrs);if(0==i.steps.length)for(var u=0;u<s.length;u++)i.setNodeMarkup(o.tableStart+s[u],r.header_cell,a[u].attrs);n(i)}return!0}}(t):function(e,n){if(!gf(e))return!1;if(n){var r=mf(e.schema),o=fd(e),i=e.tr,s=Nd("row",o,r),a=Nd("column",o,r),c=("column"===t?s:"row"===t&&a)?1:0,u="column"==t?{left:0,top:c,right:1,bottom:o.map.height}:"row"==t?{left:c,top:0,right:o.map.width,bottom:1}:o,h="column"==t?a?r.cell:r.header_cell:"row"==t?s?r.cell:r.header_cell:r.cell;o.map.cellsInRect(u).forEach((function(t){var e=t+o.tableStart,n=i.doc.nodeAt(e);n&&i.setNodeMarkup(e,h,n.attrs)})),n(i)}return!0}}var zd=Ad("row",{useDeprecatedLogic:!0}),Rd=Ad("column",{useDeprecatedLogic:!0}),Id=Ad("cell",{useDeprecatedLogic:!0});function Dd(t){return function(e,n){if(!gf(e))return!1;var r=function(t,e){if(e<0){var n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(var r=t.index(-1)-1,o=t.before();r>=0;r--){var i=t.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;for(var s=t.node(-1),a=t.indexAfter(-1),c=t.after();a<s.childCount;a++){var u=s.child(a);if(u.childCount)return c+1;c+=u.nodeSize}}}(kf(e),t);if(null==r)return!1;if(n){var o=e.doc.resolve(r);n(e.tr.setSelection(he.between(o,wf(o))).scrollIntoView())}return!0}}function jd(t,e){for(var n=t.selection.$anchor,r=n.depth;r>0;r--){if("table"==n.node(r).type.spec.tableRole)return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}function Fd(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.allowTableNodeSelection,n=void 0!==e&&e;return new we({key:vf,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(vf);if(null!=n)return-1==n?null:n;if(null==e||!t.docChanged)return e;var r=t.mapping.mapResult(e),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:zf,handleDOMEvents:{mousedown:Gf},createSelectionBetween:function(t){if(null!=vf.getState(t.state))return t.state.selection},handleTripleClick:Kf,handleKeyDown:Jf,handlePaste:Zf},appendTransaction:function(t,e,r){return Rf(r,jf(r,e),n)}})}},1039:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(){var t=arguments[0];"string"==typeof t&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&"object"==r(n)&&null==n.nodeType&&!Array.isArray(n)){for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var s=n[o];"string"==typeof s?t.setAttribute(o,s):null!=s&&(t[o]=s)}e++}for(;e<arguments.length;e++)i(t,arguments[e]);return t}function i(t,e){if("string"==typeof e)t.appendChild(document.createTextNode(e));else if(null==e);else if(null!=e.nodeType)t.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var n=0;n<e.length;n++)i(t,e[n])}}n.r(e),n.d(e,"Dropdown",(function(){return g})),n.d(e,"DropdownSubmenu",(function(){return w})),n.d(e,"MenuItem",(function(){return f})),n.d(e,"blockTypeItem",(function(){return N})),n.d(e,"icons",(function(){return S})),n.d(e,"joinUpItem",(function(){return C})),n.d(e,"liftItem",(function(){return O})),n.d(e,"menuBar",(function(){return R})),n.d(e,"redoItem",(function(){return T})),n.d(e,"renderGrouped",(function(){return x})),n.d(e,"selectParentNodeItem",(function(){return M})),n.d(e,"undoItem",(function(){return _})),n.d(e,"wrapItem",(function(){return E}));var s=n(263),a=n(367),c=n(41),u="http://www.w3.org/2000/svg",h="ProseMirror-icon";function l(t){var e=document.createElement("div");if(e.className=h,t.path){var n="pm-icon-"+function(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n)|0;return e}(t.path).toString(16);document.getElementById(n)||function(t,e){var n=document.getElementById(h+"-collection");n||((n=document.createElementNS(u,"svg")).id=h+"-collection",n.style.display="none",document.body.insertBefore(n,document.body.firstChild));var r=document.createElementNS(u,"symbol");r.id=t,r.setAttribute("viewBox","0 0 "+e.width+" "+e.height),r.appendChild(document.createElementNS(u,"path")).setAttribute("d",e.path),n.appendChild(r)}(n,t);var r=e.appendChild(document.createElementNS(u,"svg"));r.style.width=t.width/t.height+"em",r.appendChild(document.createElementNS(u,"use")).setAttributeNS("http://www.w3.org/1999/xlink","href",/([^#]*)/.exec(document.location)[1]+"#"+n)}else t.dom?e.appendChild(t.dom.cloneNode(!0)):(e.appendChild(document.createElement("span")).textContent=t.text||"",t.css&&(e.firstChild.style.cssText=t.css));return e}var p="ProseMirror-menu",f=function(t){this.spec=t};function d(t,e){return t._props.translate?t._props.translate(e):e}f.prototype.render=function(t){var e=this.spec,n=e.render?e.render(t):e.icon?l(e.icon):e.label?o("div",null,d(t,e.label)):null;if(!n)throw new RangeError("MenuItem without icon or label property");if(e.title){var r="function"===typeof e.title?e.title(t.state):e.title;n.setAttribute("title",d(t,r))}return e.class&&n.classList.add(e.class),e.css&&(n.style.cssText+=e.css),n.addEventListener("mousedown",(function(r){r.preventDefault(),n.classList.contains(p+"-disabled")||e.run(t.state,t.dispatch,t,r)})),{dom:n,update:function(t){if(e.select){var r=e.select(t);if(n.style.display=r?"":"none",!r)return!1}var o=!0;if(e.enable&&(o=e.enable(t)||!1,A(n,p+"-disabled",!o)),e.active){var i=o&&e.active(t)||!1;A(n,p+"-active",i)}return!0}}};var m={time:0,node:null};function v(t){m.time=Date.now(),m.node=t.target}function y(t){return Date.now()-100<m.time&&m.node&&t.contains(m.node)}var g=function(t,e){this.options=e||{},this.content=Array.isArray(t)?t:[t]};function k(t,e){for(var n=[],r=[],i=0;i<t.length;i++){var s=t[i].render(e),a=s.dom,c=s.update;n.push(o("div",{class:p+"-dropdown-item"},a)),r.push(c)}return{dom:n,update:b(r,n)}}function b(t,e){return function(n){for(var r=!1,o=0;o<t.length;o++){var i=t[o](n);e[o].style.display=i?"":"none",i&&(r=!0)}return r}}g.prototype.render=function(t){var e=this,n=k(this.content,t),r=o("div",{class:p+"-dropdown "+(this.options.class||""),style:this.options.css},d(t,this.options.label));this.options.title&&r.setAttribute("title",d(t,this.options.title));var i=o("div",{class:p+"-dropdown-wrap"},r),s=null,a=null,c=function(){s&&s.close()&&(s=null,window.removeEventListener("mousedown",a))};return r.addEventListener("mousedown",(function(t){t.preventDefault(),v(t),s?c():(s=e.expand(i,n.dom),window.addEventListener("mousedown",a=function(){y(i)||c()}))})),{dom:i,update:function(t){var e=n.update(t);return i.style.display=e?"":"none",e}}},g.prototype.expand=function(t,e){var n=o("div",{class:p+"-dropdown-menu "+(this.options.class||"")},e),r=!1;return t.appendChild(n),{close:function(){if(!r)return r=!0,t.removeChild(n),!0},node:n}};var w=function(t,e){this.options=e||{},this.content=Array.isArray(t)?t:[t]};function x(t,e){for(var n=document.createDocumentFragment(),r=[],i=[],s=0;s<e.length;s++){for(var a=e[s],c=[],u=[],h=0;h<a.length;h++){var l=a[h].render(t),f=l.dom,d=l.update,m=o("span",{class:p+"item"},f);n.appendChild(m),u.push(m),c.push(d)}c.length&&(r.push(b(c,u)),s<e.length-1&&i.push(n.appendChild(o("span",{class:p+"separator"}))))}return{dom:n,update:function(t){for(var e=!1,n=!1,o=0;o<r.length;o++){var s=r[o](t);o&&(i[o-1].style.display=n&&s?"":"none"),n=s,s&&(e=!0)}return e}}}w.prototype.render=function(t){var e=k(this.content,t),n=o("div",{class:p+"-submenu-label"},d(t,this.options.label)),r=o("div",{class:p+"-submenu-wrap"},n,o("div",{class:p+"-submenu"},e.dom)),i=null;return n.addEventListener("mousedown",(function(t){t.preventDefault(),v(t),A(r,p+"-submenu-wrap-active"),i||window.addEventListener("mousedown",i=function(){y(r)||(r.classList.remove(p+"-submenu-wrap-active"),window.removeEventListener("mousedown",i),i=null)})})),{dom:r,update:function(t){var n=e.update(t);return r.style.display=n?"":"none",n}}};var S={join:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},lift:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},selectParentNode:{text:"\u2b1a",css:"font-weight: bold"},undo:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},redo:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},strong:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},em:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},code:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},link:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"},bulletList:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},orderedList:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},blockquote:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}},C=new f({title:"Join with above block",run:s.joinUp,select:function(t){return Object(s.joinUp)(t)},icon:S.join}),O=new f({title:"Lift out of enclosing block",run:s.lift,select:function(t){return Object(s.lift)(t)},icon:S.lift}),M=new f({title:"Select parent node",run:s.selectParentNode,select:function(t){return Object(s.selectParentNode)(t)},icon:S.selectParentNode}),_=new f({title:"Undo last change",run:a.undo,enable:function(t){return Object(a.undo)(t)},icon:S.undo}),T=new f({title:"Redo last undone change",run:a.redo,enable:function(t){return Object(a.redo)(t)},icon:S.redo});function E(t,e){var n={run:function(n,r){return Object(s.wrapIn)(t,e.attrs)(n,r)},select:function(n){return Object(s.wrapIn)(t,e.attrs instanceof Function?null:e.attrs)(n)}};for(var r in e)n[r]=e[r];return new f(n)}function N(t,e){var n=Object(s.setBlockType)(t,e.attrs),r={run:n,enable:function(t){return n(t)},active:function(n){var r=n.selection,o=r.$from,i=r.to,s=r.node;return s?s.hasMarkup(t,e.attrs):i<=o.end()&&o.parent.hasMarkup(t,e.attrs)}};for(var o in e)r[o]=e[o];return new f(r)}function A(t,e,n){n?t.classList.add(e):t.classList.remove(e)}var z="ProseMirror-menubar";function R(t){return new c.Plugin({view:function(e){return new I(e,t)}})}var I=function(t,e){var n=this;this.editorView=t,this.options=e,this.wrapper=o("div",{class:z+"-wrapper"}),this.menu=this.wrapper.appendChild(o("div",{class:z})),this.menu.className=z,this.spacer=null,t.dom.parentNode.replaceChild(this.wrapper,t.dom),this.wrapper.appendChild(t.dom),this.maxHeight=0,this.widthForMaxHeight=0,this.floating=!1;var r=x(this.editorView,this.options.content),i=r.dom,s=r.update;if(this.contentUpdate=s,this.menu.appendChild(i),this.update(),e.floating&&!function(){if("undefined"==typeof navigator)return!1;var t=navigator.userAgent;return!/Edge\/\d/.test(t)&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t)}()){this.updateFloat();var a=function(t){for(var e=[window],n=t.parentNode;n;n=n.parentNode)e.push(n);return e}(this.wrapper);this.scrollFunc=function(t){var e=n.editorView.root;(e.body||e).contains(n.wrapper)?n.updateFloat(t.target.getBoundingClientRect&&t.target):a.forEach((function(t){return t.removeEventListener("scroll",n.scrollFunc)}))},a.forEach((function(t){return t.addEventListener("scroll",n.scrollFunc)}))}};I.prototype.update=function(){this.contentUpdate(this.editorView.state),this.floating?this.updateScrollCursor():(this.menu.offsetWidth!=this.widthForMaxHeight&&(this.widthForMaxHeight=this.menu.offsetWidth,this.maxHeight=0),this.menu.offsetHeight>this.maxHeight&&(this.maxHeight=this.menu.offsetHeight,this.menu.style.minHeight=this.maxHeight+"px"))},I.prototype.updateScrollCursor=function(){var t=this.editorView.root.getSelection();if(t.focusNode){var e=t.getRangeAt(0).getClientRects(),n=e[function(t){if(t.anchorNode==t.focusNode)return t.anchorOffset>t.focusOffset;return t.anchorNode.compareDocumentPosition(t.focusNode)==Node.DOCUMENT_POSITION_FOLLOWING}(t)?0:e.length-1];if(n){var r=this.menu.getBoundingClientRect();if(n.top<r.bottom&&n.bottom>r.top){var o=function(t){for(var e=t.parentNode;e;e=e.parentNode)if(e.scrollHeight>e.clientHeight)return e}(this.wrapper);o&&(o.scrollTop-=r.bottom-n.top)}}}},I.prototype.updateFloat=function(t){var e=this.wrapper,n=e.getBoundingClientRect(),r=t?Math.max(0,t.getBoundingClientRect().top):0;if(this.floating)if(n.top>=r||n.bottom<this.menu.offsetHeight+10)this.floating=!1,this.menu.style.position=this.menu.style.left=this.menu.style.top=this.menu.style.width="",this.menu.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{var i=(e.offsetWidth-e.clientWidth)/2;this.menu.style.left=n.left+i+"px",this.menu.style.display=n.top>window.innerHeight?"none":"",t&&(this.menu.style.top=r+"px")}else if(n.top<r&&n.bottom>=this.menu.offsetHeight+10){this.floating=!0;var s=this.menu.getBoundingClientRect();this.menu.style.left=s.left+"px",this.menu.style.width=s.width+"px",t&&(this.menu.style.top=r+"px"),this.menu.style.position="fixed",this.spacer=o("div",{class:z+"-spacer",style:"height: "+s.height+"px"}),e.insertBefore(this.spacer,this.menu)}},I.prototype.destroy=function(){this.wrapper.parentNode&&this.wrapper.parentNode.replaceChild(this.editorView.dom,this.wrapper)}},107:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=Object.prototype.hasOwnProperty;function i(t,e){return o.call(t,e)}function s(t){return!(t>=55296&&t<=57343)&&(!(t>=64976&&t<=65007)&&(65535!==(65535&t)&&65534!==(65535&t)&&(!(t>=0&&t<=8)&&(11!==t&&(!(t>=14&&t<=31)&&(!(t>=127&&t<=159)&&!(t>1114111)))))))}function a(t){if(t>65535){var e=55296+((t-=65536)>>10),n=56320+(1023&t);return String.fromCharCode(e,n)}return String.fromCharCode(t)}var c=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,u=new RegExp(c.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),h=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,l=n(758);var p=/[&<>"]/,f=/[&<>"]/g,d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function m(t){return d[t]}var v=/[.?*+^$[\]\\(){}|-]/g;var y=n(284);e.lib={},e.lib.mdurl=n(322),e.lib.ucmicro=n(606),e.assign=function(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach((function(e){if(e){if("object"!==r(e))throw new TypeError(e+"must be object");Object.keys(e).forEach((function(n){t[n]=e[n]}))}})),t},e.isString=function(t){return"[object String]"===function(t){return Object.prototype.toString.call(t)}(t)},e.has=i,e.unescapeMd=function(t){return t.indexOf("\\")<0?t:t.replace(c,"$1")},e.unescapeAll=function(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(u,(function(t,e,n){return e||function(t,e){var n=0;return i(l,e)?l[e]:35===e.charCodeAt(0)&&h.test(e)&&s(n="x"===e[1].toLowerCase()?parseInt(e.slice(2),16):parseInt(e.slice(1),10))?a(n):t}(t,n)}))},e.isValidEntityCode=s,e.fromCodePoint=a,e.escapeHtml=function(t){return p.test(t)?t.replace(f,m):t},e.arrayReplaceAt=function(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))},e.isSpace=function(t){switch(t){case 9:case 32:return!0}return!1},e.isWhiteSpace=function(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},e.isMdAsciiPunct=function(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},e.isPunctChar=function(t){return y.test(t)},e.escapeRE=function(t){return t.replace(v,"\\$&")},e.normalizeReference=function(t){return t=t.trim().replace(/\s+/g," "),"\u1e7e"==="\u1e9e".toLowerCase()&&(t=t.replace(/\u1e9e/g,"\xdf")),t.toLowerCase().toUpperCase()}},108:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c}));var r=n(3),o=n(207);function i(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=Object(o.b)();if(i&&i[t])return i[t].apply(i,Object(r.e)(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function s(t,e){return i("captureException",t,{captureContext:e,originalException:t,syntheticException:new Error("Sentry syntheticException")})}function a(t,e){i("setContext",t,e)}function c(t){i("withScope",t)}},1339:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(14),o=n(10);function i(t,e){Object(o.a)(2,arguments);var n=Object(r.a)(t),i=Object(r.a)(e);return n.getFullYear()===i.getFullYear()}},135:function(t,e,n){"use strict";(function(t,r){n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return a}));var o=n(524);function i(){return!Object(o.a)()&&"[object process]"===Object.prototype.toString.call("undefined"!==typeof t?t:0)}function s(t,e){return t.require(e)}function a(t){var e;try{e=s(r,t)}catch(o){}try{var n=s(r,"process").cwd;e=s(r,n()+"/node_modules/"+t)}catch(o){}return e}}).call(this,n(170),n(327)(t))},1425:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var r=n(14),o=n(10);function i(t,e){Object(o.a)(2,arguments);var n=Object(r.a)(t),i=Object(r.a)(e),s=n.getTime()-i.getTime();return s<0?-1:s>0?1:s}var s=n(770),a=n(523),c=n(769);function u(t){Object(o.a)(1,arguments);var e=Object(r.a)(t);return Object(a.a)(e).getTime()===Object(c.a)(e).getTime()}function h(t,e){Object(o.a)(2,arguments);var n,a=Object(r.a)(t),c=Object(r.a)(e),h=i(a,c),l=Math.abs(Object(s.a)(a,c));if(l<1)n=0;else{1===a.getMonth()&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-h*l);var p=i(a,c)===-h;u(Object(r.a)(t))&&1===l&&1===i(t,c)&&(p=!1),n=h*(l-p)}return 0===n?0:n}var l=n(772),p=n(259),f=n(340);function d(t){return Object(f.a)({},t)}var m=n(139),v=1440,y=43200;function g(t,e,n){Object(o.a)(2,arguments);var s=n||{},a=s.locale||p.a;if(!a.formatDistance)throw new RangeError("locale must contain formatDistance property");var c=i(t,e);if(isNaN(c))throw new RangeError("Invalid time value");var u,f,g=d(s);g.addSuffix=Boolean(s.addSuffix),g.comparison=c,c>0?(u=Object(r.a)(e),f=Object(r.a)(t)):(u=Object(r.a)(t),f=Object(r.a)(e));var k,b=Object(l.a)(f,u),w=(Object(m.a)(f)-Object(m.a)(u))/1e3,x=Math.round((b-w)/60);if(x<2)return s.includeSeconds?b<5?a.formatDistance("lessThanXSeconds",5,g):b<10?a.formatDistance("lessThanXSeconds",10,g):b<20?a.formatDistance("lessThanXSeconds",20,g):b<40?a.formatDistance("halfAMinute",null,g):b<60?a.formatDistance("lessThanXMinutes",1,g):a.formatDistance("xMinutes",1,g):0===x?a.formatDistance("lessThanXMinutes",1,g):a.formatDistance("xMinutes",x,g);if(x<45)return a.formatDistance("xMinutes",x,g);if(x<90)return a.formatDistance("aboutXHours",1,g);if(x<v){var S=Math.round(x/60);return a.formatDistance("aboutXHours",S,g)}if(x<2520)return a.formatDistance("xDays",1,g);if(x<y){var C=Math.round(x/v);return a.formatDistance("xDays",C,g)}if(x<86400)return k=Math.round(x/y),a.formatDistance("aboutXMonths",k,g);if((k=h(f,u))<12){var O=Math.round(x/y);return a.formatDistance("xMonths",O,g)}var M=k%12,_=Math.floor(k/12);return M<3?a.formatDistance("aboutXYears",_,g):M<9?a.formatDistance("overXYears",_,g):a.formatDistance("almostXYears",_+1,g)}function k(t,e){return Object(o.a)(1,arguments),g(t,Date.now(),e)}},143:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},147:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return h})),n.d(e,"a",(function(){return l}));var r=n(84),o=n(135),i={nowSeconds:function(){return Date.now()/1e3}};var s=Object(o.b)()?function(){try{return Object(o.a)(t,"perf_hooks").performance}catch(e){return}}():function(){var t=Object(r.a)().performance;if(t&&t.now)return{now:function(){return t.now()},timeOrigin:Date.now()-t.now()}}(),a=void 0===s?i:{nowSeconds:function(){return(s.timeOrigin+s.now())/1e3}},c=i.nowSeconds.bind(i),u=a.nowSeconds.bind(a),h=u,l=function(){var t=Object(r.a)().performance;if(t&&t.now){var e=36e5,n=t.now(),o=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-o):e,s=i<e,a=t.timing&&t.timing.navigationStart,c="number"===typeof a?Math.abs(a+n-o):e;return s||c<e?i<=c?("timeOrigin",t.timeOrigin):("navigationStart",a):("dateNow",o)}"none"}()}).call(this,n(327)(t))},179:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(c){a=!0,o=c}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"===typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var g=n(367),k=n(41),b=n(958),w=n(959),x=n(1039),S=n(339),C=n(960),O=n(21),M=n(961),_=n(962),T=n(605),E=n(263),N=n(635),A=n(629),z=n(963),R=n(1011);function I(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var D=I(_),j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new k.Plugin({props:{decorations:function(e){var n=[];return e.doc.descendants((function(r,o){2===e.doc.content.size&&n.push(S.Decoration.node(o,o+r.nodeSize,{class:"empty-node","data-placeholder":t}))})),S.DecorationSet.create(e.doc,n)}}})},F=function(t,e){var n=t.selection,r=n.from,o=n.to;if(n.empty)return!!e.isInSet(t.tr.storedMarks||t.selection.$from.marks());var i=!1;return t.doc.nodesBetween(r,o,(function(t){i=i||e.isInSet(t.marks)})),i},P=function(t,e){var n=t.schema.marks.code,r=e>=0&&t.doc.nodeAt(e);return!!r&&!!r.marks.filter((function(t){return t.type===n})).length},B=function(t,e,n){var r=t.doc,o=t.schema.marks,i=!1,s=function(t){return t.type===o.code||t.type===o.link};return r.nodesBetween(e,n,(function(t){i=i||t.marks.filter(s).length>0})),i},q=function(t,e,n){var r=t.doc,o=t.schema.marks,i=!1,s=function(t){return t.type===o.code};return r.nodesBetween(e,n,(function(t){i=i||t.marks.filter(s).length>0})),i};function $(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.handler;return t.handler=function(t,r,o,i){var s=e?B(t,o,i):q(t,o,i);if(!t.selection.$from.parent.type.spec.code&&!s)return n(t,r,o,i)},t}var L=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return $(new C.InputRule(t,e),n)},J="\ufffc";function V(t){var e;if(t.isInline)return(e=t).isText?!!e.textContent.trim():"hardBreak"!==e.type.name;if(t.isBlock&&(t.isLeaf||t.isAtom))return!0;if(!t.childCount)return!1;for(var n=0;n<t.childCount;n++){if(V(t.child(n)))return!0}return!1}function W(t){return!t||"paragraph"===t.type.name&&!t.textContent&&!t.childCount}function H(t,e,n){for(var r=[],o=0,i=t.childCount;o<i;o++){var s=t.child(o),a=s.isLeaf?e(s,n,o):e(s.copy(H(s.content,e,s)),n,o);a&&(a?r.push.apply(r,m(a.content)):Array.isArray(a)?r.push.apply(r,m(a)):r.push(a))}return O.Fragment.fromArray(r)}function U(t,e){var n=H(t.content,e);return new O.Slice(n,t.openStart,t.openEnd)}function K(t,e){return C.wrappingInputRule(t,e,{},(function(t,n){return n.type===e}))}var Z=function(t,e,n,r,o){var i=t.schema.nodes.hardBreak;if(t.doc.resolve(r).nodeAfter.type!==i)return null;if(t.doc.resolve(r).depth>1)return null;var s=t.tr.delete(r,o).split(r),a=s.doc.nodeAt(r+1);s.doc.nodesBetween(r,r+a.nodeSize,(function(t,e){t.type===i&&(s=s.split(e+1).delete(e,e+1))}));var c=t.schema.nodes.list_item,u=s.doc.resolve(r+2),h=u.blockRange(u);return s=s.wrap(h,[{type:e},{type:c}])};function G(t){var e=[];if(t.nodes.bullet_list&&e.push.apply(e,m(function(t){return[K(/^\s*([\*\-]) $/,t.nodes.bullet_list),L(new RegExp("".concat(J,"\\s*([\\*\\-]) $")),(function(e,n,r,o){return Z(e,t.nodes.bullet_list,0,r,o)}),!0)]}(t))),t.nodes.ordered_list&&e.push.apply(e,m(function(t){return[K(/^(1)[\.\)] $/,t.nodes.ordered_list),L(new RegExp("".concat(J,"(1)[\\.\\)] $")),(function(e,n,r,o){return Z(e,t.nodes.ordered_list,0,r,o)}),!0)]}(t))),0!==e.length)return C.inputRules({rules:e})}var Y=function(t){var e=t.selection.$from,n=t.schema.nodes,r=n.list_item,o=n.paragraph;return M.hasParentNodeOfType(r)(t.selection)&&e.parent.type===o},X=function(t,e){for(var n=e.bullet_list,r=e.ordered_list,o=0,i=t.depth-1;i>0;i--){var s=t.node(i);s.type!==n&&s.type!==r||(o+=1)}return o};function Q(){return function(t,e){var n=t.schema.nodes.list_item,r=t.selection,o=r.$from,i=r.$to;if(Y(t)){var s=o.blockRange(i,(function(t){return t.childCount>0&&t.firstChild.type===n}));return!!s&&function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduceRight((function(t,e){return e(t)}),t)}}(function(t,e){return function(n){return function(r,o){return n(r,(function(n){var i=r.doc.resolve(e.start),s=r.doc.resolve(e.end),a=n.doc.resolve(n.mapping.map(e.end-1));a.nodeBefore&&a.nodeAfter&&a.nodeBefore.type===a.nodeAfter.type&&s.nodeAfter&&s.nodeAfter.type===t&&s.parent.type===i.parent.type&&n.join(a.pos),o&&o(n.scrollIntoView())}))}}}(n,s),D.liftListItem)(n)(t,e)}return!1}}function tt(t){return function(e,n){var r=e.selection,o=r.$from,i=r.$to,s=r.node;if(s&&s.isBlock||o.depth<2||!o.sameParent(i))return!1;var a=o.node(-1);if(a.type!==t)return!1;if(a.content.content.length<=1&&0===o.parent.content.size&&0!==a.content.size){if(2===o.depth||o.node(-3).type!==t||o.index(-2)!==o.node(-2).childCount-1)return!1;if(n){for(var c=O.Fragment.empty,u=o.index(-1)>0,h=o.depth-(u?1:2);h>=o.depth-3;h--)c=O.Fragment.from(o.node(h).copy(c));c=c.append(O.Fragment.from(t.createAndFill()));var l=e.tr.replace(o.before(u?void 0:-1),o.after(-3),new O.Slice(c,u?3:2,2));l.setSelection(e.selection.constructor.near(l.doc.resolve(o.pos+(u?3:2)))),n(l.scrollIntoView())}return!0}var p=i.pos===o.end()?a.contentMatchAt(0).defaultType:void 0,f=e.tr.delete(o.pos,i.pos),d=p&&[void 0,{type:p}];return n&&n(f.split(o.pos,2,d).scrollIntoView()),!0}}var et=function(t,e){var n=t.selection;if(n.empty){var r=n.$from,o=t.schema.nodes.list_item,i=r.node(r.depth),s=r.node(r.depth-1);if(s&&s.type===o){var a=V(s);return function(t){if(t&&t.textContent)return!1;if(!t||!t.childCount||1===t.childCount&&W(t.firstChild))return!0;var e=[],n=[];return t.forEach((function(t){t.isInline?n.push(t):e.push(t)})),!n.length&&!e.filter((function(t){return!!t.childCount&&!(1===t.childCount&&W(t.firstChild))||t.isAtom})).length}(i)&&!a?Q()(t,e):tt(o)(t,e)}}return!1};function nt(){return function(t,e){var n=t.schema.nodes.list_item;return!!Y(t)&&(function(t,e){var n,r=e.tr.selection.$to.pos;do{var o=e.doc.resolve(r);if((n=X(o,e.schema.nodes))>3)return!1;r++}while(n>=t);return!0}(X(t.selection.$from,t.schema.nodes),t)&&D.sinkListItem(n)(t,e),!0)}}var rt=new T(void 0,{fuzzyLink:!1});rt.add("sourcetree:","http:");var ot="app|biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");ot.push("a[cdefgilmnoqrtuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrtuvwxyz]|n[acefgilopruz]|om|p[aefghkmnrtw]|qa|r[eosuw]|s[abcdegijklmnrtuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),rt.tlds(ot,!1);var it=function(){function t(){l(this,t)}return f(t,[{key:"exec",value:function(t){if(t.endsWith(" ")){var e=t.slice(0,t.length-1).split(" "),n=e[e.length-1],r=rt.match(n);if(r&&r.length>0){var o=r[r.length-1];return o.input=n,o.length=o.lastIndex-o.index+1,[o]}}return null}}]),t}(),st=[/^https?:\/\//im,/^ftps?:\/\//im,/^\//im,/^mailto:/im,/^skype:/im,/^callto:/im,/^facetime:/im,/^git:/im,/^irc6?:/im,/^news:/im,/^nntp:/im,/^feed:/im,/^cvs:/im,/^svn:/im,/^mvn:/im,/^ssh:/im,/^scp:\/\//im,/^sftp:\/\//im,/^itms:/im,/^notes:/im,/^hipchat:\/\//im,/^sourcetree:/im,/^urn:/im,/^tel:/im,/^xmpp:/im,/^telnet:/im,/^vnc:/im,/^rdp:/im,/^whatsapp:/im,/^slack:/im,/^sips?:/im,/^magnet:/im];function at(t){if(!t)return"";if(function(t){return st.some((function(e){return!0===e.test(t.trim())}))}(t))return t;var e=function(t){var e=t&&rt.match(t);return e&&e[0]}(t);return e&&e.url||""}function ct(t){if(t.marks.link){var e,n=(e=new it,L(e,(function(t,e,n,r){var o=t.schema;if(t.doc.rangeHasMark(n,r,o.marks.link))return null;var i=d(e,1)[0],s=at(i.url),a=o.mark("link",{href:s});return t.tr.addMark(n-(i.input.length-i.lastIndex),r-(i.input.length-i.lastIndex),a).insertText(" ")}))),r=L(/(^|[^!])\[(.*?)\]\((\S+)\)$/,(function(t,e,n,r){var o=t.schema,i=d(e,4),s=i[1],a=i[2],c=at(i[3]),u=o.mark("link",{href:c});return t.tr.replaceWith(n+s.length,r,o.text(a,[u]))}));return C.inputRules({rules:[n,r]})}}var ut=function(t,e,n,r,o,i){var s=t.schema.nodes,a=s.hard_break,c=s.code_block,u=s.list_item,h=t.doc.resolve(r);if(h.nodeAfter.type!==a)return null;if(h.depth>1&&(e!==c||!M.hasParentNodeOfType(u)(t.selection)))return null;var l=t.tr.delete(r,o).split(r),p=l.doc.nodeAt(r+1),f=!1;l.doc.nodesBetween(r,r+p.nodeSize,(function(t,e){f||t.type!==a||(f=!0,l=l.split(e+1).delete(e,e+1))})),f&&(p=l.doc.nodeAt(r+1));var d,m,v=t.schema.nodes,y=v.blockquote,g=v.paragraph;e===y?(m=3,d=[g.create({},p.content)]):(m=2,d=p.content);var b=e.create(i,d);return l=l.setSelection(new k.NodeSelection(l.doc.resolve(r+1))).replaceSelectionWith(b).setSelection(new k.TextSelection(l.doc.resolve(r+m)))};var ht=function(t,e){var n=t.selection.$cursor;if(n&&!n.nodeBefore&&!n.nodeAfter&&1===n.pos){var r=t.tr,o=t.schema.nodes.paragraph,i=n.parent;return r.setNodeMarkup(0,o,i.attrs,[]),e&&e(r),!0}return!1};function lt(t){var e=t.selection.$from,n=e.node(e.depth),r=!!n&&n.type===t.schema.nodes.code_block,o=t.selection instanceof k.NodeSelection;return e.depth>1||o||r}var pt=function(t,e){return!(function(t){var e=t.selection;return e instanceof k.TextSelection&&!e.empty||!function(t){var e=t.selection;return t.doc.nodeSize-e.$to.pos-2===e.$to.depth}(t)}(t)||!lt(t))&&(yt(!0)(t,e),!0)},ft=function(t,e){return!(function(t){var e=t.selection;return e instanceof k.TextSelection&&!e.empty||!function(t){var e=t.selection;return e.$from.pos===e.$from.depth}(t)}(t)||!lt(t))&&(yt(!1)(t,e),!0)};function dt(t){var e=t.selection.$from.node(1);return e.isTextblock&&e.type!==t.schema.nodes.code_block&&2===e.nodeSize}function mt(t,e){var n=t.selection,r=n.$from,o=n.$to;return e?o.end(0):r.start(0)}function vt(t,e){var n,r=t.selection,o=r.$from,i=r.$to;return e?(n=i.end(i.depth),n=i.depth>0?n+1:n):(n=o.start(o.depth),n=o.depth>0?n-1:n),n}function yt(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(e,n){var r,o=e.schema.nodes.paragraph;if(!o)return!1;if(e.selection instanceof k.TextSelection){if(dt(e))return!1;r=mt(e,t)}else r=vt(e,t);var i=e.tr.insert(r,o.createAndFill());return i.setSelection(k.TextSelection.create(i.doc,r+1)),n&&n(i),!0}}function gt(t){return{level:t[1].length}}function kt(t){var e,n;return[$((e=t.nodes.heading,n=6,C.textblockTypeInputRule(new RegExp("^(#{1,"+n+"})\\s$"),e,gt)),!0),L(new RegExp("".concat(J,"(#{1,6})\\s$")),(function(e,n,r,o){var i=n[1].length;return ut(e,t.nodes.heading,"heading".concat(i),r,o,{level:i})}),!0)]}function bt(t){var e;return[$((e=t.nodes.blockquote,C.wrappingInputRule(/^\s*>\s$/,e)),!0),L(new RegExp("".concat(J,"\\s*>\\s$")),(function(e,n,r,o){return ut(e,t.nodes.blockquote,0,r,o)}),!0)]}function wt(t){return[L(/((^`{3,})|(\s`{3,}))(\S*)$/,(function(t,e,n,r){var o={};e[4]&&(o.language=e[4]);var i=" "===e[0][0]?n+1:n;if(function(t){if(!t.selection)return!1;var e=t.selection.$from,n=e.parent;if(!n.isTextblock||n.type===t.schema.nodes.code_block)return!1;var r=e.depth-1,o=e.node(r),i=e.index(r);return o.canReplaceWith(i,i+1,t.schema.nodes.code_block)}(t)){var s=function(t,e){if(!t.selection.empty)return t.tr;var n=t.schema.nodes.code_block,r=t.selection.$from,o=r.before(),i=r.end(),s=U(t.doc.slice(r.pos,i),(function(e){return e.type===t.schema.nodes.hard_break?t.schema.text("\n"):e.isText?e.mark([]):e.isInline?e.attrs.text?t.schema.text(e.attrs.text):null:e.content.childCount?e.content:null})),a=t.tr.replaceRange(r.pos,i,s);return r.parentOffset>=3?a.split(r.pos,void 0,[{type:n,attrs:e}]):a.setNodeMarkup(o,n,e,[])}(t,o).delete(i,r).scrollIntoView();return s}var a=t.tr;a=a.delete(i,r);var c=t.schema.nodes.code_block.createChecked();return M.safeInsert(c)(a)}),!0),L(new RegExp("((".concat(J,"`{3,})|(\\s`{3,}))(\\S*)$")),(function(e,n,r,o){var i={};return n[4]&&(i.language=n[4]),ut(e,t.nodes.code_block,0,r,o,i)}),!0)]}function xt(t){var e=[];if(t.nodes.heading&&e.push.apply(e,m(kt(t))),t.nodes.blockquote&&e.push.apply(e,m(bt(t))),t.nodes.code_block&&e.push.apply(e,m(wt(t))),0!==e.length)return C.inputRules({rules:e})}function St(t){if(!t.nodes.horizontal_rule)return C.inputRules({rules:[]});var e,n=(e=t.nodes.horizontal_rule,L(/^(?:---|___|\*\*\*)\s$/,(function(t,n,r,o){if(!n[0])return null;var i=t.tr.delete(r,o),s=r;return i=M.safeInsert(e.create(),s)(i),M.safeInsert(t.schema.nodes.paragraph.create(),i.mapping.map(s+1))(i)})));return C.inputRules({rules:[n]})}var Ct="undefined"!==typeof navigator&&/Mac/.test(navigator.platform);function Ot(t){var e=E.baseKeymap;function n(t,n){e[t]=n}n("Mod-z",E.chainCommands(C.undoInputRule,g.undo)),n("Shift-Mod-z",g.redo);var r=E.chainCommands(C.undoInputRule,ht,E.deleteSelection,E.joinBackward,E.selectNodeBackward);if(n("Backspace",r),n("Mod-Backspace",r),Ct||n("Mod-y",g.redo),n("Alt-ArrowUp",E.joinUp),n("Alt-ArrowDown",E.joinDown),n("Escape",E.selectParentNode),n("ArrowLeft",(function(t,e){var n=t.schema.marks.code,r=t.selection,o=r.empty,i=r.$cursor;if(!o||!i)return!1;var s=t.tr.storedMarks;if(n){var a=n&&F(t,n.create()),c=P(t,i.pos),u=P(t,i.pos-1),h=P(t,i.pos-2),l=c&&!u&&Array.isArray(s),p=u&&!h&&(null===s||Array.isArray(s)&&!!s.length),f=(l&&Array.isArray(s)&&!s.length||!l&&null===s)&&!u&&h,d=!c&&u&&Array.isArray(s)&&!s.length;if(!a&&f){var m=t.tr.setSelection(k.Selection.near(t.doc.resolve(i.pos-1)));return e&&e(m.removeStoredMark(n)),!0}if(!a&&d)return e&&e(t.tr.addStoredMark(n.create())),!0;if(a&&p){var v=t.tr.setSelection(k.Selection.near(t.doc.resolve(i.pos-1)));return e&&e(v.addStoredMark(n.create())),!0}var y=0===i.index(i.depth-1);if(a&&(l||!i.nodeBefore&&y))return e&&e(t.tr.removeStoredMark(n)),!0}return!1})),n("ArrowRight",(function(t,e){var n=t.schema.marks.code,r=t.selection,o=r.empty,i=r.$cursor;if(!o||!i)return!1;var s=t.tr.storedMarks;if(n){var a=F(t,n.create()),c=t.doc.rangeHasMark(i.pos,i.pos,n),u=t.doc.rangeHasMark(i.pos,i.pos+1,n),h=!c&&!u&&(!s||!!s.length),l=!c&&u&&(!s||!s.length);if(!a&&l)return e&&e(t.tr.addStoredMark(n.create())),!0;if(a&&h)return e&&e(t.tr.removeStoredMark(n)),!0}return!1})),n("ArrowDown",pt),n("ArrowUp",ft),t.marks.strong&&(n("Mod-b",E.toggleMark(t.marks.strong)),n("Mod-B",E.toggleMark(t.marks.strong))),t.marks.em&&(n("Mod-i",E.toggleMark(t.marks.em)),n("Mod-I",E.toggleMark(t.marks.em))),t.marks.superscript&&n("Shift-Mod-.",E.toggleMark(t.marks.superscript)),t.nodes.hard_break){var o=t.nodes.hard_break,i=E.chainCommands(E.exitCode,(function(t,e){return e(t.tr.insertText(" ").replaceSelectionWith(o.create()).scrollIntoView()),!0}));n("Mod-Enter",i),n("Shift-Enter",i),Ct&&n("Ctrl-Enter",i)}var s=Ct?"Mod-Enter":"Ctrl-Enter",a=[E.newlineInCode,E.createParagraphNear,E.liftEmptyBlock,E.splitBlock];return t.nodes.list_item&&(a.unshift(et),a.unshift(tt(t.nodes.list_item)),n("Tab",nt()),n("Shift-Tab",Q())),n("Enter",E.chainCommands.apply(null,a)),n(s,E.chainCommands.apply(null,a)),N.keymap(e)}var Mt={"**":["_","~~","^"],"*":["__","~~","^"],"^":["*","_"],__:["*","~~","^"],_:["**","~~","^"],"~~":["__","_","**","*","^"]},_t=function t(e,n){for(var r=0;r<Mt[e].length;r++){var o=Mt[e][r];if(o===n)return!0;var i=n.length-o.length;if(n.substr(i,n.length)===o)return t(o,n.substr(0,i))}return!1};function Tt(t,e,n,r){return function(o,i,s,a){var c,u=d(i,3),h=u[1],l=a,p=u[2]?s+h.length:s,f=o.doc.resolve(s+h.length).nodeBefore;if(h&&h.length>0&&!_t(r,h)&&(!f||f.type!==o.schema.nodes.hard_break))return null;if(o.schema.marks.code&&o.schema.marks.code.isInSet(o.doc.resolve(p+1).marks()))return null;if(o.doc.nodesBetween(p,l,(function(t){return t.type===e.nodes.hard_break?(c=!0,!1):!c})),c)return null;if(o.doc.resolve(p).sameParent(o.doc.resolve(l))&&!o.doc.resolve(p).parent.type.allowsMarkType(t))return null;var m=o.tr.addMark(p,l,t.create());return n>1&&(m=m.delete(l-(n-1),l)),m.delete(p,p+n).removeStoredMark(t)}}function Et(t,e){return function(n,r,o,i){if(r[1]&&r[1].length>0){var s=[function(t){return"("===t},function(t){var e=n.doc.resolve(o+t.length).nodeBefore;return e&&e.type===n.schema.nodes.hard_break||!1}];if(s.every((function(t){return!t(r[1])})))return null}if(n.doc.resolve(o).sameParent(n.doc.resolve(i))&&!n.doc.resolve(o).parent.type.allowsMarkType(t))return null;var a=n.tr;n.selection.from!==n.selection.to&&(a.delete(n.selection.from,n.selection.to),i-=n.selection.to-n.selection.from);var c=i-r[2].length+1,u=n.schema.marks.code.create();return function(t,e,n,r,o){return o.doc.nodesBetween(o.mapping.map(t),o.mapping.map(e),(function(i,s){if(!i.isText)return!0;var a=Math.max(s,o.mapping.map(t)),c=Math.min(s+i.nodeSize,o.mapping.map(e));return n?o.removeMark(a,c,r):o.addMark(a,c,r),!0})),o}(c,i,!1,u,a).setStoredMarks([u]).delete(c,c+e.length).removeStoredMark(t)}}var Nt=/(\S*)(\_\_([^\_\s](\_(?!\_)|[^\_])*[^\_\s]|[^\_\s])\_\_)$/,At=/(\S*)(\*\*([^\*\s](\*(?!\*)|[^\*])*[^\*\s]|[^\*\s])\*\*)$/,zt=/(\S*[^\s\_]*)(\_([^\s\_][^\_]*[^\s\_]|[^\s\_])\_)$/,Rt=/(\S*[^\s\*]*)(\*([^\s\*][^\*]*[^\s\*]|[^\s\*])\*)$/,It=/(\S*)(\~\~([^\s\~](\~(?!\~)|[^\~])*[^\s\~]|[^\s\~])\~\~)$/,Dt=/(\S*)(`[^\s][^`]*`)$/,jt=/(\S*[^\s^]*)(\^([^\s^][^^]*[^\s^]|[^\s^])\^)$/;function Ft(t){var e=[];if(t.marks.strong&&e.push.apply(e,m(function(t){return[L(Nt,Tt(t.marks.strong,t,2,"__")),L(At,Tt(t.marks.strong,t,2,"**"))]}(t))),t.marks.em&&e.push.apply(e,m(function(t){return[L(zt,Tt(t.marks.em,t,1,"_")),L(Rt,Tt(t.marks.em,t,1,"*"))]}(t))),t.marks.superscript&&e.push.apply(e,m(function(t){return[L(jt,Tt(t.marks.superscript,t,1,"^"))]}(t))),t.marks.strike&&e.push.apply(e,m(function(t){return[L(It,Tt(t.marks.strike,t,2,"~~"))]}(t))),t.marks.code&&e.push.apply(e,m(function(t){return[L(Dt,Et(t.marks.code,"`"))]}(t))),0!==e.length)return C.inputRules({rules:e})}var Pt="ProseMirror-prompt";function Bt(t,e){return Object.keys(t).filter((function(n,r){var o=t[n],i=e[r],s=o.read(i),a=o.validate(s);return a&&function(t,e){var n=t.parentNode,r=n.appendChild(document.createElement("div"));r.style.left=t.offsetLeft+t.offsetWidth+2+"px",r.style.top=t.offsetTop-5+"px",r.className="ProseMirror-invalid",r.textContent=e,setTimeout((function(){return n.removeChild(r)}),1500)}(i,a),!a})).reduce((function(n,r,o){var i=t[r],s=e[o],a=i.read(s);return n[r]=i.clean(a),n}),{})}var qt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=c(n);function n(){return l(this,n),e.apply(this,arguments)}return f(n,[{key:"render",value:function(){var t=document.createElement("input");return t.type="text",t.placeholder=this.options.label,t.className=this.options.class,t.value=this.options.value||"",t.autocomplete="off",t}}]),n}(function(){function t(e){l(this,t),this.options=e}return f(t,[{key:"read",value:function(t){return t.value}},{key:"validateType",value:function(){}},{key:"validate",value:function(t){return!t&&this.options.required?"Required field":this.validateType(t)||this.options.validate&&this.options.validate(t)}},{key:"clean",value:function(t){return this.options.clean?this.options.clean(t):t}}]),t}()),$t=function(t,e){var n={label:e.title,run:t};return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),n),e.enable&&!0!==e.enable||e.select||(n[e.enable?"enable":"select"]=function(e){return t(e)}),new x.MenuItem(n)},Lt=function(t,e){var n={active:function(e){return F(e,t)},enable:!0};return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),n),$t(E.toggleMark(t),n)},Jt=function(t,e,n){for(var r,o=t.selection.$from,s=o.depth,a=function(){var t=o.node(s);i({},n),t.attrs.level&&t.attrs.level;var a=e.name===t.type.name,c=Object.keys(n).reduce((function(e,r){return n[r]===t.attrs[r]&&e}),!0);a&&c&&(r=s),s-=1};s>0;)a();return r},Vt=function(t,e){return function(n,r){var o=Jt(n,t,e)?n.schema.nodes.paragraph:t;return E.setBlockType(o,e)(n,r)}},Wt={width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",path:""},Ht={strong:i(i({},Wt),{},{path:"M6.935 4.44A1.5 1.5 0 0 1 7.996 4h4.383C15.017 4 17 6.182 17 8.625a4.63 4.63 0 0 1-.865 2.682c1.077.827 1.866 2.12 1.866 3.813C18 18.232 15.3 20 13.12 20H8a1.5 1.5 0 0 1-1.5-1.5l-.004-13c0-.397.158-.779.44-1.06ZM9.5 10.25h2.88c.903 0 1.62-.76 1.62-1.625S13.281 7 12.38 7H9.498l.002 3.25Zm0 3V17h3.62c.874 0 1.88-.754 1.88-1.88 0-1.13-.974-1.87-1.88-1.87H9.5Z"}),em:i(i({},Wt),{},{path:"M9.75 4h8.504a.75.75 0 0 1 .102 1.493l-.102.006h-3.197L10.037 18.5h4.213a.75.75 0 0 1 .742.648l.007.102a.75.75 0 0 1-.648.743L14.25 20h-9.5a.747.747 0 0 1-.746-.75c0-.38.28-.694.645-.743l.101-.007h3.685l.021-.065L13.45 5.499h-3.7a.75.75 0 0 1-.742-.648L9 4.75a.75.75 0 0 1 .648-.743L9.751 4h8.503-8.503Z"}),superScript:i(i({},Wt),{},{path:"M18.736 3.5c-.543 0-.986.495-.986 1.023a.75.75 0 0 1-1.5 0C16.25 3.278 17.258 2 18.736 2c.855 0 1.684.4 2.15 1.117.49.751.5 1.724-.057 2.672-.285.484-.673.847-1.045 1.141-.187.148-.379.284-.557.41l-.078.056a17.45 17.45 0 0 0-.432.311c-.356.268-.619.511-.78.793h2.514a.75.75 0 0 1 0 1.5H17a.75.75 0 0 1-.75-.75c0-1.396.821-2.182 1.565-2.741.157-.119.32-.234.472-.341l.074-.052c.177-.126.34-.243.493-.363.306-.242.532-.47.682-.724.31-.53.229-.886.093-1.094-.158-.244-.486-.435-.893-.435Z\n      M15.26 4.71c.06.562.385 1.043.847 1.318L10.987 12l5.583 6.512a.75.75 0 1 1-1.14.976L10 13.152l-5.43 6.336a.75.75 0 0 1-1.14-.976L9.013 12 3.431 5.488a.75.75 0 1 1 1.139-.976L10 10.848l5.26-6.137Z"}),code:i(i({},Wt),{},{path:"m8.066 18.943 6.5-14.5a.75.75 0 0 1 1.404.518l-.036.096-6.5 14.5a.75.75 0 0 1-1.404-.518l.036-.096 6.5-14.5-6.5 14.5ZM2.22 11.47l4.25-4.25a.75.75 0 0 1 1.133.976l-.073.085L3.81 12l3.72 3.719a.75.75 0 0 1-.976 1.133l-.084-.073-4.25-4.25a.75.75 0 0 1-.073-.976l.073-.084 4.25-4.25-4.25 4.25Zm14.25-4.25a.75.75 0 0 1 .976-.073l.084.073 4.25 4.25a.75.75 0 0 1 .073.976l-.073.085-4.25 4.25a.75.75 0 0 1-1.133-.977l.073-.084L20.19 12l-3.72-3.72a.75.75 0 0 1 0-1.06Z"}),link:i(i({},Wt),{},{path:"M9.25 7a.75.75 0 0 1 .11 1.492l-.11.008H7a3.5 3.5 0 0 0-.206 6.994L7 15.5h2.25a.75.75 0 0 1 .11 1.492L9.25 17H7a5 5 0 0 1-.25-9.994L7 7h2.25ZM17 7a5 5 0 0 1 .25 9.994L17 17h-2.25a.75.75 0 0 1-.11-1.492l.11-.008H17a3.5 3.5 0 0 0 .206-6.994L17 8.5h-2.25a.75.75 0 0 1-.11-1.492L14.75 7H17ZM7 11.25h10a.75.75 0 0 1 .102 1.493L17 12.75H7a.75.75 0 0 1-.102-1.493L7 11.25h10H7Z"}),undo:i(i({},Wt),{},{path:"M4.75 2a.75.75 0 0 1 .743.648l.007.102v5.69l4.574-4.56a6.41 6.41 0 0 1 8.879-.179l.186.18a6.41 6.41 0 0 1 0 9.063l-8.846 8.84a.75.75 0 0 1-1.06-1.062l8.845-8.838a4.91 4.91 0 0 0-6.766-7.112l-.178.17L6.562 9.5h5.688a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.648.743L12.25 11h-7.5a.75.75 0 0 1-.743-.648L4 10.25v-7.5A.75.75 0 0 1 4.75 2Z"}),redo:i(i({},Wt),{},{path:"M19.25 2a.75.75 0 0 0-.743.648l-.007.102v5.69l-4.574-4.56a6.41 6.41 0 0 0-8.878-.179l-.186.18a6.41 6.41 0 0 0 0 9.063l8.845 8.84a.75.75 0 0 0 1.06-1.062l-8.845-8.838a4.91 4.91 0 0 1 6.766-7.112l.178.17L17.438 9.5H11.75a.75.75 0 0 0-.743.648L11 10.25c0 .38.282.694.648.743l.102.007h7.5a.75.75 0 0 0 .743-.648L20 10.25v-7.5a.75.75 0 0 0-.75-.75Z"}),bulletList:i(i({},Wt),{},{path:"M3.25 17.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5Zm3.5.5h14.5a.75.75 0 0 1 .102 1.494l-.102.006H6.75a.75.75 0 0 1-.102-1.493L6.75 18h14.5-14.5Zm-3.5-7a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5Zm3.5.5h14.5a.75.75 0 0 1 .102 1.494L21.25 13H6.75a.75.75 0 0 1-.102-1.493l.102-.007h14.5-14.5Zm-3.5-7A1.25 1.25 0 1 1 3.25 7a1.25 1.25 0 0 1 0-2.499Zm3.5.5h14.5a.75.75 0 0 1 .102 1.494l-.102.006H6.75a.75.75 0 0 1-.102-1.493L6.75 5h14.5-14.5Z"}),orderedList:i(i({},Wt),{},{path:"M6 2.75a.75.75 0 0 0-1.434-.307l-.002.003a1.45 1.45 0 0 1-.067.132 4.126 4.126 0 0 1-.238.384c-.217.313-.524.663-.906.902a.75.75 0 1 0 .794 1.272c.125-.078.243-.161.353-.248V7.25a.75.75 0 0 0 1.5 0v-4.5ZM20.5 18.75a.75.75 0 0 0-.75-.75h-9a.75.75 0 0 0 0 1.5h9a.75.75 0 0 0 .75-.75ZM20.5 12.244a.75.75 0 0 0-.75-.75h-9a.75.75 0 1 0 0 1.5h9a.75.75 0 0 0 .75-.75ZM20.5 5.75a.75.75 0 0 0-.75-.75h-9a.75.75 0 0 0 0 1.5h9a.75.75 0 0 0 .75-.75ZM5.15 10.52c-.3-.053-.676.066-.87.26a.75.75 0 1 1-1.06-1.06c.556-.556 1.43-.812 2.192-.677.397.07.805.254 1.115.605.316.358.473.825.473 1.352 0 .62-.271 1.08-.606 1.42-.278.283-.63.511-.906.689l-.08.051a5.88 5.88 0 0 0-.481.34H6.25a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75c0-1.314.984-1.953 1.575-2.337l.06-.04c.318-.205.533-.345.69-.504.134-.136.175-.238.175-.369 0-.223-.061-.318-.098-.36a.42.42 0 0 0-.251-.12ZM2.97 21.28s.093.084.004.005l.006.005.013.013a1.426 1.426 0 0 0 .15.125c.095.07.227.158.397.243.341.17.83.329 1.46.329.64 0 1.196-.181 1.601-.54.408-.36.61-.857.595-1.359A1.775 1.775 0 0 0 6.77 19c.259-.305.412-.685.426-1.101a1.73 1.73 0 0 0-.595-1.36C6.196 16.181 5.64 16 5 16c-.63 0-1.119.158-1.46.33a2.592 2.592 0 0 0-.51.334 1.426 1.426 0 0 0-.037.033l-.013.013-.006.005-.002.003H2.97l-.001.002a.75.75 0 0 0 1.048 1.072 1.1 1.1 0 0 1 .192-.121c.159-.08.42-.171.79-.171.36 0 .536.1.608.164.07.061.09.127.088.187a.325.325 0 0 1-.123.23c-.089.077-.263.169-.573.169a.75.75 0 0 0 0 1.5c.31 0 .484.092.573.168.091.08.121.166.123.231a.232.232 0 0 1-.088.187c-.072.064-.247.164-.608.164a1.75 1.75 0 0 1-.79-.17 1.1 1.1 0 0 1-.192-.122.75.75 0 0 0-1.048 1.072Zm.002-4.563-.001.002c.007-.006.2-.168 0-.002Z"}),h1:i(i({},Wt),{},{path:"M19.59 5.081a.746.746 0 0 0-.809.084.751.751 0 0 0-.249.367c-.69 2.051-2.057 3.409-3.168 4.075a.75.75 0 0 0 .772 1.286c.774-.464 1.623-1.18 2.364-2.146v9.503a.75.75 0 0 0 1.5 0V5.772a.75.75 0 0 0-.41-.69ZM3.5 5.75a.75.75 0 0 0-1.5 0v12.5a.75.75 0 0 0 1.5 0V12.5H10v5.75a.75.75 0 0 0 1.5 0V5.75a.75.75 0 0 0-1.5 0V11H3.5V5.75Z"}),h2:i(i({},Wt),{},{path:"M4.5 5.75a.75.75 0 0 0-1.5 0v12.5a.75.75 0 0 0 1.5 0V12.5H11v5.75a.75.75 0 0 0 1.5 0V5.75a.75.75 0 0 0-1.5 0V11H4.5V5.75Zm10.921 2.085c.23-.46.913-1.335 2.58-1.335.842 0 1.459.26 1.86.639.397.376.64.921.64 1.611 0 1.963-1.3 3.068-2.958 4.343l-.212.163C15.825 14.409 14 15.806 14 18.25a.75.75 0 0 0 .75.75h6.5a.75.75 0 0 0 0-1.5h-5.66c.315-1.252 1.427-2.11 2.866-3.218C20.05 13.057 22 11.537 22 8.75c0-1.06-.383-2.015-1.11-2.702C20.166 5.364 19.158 5 18 5c-2.333 0-3.484 1.291-3.92 2.165a.75.75 0 0 0 1.341.67Z"}),h3:i(i({},Wt),{},{path:"M3.5 5.75a.75.75 0 0 0-1.5 0v12.5a.75.75 0 0 0 1.5 0V12.5H10v5.75a.75.75 0 0 0 1.5 0V5.75a.75.75 0 0 0-1.5 0V11H3.5V5.75Zm11.92 2.085c.23-.46.914-1.335 2.58-1.335.843 0 1.46.26 1.86.639.398.376.64.921.64 1.611 0 .606-.161 1.026-.384 1.332-.228.314-.555.554-.953.735-.816.37-1.802.433-2.383.433a.75.75 0 0 0 0 1.5c.581 0 1.567.063 2.383.433.398.18.725.42.953.735.223.306.384.726.384 1.332 0 1.086-.914 2.25-2.5 2.25-1.727 0-2.348-.76-2.553-1.276a.75.75 0 1 0-1.394.552C14.508 17.926 15.727 19 18 19c2.414 0 4-1.836 4-3.75 0-.894-.245-1.63-.67-2.214A3.679 3.679 0 0 0 20.144 12a3.679 3.679 0 0 0 1.186-1.036c.425-.584.67-1.32.67-2.214 0-1.06-.383-2.015-1.11-2.702C20.165 5.364 19.157 5 18 5c-2.334 0-3.484 1.291-3.92 2.165a.75.75 0 1 0 1.34.67Z"}),image:i(i({},Wt),{},{path:"M18.75 4A3.25 3.25 0 0 1 22 7.25v11.5A3.25 3.25 0 0 1 18.75 22H7.25A3.25 3.25 0 0 1 4 18.75v-6.248c.474.198.977.34 1.5.422v5.826c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116l5.822 5.702c.067-.186.104-.386.104-.595V7.25a1.75 1.75 0 0 0-1.75-1.75h-5.826a6.457 6.457 0 0 0-.422-1.5h6.248Zm-6.191 10.644l-.084.07l-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686a.75.75 0 0 0-.966-.071ZM16.252 7.5a2.252 2.252 0 1 1 0 4.504a2.252 2.252 0 0 1 0-4.504ZM6.5 1a5.5 5.5 0 1 1 0 11a5.5 5.5 0 0 1 0-11Zm9.752 8a.752.752 0 1 0 0 1.504a.752.752 0 0 0 0-1.504ZM6.5 3l-.09.007a.5.5 0 0 0-.402.402L6 3.5V6H3.498l-.09.008a.5.5 0 0 0-.402.402l-.008.09l.008.09a.5.5 0 0 0 .402.402l.09.008H6v2.503l.008.09a.5.5 0 0 0 .402.402l.09.009l.09-.009a.5.5 0 0 0 .402-.402L7 9.503V7h2.505l.09-.008a.5.5 0 0 0 .402-.402l.008-.09l-.008-.09a.5.5 0 0 0-.403-.402L9.504 6H7V3.5l-.008-.09a.5.5 0 0 0-.402-.403L6.5 3Z"})},Ut=function(t,e){return $t(_.wrapInList(t,e.attrs),e)},Kt=function(t,e){return new x.MenuItem({title:"Upload image",icon:Ht.image,enable:function(){return!0},run:function(){return e(),!0}})},Zt=function(t,e){var n=e.level,r=void 0===n?1:n;return new x.MenuItem({title:"Heading ".concat(r),icon:e.icon,active:function(e){return Jt(e,t,{level:r})},enable:function(){return!0},run:function(e,n,o){return Jt(e,t,{level:r})?(Vt(t,{level:r})(e,n),!0):(Vt(t,{level:r})(o.state,o.dispatch),o.focus(),!1)}})},Gt=function(t){return new x.MenuItem({title:"Add or remove link",icon:Ht.link,active:function(e){return F(e,t)},enable:function(t){return!t.selection.empty},run:function(e,n,r){return F(e,t)?(E.toggleMark(t)(e,n),!0):(function(t){var e=document.body.appendChild(document.createElement("div"));e.className=Pt;var n=function(){window.removeEventListener("mousedown",r),e.parentNode&&e.parentNode.removeChild(e)},r=function(t){e.contains(t.target)||n()};setTimeout((function(){return window.addEventListener("mousedown",r)}),50);var o=[];Object.values(t.fields).map((function(t){return o.push(t.render())}));var i=document.createElement("button");i.type="submit",i.className="button tiny button--save-link "+Pt+"-submit",i.textContent="Create Link";var s=document.createElement("button");s.type="button",s.className="button tiny hollow secondary"+Pt+"-cancel",s.textContent="Cancel",s.addEventListener("click",n);var a=e.appendChild(document.createElement("form"));if(t.title){var c=document.createElement("h5");c.className="sub-block-title",a.appendChild(c).textContent=t.title}o.forEach((function(t){a.appendChild(document.createElement("div")).appendChild(t)}));var u=a.appendChild(document.createElement("div"));u.className=Pt+"-buttons",u.appendChild(i),u.appendChild(document.createTextNode(" ")),u.appendChild(s);var h=e.getBoundingClientRect();e.style.top=(window.innerHeight-h.height)/2+"px",e.style.left=(window.innerWidth-h.width)/2+"px";var l=function(){var e=Bt(t.fields,o);e&&(n(),t.callback(e))};a.addEventListener("submit",(function(t){t.preventDefault(),l()})),a.addEventListener("keydown",(function(t){"Esc"===t.key?(t.preventDefault(),n()):"Enter"!==t.key||t.ctrlKey||t.metaKey||t.shiftKey?"Tab"===t.key&&window.setTimeout((function(){e.contains(document.activeElement)||n()}),500):(t.preventDefault(),l())}));var p=a.elements[0];p&&p.focus()}({title:"Create a link",fields:{href:new qt({label:"https://example.com",class:"small",required:!0})},callback:function(e){E.toggleMark(t,e)(r.state,r.dispatch),r.focus()}}),!1)}})},Yt=function(t,e){var n=e.enabledMenuOptions,r=void 0===n?["strong","em","code","link","undo","redo","bulletList","orderedList"]:n,o=e.onImageUpload,i=void 0===o?function(){}:o,s={strong:Lt(t.marks.strong,{title:"Toggle strong style",icon:Ht.strong}),em:Lt(t.marks.em,{title:"Toggle emphasis",icon:Ht.em}),code:Lt(t.marks.code,{title:"Toggle code font",icon:Ht.code}),link:Gt(t.marks.link),bulletList:Ut(t.nodes.bullet_list,{title:"Wrap in bullet list",icon:Ht.bulletList}),orderedList:Ut(t.nodes.ordered_list,{title:"Wrap in ordered list",icon:Ht.orderedList}),undo:new x.MenuItem({title:"Undo last change",run:g.undo,enable:function(t){return g.undo(t)},icon:Ht.undo}),redo:new x.MenuItem({title:"Redo last undone change",run:g.redo,enable:function(t){return g.redo(t)},icon:Ht.redo}),h1:Zt(t.nodes.heading,{level:1,title:"Toggle code font",icon:Ht.h1}),h2:Zt(t.nodes.heading,{level:2,title:"Toggle code font",icon:Ht.h2}),h3:Zt(t.nodes.heading,{level:3,title:"Toggle code font",icon:Ht.h3}),imageUpload:Kt(t.nodes.image,i)};return[r.filter((function(t){return!!s[t]})).map((function(t){return s[t]}))]};function Xt(t,e){return Object.keys(e).reduce((function(n,r){var o=e[r],i=o.block||o.node,s=o.mark;return(i&&t.nodes[i]||s&&t.marks[s])&&(n[r]=o),n}),{})}var Qt={blockquote:"blockquote",paragraph:"paragraph",code_block:["code","fence"],list_item:"list"},te={em:"emphasis",superscript:"sup",strong:"text",link:["link","autolink","reference","linkify"],strike:"strikethrough",code:"backticks"},ee={blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},softbreak:{node:"hard_break"},hardbreak:{node:"hard_break"},code_block:{block:"code_block"},fence:{block:"code_block",attrs:function(t){return{language:t.info&&t.info.trim()||null}}},list_item:{block:"list_item"},bullet_list:{block:"bullet_list"},ordered_list:{block:"ordered_list",attrs:function(t){return{order:+t.attrGet("order")||1}}},image:{node:"image",getAttrs:function(t){var e=t.attrGet("src"),n=e.match(/cw_image_height=(\d+)px/);return{src:e,title:t.attrGet("title")||null,alt:t.children[0]&&t.children[0].content||null,height:n?"".concat(n[1],"px"):null}}}},ne={em:{mark:"em"},sup:{mark:"superscript"},strong:{mark:"strong"},link:{mark:"link",attrs:function(t){return{href:t.attrGet("href"),title:t.attrGet("title")||null}}},code_inline:{mark:"code"},s:{mark:"strike"}},re={nodes:i({},Qt),marks:i({},te)},oe=i(i(i({},ee),ne),{},{mention:{node:"mention",getAttrs:function(t){var e=t.mention;return{userId:e.userId,userFullName:e.userFullName}}}}),ie=A("commonmark",{html:!1,linkify:!1});ie.enable(["entity","escape"]),ie.disable(["table","hr","heading","lheading"]);var se=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie;l(this,t),["nodes","marks"].forEach((function(t){for(var r in re[t])e[t][r]&&n.enable(re[t][r])})),this.markdownParser=new z.MarkdownParser(e,n,Xt(e,oe))}return f(t,[{key:"encode",value:function(t){throw new Error("This is not implemented yet")}},{key:"parse",value:function(t){return this.markdownParser.parse(t)}}]),t}(),ae={nodes:i(i({},Qt),{},{rule:"hr",heading:["heading"],image:"image"}),marks:i({},te)},ce=i(i(i({},ee),ne),{},{hr:{node:"horizontal_rule"},heading:{block:"heading",attrs:function(t){return{level:+t.tag.slice(1)}}},mention:{node:"mention",getAttrs:function(t){var e=t.mention;return{userId:e.userId,userFullName:e.userFullName}}}}),ue=A("commonmark",{html:!1,linkify:!0,breaks:!0}).use(R);ue.enable(["entity","escape","hr"]);var he=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue;l(this,t),["nodes","marks"].forEach((function(t){for(var r in ae[t])e[t][r]&&n.enable(ae[t][r])})),this.markdownParser=new z.MarkdownParser(e,n,Xt(e,ce))}return f(t,[{key:"encode",value:function(t){throw new Error("This is not implemented yet")}},{key:"parse",value:function(t){return this.markdownParser.parse(t)}}]),t}(),le=function(t,e){t.wrapBlock("> ",null,e,(function(){return t.renderContent(e)}))},pe=function(t,e){t.write("```"+(e.attrs.params||"")+"\n"),t.text(e.textContent,!1),t.ensureNewLine(),t.write("```"),t.closeBlock(e)},fe=function(t,e){t.renderList(e,"  ",(function(){return(e.attrs.bullet||"*")+" "}))},de=function(t,e){var n=e.attrs.order||1,r=String(n+e.childCount-1).length,o=t.repeat(" ",r+2);t.renderList(e,o,(function(e){var o=String(n+e);return t.repeat(" ",r-o.length)+o+". "}))},me=function(t,e){t.renderContent(e)},ve=function(t,e){t.renderInline(e),t.closeBlock(e)},ye=function(t,e){var n=t.esc(e.attrs.src);if(e.attrs.height){var r="cw_image_height=".concat(e.attrs.height);n.includes("?")?n=n.includes("cw_image_height=")?n.replace(/cw_image_height=[^&]+/,r):"".concat(n,"&").concat(r):n+="?".concat(r)}t.write("!["+t.esc(e.attrs.alt||"")+"]("+n+(e.attrs.title?" "+t.quote(e.attrs.title):"")+")")},ge=function(t,e,n,r){for(var o=r+1;o<n.childCount;o++)if(n.child(o).type!==e.type)return void t.write("  \n")},ke=function(t,e){t.text(e.text,!1)},be={open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},we={open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0},xe={open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},Se={open:function(t,e,n,r){return Me(e,n,r,1)?"<":"["},close:function(t,e,n,r){return Me(e,n,r,-1)?">":"]("+t.esc(e.attrs.href)+(e.attrs.title?" "+t.quote(e.attrs.title):"")+")"},escape:!1},Ce={open:function(t,e,n,r){return Oe(n.child(r),-1)},close:function(t,e,n,r){return Oe(n.child(r-1),1)},escape:!1};function Oe(t,e){var n,r=/`+/g,o=0;if(t.isText)for(;n=r.exec(t.text);)o=Math.max(o,n[0].length);for(var i=o>0&&e>0?" `":"`",s=0;s<o;s++)i+="`";return o>0&&e<0&&(i+=" "),i}function Me(t,e,n,r){if(t.attrs.title||!/^\w+:/.test(t.attrs.href))return!1;var o=e.child(n+(r<0?-1:0));if(!o.isText||o.text!=t.attrs.href||o.marks[o.marks.length-1]!=t)return!1;if(n==(r<0?1:e.childCount-1))return!0;var i=e.child(n+(r<0?-2:1));return!t.isInSet(i.marks)}var _e=new z.MarkdownSerializer({blockquote:le,code_block:pe,heading:function(t,e){t.write(t.repeat("#",e.attrs.level)+" "),t.renderInline(e),t.closeBlock(e)},horizontal_rule:function(t,e){t.write(e.attrs.markup||"---"),t.closeBlock(e)},bullet_list:fe,ordered_list:de,list_item:me,paragraph:ve,image:ye,hard_break:ge,text:ke},{em:be,superscript:{open:"^",close:"^",mixable:!1,escape:!1,expelEnclosingWhitespace:!1},strike:we,strong:xe,link:Se,code:Ce}),Te=new z.MarkdownSerializer({mention:function(t,e){var n=t.esc("mention://user/".concat(e.attrs.userId,"/").concat(encodeURIComponent(e.attrs.userFullName))),r=t.esc("@"+(e.attrs.userFullName||""));t.write("[".concat(r,"](").concat(n,")"))},blockquote:le,code_block:pe,bullet_list:fe,ordered_list:de,list_item:me,paragraph:ve,image:ye,hard_break:ge,text:ke},{em:be,strike:we,strong:xe,link:Se,code:Ce}),Ee=new O.Schema({nodes:{doc:z.schema.spec.nodes.get("doc"),paragraph:z.schema.spec.nodes.get("paragraph"),blockquote:z.schema.spec.nodes.get("blockquote"),horizontal_rule:z.schema.spec.nodes.get("horizontal_rule"),heading:z.schema.spec.nodes.get("heading"),code_block:z.schema.spec.nodes.get("code_block"),text:z.schema.spec.nodes.get("text"),image:z.schema.spec.nodes.get("image"),hard_break:z.schema.spec.nodes.get("hard_break"),ordered_list:Object.assign(_.orderedList,{content:"list_item+",group:"block"}),bullet_list:Object.assign(_.bulletList,{content:"list_item+",group:"block"}),list_item:Object.assign(_.listItem,{content:"paragraph block*"})},marks:{link:z.schema.spec.marks.get("link"),em:z.schema.spec.marks.get("em"),superscript:{parseDOM:[{tag:"sup"}],toDOM:function(){return["sup"]}},strong:z.schema.spec.marks.get("strong"),code:z.schema.spec.marks.get("code"),strike:{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:function(t){return"line-through"===t}}],toDOM:function(){return["s",0]}}}}),Ne=new O.Schema({nodes:{doc:z.schema.spec.nodes.get("doc"),paragraph:z.schema.spec.nodes.get("paragraph"),blockquote:z.schema.spec.nodes.get("blockquote"),code_block:z.schema.spec.nodes.get("code_block"),text:z.schema.spec.nodes.get("text"),hard_break:z.schema.spec.nodes.get("hard_break"),image:i(i({},z.schema.spec.nodes.get("image")),{},{attrs:i(i({},z.schema.spec.nodes.get("image").attrs),{},{height:{default:null}}),parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt"),height:parseInt(t.style.height)}}}],toDOM:function(t){var e={src:t.attrs.src,alt:t.attrs.alt,height:t.attrs.height};return t.attrs.height&&(e.style="height: ".concat(t.attrs.height)),["img",e]}}),ordered_list:Object.assign(_.orderedList,{content:"list_item+",group:"block"}),bullet_list:Object.assign(_.bulletList,{content:"list_item+",group:"block"}),list_item:Object.assign(_.listItem,{content:"paragraph block*"}),mention:{attrs:{userFullName:{default:""},userId:{default:""}},group:"inline",inline:!0,selectable:!0,draggable:!0,atom:!0,toDOM:function(t){return["span",{class:"prosemirror-mention-node","mention-user-id":t.attrs.userId,"mention-user-full-name":t.attrs.userFullName},"@".concat(t.attrs.userFullName)]},parseDOM:[{tag:"span[mention-user-id][mention-user-full-name]",getAttrs:function(t){return{userId:t.getAttribute("mention-user-id"),userFullName:t.getAttribute("mention-user-full-name")}}}]}},marks:{link:z.schema.spec.marks.get("link"),em:z.schema.spec.marks.get("em"),strong:z.schema.spec.marks.get("strong"),code:z.schema.spec.marks.get("code"),strike:{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:function(t){return"line-through"===t}}],toDOM:function(){return["s",0]}}}});Object.defineProperty(e,"EditorState",{enumerable:!0,get:function(){return k.EditorState}}),Object.defineProperty(e,"Selection",{enumerable:!0,get:function(){return k.Selection}}),Object.defineProperty(e,"EditorView",{enumerable:!0,get:function(){return S.EditorView}}),e.ArticleMarkdownSerializer=_e,e.ArticleMarkdownTransformer=he,e.MessageMarkdownSerializer=Te,e.MessageMarkdownTransformer=se,e.buildEditor=function(t){var e=t.schema,n=t.placeholder,r=t.methods,o=(r=void 0===r?{}:r).onImageUpload,i=t.plugins,s=void 0===i?[]:i,a=t.enabledMenuOptions;return[].concat(m(s||[]),[g.history(),Ot(e),xt(e),Ft(e),ct(e),St(e),G(e),b.dropCursor(),w.gapCursor(),j(n),x.menuBar({floating:!0,content:Yt(e,{enabledMenuOptions:a,onImageUpload:o})}),new k.Plugin({props:{attributes:{class:"ProseMirror-woot-style"}}})])},e.fullSchema=Ee,e.messageSchema=Ne},205:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a}));var r=n(59);function o(t,e){return void 0===e&&(e=0),"string"!==typeof t||0===e||t.length<=e?t:t.substr(0,e)+"..."}function i(t,e){var n=t,r=n.length;if(r<=150)return n;e>r&&(e=r);var o=Math.max(e-60,0);o<5&&(o=0);var i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n="'{snip} "+n),i<r&&(n+=" {snip}"),n}function s(t,e){if(!Array.isArray(t))return"";for(var n=[],r=0;r<t.length;r++){var o=t[r];try{n.push(String(o))}catch(i){n.push("[value cannot be serialized]")}}return n.join(e)}function a(t,e){return!!Object(r.l)(t)&&(Object(r.k)(e)?e.test(t):"string"===typeof e&&-1!==t.indexOf(e))}},207:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return m}));var r=n(3),o=n(267),i=n(147),s=n(60),a=n(84),c=n(135),u="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,h=n(300),l=n(526),p=function(){function t(t,e,n){void 0===e&&(e=new h.a),void 0===n&&(n=4),this._version=n,this._stack=[{}],this.getStackTop().scope=e,t&&this.bindClient(t)}return t.prototype.isOlderThan=function(t){return this._version<t},t.prototype.bindClient=function(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()},t.prototype.pushScope=function(){var t=h.a.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t},t.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},t.prototype.withScope=function(t){var e=this.pushScope();try{t(e)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(t,e){var n=this._lastEventId=e&&e.event_id?e.event_id:Object(o.f)(),i=e;if(!e){var s=void 0;try{throw new Error("Sentry syntheticException")}catch(t){s=t}i={originalException:t,syntheticException:s}}return this._invokeClient("captureException",t,Object(r.a)(Object(r.a)({},i),{event_id:n})),n},t.prototype.captureMessage=function(t,e,n){var i=this._lastEventId=n&&n.event_id?n.event_id:Object(o.f)(),s=n;if(!n){var a=void 0;try{throw new Error(t)}catch(c){a=c}s={originalException:t,syntheticException:a}}return this._invokeClient("captureMessage",t,e,Object(r.a)(Object(r.a)({},s),{event_id:i})),i},t.prototype.captureEvent=function(t,e){var n=e&&e.event_id?e.event_id:Object(o.f)();return"transaction"!==t.type&&(this._lastEventId=n),this._invokeClient("captureEvent",t,Object(r.a)(Object(r.a)({},e),{event_id:n})),n},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(t,e){var n=this.getStackTop(),o=n.scope,a=n.client;if(o&&a){var c=a.getOptions&&a.getOptions()||{},u=c.beforeBreadcrumb,h=void 0===u?null:u,l=c.maxBreadcrumbs,p=void 0===l?100:l;if(!(p<=0)){var f=Object(i.b)(),d=Object(r.a)({timestamp:f},t),m=h?Object(s.b)((function(){return h(d,e)})):d;null!==m&&o.addBreadcrumb(m,p)}}},t.prototype.setUser=function(t){var e=this.getScope();e&&e.setUser(t)},t.prototype.setTags=function(t){var e=this.getScope();e&&e.setTags(t)},t.prototype.setExtras=function(t){var e=this.getScope();e&&e.setExtras(t)},t.prototype.setTag=function(t,e){var n=this.getScope();n&&n.setTag(t,e)},t.prototype.setExtra=function(t,e){var n=this.getScope();n&&n.setExtra(t,e)},t.prototype.setContext=function(t,e){var n=this.getScope();n&&n.setContext(t,e)},t.prototype.configureScope=function(t){var e=this.getStackTop(),n=e.scope,r=e.client;n&&r&&t(n)},t.prototype.run=function(t){var e=d(this);try{t(this)}finally{d(e)}},t.prototype.getIntegration=function(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(n){return u&&s.c.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},t.prototype.startSpan=function(t){return this._callExtensionMethod("startSpan",t)},t.prototype.startTransaction=function(t,e){return this._callExtensionMethod("startTransaction",t,e)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.captureSession=function(t){if(void 0===t&&(t=!1),t)return this.endSession();this._sendSessionUpdate()},t.prototype.endSession=function(){var t=this.getStackTop(),e=t&&t.scope,n=e&&e.getSession();n&&n.close(),this._sendSessionUpdate(),e&&e.setSession()},t.prototype.startSession=function(t){var e=this.getStackTop(),n=e.scope,o=e.client,i=o&&o.getOptions()||{},s=i.release,c=i.environment,u=(Object(a.a)().navigator||{}).userAgent,h=new l.a(Object(r.a)(Object(r.a)(Object(r.a)({release:s,environment:c},n&&{user:n.getUser()}),u&&{userAgent:u}),t));if(n){var p=n.getSession&&n.getSession();p&&"ok"===p.status&&p.update({status:"exited"}),this.endSession(),n.setSession(h)}return h},t.prototype._sendSessionUpdate=function(){var t=this.getStackTop(),e=t.scope,n=t.client;if(e){var r=e.getSession&&e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},t.prototype._invokeClient=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=this.getStackTop(),s=i.scope,a=i.client;a&&a[t]&&(e=a)[t].apply(e,Object(r.e)(n,[s]))},t.prototype._callExtensionMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=f(),o=r.__SENTRY__;if(o&&o.extensions&&"function"===typeof o.extensions[t])return o.extensions[t].apply(this,e);u&&s.c.warn("Extension method "+t+" couldn't be found, doing nothing.")},t}();function f(){var t=Object(a.a)();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function d(t){var e=f(),n=y(e);return g(e,t),n}function m(){var t=f();return v(t)&&!y(t).isOlderThan(4)||g(t,new p),Object(c.b)()?function(t){try{var e=f().__SENTRY__,n=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!n)return y(t);if(!v(n)||y(n).isOlderThan(4)){var r=y(t).getStackTop();g(n,new p(r.client,h.a.clone(r.scope)))}return y(n)}catch(o){return y(t)}}(t):y(t)}function v(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function y(t){return Object(a.b)("hub",(function(){return new p}),t)}function g(t,e){return!!t&&((t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0)}},21:function(t,e,n){"use strict";function r(t){this.content=t}n.r(e),n.d(e,"ContentMatch",(function(){return q})),n.d(e,"DOMParser",(function(){return at})),n.d(e,"DOMSerializer",(function(){return gt})),n.d(e,"Fragment",(function(){return c})),n.d(e,"Mark",(function(){return f})),n.d(e,"MarkType",(function(){return ot})),n.d(e,"Node",(function(){return j})),n.d(e,"NodeRange",(function(){return R})),n.d(e,"NodeType",(function(){return tt})),n.d(e,"ReplaceError",(function(){return d})),n.d(e,"ResolvedPos",(function(){return T})),n.d(e,"Schema",(function(){return it})),n.d(e,"Slice",(function(){return m})),r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var o=n&&n!=t?this.remove(n):this,i=o.find(t),s=o.content.slice();return-1==i?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var o=this.remove(e),i=o.content.slice(),s=o.find(t);return i.splice(-1==s?i.length:s,0,e,n),new r(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=r.from(t)).size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=r.from(t)).size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};var o=r;function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var a=0;o.text[a]==i.text[a];a++)n++;return n}if(o.content.size||i.content.size){var c=s(o.content,i.content,n+1);if(null!=c)return c}n+=o.nodeSize}else n+=o.nodeSize}}function a(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=t.child(--o),c=e.child(--i),u=s.nodeSize;if(s!=c){if(!s.sameMarkup(c))return{a:n,b:r};if(s.isText&&s.text!=c.text){for(var h=0,l=Math.min(s.text.length,c.text.length);h<l&&s.text[s.text.length-h-1]==c.text[c.text.length-h-1];)h++,n--,r--;return{a:n,b:r}}if(s.content.size||c.content.size){var p=a(s.content,c.content,n-1,r-1);if(p)return p}n-=u,r-=u}else n-=u,r-=u}}var c=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},u={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};c.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var u=s+1;a.nodesBetween(Math.max(0,t-u),Math.min(a.content.size,e-u),n,r+u)}s=c}},c.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},c.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},c.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new c(r,this.size+t.size)},c.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var s=this.content[o],a=i+s.nodeSize;a>t&&((i<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=a}return new c(n,r)},c.prototype.cutByIndex=function(t,e){return t==e?c.empty:0==t&&e==this.content.length?this:new c(this.content.slice(t,e))},c.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new c(r,o)},c.prototype.addToStart=function(t){return new c([t].concat(this.content),this.size+t.nodeSize)},c.prototype.addToEnd=function(t){return new c(this.content.concat(t),this.size+t.nodeSize)},c.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},u.firstChild.get=function(){return this.content.length?this.content[0]:null},u.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},u.childCount.get=function(){return this.content.length},c.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},c.prototype.maybeChild=function(t){return this.content[t]},c.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},c.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),s(this,t,e)},c.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),a(this,t,e,n)},c.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return l(0,t);if(t==this.size)return l(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?l(n+1,o):l(n,r);r=o}},c.prototype.toString=function(){return"<"+this.toStringInner()+">"},c.prototype.toStringInner=function(){return this.content.join(", ")},c.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},c.fromJSON=function(t,e){if(!e)return c.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new c(e.map(t.nodeFromJSON))},c.fromArray=function(t){if(!t.length)return c.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new c(e||t,n)},c.from=function(t){if(!t)return c.empty;if(t instanceof c)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new c([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(c.prototype,u);var h={index:0,offset:0};function l(t,e){return h.index=t,h.offset=e,h}function p(t,e){if(t===e)return!0;if(!t||"object"!=i(t)||!e||"object"!=i(e))return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!p(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!p(t[o],e[o]))return!1;for(var s in e)if(!(s in t))return!1}return!0}c.empty=new c([],0);var f=function(t,e){this.type=t,this.attrs=e};function d(t){var e=Error.call(this,t);return e.__proto__=d.prototype,e}f.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},f.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},f.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},f.prototype.eq=function(t){return this==t||this.type==t.type&&p(this.attrs,t.attrs)},f.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},f.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},f.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},f.setFrom=function(t){if(!t||0==t.length)return f.none;if(t instanceof f)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},f.none=[],d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="ReplaceError";var m=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},v={size:{configurable:!0}};function y(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,u=a.offset;if(i==e||s.isText){if(u!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(y(s.content,e-i-1,n-i-1)))}function g(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=g(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function k(t,e,n){if(n.openStart>t.depth)throw new d("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new d("Inconsistent open depths");return b(t,e,n,0)}function b(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=b(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(c.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return O(i,M(t,a.start,a.end,e,r))}var u=t.parent,h=u.content;return O(u,h.cut(0,t.parentOffset).append(n.content).append(h.cut(e.parentOffset)))}return O(i,_(t,e,r))}function w(t,e){if(!e.type.compatibleContent(t.type))throw new d("Cannot join "+e.type.name+" onto "+t.type.name)}function x(t,e,n){var r=t.node(n);return w(r,e.node(n)),r}function S(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function C(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(S(t.nodeAfter,r),i++));for(var a=i;a<s;a++)S(o.child(a),r);e&&e.depth==n&&e.textOffset&&S(e.nodeBefore,r)}function O(t,e){if(!t.type.validContent(e))throw new d("Invalid content for node "+t.type.name);return t.copy(e)}function M(t,e,n,r,o){var i=t.depth>o&&x(t,e,o+1),s=r.depth>o&&x(n,r,o+1),a=[];return C(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(w(i,s),S(O(i,M(t,e,n,r,o+1)),a)):(i&&S(O(i,_(t,e,o+1)),a),C(e,n,o,a),s&&S(O(s,_(n,r,o+1)),a)),C(r,null,o,a),new c(a)}function _(t,e,n){var r=[];(C(null,t,n,r),t.depth>n)&&S(O(x(t,e,n+1),_(t,e,n+1)),r);return C(e,null,n,r),new c(r)}v.size.get=function(){return this.content.size-this.openStart-this.openEnd},m.prototype.insertAt=function(t,e){var n=g(this.content,t+this.openStart,e,null);return n&&new m(n,this.openStart,this.openEnd)},m.prototype.removeBetween=function(t,e){return new m(y(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},m.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},m.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},m.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},m.fromJSON=function(t,e){if(!e)return m.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new m(c.fromJSON(t,e.content),n,r)},m.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new m(t,n,r)},Object.defineProperties(m.prototype,v),m.empty=new m(c.empty,0,0);var T=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},E={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};T.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},E.parent.get=function(){return this.node(this.depth)},E.doc.get=function(){return this.node(0)},T.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},T.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},T.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},T.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},T.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},T.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},T.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},E.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},E.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},E.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},T.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r},T.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return f.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},T.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},T.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},T.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new R(this,t,n)},T.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},T.prototype.max=function(t){return t.pos>this.pos?t:this},T.prototype.min=function(t){return t.pos<this.pos?t:this},T.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},T.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,u=o-c;if(n.push(i,a,r+c),!u)break;if((i=i.child(a)).isText)break;o=u-1,r+=c+1}return new T(e,n,o)},T.resolveCached=function(t,e){for(var n=0;n<N.length;n++){var r=N[n];if(r.pos==e&&r.doc==t)return r}var o=N[A]=T.resolve(t,e);return A=(A+1)%z,o},Object.defineProperties(T.prototype,E);var N=[],A=0,z=12,R=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},I={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};I.start.get=function(){return this.$from.before(this.depth+1)},I.end.get=function(){return this.$to.after(this.depth+1)},I.parent.get=function(){return this.$from.node(this.depth)},I.startIndex.get=function(){return this.$from.index(this.depth)},I.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(R.prototype,I);var D=Object.create(null),j=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||c.empty,this.marks=r||f.none},F={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};F.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},F.childCount.get=function(){return this.content.childCount},j.prototype.child=function(t){return this.content.child(t)},j.prototype.maybeChild=function(t){return this.content.maybeChild(t)},j.prototype.forEach=function(t){this.content.forEach(t)},j.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},j.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},F.textContent.get=function(){return this.textBetween(0,this.content.size,"")},j.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},F.firstChild.get=function(){return this.content.firstChild},F.lastChild.get=function(){return this.content.lastChild},j.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},j.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},j.prototype.hasMarkup=function(t,e,n){return this.type==t&&p(this.attrs,e||t.defaultAttrs||D)&&f.sameSet(this.marks,n||f.none)},j.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},j.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},j.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},j.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return m.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new m(a,r.depth-i,o.depth-i)},j.prototype.replace=function(t,e,n){return k(this.resolve(t),this.resolve(e),n)},j.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}},j.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},j.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},j.prototype.resolve=function(t){return T.resolveCached(this,t)},j.prototype.resolveNoCache=function(t){return T.resolve(this,t)},j.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},F.isBlock.get=function(){return this.type.isBlock},F.isTextblock.get=function(){return this.type.isTextblock},F.inlineContent.get=function(){return this.type.inlineContent},F.isInline.get=function(){return this.type.isInline},F.isText.get=function(){return this.type.isText},F.isLeaf.get=function(){return this.type.isLeaf},F.isAtom.get=function(){return this.type.isAtom},j.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),B(this.marks,t)},j.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},j.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=c.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},j.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},j.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},j.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=f.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!f.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},j.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},j.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=c.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(j.prototype,F);var P=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):B(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(j);function B(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var q=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},$={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};q.parse=function(t,e){var n=new L(t,e);if(null==n.next)return q.empty;var r=V(n);n.next&&n.err("Unexpected trailing text");var o=function(t){var e=Object.create(null);return n(G(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];G(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new q(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(Z);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}(function(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var u=n();return o(i(t.expr,e),u),o(i(t.expr,u),u),[r(u)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var h=e,l=0;l<t.min;l++){var p=n();o(i(t.expr,h),p),h=p}if(-1==t.max)o(i(t.expr,h),h);else for(var f=t.min;f<t.max;f++){var d=n();r(h,d),o(i(t.expr,h),d),h=d}return[r(h)]}if("name"==t.type)return[r(e,null,t.value)]}}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],u=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(u)&&r.push(u)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},q.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},q.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},$.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},$.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},q.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},q.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(i,s){var a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return c.from(s.map((function(t){return t.createAndFill()})));for(var u=0;u<i.next.length;u+=2){var h=i.next[u],l=i.next[u+1];if(!h.isText&&!h.hasRequiredAttrs()&&-1==r.indexOf(l)){r.push(l);var p=o(l,s.concat(h));if(p)return p}}}(this,[])},q.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},q.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},$.edgeCount.get=function(){return this.next.length>>1},q.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},q.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(q.prototype,$),q.empty=new q(!0);var L=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},J={next:{configurable:!0}};function V(t){var e=[];do{e.push(W(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function W(t){var e=[];do{e.push(H(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function H(t){for(var e=function(t){if(t.eat("(")){var e=V(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}0==o.length&&t.err("No node type or group '"+e+"' found");return o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=K(t,e)}return e}function U(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function K(t,e){var n=U(t),r=n;return t.eat(",")&&(r="}"!=t.next?U(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Z(t,e){return e-t}function G(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||e(c)}}(e),n.sort(Z)}function Y(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function X(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function Q(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new nt(t[n]);return e}J.next.get=function(){return this.tokens[this.pos]},L.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},L.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(L.prototype,J);var tt=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=Q(n.attrs),this.defaultAttrs=Y(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},et={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};et.isInline.get=function(){return!this.isBlock},et.isTextblock.get=function(){return this.isBlock&&this.inlineContent},et.isLeaf.get=function(){return this.contentMatch==q.empty},et.isAtom.get=function(){return this.isLeaf||this.spec.atom},tt.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},tt.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},tt.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:X(this.attrs,t)},tt.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new j(this,this.computeAttrs(t),c.from(e),f.setFrom(n))},tt.prototype.createChecked=function(t,e,n){if(e=c.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new j(this,this.computeAttrs(t),e,f.setFrom(n))},tt.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=c.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(c.empty,!0);return o?new j(this,t,e.append(o),f.setFrom(n)):null},tt.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},tt.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},tt.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},tt.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:f.empty:t},tt.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new tt(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(tt.prototype,et);var nt=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},rt={isRequired:{configurable:!0}};rt.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(nt.prototype,rt);var ot=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=Q(r.attrs),this.rank=e,this.excluded=null;var o=Y(this.attrs);this.instance=o&&new f(this,o)};ot.prototype.create=function(t){return!t&&this.instance?this.instance:new f(this,X(this.attrs,t))},ot.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new ot(t,r++,e,o)})),n},ot.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},ot.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},ot.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var it=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=o.from(t.nodes),this.spec.marks=o.from(t.marks),this.nodes=tt.compile(this.spec.nodes,this),this.marks=ot.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var i=this.nodes[r],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=q.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?st(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var c in this.marks){var u=this.marks[c],h=u.spec.excludes;u.excluded=null==h?[u]:""==h?[]:st(this,h.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function st(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}it.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof tt))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},it.prototype.text=function(t,e){var n=this.nodes.text;return new P(n,n.defaultAttrs,t,f.setFrom(e))},it.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},it.prototype.nodeFromJSON=function(t){return j.fromJSON(this,t)},it.prototype.markFromJSON=function(t){return f.fromJSON(this,t)},it.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var at=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};at.prototype.parse=function(t,e){void 0===e&&(e={});var n=new ft(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},at.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new ft(this,e,!0);return n.addAll(t,null,e.from,e.to),m.maxOpen(n.finish())},at.prototype.matchTag=function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(mt(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},at.prototype.matchStyle=function(t,e,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var s=i.getAttrs(e);if(!1===s)continue;i.attrs=s}return i}}},at.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=vt(t)),t.mark=e}))};for(var o in t.marks)r(o);var i;for(var s in t.nodes)i=void 0,(i=t.nodes[s].spec.parseDOM)&&i.forEach((function(t){n(t=vt(t)),t.node=s}));return e},at.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new at(t,at.schemaRules(t)))};var ct={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ut={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ht={ol:!0,ul:!0};function lt(t){return(t?1:0)|("full"===t?2:0)}var pt=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=f.none,this.pendingMarks=r,this.stashMarks=[]};pt.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(c.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},pt.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=c.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(c.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},pt.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},pt.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):yt(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var ft=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=lt(e.preserveWhitespace)|(n?4:0);r=o?new pt(o.type,o.attrs,f.none,f.none,!0,e.topMatch||o.type.contentMatch,i):new pt(n?null:t.schema.topNodeType,null,f.none,f.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},dt={top:{configurable:!0},currentPos:{configurable:!0}};function mt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function vt(t){var e={};for(var n in t)e[n]=t[n];return e}function yt(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[];return function t(n){i.push(n);for(var r=0;r<n.edgeCount;r++){var o=n.edge(r),s=o.type,a=o.next;if(s==e)return!0;if(i.indexOf(a)<0&&t(a))return!0}}(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}dt.top.get=function(){return this.nodes[this.open]},ft.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},ft.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(2&n.options||(n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},ft.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();ht.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&ht.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(o?o.ignore:ut.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var i,s=this.top,a=this.needsBlock;if(ct.hasOwnProperty(r))i=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),i&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,o,!1===o.consuming?n:null)},ft.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},ft.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},ft.prototype.readStyles=function(t){var e=f.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(t[n],t[n+1],this,r);if(!o)continue t;if(o.ignore)return null;if(e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;r=o}return e},ft.prototype.addElementByRule=function(t,e,n){var r,o,i,s=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):r=this.enter(o,e.attrs,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=e.contentElement;"string"==typeof c?c=t.querySelector(c):"function"==typeof c&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,r)}r&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},ft.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&ct.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},ft.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},ft.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},ft.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},ft.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?-5&o.options:lt(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new pt(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},ft.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},ft.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},ft.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},dt.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},ft.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},ft.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},ft.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},ft.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},ft.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1);return function t(s,a){for(;s>=0;s--){var c=n[s];if(""==c){if(s==n.length-1||0==s)continue;for(;a>=i;a--)if(t(s-1,a))return!0;return!1}var u=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;a--}return!0}(n.length-1,this.open)},ft.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},ft.prototype.addPendingMark=function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},ft.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(ft.prototype,dt);var gt=function(t,e){this.nodes=t||{},this.marks=e||{}};function kt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function bt(t){return t.document||window.document}gt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=bt(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<t.marks.length;){var c=t.marks[s++],u=r.serializeMark(c,t.isInline,e);u&&(i.push(c,o),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(r.serializeNode(t,e))})),n},gt.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=gt.renderSpec(bt(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},gt.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},gt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&gt.renderSpec(bt(n),r(t,e))},gt.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var s=null,a=n?t.createElementNS(n,r):t.createElement(r),c=e[1],u=1;if(c&&"object"==i(c)&&null==c.nodeType&&!Array.isArray(c))for(var h in u=2,c)if(null!=c[h]){var l=h.indexOf(" ");l>0?a.setAttributeNS(h.slice(0,l),h.slice(l+1),c[h]):a.setAttribute(h,c[h])}for(var p=u;p<e.length;p++){var f=e[p];if(0===f){if(p<e.length-1||p>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}var d=gt.renderSpec(t,f,n),m=d.dom,v=d.contentDOM;if(a.appendChild(m),v){if(s)throw new RangeError("Multiple content holes");s=v}}return{dom:a,contentDOM:s}},gt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new gt(this.nodesFromSchema(t),this.marksFromSchema(t)))},gt.nodesFromSchema=function(t){var e=kt(t.nodes);return e.text||(e.text=function(t){return t.text}),e},gt.marksFromSchema=function(t){return kt(t.marks)}},216:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},263:function(t,e,n){"use strict";n.r(e),n.d(e,"autoJoin",(function(){return N})),n.d(e,"baseKeymap",(function(){return F})),n.d(e,"chainCommands",(function(){return A})),n.d(e,"createParagraphNear",(function(){return b})),n.d(e,"deleteSelection",(function(){return s})),n.d(e,"exitCode",(function(){return k})),n.d(e,"joinBackward",(function(){return a})),n.d(e,"joinDown",(function(){return m})),n.d(e,"joinForward",(function(){return l})),n.d(e,"joinUp",(function(){return d})),n.d(e,"lift",(function(){return v})),n.d(e,"liftEmptyBlock",(function(){return w})),n.d(e,"macBaseKeymap",(function(){return D})),n.d(e,"newlineInCode",(function(){return y})),n.d(e,"pcBaseKeymap",(function(){return I})),n.d(e,"selectAll",(function(){return O})),n.d(e,"selectNodeBackward",(function(){return u})),n.d(e,"selectNodeForward",(function(){return p})),n.d(e,"selectParentNode",(function(){return C})),n.d(e,"setBlockType",(function(){return T})),n.d(e,"splitBlock",(function(){return x})),n.d(e,"splitBlockKeepMarks",(function(){return S})),n.d(e,"toggleMark",(function(){return E})),n.d(e,"wrapIn",(function(){return _}));var r=n(78),o=n(21),i=n(41);function s(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function a(t,e,n){var o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("backward",t):o.parentOffset>0))return!1;var s=h(o);if(!s){var a=o.blockRange(),u=a&&Object(r.j)(a);return null!=u&&(e&&e(t.tr.lift(a,u).scrollIntoView()),!0)}var l=s.nodeBefore;if(!l.type.spec.isolating&&M(t,s,e))return!0;if(0==o.parent.content.size&&(c(l,"end")||i.NodeSelection.isSelectable(l))){if(e){var p=t.tr.deleteRange(o.before(),o.after());p.setSelection(c(l,"end")?i.Selection.findFrom(p.doc.resolve(p.mapping.map(s.pos,-1)),-1):i.NodeSelection.create(p.doc,s.pos-l.nodeSize)),e(p.scrollIntoView())}return!0}return!(!l.isAtom||s.depth!=o.depth-1)&&(e&&e(t.tr.delete(s.pos-l.nodeSize,s.pos).scrollIntoView()),!0)}function c(t,e){for(;t;t="start"==e?t.firstChild:t.lastChild)if(t.isTextblock)return!0;return!1}function u(t,e,n){var r=t.selection,o=r.$head,s=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):o.parentOffset>0)return!1;s=h(o)}var a=s&&s.nodeBefore;return!(!a||!i.NodeSelection.isSelectable(a))&&(e&&e(t.tr.setSelection(i.NodeSelection.create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)}function h(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function l(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;var o=f(r);if(!o)return!1;var s=o.nodeAfter;if(M(t,o,e))return!0;if(0==r.parent.content.size&&(c(s,"start")||i.NodeSelection.isSelectable(s))){if(e){var a=t.tr.deleteRange(r.before(),r.after());a.setSelection(c(s,"start")?i.Selection.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):i.NodeSelection.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}return!(!s.isAtom||o.depth!=r.depth-1)&&(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0)}function p(t,e,n){var r=t.selection,o=r.$head,s=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size)return!1;s=f(o)}var a=s&&s.nodeAfter;return!(!a||!i.NodeSelection.isSelectable(a))&&(e&&e(t.tr.setSelection(i.NodeSelection.create(t.doc,s.pos)).scrollIntoView()),!0)}function f(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function d(t,e){var n,o=t.selection,s=o instanceof i.NodeSelection;if(s){if(o.node.isTextblock||!Object(r.e)(t.doc,o.from))return!1;n=o.from}else if(null==(n=Object(r.i)(t.doc,o.from,-1)))return!1;if(e){var a=t.tr.join(n);s&&a.setSelection(i.NodeSelection.create(a.doc,n-t.doc.resolve(n).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0}function m(t,e){var n,o=t.selection;if(o instanceof i.NodeSelection){if(o.node.isTextblock||!Object(r.e)(t.doc,o.to))return!1;n=o.to}else if(null==(n=Object(r.i)(t.doc,o.to,1)))return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0}function v(t,e){var n=t.selection,o=n.$from,i=n.$to,s=o.blockRange(i),a=s&&Object(r.j)(s);return null!=a&&(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}function y(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}function g(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function k(t,e){var n=t.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var s=r.node(-1),a=r.indexAfter(-1),c=g(s.contentMatchAt(a));if(!s.canReplaceWith(a,a,c))return!1;if(e){var u=r.after(),h=t.tr.replaceWith(u,u,c.createAndFill());h.setSelection(i.Selection.near(h.doc.resolve(u),1)),e(h.scrollIntoView())}return!0}function b(t,e){var n=t.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var s=g(r.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,c=t.tr.insert(a,s.createAndFill());c.setSelection(i.TextSelection.create(c.doc,a+1)),e(c.scrollIntoView())}return!0}function w(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var o=n.before();if(Object(r.f)(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}var i=n.blockRange(),s=i&&Object(r.j)(i);return null!=s&&(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)}function x(t,e){var n=t.selection,s=n.$from,a=n.$to;if(t.selection instanceof i.NodeSelection&&t.selection.node.isBlock)return!(!s.parentOffset||!Object(r.f)(t.doc,s.pos))&&(e&&e(t.tr.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;if(e){var c=a.parentOffset==a.parent.content.size,u=t.tr;t.selection instanceof i.TextSelection&&u.deleteSelection();var h=0==s.depth?null:g(s.node(-1).contentMatchAt(s.indexAfter(-1))),l=c&&h?[{type:h}]:null,p=Object(r.f)(u.doc,u.mapping.map(s.pos),1,l);l||p||!Object(r.f)(u.doc,u.mapping.map(s.pos),1,h&&[{type:h}])||(l=[{type:h}],p=!0),p&&(u.split(u.mapping.map(s.pos),1,l),c||s.parentOffset||s.parent.type==h||!s.node(-1).canReplace(s.index(-1),s.indexAfter(-1),o.Fragment.from([h.create(),s.parent]))||u.setNodeMarkup(u.mapping.map(s.before()),h)),e(u.scrollIntoView())}return!0}function S(t,e){return x(t,e&&function(n){var r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();r&&n.ensureMarks(r),e(n)})}function C(t,e){var n,r=t.selection,o=r.$from,s=r.to,a=o.sharedDepth(s);return 0!=a&&(n=o.before(a),e&&e(t.tr.setSelection(i.NodeSelection.create(t.doc,n))),!0)}function O(t,e){return e&&e(t.tr.setSelection(new i.AllSelection(t.doc))),!0}function M(t,e,n){var s,a,u=e.nodeBefore,h=e.nodeAfter;if(u.type.spec.isolating||h.type.spec.isolating)return!1;if(function(t,e,n){var o=e.nodeBefore,i=e.nodeAfter,s=e.index();return!!(o&&i&&o.type.compatibleContent(i.type))&&(!o.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-o.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(s,s+1)||!i.isTextblock&&!Object(r.e)(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,o.type,o.contentMatchAt(o.childCount)).join(e.pos).scrollIntoView()),!0))}(t,e,n))return!0;var l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(s=(a=u.contentMatchAt(u.childCount)).findWrapping(h.type))&&a.matchType(s[0]||h.type).validEnd){if(n){for(var p=e.pos+h.nodeSize,f=o.Fragment.empty,d=s.length-1;d>=0;d--)f=o.Fragment.from(s[d].create(null,f));f=o.Fragment.from(u.copy(f));var m=t.tr.step(new r.b(e.pos-1,p,e.pos,p,new o.Slice(f,1,0),s.length,!0)),v=p+2*s.length;Object(r.e)(m.doc,v)&&m.join(v),n(m.scrollIntoView())}return!0}var y=i.Selection.findFrom(e,1),g=y&&y.$from.blockRange(y.$to),k=g&&Object(r.j)(g);if(null!=k&&k>=e.depth)return n&&n(t.tr.lift(g,k).scrollIntoView()),!0;if(l&&h.isTextblock&&c(u,"end")){for(var b=u,w=[];w.push(b),!b.isTextblock;)b=b.lastChild;if(b.canReplace(b.childCount,b.childCount,h.content)){if(n){for(var x=o.Fragment.empty,S=w.length-1;S>=0;S--)x=o.Fragment.from(w[S].copy(x));n(t.tr.step(new r.b(e.pos-w.length,e.pos+h.nodeSize,e.pos+1,e.pos+h.nodeSize-1,new o.Slice(x,w.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function _(t,e){return function(n,o){var i=n.selection,s=i.$from,a=i.$to,c=s.blockRange(a),u=c&&Object(r.h)(c,t,e);return!!u&&(o&&o(n.tr.wrap(c,u).scrollIntoView()),!0)}}function T(t,e){return function(n,r){var o=n.selection,i=o.from,s=o.to,a=!1;return n.doc.nodesBetween(i,s,(function(r,o){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)a=!0;else{var i=n.doc.resolve(o),s=i.index();a=i.parent.canReplaceWith(s,s+1,t)}})),!!a&&(r&&r(n.tr.setBlockType(i,s,t,e).scrollIntoView()),!0)}}function E(t,e){return function(n,r){var o=n.selection,i=o.empty,s=o.$cursor,a=o.ranges;if(i&&!s||!function(t,e,n){for(var r=function(r){var o=e[r],i=o.$from,s=o.$to,a=0==i.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(i.pos,s.pos,(function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(n)})),a)return{v:!0}},o=0;o<e.length;o++){var i=r(o);if(i)return i.v}return!1}(n.doc,a,t))return!1;if(r)if(s)t.isInSet(n.storedMarks||s.marks())?r(n.tr.removeStoredMark(t)):r(n.tr.addStoredMark(t.create(e)));else{for(var c=!1,u=n.tr,h=0;!c&&h<a.length;h++){var l=a[h],p=l.$from,f=l.$to;c=n.doc.rangeHasMark(p.pos,f.pos,t)}for(var d=0;d<a.length;d++){var m=a[d],v=m.$from,y=m.$to;if(c)u.removeMark(v.pos,y.pos,t);else{var g=v.pos,k=y.pos,b=v.nodeAfter,w=y.nodeBefore,x=b&&b.isText?/^\s*/.exec(b.text)[0].length:0,S=w&&w.isText?/\s*$/.exec(w.text)[0].length:0;g+x<k&&(g+=x,k-=S),u.addMark(g,k,t.create(e))}}r(u.scrollIntoView())}return!0}}function N(t,e){if(Array.isArray(e)){var n=e;e=function(t){return n.indexOf(t.type.name)>-1}}return function(n,o){return t(n,o&&function(t,e){return function(n){if(!n.isGeneric)return t(n);for(var o=[],i=0;i<n.mapping.maps.length;i++){for(var s=n.mapping.maps[i],a=0;a<o.length;a++)o[a]=s.map(o[a]);s.forEach((function(t,e,n,r){return o.push(n,r)}))}for(var c=[],u=0;u<o.length;u+=2)for(var h=o[u],l=o[u+1],p=n.doc.resolve(h),f=p.sharedDepth(l),d=p.node(f),m=p.indexAfter(f),v=p.after(f+1);v<=l;++m){var y=d.maybeChild(m);if(!y)break;if(m&&-1==c.indexOf(v)){var g=d.child(m-1);g.type==y.type&&e(g,y)&&c.push(v)}v+=y.nodeSize}c.sort((function(t,e){return t-e}));for(var k=c.length-1;k>=0;k--)Object(r.e)(n.doc,c[k])&&n.join(c[k]);t(n)}}(o,e))}}function A(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var z=A(s,a,u),R=A(s,l,p),I={Enter:A(y,b,w,x),"Mod-Enter":k,Backspace:z,"Mod-Backspace":z,Delete:R,"Mod-Delete":R,"Mod-a":O},D={"Ctrl-h":I.Backspace,"Alt-Backspace":I["Mod-Backspace"],"Ctrl-d":I.Delete,"Ctrl-Alt-Backspace":I["Mod-Delete"],"Alt-Delete":I["Mod-Delete"],"Alt-d":I["Mod-Delete"]};for(var j in I)D[j]=I[j];var F=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?D:I},266:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var r=n(59);function o(t){return new s((function(e){e(t)}))}function i(t){return new s((function(e,n){n(t)}))}var s=function(){function t(t){var e=this;this._state=0,this._handlers=[],this._resolve=function(t){e._setResult(1,t)},this._reject=function(t){e._setResult(2,t)},this._setResult=function(t,n){0===e._state&&(Object(r.n)(n)?n.then(e._resolve,e._reject):(e._state=t,e._value=n,e._executeHandlers()))},this._executeHandlers=function(){if(0!==e._state){var t=e._handlers.slice();e._handlers=[],t.forEach((function(t){t[0]||(1===e._state&&t[1](e._value),2===e._state&&t[2](e._value),t[0]=!0)}))}};try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}return t.prototype.then=function(e,n){var r=this;return new t((function(t,o){r._handlers.push([!1,function(n){if(e)try{t(e(n))}catch(r){o(r)}else t(n)},function(e){if(n)try{t(n(e))}catch(r){o(r)}else o(e)}]),r._executeHandlers()}))},t.prototype.catch=function(t){return this.then((function(t){return t}),t)},t.prototype.finally=function(e){var n=this;return new t((function(t,r){var o,i;return n.then((function(t){i=!1,o=t,e&&e()}),(function(t){i=!0,o=t,e&&e()})).then((function(){i?r(o):t(o)}))}))},t}()},267:function(t,e,n){"use strict";n.d(e,"f",(function(){return s})),n.d(e,"e",(function(){return a})),n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return p}));var r=n(3),o=n(84),i=n(85);n(205);function s(){var t=Object(o.a)(),e=t.crypto||t.msCrypto;if(void 0!==e&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function a(t){if(!t)return{};var e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+r}}function c(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function u(t){var e=t.message,n=t.event_id;if(e)return e;var r=c(t);return r?r.type&&r.value?r.type+": "+r.value:r.type||r.value||n||"<unknown>":n||"<unknown>"}function h(t,e,n){var r=t.exception=t.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=e||""),i.type||(i.type=n||"Error")}function l(t,e){var n=c(t);if(n){var o=n.mechanism;if(n.mechanism=Object(r.a)(Object(r.a)(Object(r.a)({},{type:"generic",handled:!0}),o),e),e&&"data"in e){var i=Object(r.a)(Object(r.a)({},o&&o.data),e.data);n.mechanism.data=i}}}function p(t){if(t&&t.__sentry_captured__)return!0;try{Object(i.a)(t,"__sentry_captured__",!0)}catch(e){}return!1}},279:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return C})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return y})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return k})),n.d(e,"j",(function(){return c})),n.d(e,"k",(function(){return g})),n.d(e,"l",(function(){return s}));var r=function(t,e,n){var r;return function(){var o=null,i=arguments,s=function(){r=null,n||t.apply(o,i)},a=n&&!r;clearTimeout(r),r=window.setTimeout(s,e),a&&t.apply(o,i)}},o=function(t){var e=t.replace("#","");return.299*parseInt(e.slice(0,2),16)+.587*parseInt(e.slice(2,4),16)+.114*parseInt(e.slice(4,6),16)>186?"#000000":"#FFFFFF"},i=function(t){var e="";if(t>=60&&t<3600){var n=Math.floor(t/60);e=n+" Min";var r=60===n?0:Math.floor(t%60);return e+(r>0?" "+r+" Sec":"")}if(t>=3600&&t<86400){var o=Math.floor(t/3600);e=o+" Hr";var i=t%3600<60||24===o?0:Math.floor(t%3600/60);return e+(i>0?" "+i+" Min":"")}if(t>=86400){var s=Math.floor(t/86400);e=s+" Day";var a=t%86400<3600||s>=364?0:Math.floor(t%86400/3600);return e+(a>0?" "+a+" Hr":"")}return Math.floor(t)+" Sec"},s=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=1024),void 0===n&&(n=!1);var r=t;return t.length>e&&(r=t.substring(0,e)),n&&(r+="..."),r},a=function(t,e){return null===t||0===t?{time:"",unit:""}:t<3600?{time:Number((t/60).toFixed(1)),unit:e.minute}:t<86400?{time:Number((t/3600).toFixed(1)),unit:e.hour}:{time:Number((t/86400).toFixed(1)),unit:e.day}};function c(t){try{var e=String(t).toLowerCase();return Boolean(JSON.parse(e))}catch(n){return!1}}function u(t){return t.slice().sort((function(t,e){return t-e}))}function h(t,e){var n,r,o,i=(r=1,(o=e)<(n=0)?n:o>r?r:o),s=(t.length-1)*i,a=Math.floor(s),c=s-a;return void 0!==t[a+1]?t[a]+c*(t[a+1]-t[a]):t[a]}var l=function(t,e){var n=u(t);return e.map((function(t){return h(n,t)}))};function p(){return p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p.apply(this,arguments)}var f=/{{(.*?)}}/g,d=function(t){return(t||"").replace(/\b(\w)/g,(function(t){return t.toUpperCase()}))},m=function(t){var e=t.user,n=null!=e&&e.name?e.name.split(" ").shift():"";return d(n)},v=function(t){var e=t.user;if(e&&e.name){var n=e.name.split(" ").length>1?e.name.split(" ").pop():"";return d(n)}return""},y=function(t){var e,n=t.conversation,r=t.contact,o=n.meta,i=o.assignee,s=o.sender,a=n.id,c=n.custom_attributes,u=void 0===c?{}:c,h=(r||{}).custom_attributes;return p({},{"contact.name":d((null==s?void 0:s.name)||""),"contact.first_name":m({user:s}),"contact.last_name":v({user:s}),"contact.email":null==s?void 0:s.email,"contact.phone":null==s?void 0:s.phone_number,"contact.id":null==s?void 0:s.id,"conversation.id":a,"agent.name":d((null==i?void 0:i.name)||""),"agent.first_name":m({user:i}),"agent.last_name":v({user:i}),"agent.email":null!=(e=null==i?void 0:i.email)?e:""},Object.entries(null!=u?u:{}).reduce((function(t,e){var n=e[0],r=e[1];return t["conversation.custom_attribute."+n]=r,t}),{}),Object.entries(null!=h?h:{}).reduce((function(t,e){var n=e[0],r=e[1];return t["contact.custom_attribute."+n]=r,t}),{}))},g=function(t){var e=t.message,n=t.variables;return null==e?void 0:e.replace(f,(function(t,e){return n[e.trim()]?n[e.trim().toLowerCase()]:""}))},k=function(t){var e=t.message,n=t.variables,r=e.replace(/```(?:.|\n)+?```/g,"").match(f);return r?r.map((function(t){return t.replace("{{","").replace("}}","").trim()})).filter((function(t){return void 0===n[t]})):[]},b=function(t,e,n){var r=null,o=function(){r&&(clearTimeout(r),r=null,e())},i=function(){r&&clearTimeout(r),r=setTimeout((function(){o()}),n)};return{start:function(){r||t(),i()},stop:o}},w=function(t,e){return null===e?null:t+e-Math.floor(Date.now()/1e3)},x=function(t){var e={y:31536e3,mo:2592e3,d:86400,h:3600,m:60};if(t<60)return"1m";var n=[];return Object.keys(e).forEach((function(r){var o=Math.floor(t/e[r]);t<60&&n.length>0||2!==n.length&&o>0&&(n.push(o+r),t-=o*e[r])})),n.join(" ")},S=function(t,e){return["FRT","NRT","RT"].map((function(n){return function(t,e,n){var r=e.sla_first_response_time_threshold,o=e.sla_next_response_time_threshold,i=e.sla_resolution_time_threshold,s=e.created_at,a=n.first_reply_created_at,c=n.waiting_since,u=n.status,h={FRT:{threshold:w(s,r),condition:null!==r&&(!a||0===a)},NRT:{threshold:w(c,o),condition:null!==o&&!!a&&!!c},RT:{threshold:w(s,i),condition:"open"===u&&null!==i}}[t];return h?p({},h,{type:t}):null}(n,t,e)})).filter((function(t){return!!t&&t.condition})).map((function(t){return p({},t,{icon:t.threshold<=0?"flame":"alarm",isSlaMissed:t.threshold<=0})}))},C=function(t){var e=t.appliedSla,n=t.chat;if(!e||!n)return{type:"",threshold:"",icon:"",isSlaMissed:!1};var r=function(t){return t.sort((function(t,e){return Math.abs(t.threshold)-Math.abs(e.threshold)})),t[0]}(S(e,n));return r?{type:null==r?void 0:r.type,threshold:x(r.threshold<=0?-r.threshold:r.threshold),icon:r.icon,isSlaMissed:r.isSlaMissed}:{type:"",threshold:"",icon:"",isSlaMissed:!1}}},3:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"f",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return u}));var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var i=function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function a(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}},300:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return h}));var r=n(3),o=n(59),i=n(147),s=n(266),a=n(84),c=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}return t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=Object(r.e)(e._breadcrumbs),n._tags=Object(r.a)({},e._tags),n._extra=Object(r.a)({},e._extra),n._contexts=Object(r.a)({},e._contexts),n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=Object(r.e)(e._eventProcessors),n._requestSession=e._requestSession),n},t.prototype.addScopeListener=function(t){this._scopeListeners.push(t)},t.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},t.prototype.setUser=function(t){return this._user=t||{},this._session&&this._session.update({user:t}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.getRequestSession=function(){return this._requestSession},t.prototype.setRequestSession=function(t){return this._requestSession=t,this},t.prototype.setTags=function(t){return this._tags=Object(r.a)(Object(r.a)({},this._tags),t),this._notifyScopeListeners(),this},t.prototype.setTag=function(t,e){var n;return this._tags=Object(r.a)(Object(r.a)({},this._tags),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(t){return this._extra=Object(r.a)(Object(r.a)({},this._extra),t),this._notifyScopeListeners(),this},t.prototype.setExtra=function(t,e){var n;return this._extra=Object(r.a)(Object(r.a)({},this._extra),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(t){return this._fingerprint=t,this._notifyScopeListeners(),this},t.prototype.setLevel=function(t){return this._level=t,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(t){return this._transactionName=t,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(t){return this.setTransactionName(t)},t.prototype.setContext=function(t,e){var n;return null===e?delete this._contexts[t]:this._contexts=Object(r.a)(Object(r.a)({},this._contexts),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var t=this.getSpan();return t&&t.transaction},t.prototype.setSession=function(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(e){if(!e)return this;if("function"===typeof e){var n=e(this);return n instanceof t?n:this}return e instanceof t?(this._tags=Object(r.a)(Object(r.a)({},this._tags),e._tags),this._extra=Object(r.a)(Object(r.a)({},this._extra),e._extra),this._contexts=Object(r.a)(Object(r.a)({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):Object(o.i)(e)&&(this._tags=Object(r.a)(Object(r.a)({},this._tags),e.tags),this._extra=Object(r.a)(Object(r.a)({},this._extra),e.extra),this._contexts=Object(r.a)(Object(r.a)({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(t,e){var n="number"===typeof e?Math.min(e,100):100;if(n<=0)return this;var o=Object(r.a)({timestamp:Object(i.b)()},t);return this._breadcrumbs=Object(r.e)(this._breadcrumbs,[o]).slice(-n),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(t,e){if(this._extra&&Object.keys(this._extra).length&&(t.extra=Object(r.a)(Object(r.a)({},this._extra),t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=Object(r.a)(Object(r.a)({},this._tags),t.tags)),this._user&&Object.keys(this._user).length&&(t.user=Object(r.a)(Object(r.a)({},this._user),t.user)),this._contexts&&Object.keys(this._contexts).length&&(t.contexts=Object(r.a)(Object(r.a)({},this._contexts),t.contexts)),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts=Object(r.a)({trace:this._span.getTraceContext()},t.contexts);var n=this._span.transaction&&this._span.transaction.name;n&&(t.tags=Object(r.a)({transaction:n},t.tags))}return this._applyFingerprint(t),t.breadcrumbs=Object(r.e)(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,t.sdkProcessingMetadata=this._sdkProcessingMetadata,this._notifyEventProcessors(Object(r.e)(u(),this._eventProcessors),t,e)},t.prototype.setSDKProcessingMetadata=function(t){return this._sdkProcessingMetadata=Object(r.a)(Object(r.a)({},this._sdkProcessingMetadata),t),this},t.prototype._notifyEventProcessors=function(t,e,n,i){var a=this;return void 0===i&&(i=0),new s.a((function(s,c){var u=t[i];if(null===e||"function"!==typeof u)s(e);else{var h=u(Object(r.a)({},e),n);Object(o.n)(h)?h.then((function(e){return a._notifyEventProcessors(t,e,n,i+1).then(s)})).then(null,c):a._notifyEventProcessors(t,h,n,i+1).then(s).then(null,c)}}))},t.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(e){e(t)})),this._notifyingListeners=!1)},t.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},t}();function u(){return Object(a.b)("globalEventProcessors",(function(){return[]}))}function h(t){u().push(t)}},327:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},339:function(t,e,n){"use strict";n.r(e),n.d(e,"Decoration",(function(){return Ne})),n.d(e,"DecorationSet",(function(){return Ie})),n.d(e,"EditorView",(function(){return We})),n.d(e,"__endComposition",(function(){return be})),n.d(e,"__parseFromClipboard",(function(){return Jt})),n.d(e,"__serializeForClipboard",(function(){return Lt}));var r=n(41),o=n(21),i=n(78),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var h=s.ie=!!(c||u||a);s.ie_version=c?document.documentMode||6:u?+u[1]:a?+a[1]:null,s.gecko=!h&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var l=!h&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!l,s.chrome_version=l&&+l[1],s.safari=!h&&/Apple Computer/.test(navigator.vendor),s.ios=s.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),s.android=/Android \d/.test(navigator.userAgent),s.webkit="webkitFontSmoothing"in document.documentElement.style,s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var p=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},f=function(t){var e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e},d=null,m=function(t,e,n){var r=d||(d=document.createRange());return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},v=function(t,e,n,r){return n&&(g(t,e,n,r,-1)||g(t,e,n,r,1))},y=/^(img|br|input|textarea|hr)$/i;function g(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:k(t))){var i=t.parentNode;if(1!=i.nodeType||b(t)||y.test(t.nodeName)||"false"==t.contentEditable)return!1;e=p(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?k(t):0}}}function k(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function b(t){for(var e,n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var w=function(t){var e=t.isCollapsed;return e&&s.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function x(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function S(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function C(t,e){return"number"==typeof t?t:t[e]}function O(t){var e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function M(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,s=n||t.dom;s;s=f(s))if(1==s.nodeType){var a=s==i.body||1!=s.nodeType,c=a?S(i):O(s),u=0,h=0;if(e.top<c.top+C(r,"top")?h=-(c.top-e.top+C(o,"top")):e.bottom>c.bottom-C(r,"bottom")&&(h=e.bottom-c.bottom+C(o,"bottom")),e.left<c.left+C(r,"left")?u=-(c.left-e.left+C(o,"left")):e.right>c.right-C(r,"right")&&(u=e.right-c.right+C(o,"right")),u||h)if(a)i.defaultView.scrollBy(u,h);else{var l=s.scrollLeft,p=s.scrollTop;h&&(s.scrollTop+=h),u&&(s.scrollLeft+=u);var d=s.scrollLeft-l,m=s.scrollTop-p;e={left:e.left-d,top:e.top-m,right:e.right-d,bottom:e.bottom-m}}if(a)break}}function _(t){for(var e=[],n=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=n);t=f(t));return e}function T(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=s&&(o.scrollLeft=s)}}var E=null;function N(t,e){for(var n,r,o=2e8,i=0,s=e.top,a=e.top,c=t.firstChild,u=0;c;c=c.nextSibling,u++){var h=void 0;if(1==c.nodeType)h=c.getClientRects();else{if(3!=c.nodeType)continue;h=m(c).getClientRects()}for(var l=0;l<h.length;l++){var p=h[l];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);var f=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(f<o){n=c,o=f,r=f&&3==n.nodeType?{left:p.right<e.left?p.right:p.left,top:e.top}:e,1==c.nodeType&&f&&(i=u+(e.left>=(p.left+p.right)/2?1:0));continue}}!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(i=u+1)}}return n&&3==n.nodeType?function(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=I(r,1);if(i.top!=i.bottom&&A(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:t,offset:i}:N(n,r)}function A(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function z(t,e,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var s=t.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var u=a[c];if(A(e,u))return z(s,e,u)}if((i=(i+1)%r)==o)break}return t}function R(t,e){var n,r,o,i,a=t.root;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(e.left,e.top);c&&(o=(n=c).offsetNode,i=n.offset)}catch(v){}if(!o&&a.caretRangeFromPoint){var u=a.caretRangeFromPoint(e.left,e.top);u&&(o=(r=u).startContainer,i=r.startOffset)}var h,l=a.elementFromPoint(e.left,e.top+1);if(!l||!t.dom.contains(1!=l.nodeType?l.parentNode:l)){var p=t.dom.getBoundingClientRect();if(!A(e,p))return null;if(!(l=z(t.dom,e,p)))return null}if(s.safari&&l.draggable&&(o=i=null),l=function(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(l,e),o){if(s.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length))<o.childNodes.length){var f,d=o.childNodes[i];"IMG"==d.nodeName&&(f=d.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}o==t.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&e.top>o.lastChild.getBoundingClientRect().bottom?h=t.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(h=function(t,e,n,r){for(var o=-1,i=e;i!=t.dom;){var s=t.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n)}(t,o,i,e))}null==h&&(h=function(t,e,n){var r=N(e,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(o,i,s)}(t,l,e));var m=t.docView.nearestDesc(l,!0);return{pos:h,inside:m?m.posAtStart-m.border:-1}}function I(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}var D=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function j(t,e,n){var r=t.docView.domFromPos(e,n<0?-1:1),o=r.node,i=r.offset,a=s.webkit||s.gecko;if(3==o.nodeType){if(!a||!D.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var c=i,u=i,h=n<0?1:-1;return n<0&&!i?(u++,h=-1):n>=0&&i==o.nodeValue.length?(c--,h=1):n<0?c--:u++,F(I(m(o,c,u),h),h<0)}var l=I(m(o,i,i),n);if(s.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var p=I(m(o,i-1,i-1),-1);if(p.top==l.top){var f=I(m(o,i,i+1),-1);if(f.top!=l.top)return F(f,f.left<p.left)}}return l}if(!t.state.doc.resolve(e).parent.inlineContent){if(i&&(n<0||i==k(o))){var d=o.childNodes[i-1];if(1==d.nodeType)return P(d.getBoundingClientRect(),!1)}if(i<k(o)){var v=o.childNodes[i];if(1==v.nodeType)return P(v.getBoundingClientRect(),!0)}return P(o.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==k(o))){var y=o.childNodes[i-1],g=3==y.nodeType?m(y,k(y)-(a?0:1)):1!=y.nodeType||"BR"==y.nodeName&&y.nextSibling?null:y;if(g)return F(I(g,1),!1)}if(i<k(o)){var b=o.childNodes[i],w=3==b.nodeType?m(b,0,a?0:1):1==b.nodeType?b:null;if(w)return F(I(w,-1),!0)}return F(I(3==o.nodeType?m(o):o,-n),n>=0)}function F(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function P(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function B(t,e,n){var r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}var q=/[\u0590-\u08ac]/;var $=null,L=null,J=!1;function V(t,e,n){return $==e&&L==n?J:($=e,L=n,J="up"==n||"down"==n?function(t,e,n){var r=e.selection,o="up"==n?r.$from:r.$to;return B(t,e,(function(){for(var e=t.docView.domFromPos(o.pos,"up"==n?-1:1).node;;){var r=t.docView.nearestDesc(e,!0);if(!r)break;if(r.node.isBlock){e=r.dom;break}e=r.dom.parentNode}for(var i=j(t,o.pos,1),s=e.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=m(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var u=a[c];if(u.bottom>u.top&&("up"==n?u.bottom<i.top+1:u.top>i.bottom-1))return!1}}return!0}))}(t,e,n):function(t,e,n){var r=e.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=getSelection();return q.test(r.parent.textContent)&&a.modify?B(t,e,(function(){var e=a.getRangeAt(0),o=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var c=!(r.depth?t.docView.domAfterPos(r.before()):t.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||o==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(e),null!=s&&(a.caretBidiLevel=s),c})):"left"==n||"backward"==n?i:s}(t,e,n))}var W=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},H={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};W.prototype.matchesWidget=function(){return!1},W.prototype.matchesMark=function(){return!1},W.prototype.matchesNode=function(){return!1},W.prototype.matchesHack=function(){return!1},H.beforePosition.get=function(){return!1},W.prototype.parseRule=function(){return null},W.prototype.stopEvent=function(){return!1},H.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},H.border.get=function(){return 0},W.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},W.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return n;n+=r.size}},H.posBefore.get=function(){return this.parent.posBeforeChild(this)},H.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},H.posAfter.get=function(){return this.posBefore+this.size},H.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},W.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,o;if(t==this.contentDOM)r=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(t==this.contentDOM)i=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(t==this.dom&&this.contentDOM)a=e>p(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&e==t.childNodes.length)for(var u=t;;u=u.parentNode){if(u==this.dom){a=!0;break}if(u.parentNode.lastChild!=u)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},W.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==t.nodeType?t:t.parentNode):o.nodeDOM==t))return o;n=!1}}},W.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},W.prototype.posFromDOM=function(t,e,n){for(var r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(t,e,n)}return-1},W.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],o=n+r.size;if(n==t&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<o)return r.descAt(t-n-r.border);n=o}},W.prototype.domFromPos=function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,o=!0;;r++,o=!1){for(;r<this.children.length&&(this.children[r].beforePosition||this.children[r].dom.parentNode!=this.contentDOM);)n+=this.children[r++].size;var i=r==this.children.length?null:this.children[r];if(n==t&&(0==e||!i||!i.size||i.border||e<0&&o)||i&&i.domAtom&&t<n+i.size)return{node:this.contentDOM,offset:i?p(i.dom):this.contentDOM.childNodes.length};if(!i)throw new Error("Invalid position "+t);var s=n+i.size;if(!i.domAtom&&(e<0&&!i.border?s>=t:s>t)&&(s>t||r+1>=this.children.length||!this.children[r+1].beforePosition))return i.domFromPos(t-n-i.border,e);n=s}},W.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==r&&t<=c){var u=i+a.border;if(t>=u&&e<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,u);t=i;for(var h=s;h>0;h--){var l=this.children[h-1];if(l.size&&l.dom.parentNode==this.contentDOM&&!l.emptyChildAt(1)){r=p(l.dom)+1;break}t-=l.size}-1==r&&(r=0)}if(r>-1&&(c>e||s==this.children.length-1)){e=c;for(var f=s+1;f<this.children.length;f++){var d=this.children[f];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=p(d.dom);break}e+=d.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:o}},W.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},W.prototype.domAfterPos=function(t){var e=this.domFromPos(t,0),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},W.prototype.setSelection=function(t,e,n,r){for(var o=Math.min(t,e),i=Math.max(t,e),a=0,c=0;a<this.children.length;a++){var u=this.children[a],h=c+u.size;if(o>c&&i<h)return u.setSelection(t-c-u.border,e-c-u.border,n,r);c=h}var l=this.domFromPos(t,t?-1:1),f=e==t?l:this.domFromPos(e,e?-1:1),d=n.getSelection(),m=!1;if((s.gecko||s.safari)&&t==e){var y=l.node,g=l.offset;if(3==y.nodeType)(m=g&&"\n"==y.nodeValue[g-1])&&g==y.nodeValue.length&&y.nextSibling&&"BR"==y.nextSibling.nodeName&&(l=f={node:y.parentNode,offset:p(y)+1});else{var k=y.childNodes[g-1];m=k&&("BR"==k.nodeName||"false"==k.contentEditable)}}if(r||m&&s.safari||!v(l.node,l.offset,d.anchorNode,d.anchorOffset)||!v(f.node,f.offset,d.focusNode,d.focusOffset)){var b=!1;if((d.extend||t==e)&&!m){d.collapse(l.node,l.offset);try{t!=e&&d.extend(f.node,f.offset),b=!0}catch(S){if(!(S instanceof DOMException))throw S}}if(!b){if(t>e){var w=l;l=f,f=w}var x=document.createRange();x.setEnd(f.node,f.offset),x.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(x)}}},W.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},H.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},W.prototype.markDirty=function(t,e){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var s=n+o.border,a=i-o.border;if(t>=s&&e<=a)return this.dirty=t==n||e==i?2:1,void(t!=s||e!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(t-s,e-s):o.dirty=3);o.dirty=3}n=i}this.dirty=2},W.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?2:1;e.dirty<n&&(e.dirty=n)}},H.domAtom.get=function(){return!1},Object.defineProperties(W.prototype,H);var U=[],K=function(t){function e(e,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,U,s,null),this.widget=n,i=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},n.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,n),e}(W),Z=function(t){function e(e,n,r,o){t.call(this,e,U,n,null),this.textDOM=r,this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(W),G=function(t){function e(e,n,r,o){t.call(this,e,[],r,o),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r,i){var s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return a&&a.dom||(a=o.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,a.dom,a.contentDOM||a.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return 3!=this.dirty&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function(t,n,r){var o=e.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=ft(i,n,s,r)),t>0&&(i=ft(i,0,t,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},e}(W),Y=function(t){function e(e,n,r,o,i,s,a,c,u){t.call(this,e,n.isLeaf?U:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(c,u)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return e.create=function(t,n,r,i,s,a){var c,u,h=s.nodeViews[n.type.name],l=h&&h(n,s,(function(){return u?u.parent?u.parent.posBeforeChild(u):void 0:a}),r,i),p=l&&l.dom,f=l&&l.contentDOM;if(n.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(n.text);else p||(p=(c=o.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,f=c.contentDOM);f||n.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),n.type.spec.draggable&&(p.draggable=!0));var d=p;return p=ct(p,r,n),l?u=new et(t,n,r,i,p,f,d,l,s,a+1):n.isText?new Q(t,n,r,i,p,d,s):new e(t,n,r,i,p,f,d,s,a+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?o.Fragment.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return 0==this.dirty&&t.eq(this.node)&&ut(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,r=this.node.inlineContent,i=e,a=r&&t.composing&&this.localCompositionNode(t,e),c=new lt(this,a&&a.node);!function(t,e,n,r){var o=e.locals(t),i=0;if(0==o.length){for(var s=0;s<t.childCount;s++){var a=t.child(s);r(a,o,e.forChild(i,a),s),i+=a.nodeSize}return}for(var c=0,u=[],h=null,l=0;;){if(c<o.length&&o[c].to==i){for(var p=o[c++],f=void 0;c<o.length&&o[c].to==i;)(f||(f=[p])).push(o[c++]);if(f){f.sort(pt);for(var d=0;d<f.length;d++)n(f[d],l,!!h)}else n(p,l,!!h)}var m=void 0,v=void 0;if(h)v=-1,m=h,h=null;else{if(!(l<t.childCount))break;v=l,m=t.child(l++)}for(var y=0;y<u.length;y++)u[y].to<=i&&u.splice(y--,1);for(;c<o.length&&o[c].from<=i&&o[c].to>i;)u.push(o[c++]);var g=i+m.nodeSize;if(m.isText){var k=g;c<o.length&&o[c].from<k&&(k=o[c].from);for(var b=0;b<u.length;b++)u[b].to<k&&(k=u[b].to);k<g&&(h=m.cut(k-i),m=m.cut(0,k-i),g=k,v=-1)}r(m,u.length?m.isInline&&!m.isLeaf?u.filter((function(t){return!t.inline})):u.slice():U,e.forChild(i,m),v),i=g}}(this.node,this.innerDeco,(function(e,s,a){e.spec.marks?c.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!a&&c.syncToMarks(s==n.node.childCount?o.Mark.none:n.node.child(s).marks,r,t),c.placeWidget(e,t,i)}),(function(e,n,o,s){c.syncToMarks(e.marks,r,t),c.findNodeMatch(e,n,o,s)||c.updateNextNode(e,n,o,t,s)||c.addNode(e,n,o,t,i),i+=e.nodeSize})),c.syncToMarks(U,r,t),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||2==this.dirty)&&(a&&this.protectLocalComposition(t,a),nt(this.contentDOM,this.children,t),s.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))},e.prototype.localCompositionNode=function(t,e){var n=t.state.selection,o=n.from,i=n.to;if(!(!(t.state.selection instanceof r.TextSelection)||o<e||i>e+this.node.content.size)){var s=t.root.getSelection(),a=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=k(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue,u=function(t,e,n,r){for(var o=0,i=0;o<t.childCount&&i<=r;){var s=t.child(o++),a=i;if(i+=s.nodeSize,s.isText){for(var c=s.text;o<t.childCount;){var u=t.child(o++);if(i+=u.nodeSize,!u.isText)break;c+=u.text}if(i>=n){var h=c.lastIndexOf(e,r-a);if(h>=0&&h+e.length+a>=n)return a+h}}}return-1}(this.node.content,c,o-e,i-e);return u<0?null:{node:a,pos:u,text:c}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,r=e.pos,o=e.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new Z(this,i,n,o);t.compositionNodes.push(s),this.children=ft(this.children,r,r+o.length,t,s)}},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)},e.prototype.updateInner=function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!ut(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=st(this.dom,this.nodeDOM,it(this.outerDeco,this.node,e),it(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(e.prototype,n),e}(W);function X(t,e,n,r,o){return ct(r,e,t),new Y(null,t,e,n,r,r,r,o,0)}var Q=function(t){function e(e,n,r,o,i,s,a){t.call(this,e,n,r,o,i,null,s,a)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){for(var t=this.nodeDOM.parentNode;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=0,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,r){var o=this.node.cut(t,n),i=document.createTextNode(o.text);return new e(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},n.domAtom.get=function(){return!1},Object.defineProperties(e.prototype,n),e}(Y),tt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return 0==this.dirty},n.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,n),e}(W),et=function(t){function e(e,n,r,o,i,s,a,c,u,h){t.call(this,e,n,r,o,i,s,a,u,h),this.spec=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,o)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r,o)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(Y);function nt(t,e,n){for(var r=t.firstChild,o=!1,i=0;i<e.length;i++){var s=e[i],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=ht(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(s instanceof G){var c=r?r.previousSibling:t.lastChild;nt(s.contentDOM,s.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=ht(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}function rt(t){t&&(this.nodeName=t)}rt.prototype=Object.create(null);var ot=[new rt];function it(t,e,n){if(0==t.length)return ot;for(var r=n?ot[0]:new rt,o=[r],i=0;i<t.length;i++){var s=t[i].type.attrs;if(s)for(var a in s.nodeName&&o.push(r=new rt(s.nodeName)),s){var c=s[a];null!=c&&(n&&1==o.length&&o.push(r=new rt(e.isInline?"span":"div")),"class"==a?r.class=(r.class?r.class+" ":"")+c:"style"==a?r.style=(r.style?r.style+";":"")+c:"nodeName"!=a&&(r[a]=c))}}return o}function st(t,e,n,r){if(n==ot&&r==ot)return e;for(var o=e,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&o!=t&&(c=o.parentNode)&&c.tagName.toLowerCase()==s.nodeName||((c=document.createElement(s.nodeName)).pmIsDeco=!0,c.appendChild(o),a=ot[0]),o=c}at(o,a||ot[0],s)}return o}function at(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" ").filter(Boolean):U,s=n.class?n.class.split(" ").filter(Boolean):U,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&t.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&t.classList.add(s[c])}if(e.style!=n.style){if(e.style)for(var u,h=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;u=h.exec(e.style);)t.style.removeProperty(u[1]);n.style&&(t.style.cssText+=n.style)}}function ct(t,e,n){return st(t,t,ot,it(e,n,1!=t.nodeType))}function ut(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function ht(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var lt=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(t,e){for(var n=t.childCount,r=e.length,o=new Map;n>0&&r>0;r--){var i=e[r-1],s=i.node;if(s){if(s!=t.child(n-1))break;--n,o.set(i,n)}}return{index:n,matched:o}}(t.node.content,t.children)};function pt(t,e){return t.type.side-e.type.side}function ft(t,e,n,r,o){for(var i=[],s=0,a=0;s<t.length;s++){var c=t[s],u=a,h=a+=c.size;u>=n||h<=e?i.push(c):(u<e&&i.push(c.slice(0,e-u,r)),o&&(i.push(o),o=null),h>n&&i.push(c.slice(n-u,c.size,r)))}return i}function dt(t,e){var n=t.root.getSelection(),o=t.state.doc;if(!n.focusNode)return null;var i=t.docView.nearestDesc(n.focusNode),s=i&&0==i.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var c,u,h=o.resolve(a);if(w(n)){for(c=h;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&r.NodeSelection.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!function(t,e,n){for(var r=0==e,o=e==k(t);r||o;){if(t==n)return!0;var i=p(t);if(!(t=t.parentNode))return!1;r=r&&0==i,o=o&&i==k(t)}}(n.focusNode,n.focusOffset,i.dom))){var l=i.posBefore;u=new r.NodeSelection(a==l?h:o.resolve(l))}}else{var f=t.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(f<0)return null;c=o.resolve(f)}u||(u=St(t,c,h,"pointer"==e||t.state.selection.head<h.pos&&!s?1:-1));return u}function mt(t){return t.editable?t.hasFocus():Ct(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function vt(t,e){var n=t.state.selection;if(wt(t,n),mt(t)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,p(r)+1):n.setEnd(r,0);n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(t);else{var o,i,a=n.anchor,c=n.head;!yt||n instanceof r.TextSelection||(n.$from.parent.inlineContent||(o=gt(t,n.from)),n.empty||n.$from.parent.inlineContent||(i=gt(t,n.to))),t.docView.setSelection(a,c,t.root,e),yt&&(o&&bt(o),i&&bt(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.hideSelectionGuard),setTimeout((function(){mt(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}lt.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},lt.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},lt.prototype.syncToMarks=function(t,e,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,t.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=G.create(this.top,t[o],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},lt.prototype.findNodeMatch=function(t,e,n,r){var o=this.top.children,i=-1;if(r>=this.preMatch.index){for(var s=this.index;s<o.length;s++)if(o[s].matchesNode(t,e,n)){i=s;break}}else for(var a=this.index,c=Math.min(o.length,a+1);a<c;a++){var u=o[a];if(u.matchesNode(t,e,n)&&!this.preMatch.matched.has(u)){i=a;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},lt.prototype.updateNextNode=function(t,e,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof Y){var a=this.preMatch.matched.get(s);if(null!=a&&a!=o)return!1;var c=s.dom;if(!(this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&3!=s.dirty&&ut(e,s.outerDeco)))&&s.update(t,e,n,r))return this.destroyBetween(this.index,i),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},lt.prototype.addNode=function(t,e,n,r,o){this.top.children.splice(this.index++,0,Y.create(this.top,t,e,n,r,o)),this.changed=!0},lt.prototype.placeWidget=function(t,e,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){var o=new K(this.top,t,e,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},lt.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof G;)t=t.children[t.children.length-1];if(!t||!(t instanceof Q)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new tt(this.top,U,e,null)),this.changed=!0}};var yt=s.safari||s.chrome&&s.chrome_version<63;function gt(t,e){var n=t.docView.domFromPos(e,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(s.safari&&i&&"false"==i.contentEditable)return kt(i);if((!i||"false"==i.contentEditable)&&(!a||"false"==a.contentEditable)){if(i)return kt(i);if(a)return kt(a)}}function kt(t){return t.contentEditable="true",s.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function bt(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function wt(t,e){if(e instanceof r.NodeSelection){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(xt(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else xt(t)}function xt(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function St(t,e,n,o){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||r.TextSelection.between(e,n,o)}function Ct(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function Ot(t,e){var n=t.selection,o=n.$anchor,i=n.$head,s=e>0?o.max(i):o.min(i),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&r.Selection.findFrom(a,e)}function Mt(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function _t(t,e,n){var o=t.state.selection;if(!(o instanceof r.TextSelection)){if(o instanceof r.NodeSelection&&o.node.isInline)return Mt(t,new r.TextSelection(e>0?o.$to:o.$from));var i=Ot(t.state,e);return!!i&&Mt(t,i)}if(!o.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var a=Ot(t.state,e);return!!(a&&a instanceof r.NodeSelection)&&Mt(t,a)}if(!(s.mac&&n.indexOf("m")>-1)){var c,u=o.$head,h=u.textOffset?null:e<0?u.nodeBefore:u.nodeAfter;if(!h||h.isText)return!1;var l=e<0?u.pos-h.nodeSize:u.pos;return!!(h.isAtom||(c=t.docView.descAt(l))&&!c.contentDOM)&&(r.NodeSelection.isSelectable(h)?Mt(t,new r.NodeSelection(e<0?t.state.doc.resolve(u.pos-h.nodeSize):u)):!!s.webkit&&Mt(t,new r.TextSelection(t.state.doc.resolve(e<0?l:l+h.nodeSize))))}}function Tt(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Et(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function Nt(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,a=!1;for(s.gecko&&1==n.nodeType&&r<Tt(n)&&Et(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(Et(c))o=n,i=--r;else{if(3!=c.nodeType)break;r=(n=c).nodeValue.length}}else{if(zt(n))break;for(var u=n.previousSibling;u&&Et(u);)o=n.parentNode,i=p(u),u=u.previousSibling;if(u)r=Tt(n=u);else{if((n=n.parentNode)==t.dom)break;r=0}}a?Rt(t,e,n,r):o&&Rt(t,e,o,i)}}function At(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var o,i,s=Tt(n);;)if(r<s){if(1!=n.nodeType)break;if(!Et(n.childNodes[r]))break;o=n,i=++r}else{if(zt(n))break;for(var a=n.nextSibling;a&&Et(a);)o=a.parentNode,i=p(a)+1,a=a.nextSibling;if(a)r=0,s=Tt(n=a);else{if((n=n.parentNode)==t.dom)break;r=s=0}}o&&Rt(t,e,o,i)}}function zt(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Rt(t,e,n,r){if(w(e)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection();var i=t.state;setTimeout((function(){t.state==i&&vt(t)}),50)}function It(t,e,n){var o=t.state.selection;if(o instanceof r.TextSelection&&!o.empty||n.indexOf("s")>-1)return!1;if(s.mac&&n.indexOf("m")>-1)return!1;var i=o.$from,a=o.$to;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var c=Ot(t.state,e);if(c&&c instanceof r.NodeSelection)return Mt(t,c)}if(!i.parent.inlineContent){var u=e<0?i:a,h=o instanceof r.AllSelection?r.Selection.near(u,e):r.Selection.findFrom(u,e);return!!h&&Mt(t,h)}return!1}function Dt(t,e){if(!(t.state.selection instanceof r.TextSelection))return!0;var n=t.state.selection,o=n.$head,i=n.$anchor,s=n.empty;if(!o.sameParent(i))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var a=!o.textOffset&&(e<0?o.nodeBefore:o.nodeAfter);if(a&&!a.isText){var c=t.state.tr;return e<0?c.delete(o.pos-a.nodeSize,o.pos):c.delete(o.pos,o.pos+a.nodeSize),t.dispatch(c),!0}return!1}function jt(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Ft(t,e){var n=e.keyCode,r=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==n||s.mac&&72==n&&"c"==r?Dt(t,-1)||Nt(t):46==n||s.mac&&68==n&&"c"==r?Dt(t,1)||At(t):13==n||27==n||(37==n?_t(t,-1,r)||Nt(t):39==n?_t(t,1,r)||At(t):38==n?It(t,-1,r)||Nt(t):40==n?function(t){if(s.safari&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;jt(t,o,!0),setTimeout((function(){return jt(t,o,!1)}),20)}}}(t)||It(t,1,r)||At(t):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Pt(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(s.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||s.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function Bt(t,e,n,i,a){if(e<0){var c=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,u=dt(t,c);if(u&&!t.state.selection.eq(u)){var h=t.state.tr.setSelection(u);"pointer"==c?h.setMeta("pointer",!0):"key"==c&&h.scrollIntoView(),t.dispatch(h)}}else{var l=t.state.doc.resolve(e),p=l.sharedDepth(n);e=l.before(p+1),n=t.state.doc.resolve(n).after(p+1);var f=t.state.selection,d=function(t,e,n){var r=t.docView.parseRange(e,n),i=r.node,a=r.fromOffset,c=r.toOffset,u=r.from,h=r.to,l=t.root.getSelection(),p=null,f=l.anchorNode;if(f&&t.dom.contains(1==f.nodeType?f:f.parentNode)&&(p=[{node:f,offset:l.anchorOffset}],w(l)||p.push({node:l.focusNode,offset:l.focusOffset})),s.chrome&&8===t.lastKeyCode)for(var d=c;d>a;d--){var m=i.childNodes[d-1],v=m.pmViewDesc;if("BR"==m.nodeName&&!v){c=d;break}if(!v||v.size)break}var y=t.state.doc,g=t.someProp("domParser")||o.DOMParser.fromSchema(t.state.schema),k=y.resolve(u),b=null,x=g.parse(i,{topNode:k.parent,topMatch:k.parent.contentMatchAt(k.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!k.parent.type.spec.code||"full",editableContent:!0,findPositions:p,ruleFromNode:Pt,context:k});if(p&&null!=p[0].pos){var S=p[0].pos,C=p[1]&&p[1].pos;null==C&&(C=S),b={anchor:S+u,head:C+u}}return{doc:x,sel:b,from:u,to:h}}(t,e,n);if(s.chrome&&t.cursorWrapper&&d.sel&&d.sel.anchor==t.cursorWrapper.deco.from){var m=t.cursorWrapper.deco.type.toDOM.nextSibling,v=m&&m.nodeValue?m.nodeValue.length:1;d.sel={anchor:d.sel.anchor+v,head:d.sel.anchor+v}}var y,g,k=t.state.doc,b=k.slice(d.from,d.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(y=t.state.selection.to,g="end"):(y=t.state.selection.from,g="start"),t.lastKeyCode=null;var S=function(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,c=s.b;if("end"==o){r-=a+Math.max(0,i-Math.min(a,c))-i}if(a<i&&t.size<e.size){c=(i-=r<=i&&r>=a?i-r:0)+(c-a),a=i}else if(c<i){a=(i-=r<=i&&r>=c?i-r:0)+(a-c),c=i}return{start:i,endA:a,endB:c}}(b.content,d.doc.content,d.from,y,g);if(!S){if(!(i&&f instanceof r.TextSelection&&!f.empty&&f.$head.sameParent(f.$anchor))||t.composing||d.sel&&d.sel.anchor!=d.sel.head){if((s.ios&&t.lastIOSEnter>Date.now()-225||s.android)&&a.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName}))&&t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))})))return void(t.lastIOSEnter=0);if(d.sel){var C=qt(t,t.state.doc,d.sel);C&&!C.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(C))}return}S={start:f.from,endA:f.to,endB:f.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&S.start==S.endB&&t.state.selection instanceof r.TextSelection&&(S.start>t.state.selection.from&&S.start<=t.state.selection.from+2?S.start=t.state.selection.from:S.endA<t.state.selection.to&&S.endA>=t.state.selection.to-2&&(S.endB+=t.state.selection.to-S.endA,S.endA=t.state.selection.to)),s.ie&&s.ie_version<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>d.from&&" \xa0"==d.doc.textBetween(S.start-d.from-1,S.start-d.from+1)&&(S.start--,S.endA--,S.endB--);var O,M=d.doc.resolveNoCache(S.start-d.from),_=d.doc.resolveNoCache(S.endB-d.from),T=M.sameParent(_)&&M.parent.inlineContent;if((s.ios&&t.lastIOSEnter>Date.now()-225&&(!T||a.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!T&&M.pos<d.doc.content.size&&(O=r.Selection.findFrom(d.doc.resolve(M.pos+1),1,!0))&&O.head==_.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>S.start&&function(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||$t(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=t.resolve($t(i,!0,!0));if(!s.parent.isTextblock||s.pos>n||$t(s,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(k,S.start,S.endA,M,_)&&t.someProp("handleKeyDown",(function(e){return e(t,x(8,"Backspace"))})))s.android&&s.chrome&&t.domObserver.suppressSelectionUpdates();else{s.chrome&&s.android&&S.toB==S.from&&(t.lastAndroidDelete=Date.now()),s.android&&!T&&M.start()!=_.start()&&0==_.parentOffset&&M.depth==_.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==S.endA&&(S.endB-=2,_=d.doc.resolveNoCache(S.endB-d.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))}))}),20));var E,N,A,z,R=S.start,I=S.endA;if(T)if(M.pos==_.pos)s.ie&&s.ie_version<=11&&0==M.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return vt(t)}),20)),E=t.state.tr.delete(R,I),N=k.resolve(S.start).marksAcross(k.resolve(S.endA));else if(S.endA==S.endB&&(z=k.resolve(S.start))&&(A=function(t,e){for(var n,r,i,s=t.firstChild.marks,a=e.firstChild.marks,c=s,u=a,h=0;h<a.length;h++)c=a[h].removeFromSet(c);for(var l=0;l<s.length;l++)u=s[l].removeFromSet(u);if(1==c.length&&0==u.length)r=c[0],n="add",i=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=c.length||1!=u.length)return null;r=u[0],n="remove",i=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var p=[],f=0;f<e.childCount;f++)p.push(i(e.child(f)));if(o.Fragment.from(p).eq(t))return{mark:r,type:n}}(M.parent.content.cut(M.parentOffset,_.parentOffset),z.parent.content.cut(z.parentOffset,S.endA-z.start()))))E=t.state.tr,"add"==A.type?E.addMark(R,I,A.mark):E.removeMark(R,I,A.mark);else if(M.parent.child(M.index()).isText&&M.index()==_.index()-(_.textOffset?0:1)){var D=M.parent.textBetween(M.parentOffset,_.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,R,I,D)})))return;E=t.state.tr.insertText(D,R,I)}if(E||(E=t.state.tr.replace(R,I,d.doc.slice(S.start-d.from,S.endB-d.from))),d.sel){var j=qt(t,E.doc,d.sel);j&&!(s.chrome&&s.android&&t.composing&&j.empty&&(S.from!=S.toB||t.lastAndroidDelete<Date.now()-100)&&(j.head==R||j.head==E.mapping.map(I)-1)||s.ie&&j.empty&&j.head==R)&&E.setSelection(j)}N&&E.ensureMarks(N),t.dispatch(E.scrollIntoView())}}}function qt(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:St(t,e.resolve(n.anchor),e.resolve(n.head))}function $t(t,e,n){for(var r=t.depth,o=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n)for(var i=t.node(r).maybeChild(t.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function Lt(t,e){for(var n=[],r=e.content,i=e.openStart,s=e.openEnd;i>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,s--;var a=r.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),r=a.content}var c=t.someProp("clipboardSerializer")||o.DOMSerializer.fromSchema(t.state.schema),u=Gt(),h=u.createElement("div");h.appendChild(c.serializeFragment(r,{document:u}));for(var l,p=h.firstChild;p&&1==p.nodeType&&(l=Kt[p.nodeName.toLowerCase()]);){for(var f=l.length-1;f>=0;f--){for(var d=u.createElement(l[f]);h.firstChild;)d.appendChild(h.firstChild);h.appendChild(d)}p=h.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n)),{dom:h,text:t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n")}}function Jt(t,e,n,r,i){var s,a,c=i.parent.type.spec.code;if(!n&&!e)return null;var u=e&&(r||c||!n);if(u){if(t.someProp("transformPastedText",(function(t){e=t(e,c||r)})),c)return new o.Slice(o.Fragment.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0);var h=t.someProp("clipboardTextParser",(function(t){return t(e,i,r)}));h?a=h:(s=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){s.appendChild(document.createElement("p")).textContent=t})))}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),s=function(t){var e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=Gt().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(t);(n=o&&Kt[o[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""));if(r.innerHTML=t,n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n);var l=s&&s.querySelector("[data-pm-slice]"),p=l&&/^(\d+) (\d+) (.*)/.exec(l.getAttribute("data-pm-slice"));if(!a){var f=t.someProp("clipboardParser")||t.someProp("domParser")||o.DOMParser.fromSchema(t.state.schema);a=f.parseSlice(s,{preserveWhitespace:!(!u&&!p),context:i})}return a=p?function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(h){return t}for(var i=t.content,s=t.openStart,a=t.openEnd,c=n.length-2;c>=0;c-=2){var u=r.nodes[n[c]];if(!u||u.hasRequiredAttrs())break;i=o.Fragment.from(u.create(n[c+1],i)),s++,a++}return new o.Slice(i,s,a)}(function(t,e,n){e<t.openStart&&(t=new o.Slice(Ut(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd));n<t.openEnd&&(t=new o.Slice(Ut(t.content,1,n,t.openEnd,0,0),t.openStart,n));return t}(a,+p[1],+p[2]),p[3]):o.Slice.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n).contentMatchAt(e.index(n)),i=void 0,s=[];if(t.forEach((function(t){if(s){var e,n=r.findWrapping(t.type);if(!n)return s=null;if(e=s.length&&i.length&&Wt(n,i,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=Ht(s[s.length-1],i.length));var o=Vt(t,n);s.push(o),r=r.matchType(o.type,o.attrs),i=n}}})),s)return{v:o.Fragment.from(s)}},r=e.depth;r>=0;r--){var i=n(r);if(i)return i.v}return t}(a.content,i),!1),t.someProp("transformPasted",(function(t){a=t(a)})),a}function Vt(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].create(null,o.Fragment.from(t));return t}function Wt(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){var s=Wt(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(o.Fragment.from(Vt(n,t,i+1))))}}function Ht(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,Ht(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(o.Fragment.empty,!0);return t.copy(n.append(r))}function Ut(t,e,n,r,i,s){var a=e<0?t.firstChild:t.lastChild,c=a.content;return i<r-1&&(c=Ut(c,e,n,r,i+1,s)),i>=n&&(c=e<0?a.contentMatchAt(0).fillBefore(c,t.childCount>1||s<=i).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(o.Fragment.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(c))}var Kt={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Zt=null;function Gt(){return Zt||(Zt=document.implementation.createHTMLDocument("title"))}var Yt={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Xt=s.ie&&s.ie_version<=11,Qt=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Qt.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},Qt.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var te=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);s.ie&&s.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Qt,Xt&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};te.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},te.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},te.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Yt),Xt&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},te.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}Xt&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},te.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},te.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},te.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},te.prototype.onSelectionChange=function(){if((!(t=this.view).editable||t.root.activeElement==t.dom)&&Ct(t)){var t;if(this.suppressingSelectionUpdates)return vt(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&v(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},te.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},te.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},te.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&Ct(this.view)&&!this.ignoreSelectionChange(e),r=-1,o=-1,i=!1,a=[];if(this.view.editable)for(var c=0;c<t.length;c++){var u=this.registerMutation(t[c],a);u&&(r=r<0?u.from:Math.min(u.from,r),o=o<0?u.to:Math.max(u.to,o),u.typeOver&&(i=!0))}if(s.gecko&&a.length>1){var h=a.filter((function(t){return"BR"==t.nodeName}));if(2==h.length){var l=h[0],p=h[1];l.parentNode&&l.parentNode.parentNode==p.parentNode?p.remove():l.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),function(t){if(ee)return;ee=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,o,i,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||vt(this.view),this.currentSelection.set(e))}},te.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(var r=0;r<t.addedNodes.length;r++)e.push(t.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};var o=t.previousSibling,i=t.nextSibling;if(s.ie&&s.ie_version<=11&&t.addedNodes.length)for(var a=0;a<t.addedNodes.length;a++){var c=t.addedNodes[a],u=c.previousSibling,h=c.nextSibling;(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(o=u),(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(i=h)}var l=o&&o.parentNode==t.target?p(o)+1:0,f=n.localPosFromDOM(t.target,l,-1),d=i&&i.parentNode==t.target?p(i):t.target.childNodes.length;return{from:f,to:n.localPosFromDOM(t.target,d,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var ee=!1;var ne={},re={};function oe(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function ie(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return se(t,e)})}))}function se(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function ae(t){return{left:t.clientX,top:t.clientY}}function ce(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function ue(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function he(t,e,n,o,i){return ce(t,"handleClickOn",e,n,o)||t.someProp("handleClick",(function(n){return n(t,e,o)}))||(i?function(t,e){if(-1==e)return!1;var n,o,i=t.state.selection;i instanceof r.NodeSelection&&(n=i.node);for(var s=t.state.doc.resolve(e),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r.NodeSelection.isSelectable(c)){o=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=o&&(ue(t,r.NodeSelection.create(t.state.doc,o),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),o=n.nodeAfter;return!!(o&&o.isAtom&&r.NodeSelection.isSelectable(o))&&(ue(t,new r.NodeSelection(n),"pointer"),!0)}(t,n))}function le(t,e,n,r){return ce(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function pe(t,e,n,o){return ce(t,"handleTripleClickOn",e,n,o)||t.someProp("handleTripleClick",(function(n){return n(t,e,o)}))||function(t,e){var n=t.state.doc;if(-1==e)return!!n.inlineContent&&(ue(t,r.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var o=n.resolve(e),i=o.depth+1;i>0;i--){var s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)ue(t,r.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!r.NodeSelection.isSelectable(s))continue;ue(t,r.NodeSelection.create(n,a),"pointer")}return!0}}(t,n)}function fe(t){return be(t)}re.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!ve(t,e))if(t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!s.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(n){return n(t,e)}))||Ft(t,e)?e.preventDefault():oe(t,"key");else{var n=Date.now();t.lastIOSEnter=n,t.lastIOSEnterFallbackTimeout=setTimeout((function(){t.lastIOSEnter==n&&(t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))})),t.lastIOSEnter=0)}),200)}},re.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},re.keypress=function(t,e){if(!(ve(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||s.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof r.TextSelection)||!n.$from.sameParent(n.$to)){var o=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,o)}))||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),e.preventDefault()}}};var de=s.mac?"metaKey":"ctrlKey";ne.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=fe(t),r=Date.now(),o="singleClick";r-t.lastClick.time<500&&function(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}(e,t.lastClick)&&!e[de]&&("singleClick"==t.lastClick.type?o="doubleClick":"doubleClick"==t.lastClick.type&&(o="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:o};var i=t.posAtCoords(ae(e));i&&("singleClick"==o?(t.mouseDown&&t.mouseDown.done(),t.mouseDown=new me(t,i,e,n)):("doubleClick"==o?le:pe)(t,i.pos,i.inside,e)?e.preventDefault():oe(t,"pointer"))};var me=function(t,e,n,o){var i,a,c=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=o,this.selectNode=n[de],this.allowDefault=n.shiftKey,e.inside>-1)i=t.state.doc.nodeAt(e.inside),a=e.inside;else{var u=t.state.doc.resolve(e.pos);i=u.parent,a=u.depth?u.before():0}this.mightDrag=null;var h=o?null:n.target,l=h?t.docView.nearestDesc(h,!0):null;this.target=l?l.dom:null,(i.type.spec.draggable&&!1!==i.type.spec.selectable||t.state.selection instanceof r.NodeSelection&&a==t.state.selection.from)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){c.view.mouseDown==c&&c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),oe(t,"pointer")};function ve(t,e){return!!t.composing||!!(s.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}me.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},me.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(ae(t))),this.allowDefault||!e?oe(this.view,"pointer"):he(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():this.flushed||s.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||s.chrome&&!(this.view.state.selection instanceof r.TextSelection)&&(e.pos==this.view.state.selection.from||e.pos==this.view.state.selection.to)?(ue(this.view,r.Selection.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):oe(this.view,"pointer")}},me.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),oe(this.view,"pointer"),0==t.buttons&&this.done()},ne.touchdown=function(t){fe(t),oe(t,"pointer")},ne.contextmenu=function(t){return fe(t)};var ye=s.android?5e3:-1;function ge(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return be(t)}),e))}function ke(t){for(t.composing=!1;t.compositionNodes.length>0;)t.compositionNodes.pop().markParentsDirty()}function be(t,e){if(t.domObserver.forceFlush(),ke(t),e||t.docView.dirty){var n=dt(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}re.compositionstart=re.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),be(t,!0),t.markCursor=null;else if(be(t),s.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}o=a,i=-1}t.composing=!0}ge(t,ye)},re.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,ge(t,20))};var we=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function xe(t,e,n,r){var i=Jt(t,e,n,t.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",(function(e){return e(t,r,i||o.Slice.empty)})))return!0;if(!i)return!1;var s=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(i),a=s?t.state.tr.replaceSelectionWith(s,t.shiftKey):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}ne.copy=re.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var o=we?null:e.clipboardData,i=Lt(t,n.content()),s=i.dom,a=i.text;o?(e.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):function(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}(t,s),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},re.paste=function(t,e){var n=we?null:e.clipboardData;n&&xe(t,n.getData("text/plain"),n.getData("text/html"),e)?e.preventDefault():function(t,e){if(t.dom.parentNode){var n=t.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?xe(t,r.value,null,e):xe(t,r.textContent,r.innerHTML,e)}),50)}}(t,e)};var Se=function(t,e){this.slice=t,this.move=e},Ce=s.mac?"altKey":"ctrlKey";for(var Oe in ne.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var o=t.state.selection,i=o.empty?null:t.posAtCoords(ae(e));if(i&&i.pos>=o.from&&i.pos<=(o instanceof r.NodeSelection?o.to-1:o.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(r.NodeSelection.create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var s=t.docView.nearestDesc(e.target,!0);if(!s||!s.node.type.spec.draggable||s==t.docView)return;t.dispatch(t.state.tr.setSelection(r.NodeSelection.create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),c=Lt(t,a),u=c.dom,h=c.text;e.dataTransfer.clearData(),e.dataTransfer.setData(we?"Text":"text/html",u.innerHTML),e.dataTransfer.effectAllowed="copyMove",we||e.dataTransfer.setData("text/plain",h),t.dragging=new Se(a,!e[Ce])}},ne.dragend=function(t){var e=t.dragging;window.setTimeout((function(){t.dragging==e&&(t.dragging=null)}),50)},re.dragover=re.dragenter=function(t,e){return e.preventDefault()},re.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var s=t.posAtCoords(ae(e));if(s){var a=t.state.doc.resolve(s.pos);if(a){var c=n&&n.slice||Jt(t,e.dataTransfer.getData(we?"Text":"text/plain"),we?null:e.dataTransfer.getData("text/html"),!1,a),u=n&&!e[Ce];if(t.someProp("handleDrop",(function(n){return n(t,e,c||o.Slice.empty,u)})))e.preventDefault();else if(c){e.preventDefault();var h=c?Object(i.g)(t.state.doc,a.pos,c):a.pos;null==h&&(h=a.pos);var l=t.state.tr;u&&l.deleteSelection();var p=l.mapping.map(h),f=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,d=l.doc;if(f?l.replaceRangeWith(p,p,c.content.firstChild):l.replaceRange(p,p,c),!l.doc.eq(d)){var m=l.doc.resolve(p);if(f&&r.NodeSelection.isSelectable(c.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(c.content.firstChild))l.setSelection(new r.NodeSelection(m));else{var v=l.mapping.map(h);l.mapping.maps[l.mapping.maps.length-1].forEach((function(t,e,n,r){return v=r})),l.setSelection(St(t,m,l.doc.resolve(v)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}}}}}},ne.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&vt(t)}),20))},ne.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},ne.beforeinput=function(t,e){if(s.chrome&&s.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,x(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},re)ne[Oe]=re[Oe];function Me(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var _e=function(t,e){this.spec=e||Re,this.side=this.spec.side||0,this.toDOM=t};_e.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new Ne(i-n,i-n,this)},_e.prototype.valid=function(){return!0},_e.prototype.eq=function(t){return this==t||t instanceof _e&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Me(this.spec,t.spec))};var Te=function(t,e){this.spec=e||Re,this.attrs=t};Te.prototype.map=function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Ne(o,i,this)},Te.prototype.valid=function(t,e){return e.from<e.to},Te.prototype.eq=function(t){return this==t||t instanceof Te&&Me(this.attrs,t.attrs)&&Me(this.spec,t.spec)},Te.is=function(t){return t.type instanceof Te};var Ee=function(t,e){this.spec=e||Re,this.attrs=t};Ee.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Ne(o.pos-n,i.pos-n,this)},Ee.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),r=n.index,o=n.offset;return o==e.from&&o+t.child(r).nodeSize==e.to},Ee.prototype.eq=function(t){return this==t||t instanceof Ee&&Me(this.attrs,t.attrs)&&Me(this.spec,t.spec)};var Ne=function(t,e,n){this.from=t,this.to=e,this.type=n},Ae={spec:{configurable:!0},inline:{configurable:!0}};Ne.prototype.copy=function(t,e){return new Ne(t,e,this.type)},Ne.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},Ne.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},Ne.widget=function(t,e,n){return new Ne(t,t,new _e(e,n))},Ne.inline=function(t,e,n,r){return new Ne(t,e,new Te(n,r))},Ne.node=function(t,e,n,r){return new Ne(t,e,new Ee(n,r))},Ae.spec.get=function(){return this.type.spec},Ae.inline.get=function(){return this.type instanceof Te},Object.defineProperties(Ne.prototype,Ae);var ze=[],Re={},Ie=function(t,e){this.local=t&&t.length?t:ze,this.children=e&&e.length?e:ze};Ie.create=function(t,e){return e.length?qe(e,t,0,Re):De},Ie.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},Ie.prototype.findInner=function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=e&&s.to>=t&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var c=this.children[a]+1;this.children[a+2].findInner(t-c,e-c,n,r+c,o)}},Ie.prototype.map=function(t,e,n){return this==De||0==t.maps.length?this:this.mapInner(t,e,0,0,n||Re)},Ie.prototype.mapInner=function(t,e,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(t,e,n,r,o,i,s){for(var a=t.slice(),c=function(t,e,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],u=void 0;-1==c||t>c+i||(e>=a[s]+i?a[s+1]=-1:n>=o&&(u=r-n-(e-t))&&(a[s]+=u,a[s+1]+=u))}},u=0;u<n.maps.length;u++)n.maps[u].forEach(c);for(var h=!1,l=0;l<a.length;l+=3)if(-1==a[l+1]){var p=n.map(t[l]+i),f=p-o;if(f<0||f>=r.content.size){h=!0;continue}var d=n.map(t[l+1]+i,-1)-o,m=r.content.findIndex(f),v=m.index,y=m.offset,g=r.maybeChild(v);if(g&&y==f&&y+g.nodeSize==d){var k=a[l+2].mapInner(n,g,p+1,t[l]+i+1,s);k!=De?(a[l]=f,a[l+1]=d,a[l+2]=k):(a[l+1]=-2,h=!0)}else h=!0}if(h){var b=function(t,e,n,r,o,i,s){function a(t,e){for(var i=0;i<t.local.length;i++){var c=t.local[i].map(r,o,e);c?n.push(c):s.onRemove&&s.onRemove(t.local[i].spec)}for(var u=0;u<t.children.length;u+=3)a(t.children[u+2],t.children[u]+e+1)}for(var c=0;c<t.length;c+=3)-1==t[c+1]&&a(t[c+2],e[c]+i+1);return n}(a,t,e||[],n,o,i,s),w=qe(b,r,0,s);e=w.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var S=0,C=0;S<w.children.length;S+=3){for(var O=w.children[S];C<a.length&&a[C]<O;)C+=3;a.splice(C,0,w.children[S],w.children[S+1],w.children[S+2])}}return new Ie(e&&e.sort($e),a)}(this.children,i,t,e,n,r,o):i?new Ie(i.sort($e)):De},Ie.prototype.add=function(t,e){return e.length?this==De?Ie.create(t,e):this.addInner(t,e,0):this},Ie.prototype.addInner=function(t,e,n){var r,o=this,i=0;t.forEach((function(t,s){var a,c=s+n;if(a=Pe(e,t,c)){for(r||(r=o.children.slice());i<r.length&&r[i]<s;)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(t,a,c+1):r.splice(i,0,s,s+t.nodeSize,qe(a,t,c+1,Re)),i+=3}}));for(var s=Fe(i?Be(e):e,-n),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||s.splice(a--,1);return new Ie(s.length?this.local.concat(s).sort($e):this.local,r||this.children)},Ie.prototype.remove=function(t){return 0==t.length||this==De?this:this.removeInner(t,0)},Ie.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+e,a=n[o+1]+e,c=0,u=void 0;c<t.length;c++)(u=t[c])&&u.from>s&&u.to<a&&(t[c]=null,(i||(i=[])).push(u));if(i){n==this.children&&(n=this.children.slice());var h=n[o+2].removeInner(i,s+1);h!=De?n[o+2]=h:(n.splice(o,3),o-=3)}}if(r.length)for(var l=0,p=void 0;l<t.length;l++)if(p=t[l])for(var f=0;f<r.length;f++)r[f].eq(p,e)&&(r==this.local&&(r=this.local.slice()),r.splice(f--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Ie(r,n):De},Ie.prototype.forChild=function(t,e){if(this==De)return this;if(e.isLeaf)return Ie.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}for(var i=t+1,s=i+e.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof Te){var u=Math.max(i,c.from)-i,h=Math.min(s,c.to)-i;u<h&&(r||(r=[])).push(c.copy(u,h))}}if(r){var l=new Ie(r.sort($e));return n?new je([l,n]):l}return n||De},Ie.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof Ie)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},Ie.prototype.locals=function(t){return Le(this.localsInner(t))},Ie.prototype.localsInner=function(t){if(this==De)return ze;if(t.inlineContent||!this.local.some(Te.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Te||e.push(this.local[n]);return e};var De=new Ie;Ie.empty=De,Ie.removeOverlap=Le;var je=function(t){this.members=t};function Fe(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new Ne(o.from+e,o.to+e,o.type))}return n}function Pe(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,s=void 0;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function Be(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function qe(t,e,n,r){var o=[],i=!1;e.forEach((function(e,s){var a=Pe(t,e,s+n);if(a){i=!0;var c=qe(a,e,n+s+1,r);c!=De&&o.push(s,s+e.nodeSize,c)}}));for(var s=Fe(i?Be(t):t,-n).sort($e),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Ie(s,o):De}function $e(t,e){return t.from-e.from||t.to-e.to}function Le(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Je(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Je(e,o+1,i.copy(r.to,i.to)))}}return e}function Je(t,e,n){for(;e<t.length&&$e(n,t[e])>0;)e++;t.splice(e,0,n)}function Ve(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=De&&e.push(r)})),t.cursorWrapper&&e.push(Ie.create(t.state.doc,[t.cursorWrapper.deco])),je.from(e)}je.prototype.forChild=function(t,e){if(e.isLeaf)return Ie.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(t,e);o!=De&&(o instanceof je?n=n.concat(o.members):n.push(o))}return je.from(n)},je.prototype.eq=function(t){if(!(t instanceof je)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},je.prototype.locals=function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?Le(n?e:e.sort($e)):ze},je.from=function(t){switch(t.length){case 0:return De;case 1:return t[0];default:return new je(t)}};var We=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Ze(this),this.markCursor=null,this.cursorWrapper=null,Ke(this),this.nodeViews=Ge(this),this.docView=X(this.state.doc,Ue(this),Ve(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.lastIOSEnterFallbackTimeout=null,t.lastAndroidDelete=0,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new te(t,(function(e,n,r,o){return Bt(t,e,n,r,o)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=ne[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}(t,e)||se(t,e)||!t.editable&&e.type in re||n(t,e)})};for(var n in ne)e(n);s.safari&&t.dom.addEventListener("input",(function(){return null})),ie(t)}(this),this.pluginViews=[],this.updatePluginViews()},He={props:{configurable:!0},root:{configurable:!0}};function Ue(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),[Ne.node(0,t.state.doc.content.size,e)]}function Ke(t){if(t.markCursor){var e=document.createElement("img");e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:Ne.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Ze(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function Ge(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}He.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},We.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&ie(this),this._props=t,this.updateStateInner(t.state,!0)},We.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},We.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},We.prototype.updateStateInner=function(t,e){var n=this,o=this.state,i=!1,a=!1;if(t.storedMarks&&this.composing&&(ke(this),a=!0),this.state=t,e){var c=Ge(this);(function(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r})(c,this.nodeViews)&&(this.nodeViews=c,i=!0),ie(this)}this.editable=Ze(this),Ke(this);var u=Ve(this),h=Ue(this),l=e?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",p=i||!this.docView.matchesNode(t.doc,h,u);!p&&t.selection.eq(o.selection)||(a=!0);var f,d,m,y,g,k,b,w,x,S,C,O="preserve"==l&&a&&null==this.dom.style.overflowAnchor&&function(t){for(var e,n,r=t.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=t.root.elementFromPoint(i,s);if(a!=t.dom&&t.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=o-20){e=a,n=c.top;break}}}return{refDOM:e,refTop:n,stack:_(t.dom)}}(this);if(a){this.domObserver.stop();var E=p&&(s.ie||s.chrome)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&(y=o.selection,g=t.selection,k=Math.min(y.$anchor.sharedDepth(y.head),g.$anchor.sharedDepth(g.head)),y.$anchor.start(k)!=g.$anchor.start(k));if(p){var N=s.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(t.doc,h,u,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=X(t.doc,h,u,this.dom,this)),N&&!this.trackWrites&&(E=!0)}E||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(f=this,d=f.docView.domFromPos(f.state.selection.anchor,0),m=f.root.getSelection(),v(d.node,d.offset,m.anchorNode,m.anchorOffset)))?vt(this,E):(wt(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==l)this.dom.scrollTop=0;else if("to selection"==l){var A=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof r.NodeSelection?M(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),A):M(this,this.coordsAtPos(t.selection.head,1),A))}else O&&(w=(b=O).refDOM,x=b.refTop,S=b.stack,C=w?w.getBoundingClientRect().top:0,T(S,0==C?0:C-x))},We.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},We.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},We.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[t];if(null!=s&&(n=e?e(s):s))return n}},We.prototype.hasFocus=function(){return this.root.activeElement==this.dom},We.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(E)return t.focus(E);var e=_(t);t.focus(null==E?{get preventScroll(){return E={preventScroll:!0},!0}}:void 0),E||(E=!1,T(e,0))}(this.dom),vt(this),this.domObserver.start()},He.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},We.prototype.posAtCoords=function(t){return R(this,t)},We.prototype.coordsAtPos=function(t,e){return void 0===e&&(e=1),j(this,t,e)},We.prototype.domAtPos=function(t,e){return void 0===e&&(e=0),this.docView.domFromPos(t,e)},We.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},We.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},We.prototype.endOfTextblock=function(t,e){return V(this,e||this.state,t)},We.prototype.destroy=function(){this.docView&&(!function(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout),clearTimeout(t.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ve(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},We.prototype.dispatchEvent=function(t){return function(t,e){se(t,e)||!ne[e.type]||!t.editable&&e.type in re||ne[e.type](t,e)}(this,t)},We.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(We.prototype,He)},365:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return f}));for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},i="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),a="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),u="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),h=i&&(c||+i[1]<57)||a&&c,l=0;l<10;l++)r[48+l]=r[96+l]=String(l);for(l=1;l<=24;l++)r[l+111]="F"+l;for(l=65;l<=90;l++)r[l]=String.fromCharCode(l+32),o[l]=String.fromCharCode(l);for(var p in r)o.hasOwnProperty(p)||(o[p]=r[p]);function f(t){var e=!(h&&(t.ctrlKey||t.altKey||t.metaKey)||(s||u)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?o:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}},367:function(t,e,n){"use strict";n.r(e),n.d(e,"HistoryState",(function(){return p})),n.d(e,"closeHistory",(function(){return b})),n.d(e,"history",(function(){return S})),n.d(e,"redo",(function(){return O})),n.d(e,"redoDepth",(function(){return _})),n.d(e,"undo",(function(){return C})),n.d(e,"undoDepth",(function(){return M}));var r=200,o=function(){};o.prototype.append=function(t){return t.length?(t=o.from(t),!this.length&&t||t.length<r&&this.leafAppend(t)||this.length<r&&t.leafPrepend(this)||this.appendInner(t)):this},o.prototype.prepend=function(t){return t.length?o.from(t).append(this):this},o.prototype.appendInner=function(t){return new s(this,t)},o.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?o.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},o.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},o.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},o.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},o.from=function(t){return t instanceof o?t:t&&t.length?new i(t):o.empty};var i=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var o=e;o<n;o++)if(!1===t(this.values[o],r+o))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var o=e-1;o>=n;o--)if(!1===t(this.values[o],r+o))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=r)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=r)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(o);o.empty=new i([]);var s=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var o=this.left.length;return!(e<o&&!1===this.left.forEachInner(t,e,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(t,Math.max(e-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var o=this.left.length;return!(e>o&&!1===this.right.forEachInvertedInner(t,e-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(t,Math.min(e,o),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(o),a=o,c=n(78),u=n(41),h=function(t,e){this.items=t,this.eventCount=e};h.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--){if(this.items.get(i-1).selection){--i;break}}e&&(r=this.remapping(i,this.items.length),o=r.maps.length);var s,a,c=t.tr,u=[],p=[];return this.items.forEach((function(t,e){if(!t.step)return r||(r=n.remapping(i,e+1),o=r.maps.length),o--,void p.push(t);if(r){p.push(new l(t.map));var f,d=t.step.map(r.slice(o));d&&c.maybeStep(d).doc&&(f=c.mapping.maps[c.mapping.maps.length-1],u.push(new l(f,null,null,u.length+p.length))),o--,f&&r.appendMap(f,o)}else c.maybeStep(t.step);return t.selection?(s=r?t.selection.map(r.slice(o)):t.selection,a=new h(n.items.slice(0,i).append(p.reverse().concat(u)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:c,selection:s}},h.prototype.addTransform=function(t,e,n,r){for(var o=[],i=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null,c=0;c<t.steps.length;c++){var u,p=t.steps[c].invert(t.docs[c]),d=new l(t.mapping.maps[c],p,e);(u=a&&a.merge(d))&&(d=u,c?o.pop():s=s.slice(0,s.length-1)),o.push(d),e&&(i++,e=null),r||(a=d)}var m,v,y,g=i-n.depth;return g>f&&(v=g,(m=s).forEach((function(t,e){if(t.selection&&0==v--)return y=e,!1})),s=m.slice(y),i-=g),new h(s.append(o),i)},h.prototype.remapping=function(t,e){var n=new c.a;return this.items.forEach((function(e,r){var o=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:null;n.appendMap(e.map,o)}),t,e),n},h.prototype.addMaps=function(t){return 0==this.eventCount?this:new h(this.items.append(t.map((function(t){return new l(t)}))),this.eventCount)},h.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-e),o=t.mapping,i=t.steps.length,s=this.eventCount;this.items.forEach((function(t){t.selection&&s--}),r);var a=e;this.items.forEach((function(e){var r=o.getMirror(--a);if(null!=r){i=Math.min(i,r);var c=o.maps[r];if(e.step){var u=t.steps[r].invert(t.docs[r]),h=e.selection&&e.selection.map(o.slice(a+1,r));h&&s++,n.push(new l(c,u,h))}else n.push(new l(c))}}),r);for(var c=[],u=e;u<i;u++)c.push(new l(o.maps[u]));var p=this.items.slice(0,r).append(c).append(n),f=new h(p,s);return f.emptyItemCount()>500&&(f=f.compress(this.items.length-n.length)),f},h.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},h.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,r=[],o=0;return this.items.forEach((function(i,s){if(s>=t)r.push(i),i.selection&&o++;else if(i.step){var a=i.step.map(e.slice(n)),c=a&&a.getMap();if(n--,c&&e.appendMap(c,n),a){var u=i.selection&&i.selection.map(e.slice(n));u&&o++;var h,p=new l(c.invert(),a,u),f=r.length-1;(h=r.length&&r[f].merge(p))?r[f]=h:r.push(p)}}else i.map&&n--}),this.items.length,0),new h(a.from(r.reverse()),o)},h.empty=new h(a.empty,0);var l=function(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r};l.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new l(e.getMap().invert(),e,this.selection)}};var p=function(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r},f=20;function d(t){var e=[];return t.forEach((function(t,n,r,o){return e.push(r,o)})),e}function m(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function v(t,e,n,r){var o=k(e),i=w.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,o);if(s){var a=s.selection.resolve(s.transform.doc),c=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,o),u=new p(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(a).setMeta(w,{redo:r,historyState:u}).scrollIntoView())}}var y=!1,g=null;function k(t){var e=t.plugins;if(g!=e){y=!1,g=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){y=!0;break}}return y}function b(t){return t.setMeta(x,!0)}var w=new u.PluginKey("history"),x=new u.PluginKey("closeHistory");function S(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new u.Plugin({key:w,state:{init:function(){return new p(h.empty,h.empty,null,0)},apply:function(e,n,r){return function(t,e,n,r){var o,i=n.getMeta(w);if(i)return i.historyState;n.getMeta(x)&&(t=new p(t.done,t.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(w))return s.getMeta(w).redo?new p(t.done.addTransform(n,null,r,k(e)),t.undone,d(n.mapping.maps[n.steps.length-1]),t.prevTime):new p(t.done,t.undone.addTransform(n,null,r,k(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new p(t.done.rebased(n,o),t.undone.rebased(n,o),m(t.prevRanges,n.mapping),t.prevTime):new p(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),m(t.prevRanges,n.mapping),t.prevTime);var a=0==t.prevTime||!s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var o=0;o<e.length;o+=2)t<=e[o+1]&&r>=e[o]&&(n=!0)})),n}(n,t.prevRanges)),c=s?m(t.prevRanges,n.mapping):d(n.mapping.maps[n.steps.length-1]);return new p(t.done.addTransform(n,a?e.selection.getBookmark():null,r,k(e)),h.empty,c,n.time)}(n,r,e,t)}},config:t})}function C(t,e){var n=w.getState(t);return!(!n||0==n.done.eventCount)&&(e&&v(n,t,e,!1),!0)}function O(t,e){var n=w.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&v(n,t,e,!0),!0)}function M(t){var e=w.getState(t);return e?e.done.eventCount:0}function _(t){var e=w.getState(t);return e?e.undone.eventCount:0}},41:function(t,e,n){"use strict";n.r(e),n.d(e,"AllSelection",(function(){return d})),n.d(e,"EditorState",(function(){return S})),n.d(e,"NodeSelection",(function(){return p})),n.d(e,"Plugin",(function(){return _})),n.d(e,"PluginKey",(function(){return N})),n.d(e,"Selection",(function(){return a})),n.d(e,"SelectionRange",(function(){return u})),n.d(e,"TextSelection",(function(){return h})),n.d(e,"Transaction",(function(){return g}));var r=n(21),o=n(78);function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var s=Object.create(null),a=function(t,e,n){this.ranges=n||[new u(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},c={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};c.anchor.get=function(){return this.$anchor.pos},c.head.get=function(){return this.$head.pos},c.from.get=function(){return this.$from.pos},c.to.get=function(){return this.$to.pos},c.$from.get=function(){return this.ranges[0].$from},c.$to.get=function(){return this.ranges[0].$to},c.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},a.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},a.prototype.replace=function(t,e){void 0===e&&(e=r.Slice.empty);for(var n=e.content.lastChild,o=null,i=0;i<e.openEnd;i++)o=n,n=n.lastChild;for(var s=t.steps.length,a=this.ranges,c=0;c<a.length;c++){var u=a[c],h=u.$from,l=u.$to,p=t.mapping.slice(s);t.replaceRange(p.map(h.pos),p.map(l.pos),c?r.Slice.empty:e),0==c&&y(t,s,(n?n.isInline:o&&o.isTextblock)?-1:1)}},a.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=t.mapping.slice(n),u=c.map(s.pos),h=c.map(a.pos);o?t.deleteRange(u,h):(t.replaceRangeWith(u,h,e),y(t,n,e.isInline?-1:1))}},a.findFrom=function(t,e,n){var r=t.parent.inlineContent?new h(t):v(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?v(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):v(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}},a.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new d(t.node(0))},a.atStart=function(t){return v(t,t,0,0,1)||new d(t)},a.atEnd=function(t){return v(t,t,t.content.size,t.childCount,-1)||new d(t)},a.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=s[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},a.jsonID=function(t,e){if(t in s)throw new RangeError("Duplicate use of selection JSON ID "+t);return s[t]=e,e.prototype.jsonID=t,e},a.prototype.getBookmark=function(){return h.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(a.prototype,c),a.prototype.visible=!0;var u=function(t,e){this.$from=t,this.$to=e},h=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=n.resolve(r.map(this.anchor));return new e(i.parent.inlineContent?i:o,o)},e.prototype.replace=function(e,n){if(void 0===n&&(n=r.Slice.empty),t.prototype.replace.call(this,e,n),n==r.Slice.empty){var o=this.$from.marksAcross(this.$to);o&&e.ensureMarks(o)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new l(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,o,!0)||t.findFrom(r,-o,!0);if(!s)return t.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i||(n=(t.findFrom(n,-o,!0)||t.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0)&&(n=r),new e(n,r)},Object.defineProperties(e.prototype,n),e}(a);a.jsonID("text",h);var l=function(t,e){this.anchor=t,this.head=e};l.prototype.map=function(t){return new l(t.map(this.anchor),t.map(this.head))},l.prototype.resolve=function(t){return h.between(t.resolve(this.anchor),t.resolve(this.head))};var p=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=n.resolve(s);return i?t.near(a):new e(a)},e.prototype.content=function(){return new r.Slice(r.Fragment.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new f(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(a);p.prototype.visible=!1,a.jsonID("node",p);var f=function(t){this.anchor=t};f.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new l(r,r):new f(r)},f.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&p.isSelectable(n)?new p(e):a.near(e)};var d=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=r.Slice.empty),n==r.Slice.empty){e.delete(0,e.doc.content.size);var o=t.atStart(e.doc);o.eq(e.selection)||e.setSelection(o)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return m},e}(a);a.jsonID("all",d);var m={map:function(){return this},resolve:function(t){return new d(t)}};function v(t,e,n,r,o,i){if(e.inlineContent)return h.create(t,n);for(var s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){var a=e.child(s);if(a.isAtom){if(!i&&p.isSelectable(a))return p.create(t,n-(o<0?a.nodeSize:0))}else{var c=v(t,a,n+o,o<0?a.childCount:0,o,i);if(c)return c}n+=a.nodeSize*o}}function y(t,e,n){var r=t.steps.length-1;if(!(r<e)){var i,s=t.steps[r];if(s instanceof o.c||s instanceof o.b)t.mapping.maps[r].forEach((function(t,e,n,r){null==i&&(i=r)})),t.setSelection(a.near(t.doc.resolve(i),n))}}var g=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return r.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.Mark.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=n==e?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,o)),this.selection.empty||this.setSelection(a.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,n),e}(o.d);function k(t,e){return e&&t?t.bind(e):t}var b=function(t,e,n){this.name=t,this.init=k(e.init,n),this.apply=k(e.apply,n)},w=[new b("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new b("selection",{init:function(t,e){return t.selection||a.atStart(e.doc)},apply:function(t){return t.selection}}),new b("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new b("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],x=function(t,e){var n=this;this.schema=t,this.fields=w.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new b(t.key,t.spec.state,t))}))},S=function(t){this.config=t},C={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};C.schema.get=function(){return this.config.schema},C.plugins.get=function(){return this.config.plugins},S.prototype.apply=function(t){return this.applyTransaction(t).state},S.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},S.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,c=r?r[i].state:this,u=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(u&&n.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",t),!r){r=[];for(var h=0;h<this.config.plugins.length;h++)r.push(h<i?{state:n,n:e.length}:{state:this,n:0})}e.push(u),n=n.applyInner(u),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}},S.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new S(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<O.length;i++)O[i](this,t,e);return e},C.tr.get=function(){return new g(this)},S.create=function(t){for(var e=new x(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new S(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},S.prototype.reconfigure=function(t){for(var e=new x(this.schema,t.plugins),n=e.fields,r=new S(e),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(t,r)}return r},S.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==i(t))for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e},S.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new x(t.schema,t.plugins),i=new S(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=r.Node.fromJSON(t.schema,e.doc);else if("selection"==o.name)i.selection=a.fromJSON(i.doc,e.selection);else if("storedMarks"==o.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var s in n){var c=n[s],u=c.spec.state;if(c.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(e,s))return void(i[o.name]=u.fromJSON.call(c,t,e[s],i))}i[o.name]=o.init(t,i)}})),i},S.addApplyListener=function(t){O.push(t)},S.removeApplyListener=function(t){var e=O.indexOf(t);e>-1&&O.splice(e,1)},Object.defineProperties(S.prototype,C);var O=[];function M(t,e,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=M(o,e,{})),n[r]=o}return n}var _=function(t){this.props={},t.props&&M(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:E("plugin")};_.prototype.getState=function(t){return t[this.key]};var T=Object.create(null);function E(t){return t in T?t+"$"+ ++T[t]:(T[t]=0,t+"$")}var N=function(t){void 0===t&&(t="key"),this.key=E(t)};N.prototype.get=function(t){return t.config.pluginsByKey[this.key]},N.prototype.getState=function(t){return t[this.key]}},524:function(t,e,n){"use strict";function r(){return"undefined"!==typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}n.d(e,"a",(function(){return r}))},525:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));var r=n(84),o=n(59);function i(t,e){try{for(var n=t,r=[],o=0,i=0,a=" > ".length,c=void 0;n&&o++<5&&!("html"===(c=s(n,e))||o>1&&i+r.length*a+c.length>=80);)r.push(c),i+=c.length,n=n.parentNode;return r.reverse().join(" > ")}catch(u){return"<unknown>"}}function s(t,e){var n,r,i,s,a,c=t,u=[];if(!c||!c.tagName)return"";u.push(c.tagName.toLowerCase());var h=e&&e.length?e.filter((function(t){return c.getAttribute(t)})).map((function(t){return[t,c.getAttribute(t)]})):null;if(h&&h.length)h.forEach((function(t){u.push("["+t[0]+'="'+t[1]+'"]')}));else if(c.id&&u.push("#"+c.id),(n=c.className)&&Object(o.l)(n))for(r=n.split(/\s+/),a=0;a<r.length;a++)u.push("."+r[a]);var l=["type","name","title","alt"];for(a=0;a<l.length;a++)i=l[a],(s=c.getAttribute(i))&&u.push("["+i+'="'+s+'"]');return u.join("")}function a(){var t=Object(r.a)();try{return t.document.location.href}catch(e){return""}}},526:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(267),o=n(147),i=n(85),s=function(){function t(t){this.errors=0,this.sid=Object(r.f)(),this.duration=0,this.status="ok",this.init=!0,this.ignoreDuration=!1;var e=Object(o.c)();this.timestamp=e,this.started=e,t&&this.update(t)}return t.prototype.update=function(t){if(void 0===t&&(t={}),t.user&&(!this.ipAddress&&t.user.ip_address&&(this.ipAddress=t.user.ip_address),this.did||t.did||(this.did=t.user.id||t.user.email||t.user.username)),this.timestamp=t.timestamp||Object(o.c)(),t.ignoreDuration&&(this.ignoreDuration=t.ignoreDuration),t.sid&&(this.sid=32===t.sid.length?t.sid:Object(r.f)()),void 0!==t.init&&(this.init=t.init),!this.did&&t.did&&(this.did=""+t.did),"number"===typeof t.started&&(this.started=t.started),this.ignoreDuration)this.duration=void 0;else if("number"===typeof t.duration)this.duration=t.duration;else{var e=this.timestamp-this.started;this.duration=e>=0?e:0}t.release&&(this.release=t.release),t.environment&&(this.environment=t.environment),!this.ipAddress&&t.ipAddress&&(this.ipAddress=t.ipAddress),!this.userAgent&&t.userAgent&&(this.userAgent=t.userAgent),"number"===typeof t.errors&&(this.errors=t.errors),t.status&&(this.status=t.status)},t.prototype.close=function(t){t?this.update({status:t}):"ok"===this.status?this.update({status:"exited"}):this.update()},t.prototype.toJSON=function(){return Object(i.c)({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"===typeof this.did||"string"===typeof this.did?""+this.did:void 0,duration:this.duration,attrs:{release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent}})},t}()},59:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"l",(function(){return h})),n.d(e,"j",(function(){return l})),n.d(e,"i",(function(){return p})),n.d(e,"f",(function(){return f})),n.d(e,"c",(function(){return d})),n.d(e,"k",(function(){return m})),n.d(e,"n",(function(){return v})),n.d(e,"m",(function(){return y})),n.d(e,"h",(function(){return g})),n.d(e,"g",(function(){return k}));var o=Object.prototype.toString;function i(t){switch(o.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return k(t,Error)}}function s(t,e){return o.call(t)==="[object "+e+"]"}function a(t){return s(t,"ErrorEvent")}function c(t){return s(t,"DOMError")}function u(t){return s(t,"DOMException")}function h(t){return s(t,"String")}function l(t){return null===t||"object"!==r(t)&&"function"!==typeof t}function p(t){return s(t,"Object")}function f(t){return"undefined"!==typeof Event&&k(t,Event)}function d(t){return"undefined"!==typeof Element&&k(t,Element)}function m(t){return s(t,"RegExp")}function v(t){return Boolean(t&&t.then&&"function"===typeof t.then)}function y(t){return p(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function g(t){return"number"===typeof t&&t!==t}function k(t,e){try{return t instanceof e}catch(n){return!1}}},60:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return r}));var r,o=n(3),i=n(143),s=n(84),a=Object(s.a)(),c="Sentry Logger ",u=["debug","info","warn","error","log","assert"];function h(t){var e=Object(s.a)();if(!("console"in e))return t();var n=e.console,r={};u.forEach((function(t){var o=n[t]&&n[t].__sentry_original__;t in e.console&&o&&(r[t]=n[t],n[t]=o)}));try{return t()}finally{Object.keys(r).forEach((function(t){n[t]=r[t]}))}}function l(){var t=!1,e={enable:function(){t=!0},disable:function(){t=!1}};return i.a?u.forEach((function(n){e[n]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t&&h((function(){var t;(t=a.console)[n].apply(t,Object(o.e)([c+"["+n+"]:"],e))}))}})):u.forEach((function(t){e[t]=function(){}})),e}r=i.a?Object(s.b)("logger",l):l()},600:function(t,e,n){"use strict";var r=n(22),o=n(217).trim;r({target:"String",proto:!0,forced:n(742)("trim")},{trim:function(){return o(this)}})},632:function(t,e,n){"use strict";function r(){this.__rules__=[],this.__cache__=null}r.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1},r.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach((function(t){t.enabled&&t.alt.forEach((function(t){e.indexOf(t)<0&&e.push(t)}))})),t.__cache__={},e.forEach((function(e){t.__cache__[e]=[],t.__rules__.forEach((function(n){n.enabled&&(e&&n.alt.indexOf(e)<0||t.__cache__[e].push(n.fn))}))}))},r.prototype.at=function(t,e,n){var r=this.__find__(t),o=n||{};if(-1===r)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=o.alt||[],this.__cache__=null},r.prototype.before=function(t,e,n,r){var o=this.__find__(t),i=r||{};if(-1===o)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null},r.prototype.after=function(t,e,n,r){var o=this.__find__(t),i=r||{};if(-1===o)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o+1,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null},r.prototype.push=function(t,e,n){var r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null},r.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach((function(t){var r=this.__find__(t);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[r].enabled=!0,n.push(t)}),this),this.__cache__=null,n},r.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach((function(t){t.enabled=!1})),this.enable(t,e)},r.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach((function(t){var r=this.__find__(t);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[r].enabled=!1,n.push(t)}),this),this.__cache__=null,n},r.prototype.getRules=function(t){return null===this.__cache__&&this.__compile__(),this.__cache__[t]||[]},t.exports=r},633:function(t,e,n){"use strict";function r(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}r.prototype.attrIndex=function(t){var e,n,r;if(!this.attrs)return-1;for(n=0,r=(e=this.attrs).length;n<r;n++)if(e[n][0]===t)return n;return-1},r.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]},r.prototype.attrSet=function(t,e){var n=this.attrIndex(t),r=[t,e];n<0?this.attrPush(r):this.attrs[n]=r},r.prototype.attrGet=function(t){var e=this.attrIndex(t),n=null;return e>=0&&(n=this.attrs[e][1]),n},r.prototype.attrJoin=function(t,e){var n=this.attrIndex(t);n<0?this.attrPush([t,e]):this.attrs[n][1]=this.attrs[n][1]+" "+e},t.exports=r},635:function(t,e,n){"use strict";n.r(e),n.d(e,"keydownHandler",(function(){return u})),n.d(e,"keymap",(function(){return c}));var r=n(365),o=n(41),i="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function s(t){var e,n,r,o,s=t.split(/-(?!$)/),a=s[s.length-1];"Space"==a&&(a=" ");for(var c=0;c<s.length-1;c++){var u=s[c];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))e=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: "+u);i?o=!0:n=!0}}return e&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function a(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function c(t){return new o.Plugin({props:{handleKeyDown:u(t)}})}function u(t){var e=function(t){var e=Object.create(null);for(var n in t)e[s(n)]=t[n];return e}(t);return function(t,n){var o,i=Object(r.b)(n),s=1==i.length&&" "!=i,c=e[a(i,n,!s)];if(c&&c(t.state,t.dispatch,t))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(o=r.a[n.keyCode])&&o!=i){var u=e[a(o,n,!0)];if(u&&u(t.state,t.dispatch,t))return!0}else if(s&&n.shiftKey){var h=e[a(i,n,!0)];if(h&&h(t.state,t.dispatch,t))return!0}return!1}}},742:function(t,e,n){var r=n(19),o=n(244);t.exports=function(t){return r((function(){return!!o[t]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[t]()||o[t].name!==t}))}},758:function(t,e,n){"use strict";t.exports=n(965)},759:function(t,e,n){"use strict";var r="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",o="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",i=new RegExp("^(?:"+r+"|"+o+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),s=new RegExp("^(?:"+r+"|"+o+")");t.exports.HTML_TAG_RE=i,t.exports.HTML_OPEN_CLOSE_TAG_RE=s},760:function(t,e,n){"use strict";function r(t,e){var n,r,o,i,s,a=[],c=e.length;for(n=0;n<c;n++)126===(o=e[n]).marker&&-1!==o.end&&(i=e[o.end],(s=t.tokens[o.token]).type="s_open",s.tag="s",s.nesting=1,s.markup="~~",s.content="",(s=t.tokens[i.token]).type="s_close",s.tag="s",s.nesting=-1,s.markup="~~",s.content="","text"===t.tokens[i.token-1].type&&"~"===t.tokens[i.token-1].content&&a.push(i.token-1));for(;a.length;){for(r=(n=a.pop())+1;r<t.tokens.length&&"s_close"===t.tokens[r].type;)r++;n!==--r&&(s=t.tokens[r],t.tokens[r]=t.tokens[n],t.tokens[n]=s)}}t.exports.tokenize=function(t,e){var n,r,o,i,s=t.pos,a=t.src.charCodeAt(s);if(e)return!1;if(126!==a)return!1;if(o=(r=t.scanDelims(t.pos,!0)).length,i=String.fromCharCode(a),o<2)return!1;for(o%2&&(t.push("text","",0).content=i,o--),n=0;n<o;n+=2)t.push("text","",0).content=i+i,t.delimiters.push({marker:a,length:0,jump:n,token:t.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return t.pos+=r.length,!0},t.exports.postProcess=function(t){var e,n=t.tokens_meta,o=t.tokens_meta.length;for(r(t,t.delimiters),e=0;e<o;e++)n[e]&&n[e].delimiters&&r(t,n[e].delimiters)}},761:function(t,e,n){"use strict";function r(t,e){var n,r,o,i,s,a;for(n=e.length-1;n>=0;n--)95!==(r=e[n]).marker&&42!==r.marker||-1!==r.end&&(o=e[r.end],a=n>0&&e[n-1].end===r.end+1&&e[n-1].token===r.token-1&&e[r.end+1].token===o.token+1&&e[n-1].marker===r.marker,s=String.fromCharCode(r.marker),(i=t.tokens[r.token]).type=a?"strong_open":"em_open",i.tag=a?"strong":"em",i.nesting=1,i.markup=a?s+s:s,i.content="",(i=t.tokens[o.token]).type=a?"strong_close":"em_close",i.tag=a?"strong":"em",i.nesting=-1,i.markup=a?s+s:s,i.content="",a&&(t.tokens[e[n-1].token].content="",t.tokens[e[r.end+1].token].content="",n--))}t.exports.tokenize=function(t,e){var n,r,o=t.pos,i=t.src.charCodeAt(o);if(e)return!1;if(95!==i&&42!==i)return!1;for(r=t.scanDelims(t.pos,42===i),n=0;n<r.length;n++)t.push("text","",0).content=String.fromCharCode(i),t.delimiters.push({marker:i,length:r.length,jump:n,token:t.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return t.pos+=r.length,!0},t.exports.postProcess=function(t){var e,n=t.tokens_meta,o=t.tokens_meta.length;for(r(t,t.delimiters),e=0;e<o;e++)n[e]&&n[e].delimiters&&r(t,n[e].delimiters)}},762:function(t,e,n){"use strict";var r=n(22),o=n(217).end,i=n(742)("trimEnd"),s=i?function(){return o(this)}:"".trimEnd;r({target:"String",proto:!0,forced:i},{trimEnd:s,trimRight:s})},764:function(t,e,n){"use strict";var r=n(22),o=n(77),i=n(1012),s=n(1013),a=n(19),c=1..toFixed,u=Math.floor,h=function(t,e,n){return 0===e?n:e%2===1?h(t,e-1,n*t):h(t*t,e/2,n)},l=function(t,e,n){for(var r=-1,o=n;++r<6;)o+=e*t[r],t[r]=o%1e7,o=u(o/1e7)},p=function(t,e){for(var n=6,r=0;--n>=0;)r+=t[n],t[n]=u(r/e),r=r%e*1e7},f=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=String(t[e]);n=""===n?r:n+s.call("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a((function(){c.call({})}))},{toFixed:function(t){var e,n,r,a,c=i(this),u=o(t),d=[0,0,0,0,0,0],m="",v="0";if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(m="-",c=-c),c>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(c*h(2,69,1))-69)<0?c*h(2,-e,1):c/h(2,e,1),n*=4503599627370496,(e=52-e)>0){for(l(d,0,n),r=u;r>=7;)l(d,1e7,0),r-=7;for(l(d,h(10,r,1),0),r=e-1;r>=23;)p(d,1<<23),r-=23;p(d,1<<r),l(d,1,1),p(d,2),v=f(d)}else l(d,0,n),l(d,1<<-e,0),v=f(d)+s.call("0",u);return v=u>0?m+((a=v.length)<=u?"0."+s.call("0",u-a)+v:v.slice(0,a-u)+"."+v.slice(a-u)):m+v}})},767:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(14),o=n(10);function i(t,e){Object(o.a)(2,arguments);var n=Object(r.a)(t),i=Object(r.a)(e);return n.getTime()-i.getTime()}},769:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(14),o=n(10);function i(t){Object(o.a)(1,arguments);var e=Object(r.a)(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}},770:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(14),o=n(10);function i(t,e){Object(o.a)(2,arguments);var n=Object(r.a)(t),i=Object(r.a)(e),s=n.getFullYear()-i.getFullYear(),a=n.getMonth()-i.getMonth();return 12*s+a}},771:function(t,e,n){"use strict";t.exports=n(964)},772:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(767),o=n(10);function i(t,e){Object(o.a)(2,arguments);var n=Object(r.a)(t,e)/1e3;return n>0?Math.floor(n):Math.ceil(n)}},78:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return h})),n.d(e,"e",(function(){return C})),n.d(e,"f",(function(){return S})),n.d(e,"g",(function(){return _})),n.d(e,"h",(function(){return w})),n.d(e,"i",(function(){return M})),n.d(e,"j",(function(){return b}));var r=n(21),o=Math.pow(2,16);function i(t){return 65535&t}var s=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},a=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};a.prototype.recover=function(t){var e=0,n=i(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/o}(t)},a.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},a.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},a.prototype._map=function(t,e,n){for(var r=0,i=this.inverted?2:1,a=this.inverted?1:2,c=0;c<this.ranges.length;c+=3){var u=this.ranges[c]-(this.inverted?r:0);if(u>t)break;var h=this.ranges[c+i],l=this.ranges[c+a],p=u+h;if(t<=p){var f=u+r+((h?t==u?-1:t==p?1:e:e)<0?0:l);if(n)return f;var d=t==(e<0?u:p)?null:c/3+(t-u)*o;return new s(f,e<0?t!=u:t!=p,d)}r+=l-h}return n?t+r:new s(t+r)},a.prototype.touches=function(t,e){for(var n=0,r=i(e),o=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?n:0);if(c>t)break;var u=this.ranges[a+o];if(t<=c+u&&a==3*r)return!0;n+=this.ranges[a+s]-u}return!1},a.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+e],u=this.ranges[r+n];t(s,s+c,a,a+u),o+=u-c}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(t){return 0==t?a.empty:new a(t<0?[0,-t,0]:[0,0,t])},a.empty=new a([]);var c=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function u(t){var e=Error.call(this,t);return e.__proto__=u.prototype,e}c.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new c(this.maps,this.mirror,t,e)},c.prototype.copy=function(){return new c(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},c.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},c.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},c.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},c.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},c.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},c.prototype.invert=function(){var t=new c;return t.appendMappingInverted(this),t},c.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},c.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},c.prototype._map=function(t,e,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,t=this.maps[a].recover(i.recover);continue}}i.deleted&&(r=!0),t=i.pos}return n?t:new s(t,r)},u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u.prototype.name="TransformError";var h=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new c},l={before:{configurable:!0},docChanged:{configurable:!0}};function p(){throw new Error("Override me")}l.before.get=function(){return this.docs.length?this.docs[0]:this.doc},h.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new u(e.failed);return this},h.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},l.docChanged.get=function(){return this.steps.length>0},h.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(h.prototype,l);var f=Object.create(null),d=function(){};d.prototype.apply=function(t){return p()},d.prototype.getMap=function(){return a.empty},d.prototype.invert=function(t){return p()},d.prototype.map=function(t){return p()},d.prototype.merge=function(t){return null},d.prototype.toJSON=function(){return p()},d.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=f[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},d.jsonID=function(t,e){if(t in f)throw new RangeError("Duplicate use of step JSON ID "+t);return f[t]=e,e.prototype.jsonID=t,e};var m=function(t,e){this.doc=t,this.failed=e};m.ok=function(t){return new m(t,null)},m.fail=function(t){return new m(null,t)},m.fromReplace=function(t,e,n,o){try{return m.ok(t.replace(e,n,o))}catch(i){if(i instanceof r.ReplaceError)return m.fail(i.message);throw i}};var v=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&g(t,this.from,this.to)?m.fail("Structure replace would overwrite content"):m.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?r.Slice.empty:new r.Slice(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var o=this.slice.size+t.slice.size==0?r.Slice.empty:new r.Slice(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),o,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,r.Slice.fromJSON(t,n.slice),!!n.structure)},e}(d);d.jsonID("replace",v);var y=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(g(t,this.from,this.gapFrom)||g(t,this.gapTo,this.to)))return m.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return m.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?m.fromReplace(t,this.from,this.to,n):m.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,r.Slice.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(d);function g(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function k(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function b(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||!k(r,o,i))break}}function w(t,e,n,r){void 0===r&&(r=t);var o=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}(t,e),i=o&&function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:e).contentMatch,c=r;a&&c<o;c++)a=a.matchType(n.child(c).type);if(!a||!a.validEnd)return null;return s}(r,e);return i?o.map(x).concat({type:e,attrs:n}).concat(i.map(x)):null}function x(t){return{type:t,attrs:null}}function S(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=n-2;a>i;a--,c--){var u=o.node(a),h=o.index(a);if(u.type.spec.isolating)return!1;var l=u.content.cutByIndex(h,u.childCount),p=r&&r[c]||u;if(p!=u&&(l=l.replaceChild(0,p.type.create(p.attrs))),!u.canReplace(h+1,u.childCount)||!p.type.validContent(l))return!1}var f=o.indexAfter(i),d=r&&r[0];return o.node(i).canReplaceWith(f,f,d?d.type:o.node(i+1).type)}function C(t,e){var n=t.resolve(e),r=n.index();return O(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function O(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function M(t,e,n){void 0===n&&(n=-1);for(var r=t.resolve(e),o=r.depth;;o--){var i=void 0,s=void 0,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&O(i,s)&&r.node(o).canReplace(a,a+1))return e;if(0==o)break;e=n<0?r.before(o):r.after(o)}}function _(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,u=r.index(a)+(c>0?1:0),h=r.node(a),l=!1;if(1==s)l=h.canReplace(u,u,o);else{var p=h.contentMatchAt(u).findWrapping(o.firstChild.type);l=p&&h.canReplaceWith(u,u,p[0])}if(l)return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function T(t,e,n){for(var o=[],i=0;i<t.childCount;i++){var s=t.child(i);s.content.size&&(s=s.copy(T(s.content,e,s))),s.isInline&&(s=e(s,n,i)),o.push(s)}return r.Fragment.fromArray(o)}d.jsonID("replaceAround",y),h.prototype.lift=function(t,e){for(var n=t.$from,o=t.$to,i=t.depth,s=n.before(i+1),a=o.after(i+1),c=s,u=a,h=r.Fragment.empty,l=0,p=i,f=!1;p>e;p--)f||n.index(p)>0?(f=!0,h=r.Fragment.from(n.node(p).copy(h)),l++):c--;for(var d=r.Fragment.empty,m=0,v=i,g=!1;v>e;v--)g||o.after(v+1)<o.end(v)?(g=!0,d=r.Fragment.from(o.node(v).copy(d)),m++):u++;return this.step(new y(c,u,s,a,new r.Slice(h.append(d),l,m),h.size-l,!0))},h.prototype.wrap=function(t,e){for(var n=r.Fragment.empty,o=e.length-1;o>=0;o--)n=r.Fragment.from(e[o].type.create(e[o].attrs,n));var i=t.start,s=t.end;return this.step(new y(i,s,i,s,new r.Slice(n,0,0),e.length,!0))},h.prototype.setBlockType=function(t,e,n,o){var i=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,o)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(i.doc,i.mapping.slice(s).map(e),n)){i.clearIncompatible(i.mapping.slice(s).map(e,1),n);var a=i.mapping.slice(s),c=a.map(e,1),u=a.map(e+t.nodeSize,1);return i.step(new y(c,u,c+1,u-1,new r.Slice(r.Fragment.from(n.create(o,null,t.marks)),0,0),1,!0)),!1}})),this},h.prototype.setNodeMarkup=function(t,e,n,o){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var s=e.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,s);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new y(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new r.Slice(r.Fragment.from(s),0,0),1,!0))},h.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var o=this.doc.resolve(t),i=r.Fragment.empty,s=r.Fragment.empty,a=o.depth,c=o.depth-e,u=e-1;a>c;a--,u--){i=r.Fragment.from(o.node(a).copy(i));var h=n&&n[u];s=r.Fragment.from(h?h.type.create(h.attrs,s):o.node(a).copy(s))}return this.step(new v(t,t,new r.Slice(i.append(s),e,e),!0))},h.prototype.join=function(t,e){void 0===e&&(e=1);var n=new v(t-e,t+e,r.Slice.empty,!0);return this.step(n)};var E=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=t.resolve(this.from),i=o.node(o.sharedDepth(this.to)),s=new r.Slice(T(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),n.openStart,n.openEnd);return m.fromReplace(t,this.from,this.to,s)},e.prototype.invert=function(){return new N(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(d);d.jsonID("addMark",E);var N=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=new r.Slice(T(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return m.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new E(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(d);function A(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}d.jsonID("removeMark",N),h.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,u){if(r.isInline){var h=r.marks;if(!n.isInSet(h)&&u.type.allowsMarkType(n.type)){for(var l=Math.max(c,t),p=Math.min(c+r.nodeSize,e),f=n.addToSet(h),d=0;d<h.length;d++)h[d].isInSet(f)||(s&&s.to==l&&s.mark.eq(h[d])?s.to=p:o.push(s=new N(l,p,h[d])));a&&a.to==l?a.to=p:i.push(a=new E(l,p,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},h.prototype.removeMark=function(t,e,n){var o=this;void 0===n&&(n=null);var i=[],s=0;return this.doc.nodesBetween(t,e,(function(o,a){if(o.isInline){s++;var c=null;if(n instanceof r.MarkType)for(var u,h=o.marks;u=n.isInSet(h);)(c||(c=[])).push(u),h=u.removeFromSet(h);else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length)for(var l=Math.min(a+o.nodeSize,e),p=0;p<c.length;p++){for(var f=c[p],d=void 0,m=0;m<i.length;m++){var v=i[m];v.step==s-1&&f.eq(i[m].style)&&(d=v)}d?(d.to=l,d.step=s):i.push({style:f,from:Math.max(a,t),to:l,step:s})}}})),i.forEach((function(t){return o.step(new N(t.from,t.to,t.style))})),this},h.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var o=this.doc.nodeAt(t),i=[],s=t+1,a=0;a<o.childCount;a++){var c=o.child(a),u=s+c.nodeSize,h=n.matchType(c.type,c.attrs);if(h){n=h;for(var l=0;l<c.marks.length;l++)e.allowsMarkType(c.marks[l].type)||this.step(new N(s,u,c.marks[l]))}else i.push(new v(s,u,r.Slice.empty));s=u}if(!n.validEnd){var p=n.fillBefore(r.Fragment.empty,!0);this.replace(s,s,new r.Slice(p,0,0))}for(var f=i.length-1;f>=0;f--)this.step(i[f]);return this},h.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=r.Slice.empty);var o=function(t,e,n,o){if(void 0===n&&(n=e),void 0===o&&(o=r.Slice.empty),e==n&&!o.size)return null;var i=t.resolve(e),s=t.resolve(n);return A(i,s,o)?new v(e,n,o):new z(i,s,o).fit()}(this.doc,t,e,n);return o&&this.step(o),this},h.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new r.Slice(r.Fragment.from(n),0,0))},h.prototype.delete=function(t,e){return this.replace(t,e,r.Slice.empty)},h.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var z=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}this.placed=r.Fragment.empty;for(var s=t.depth;s>0;s--)this.placed=r.Fragment.from(t.node(s).copy(this.placed))},R={depth:{configurable:!0}};function I(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(I(t.firstChild.content,e-1,n)))}function D(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(D(t.lastChild.content,e-1,n)))}function j(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function F(t,e,n){if(e<=0)return t;var o=t.content;return e>1&&(o=o.replaceChild(0,F(o.firstChild,e-1,1==o.childCount?n-1:0))),e>0&&(o=t.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(r.Fragment.empty,!0)))),t.copy(o)}function P(t,e,n,r,o){var i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function B(t,e,n,o,i){if(e<n){var s=t.firstChild;t=t.replaceChild(0,s.copy(B(s.content,e+1,n,o,s)))}if(e>o){var a=i.contentMatchAt(0),c=a.fillBefore(t).append(t);t=c.append(a.matchFragment(c).fillBefore(r.Fragment.empty,!0))}return t}function q(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}R.depth.get=function(){return this.frontier.length-1},z.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(e<0?this.$to:o.doc.resolve(e));if(!i)return null;for(var s=this.placed,a=o.depth,c=i.depth;a&&c&&1==s.childCount;)s=s.firstChild.content,a--,c--;var u=new r.Slice(s,a,c);return e>-1?new y(o.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||o.pos!=this.$to.pos?new v(o.pos,i.pos,u):void 0},z.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var n=void 0,o=(e?(n=j(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,i=this.depth;i>=0;i--){var s=this.frontier[i],a=s.type,c=s.match,u=void 0,h=void 0;if(1==t&&(o?c.matchType(o.type)||(h=c.fillBefore(r.Fragment.from(o),!1)):a.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:i,parent:n,inject:h};if(2==t&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:e,frontierDepth:i,parent:n,wrap:u};if(n&&c.matchType(n.type))break}},z.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=j(e,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r.Slice(e,n+1,Math.max(o,i.size+n>=e.size-o?n+1:0)),!0)},z.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=j(e,n);if(i.childCount<=1&&n>0){var s=e.size-n<=n+i.size;this.unplaced=new r.Slice(I(e,n-1,1),n-1,s?n-1:o)}else this.unplaced=new r.Slice(I(e,n,1),n,o)},z.prototype.placeNodes=function(t){for(var e=t.sliceDepth,n=t.frontierDepth,o=t.parent,i=t.inject,s=t.wrap;this.depth>n;)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var c=this.unplaced,u=o?o.content:c.content,h=c.openStart-e,l=0,p=[],f=this.frontier[n],d=f.match,m=f.type;if(i){for(var v=0;v<i.childCount;v++)p.push(i.child(v));d=d.matchFragment(i)}for(var y=u.size+e-(c.content.size-c.openEnd);l<u.childCount;){var g=u.child(l),k=d.matchType(g.type);if(!k)break;(++l>1||0==h||g.content.size)&&(d=k,p.push(F(g.mark(m.allowedMarks(g.marks)),1==l?h:0,l==u.childCount?y:-1)))}var b=l==u.childCount;b||(y=-1),this.placed=D(this.placed,n,r.Fragment.from(p)),this.frontier[n].match=d,b&&y<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,x=u;w<y;w++){var S=x.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),x=S.content}this.unplaced=b?0==e?r.Slice.empty:new r.Slice(I(c.content,e-1,1),e-1,y<0?c.openEnd:e-1):new r.Slice(I(c.content,e,l),c.openStart,c.openEnd)},z.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!P(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},z.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=P(t,e,o,r,i);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],u=c.match,h=P(t,a,c.type,u,!0);if(!h||h.childCount)continue t}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}},z.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=D(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t},z.prototype.openFrontierNode=function(t,e,n){var o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=D(this.placed,this.depth,r.Fragment.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},z.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(r.Fragment.empty,!0);t.childCount&&(this.placed=D(this.placed,this.frontier.length,t))},Object.defineProperties(z.prototype,R),h.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var o=this.doc.resolve(t),i=this.doc.resolve(e);if(A(o,i,n))return this.step(new v(t,e,n));var s=q(o,this.doc.resolve(e));0==s[s.length-1]&&s.pop();var a=-(o.depth+1);s.unshift(a);for(var c=o.depth,u=o.pos-1;c>0;c--,u--){var h=o.node(c).type.spec;if(h.defining||h.isolating)break;s.indexOf(c)>-1?a=c:o.before(c)==u&&s.splice(1,0,-c)}for(var l=s.indexOf(a),p=[],f=n.openStart,d=n.content,m=0;;m++){var y=d.firstChild;if(p.push(y),m==n.openStart)break;d=y.content}f>0&&p[f-1].type.spec.defining&&o.node(l).type!=p[f-1].type?f-=1:f>=2&&p[f-1].isTextblock&&p[f-2].type.spec.defining&&o.node(l).type!=p[f-2].type&&(f-=2);for(var g=n.openStart;g>=0;g--){var k=(g+f+1)%(n.openStart+1),b=p[k];if(b)for(var w=0;w<s.length;w++){var x=s[(w+l)%s.length],S=!0;x<0&&(S=!1,x=-x);var C=o.node(x-1),O=o.index(x-1);if(C.canReplaceWith(O,O,b.type,b.marks))return this.replace(o.before(x),S?i.after(x):e,new r.Slice(B(n.content,0,n.openStart,k),k,n.openEnd))}}for(var M=this.steps.length,_=s.length-1;_>=0&&(this.replace(t,e,n),!(this.steps.length>M));_--){var T=s[_];T<0||(t=o.before(T),e=i.after(T))}return this},h.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var o=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,t,n.type);null!=o&&(t=e=o)}return this.replaceRange(t,e,new r.Slice(r.Fragment.from(n),0,0))},h.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=q(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)}},84:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s}));var r=n(135),o={};function i(){return Object(r.b)()?t:"undefined"!==typeof window?window:"undefined"!==typeof self?self:o}function s(t,e,n){var r=n||i(),o=r.__SENTRY__=r.__SENTRY__||{};return o[t]||(o[t]=e())}}).call(this,n(62))},85:function(t,e,n){"use strict";n.d(e,"e",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"g",(function(){return u})),n.d(e,"f",(function(){return h})),n.d(e,"h",(function(){return l})),n.d(e,"b",(function(){return p})),n.d(e,"d",(function(){return m})),n.d(e,"c",(function(){return v}));var r=n(3),o=n(525),i=n(59),s=n(205);function a(t,e,n){if(e in t){var r=t[e],o=n(r);if("function"===typeof o)try{u(o,r)}catch(i){}t[e]=o}}function c(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function u(t,e){var n=e.prototype||{};t.prototype=e.prototype=n,c(t,"__sentry_original__",e)}function h(t){return t.__sentry_original__}function l(t){return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}function p(t){var e=t;if(Object(i.d)(t))e=Object(r.a)({message:t.message,name:t.name,stack:t.stack},d(t));else if(Object(i.f)(t)){var n=t;e=Object(r.a)({type:n.type,target:f(n.target),currentTarget:f(n.currentTarget)},d(n)),"undefined"!==typeof CustomEvent&&Object(i.g)(t,CustomEvent)&&(e.detail=n.detail)}return e}function f(t){try{return Object(i.c)(t)?Object(o.b)(t):Object.prototype.toString.call(t)}catch(e){return"<unknown>"}}function d(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function m(t,e){void 0===e&&(e=40);var n=Object.keys(p(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return Object(s.d)(n[0],e);for(var r=n.length;r>0;r--){var o=n.slice(0,r).join(", ");if(!(o.length>e))return r===n.length?o:Object(s.d)(o,e)}return""}function v(t){var e,n;if(Object(i.i)(t)){var o={};try{for(var s=Object(r.f)(Object.keys(t)),a=s.next();!a.done;a=s.next()){var c=a.value;"undefined"!==typeof t[c]&&(o[c]=v(t[c]))}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o}return Array.isArray(t)?t.map(v):t}},958:function(t,e,n){"use strict";n.r(e),n.d(e,"dropCursor",(function(){return i}));var r=n(41),o=n(78);function i(t){return void 0===t&&(t={}),new r.Plugin({view:function(e){return new s(e,t)}})}var s=function(t,e){var n=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var r=function(t){return n[e](t)};return t.dom.addEventListener(e,r),{name:e,handler:r}}))};s.prototype.destroy=function(){var t=this;this.handlers.forEach((function(e){var n=e.name,r=e.handler;return t.editorView.dom.removeEventListener(n,r)}))},s.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&this.updateOverlay()},s.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},s.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var n=e.nodeBefore,r=e.nodeAfter;if(n||r){var o=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!t){var s=this.editorView.coordsAtPos(this.cursorPos);t={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var c=!a||a==document.body&&"static"==getComputedStyle(a).position?{left:-pageXOffset,top:-pageYOffset}:a.getBoundingClientRect();this.element.style.left=t.left-c.left+"px",this.element.style.top=t.top-c.top+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},s.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)},s.prototype.dragover=function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(e){var n=e.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(n=Object(o.g)(this.editorView.state.doc,n,this.editorView.dragging.slice))&&(n=e.pos),this.setCursor(n),this.scheduleRemoval(5e3)}}},s.prototype.dragend=function(){this.scheduleRemoval(20)},s.prototype.drop=function(){this.scheduleRemoval(20)},s.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}},959:function(t,e,n){"use strict";n.r(e),n.d(e,"GapCursor",(function(){return a})),n.d(e,"gapCursor",(function(){return u}));var r=n(635),o=n(41),i=n(339),s=n(21),a=function(t){function e(e){t.call(this,e,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));return e.valid(o)?new e(o):t.near(o)},e.prototype.content=function(){return s.Slice.empty},e.prototype.eq=function(t){return t instanceof e&&t.head==this.head},e.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(t.resolve(n.pos))},e.prototype.getBookmark=function(){return new c(this.anchor)},e.valid=function(t){var e=t.parent;if(e.isTextblock||!function(t){for(var e=t.depth;e>=0;e--){var n=t.index(e);if(0!=n)for(var r=t.node(e).child(n-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(t)||!function(t){for(var e=t.depth;e>=0;e--){var n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}(t))return!1;var n=e.type.spec.allowGapCursor;if(null!=n)return n;var r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock},e.findFrom=function(t,n,r){t:for(;;){if(!r&&e.valid(t))return t;for(var i=t.pos,s=null,a=t.depth;;a--){var c=t.node(a);if(n>0?t.indexAfter(a)<c.childCount:t.index(a)>0){s=c.child(n>0?t.indexAfter(a):t.index(a)-1);break}if(0==a)return null;i+=n;var u=t.doc.resolve(i);if(e.valid(u))return u}for(;;){var h=n>0?s.firstChild:s.lastChild;if(!h){if(s.isAtom&&!s.isText&&!o.NodeSelection.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue t}break}s=h,i+=n;var l=t.doc.resolve(i);if(e.valid(l))return l}return null}},e}(o.Selection);a.prototype.visible=!1,o.Selection.jsonID("gapcursor",a);var c=function(t){this.pos=t};c.prototype.map=function(t){return new c(t.map(this.pos))},c.prototype.resolve=function(t){var e=t.resolve(this.pos);return a.valid(e)?new a(e):o.Selection.near(e)};var u=function(){return new o.Plugin({props:{decorations:f,createSelectionBetween:function(t,e,n){if(e.pos==n.pos&&a.valid(n))return new a(n)},handleClick:p,handleKeyDown:h}})},h=Object(r.keydownHandler)({ArrowLeft:l("horiz",-1),ArrowRight:l("horiz",1),ArrowUp:l("vert",-1),ArrowDown:l("vert",1)});function l(t,e){var n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,r,i){var s=t.selection,c=e>0?s.$to:s.$from,u=s.empty;if(s instanceof o.TextSelection){if(!i.endOfTextblock(n)||0==c.depth)return!1;u=!1,c=t.doc.resolve(e>0?c.after():c.before())}var h=a.findFrom(c,e,u);return!!h&&(r&&r(t.tr.setSelection(new a(h))),!0)}}function p(t,e,n){if(!t.editable)return!1;var r=t.state.doc.resolve(e);if(!a.valid(r))return!1;var i=t.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(i>-1&&o.NodeSelection.isSelectable(t.state.doc.nodeAt(i)))&&(t.dispatch(t.state.tr.setSelection(new a(r))),!0)}function f(t){if(!(t.selection instanceof a))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",i.DecorationSet.create(t.doc,[i.Decoration.widget(t.selection.head,e,{key:"gapcursor"})])}},960:function(t,e,n){"use strict";n.r(e),n.d(e,"InputRule",(function(){return i})),n.d(e,"closeDoubleQuote",(function(){return p})),n.d(e,"closeSingleQuote",(function(){return d})),n.d(e,"ellipsis",(function(){return h})),n.d(e,"emDash",(function(){return u})),n.d(e,"inputRules",(function(){return s})),n.d(e,"openDoubleQuote",(function(){return l})),n.d(e,"openSingleQuote",(function(){return f})),n.d(e,"smartQuotes",(function(){return m})),n.d(e,"textblockTypeInputRule",(function(){return y})),n.d(e,"undoInputRule",(function(){return c})),n.d(e,"wrappingInputRule",(function(){return v}));var r=n(41),o=n(78),i=function(t,e){var n;this.match=t,this.handler="string"==typeof e?(n=e,function(t,e,r,o){var i=n;if(e[1]){var s=e[0].lastIndexOf(e[1]);i+=e[0].slice(s+e[1].length);var a=(r+=s)-o;a>0&&(i=e[0].slice(s-a,s)+i,r=o)}return t.tr.insertText(i,r,o)}):e};function s(t){var e=t.rules,n=new r.Plugin({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(this);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,r,o,i){return a(t,r,o,i,e,n)},handleDOMEvents:{compositionend:function(t){setTimeout((function(){var r=t.state.selection.$cursor;r&&a(t,r.pos,r.pos,"",e,n)}))}}},isInputRules:!0});return n}function a(t,e,n,r,o,i){if(t.composing)return!1;var s=t.state,a=s.doc.resolve(e);if(a.parent.type.spec.code)return!1;for(var c=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"\ufffc")+r,u=0;u<o.length;u++){var h=o[u].match.exec(c),l=h&&o[u].handler(s,h,e-(h[0].length-r.length),n);if(l)return t.dispatch(l.setMeta(i,{transform:l,from:e,to:n,text:r})),!0}return!1}function c(t,e){for(var n=t.plugins,r=0;r<n.length;r++){var o=n[r],i=void 0;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){for(var s=t.tr,a=i.transform,c=a.steps.length-1;c>=0;c--)s.step(a.steps[c].invert(a.docs[c]));if(i.text){var u=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,t.schema.text(i.text,u))}else s.delete(i.from,i.to);e(s)}return!0}}return!1}var u=new i(/--$/,"\u2014"),h=new i(/\.\.\.$/,"\u2026"),l=new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201c"),p=new i(/"$/,"\u201d"),f=new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),d=new i(/'$/,"\u2019"),m=[l,p,f,d];function v(t,e,n,r){return new i(t,(function(t,i,s,a){var c=n instanceof Function?n(i):n,u=t.tr.delete(s,a),h=u.doc.resolve(s).blockRange(),l=h&&Object(o.h)(h,e,c);if(!l)return null;u.wrap(h,l);var p=u.doc.resolve(s-1).nodeBefore;return p&&p.type==e&&Object(o.e)(u.doc,s-1)&&(!r||r(i,p))&&u.join(s-1),u}))}function y(t,e,n){return new i(t,(function(t,r,o,i){var s=t.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e)?t.tr.delete(o,i).setBlockType(o,o,e,a):null}))}},961:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41),o=n(21),i=n(1038),s=function(t,e){return function(n){Array.isArray(t)||(t=[t]);for(var r=0,o=t.length;r<o;r++){var i=z(t[r])(n.selection);if(i){var s=m(i.pos,e)(n);if(s!==n)return s}}return n}},a=function(t){return function(e){if(p(e.selection)){var n=e.selection,i=n.$from,s=n.$to;if(t instanceof o.Fragment&&i.parent.canReplace(i.index(),i.indexAfter(),t)||i.parent.canReplaceWith(i.index(),i.indexAfter(),t.type))return d(e.replaceWith(i.pos,s.pos,t).setSelection(new r.NodeSelection(e.doc.resolve(i.pos))))}return e}},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var o=r.Selection.findFrom(n.doc.resolve(t),e,!0);return o?n.setSelection(o):n}},u=function(t){return t.type&&t.type.spec.selectable},h=function(t,e,n){return function(t){return u(t)&&t.type.isLeaf}(t)?n.setSelection(new r.NodeSelection(n.doc.resolve(e))):c(e)(n)},l=function(t,e,n){return function(r){var o="number"===typeof e,i=r.selection.$from,c=o?r.doc.resolve(e):p(r.selection)?r.doc.resolve(i.pos+1):i,l=c.parent;if(p(r.selection)&&n&&r!==(r=a(t)(r)))return r;if(b(l)&&r!==(r=s(l.type,t)(r))){var f=u(t)?c.before(c.depth):c.pos;return h(t,f,r)}if(k(c,t)){r.insert(c.pos,t);var m=o?c.pos:u(t)?r.selection.$anchor.pos-1:r.selection.$anchor.pos;return d(h(t,m,r))}for(var v=c.depth;v>0;v--){var y=c.after(v),g=r.doc.resolve(y);if(k(g,t))return r.insert(y,t),d(h(t,y,r))}return r}},p=function(t){return t instanceof r.NodeSelection},f=function(t,e){return Array.isArray(t)&&t.indexOf(e.type)>-1||e.type===t},d=function(t){return Object.assign(Object.create(t),t).setTime(Date.now())},m=function(t,e){return function(n){var r=n.doc.nodeAt(t),o=n.doc.resolve(t);if(v(o,e)){var i=(n=n.replaceWith(t,t+r.nodeSize,e)).selection.$from.pos-1;return n=c(Math.max(i,0),-1)(n),n=c(n.selection.$from.start())(n),d(n)}return n}},v=function(t,e){var n=t.node(t.depth);return n&&n.type.validContent(e instanceof o.Fragment?e:o.Fragment.from(e))},y=function(t){return function(e){var n=e.doc.nodeAt(t);return d(e.delete(t,t+n.nodeSize))}},g=function(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;var e={};return Object.keys(t.nodes).forEach((function(n){var r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)})),t.cached.tableNodeTypes=e,e},k=function(t,e){var n=t.index();return e instanceof o.Fragment?t.parent.canReplace(n,n,e):e instanceof o.Node&&t.parent.canReplaceWith(n,n,e.type)},b=function(t){return!t||"paragraph"===t.type.name&&2===t.nodeSize},w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?t.createChecked(null,e):t.createAndFill()},x=function(t){return function(e){for(var n=i.TableMap.get(e.$anchorCell.node(-1)),r=e.$anchorCell.start(-1),o=n.cellsInRect(t),s=n.cellsInRect(n.rectBetween(e.$anchorCell.pos-r,e.$headCell.pos-r)),a=0,c=o.length;a<c;a++)if(-1===s.indexOf(o[a]))return!1;return!0}},S=function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))},C=function(t){for(var e=i.TableMap.get(t),n=[],r=0;r<e.height;r++){for(var o=[],s={},a=0;a<e.width;a++){var c=e.map[r*e.width+a],u=t.nodeAt(c),h=e.findCell(c);s[c]||h.top!==r?o.push(null):(s[c]=!0,o.push(u))}n.push(o)}return n},O=function(t,e){for(var n=[],r=i.TableMap.get(t),o=0;o<r.height;o++){for(var s=t.child(o),a=[],c=0;c<r.width;c++)if(e[o][c]){var u=r.map[o*r.width+c],h=e[o][c],l=t.nodeAt(u).type.createChecked(Object.assign({},h.attrs),h.content,h.marks);a.push(l)}n.push(s.type.createChecked(s.attrs,a,s.marks))}return t.type.createChecked(t.attrs,n,t.marks)},M=function(t,e,n,r){var o=e[0]>n[0]?-1:1,i=t.splice(e[0],e.length),s=i.length%2===0?1:0,a=void 0;return a=-1===r&&1===o?n[0]-1:1===r&&-1===o?n[n.length-1]-s+1:-1===o?n[0]:n[n.length-1]-s,t.splice.apply(t,[a,0].concat(i)),t},_=function(t,e,n,r){var o="Target position is invalid, you can't move the "+r+" "+t+" to "+e+", the target can't be split. You could use tryToFit option.";if(1===(t>e?-1:1)){if(-1!==n.slice(0,n.length-1).indexOf(e))throw new Error(o)}else if(-1!==n.slice(1).indexOf(e))throw new Error(o);return!0},T=function(t){return function(e){var n=e.$from;return E(n,t)}},E=function(t,e){for(var n=t.depth;n>0;n--){var r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}},N=function(t,e){return function(n){var r=T(t)(n);if(r)return I(r.pos,e)}},A=function(t){return function(e){return!!T(t)(e)}},z=function(t){return function(e){return T((function(e){return f(t,e)}))(e)}},R=function(t){var e=t.$from.nodeBefore,n=r.Selection.findFrom(t.$from,-1);if(n&&e){var o=z(e.type)(n);return o?o.pos:n.$from.pos}},I=function(t,e){var n=e(t),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},D=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)throw new Error('Invalid "node" parameter');var n=[];return t.descendants((function(t,r){if(n.push({node:t,pos:r}),!e)return!1})),n},j=function(t,e,n){if(!t)throw new Error('Invalid "node" parameter');if(!e)throw new Error('Invalid "predicate" parameter');return D(t,n).filter((function(t){return e(t.node)}))},F=function(t,e,n){return j(t,(function(t){return t.type===e}),n)};var P=function(t){return T((function(t){return t.type.spec.tableRole&&"table"===t.type.spec.tableRole}))(t)},B=function(t){return t instanceof i.CellSelection},q=function(t){if(B(t)){var e=i.TableMap.get(t.$anchorCell.node(-1));return x({left:0,right:e.width,top:0,bottom:e.height})(t)}return!1},$=function(t){return function(e){var n=P(e);if(n){var r=i.TableMap.get(n.node);return(Array.isArray(t)?t:Array.from([t])).reduce((function(t,e){if(e>=0&&e<=r.width-1){var o=r.cellsInRect({left:e,right:e+1,top:0,bottom:r.height});return t.concat(o.map((function(t){var e=n.node.nodeAt(t),r=t+n.start;return{pos:r,start:r+1,node:e}})))}}),[])}}},L=function(t){return function(e){var n=P(e);if(n){var r=i.TableMap.get(n.node);return(Array.isArray(t)?t:Array.from([t])).reduce((function(t,e){if(e>=0&&e<=r.height-1){var o=r.cellsInRect({left:0,right:r.width,top:e,bottom:e+1});return t.concat(o.map((function(t){var e=n.node.nodeAt(t),r=t+n.start;return{pos:r,start:r+1,node:e}})))}}),[])}}},J=function(t){return function(e,n){return function(r){var o=P(r.selection),s="row"===t;if(o){var a=i.TableMap.get(o.node);if(e>=0&&e<(s?a.height:a.width)){var c=s?0:e,u=s?e:0,h=s?a.width:e+1,l=s?e+1:a.height;if(n){var p=Y(r.selection.$from);if(!p)return r;var f=a.findCell(p.pos-o.start);s?(u=Math.min(u,f.top),l=Math.max(l,f.bottom)):(c=Math.min(c,f.left),h=Math.max(h,f.right))}var m=a.cellsInRect({left:c,top:u,right:s?h:c+1,bottom:s?u+1:l}),v=l-u===1?m:a.cellsInRect({left:s?c:h-1,top:s?l-1:u,right:h,bottom:l}),y=o.start+m[0],g=o.start+v[v.length-1],k=r.doc.resolve(y),b=r.doc.resolve(g);return d(r.setSelection(new i.CellSelection(b,k)))}}return r}}},V=J("column"),W=J("row"),H=function(t){return function(e){var n=P(e.selection);if(n){var r=i.TableMap.get(n.node);if(t>=0&&t<=r.height){for(var o=n.node,s=g(o.type.schema),a=n.start,c=0;c<t+1;c++)a+=o.child(c).nodeSize;var u=o.child(t),h=[],p=0;if(u.forEach((function(t){1===t.attrs.rowspan&&(p+=t.attrs.colspan,h.push(s[t.type.spec.tableRole].createAndFill(t.attrs,t.marks)))})),p<r.width){for(var f=[],d=function(n){var r=Q(n,(function(e,r){var o=e.node.attrs.rowspan;return o>1&&n+o>t}))(e);f.push.apply(f,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(r))},m=t;m>=0;m--)d(m);f.length&&f.forEach((function(t){e=G(t,{rowspan:t.node.attrs.rowspan+1})(e)}))}return l(s.row.create(u.attrs,h),a)(e)}}return e}},U=function(t){return function(e){var n=P(e.selection);if(n){var r=i.TableMap.get(n.node);if(0===t&&1===r.width)return Z(e);if(t>=0&&t<=r.width)return i.removeColumn(e,{map:r,tableStart:n.start,table:n.node},t),d(e)}return e}},K=function(t){return function(e){var n=P(e.selection);if(n){var r=i.TableMap.get(n.node);if(0===t&&1===r.height)return Z(e);if(t>=0&&t<=r.height)return i.removeRow(e,{map:r,tableStart:n.start,table:n.node},t),d(e)}return e}},Z=function(t){for(var e=t.selection.$from,n=e.depth;n>0;n--){if("table"===e.node(n).type.spec.tableRole)return d(t.delete(e.before(n),e.after(n)))}return t},G=function(t,e){return function(n){return t?(n.setNodeMarkup(t.pos,null,Object.assign({},t.node.attrs,e)),d(n)):n}},Y=function(t){return E(t,(function(t){return t.type.spec.tableRole&&/cell/i.test(t.type.spec.tableRole)}))},X=function(t){var e=Y(t);if(e){var n=function(t){return E(t,(function(t){return t.type.spec.tableRole&&/table/i.test(t.type.spec.tableRole)}))}(t),r=i.TableMap.get(n.node),o=e.pos-n.start;return r.rectBetween(o,o)}},Q=function(t,e){return function(n){var r=[],o=L(t)(n.selection);if(o)for(var i=o.length-1;i>=0;i--)e(o[i],n)&&r.push(o[i]);return r}},tt=function(t){return function(e){for(var n=t,r=t,o=function(t){var o=$(t)(e.selection);o&&o.forEach((function(e){var o=e.node.attrs.colspan+t-1;o>=n&&(n=t),o>r&&(r=o)}))},i=t;i>=0;i--)o(i);var s=function(t){var n=$(t)(e.selection);n&&n.forEach((function(e){var n=e.node.attrs.colspan+t-1;e.node.attrs.colspan>1&&n>r&&(r=n)}))};for(i=t;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var c=$(i)(e.selection);c&&c.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var u=$(n)(e.selection),h=L(0)(e.selection),l=e.doc.resolve(u[u.length-1].pos),p=void 0,f=r;f>=n;f--){var d=$(f)(e.selection);if(d&&d.length){for(var m=h.length-1;m>=0;m--)if(h[m].pos===d[0].pos){p=d[0];break}if(p)break}}return{$anchor:l,$head:e.doc.resolve(p.pos),indexes:a}}},et=function(t){return function(e){for(var n=t,r=t,o=function(t){L(t)(e.selection).forEach((function(e){var o=e.node.attrs.rowspan+t-1;o>=n&&(n=t),o>r&&(r=o)}))},i=t;i>=0;i--)o(i);var s=function(t){L(t)(e.selection).forEach((function(e){var n=e.node.attrs.rowspan+t-1;e.node.attrs.rowspan>1&&n>r&&(r=n)}))};for(i=t;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var c=L(i)(e.selection);c&&c.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var u=L(n)(e.selection),h=$(0)(e.selection),l=e.doc.resolve(u[u.length-1].pos),p=void 0,f=r;f>=n;f--){var d=L(f)(e.selection);if(d&&d.length){for(var m=h.length-1;m>=0;m--)if(h[m].pos===d[0].pos){p=d[0];break}if(p)break}}return{$anchor:l,$head:e.doc.resolve(p.pos),indexes:a}}};e.isNodeSelection=p,e.canInsert=k,e.convertTableNodeToArrayOfRows=C,e.convertArrayOfRowsToTableNode=O,e.findParentNode=T,e.findParentNodeClosestToPos=E,e.findParentDomRef=N,e.hasParentNode=A,e.findParentNodeOfType=z,e.findParentNodeOfTypeClosestToPos=function(t,e){return E(t,(function(t){return f(e,t)}))},e.hasParentNodeOfType=function(t){return function(e){return A((function(e){return f(t,e)}))(e)}},e.findParentDomRefOfType=function(t,e){return function(n){return N((function(e){return f(t,e)}),e)(n)}},e.findSelectedNodeOfType=function(t){return function(e){if(p(e)){var n=e.node,r=e.$from;if(f(t,n))return{node:n,pos:r.pos,depth:r.depth}}}},e.findPositionOfNodeBefore=R,e.findDomRefAtPos=I,e.flatten=D,e.findChildren=j,e.findTextNodes=function(t,e){return j(t,(function(t){return t.isText}),e)},e.findInlineNodes=function(t,e){return j(t,(function(t){return t.isInline}),e)},e.findBlockNodes=function(t,e){return j(t,(function(t){return t.isBlock}),e)},e.findChildrenByAttr=function(t,e,n){return j(t,(function(t){return!!e(t.attrs)}),n)},e.findChildrenByType=F,e.findChildrenByMark=function(t,e,n){return j(t,(function(t){return e.isInSet(t.marks)}),n)},e.contains=function(t,e){return!!F(t,e).length},e.findTable=P,e.isCellSelection=B,e.getSelectionRect=function(t){if(B(t)){var e=t.$anchorCell.start(-1);return i.TableMap.get(t.$anchorCell.node(-1)).rectBetween(t.$anchorCell.pos-e,t.$headCell.pos-e)}},e.isColumnSelected=function(t){return function(e){if(B(e)){var n=i.TableMap.get(e.$anchorCell.node(-1));return x({left:t,right:t+1,top:0,bottom:n.height})(e)}return!1}},e.isRowSelected=function(t){return function(e){if(B(e)){var n=i.TableMap.get(e.$anchorCell.node(-1));return x({left:0,right:n.width,top:t,bottom:t+1})(e)}return!1}},e.isTableSelected=q,e.getCellsInColumn=$,e.getCellsInRow=L,e.getCellsInTable=function(t){var e=P(t);if(e){var n=i.TableMap.get(e.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map((function(t){var n=e.node.nodeAt(t),r=t+e.start;return{pos:r,start:r+1,node:n}}))}},e.selectColumn=V,e.selectRow=W,e.selectTable=function(t){var e=P(t.selection);if(e){var n=i.TableMap.get(e.node).map;if(n&&n.length){var r=e.start+n[0],o=e.start+n[n.length-1],s=t.doc.resolve(r),a=t.doc.resolve(o);return d(t.setSelection(new i.CellSelection(a,s)))}}return t},e.emptyCell=function(t,e){return function(n){if(t){var r=g(e).cell.createAndFill().content;if(!t.node.content.eq(r))return n.replaceWith(t.pos+1,t.pos+t.node.nodeSize,r),d(n)}return n}},e.addColumnAt=function(t){return function(e){var n=P(e.selection);if(n){var r=i.TableMap.get(n.node);if(t>=0&&t<=r.width)return d(i.addColumn(e,{map:r,tableStart:n.start,table:n.node},t))}return e}},e.moveRow=function(t,e,n){return function(r){var o=Object.assign({tryToFit:!1,direction:0},n),i=P(r.selection);if(!i)return r;var s=et(t)(r).indexes,a=et(e)(r).indexes;if(s.indexOf(e)>-1)return r;!o.tryToFit&&a.length>1&&_(t,e,a,"row");var c=function(t,e,n,r){var o=C(t.node);return o=M(o,e,n,r),O(t.node,o)}(i,s,a,o.direction);return d(r).replaceWith(i.pos,i.pos+i.node.nodeSize,c)}},e.moveColumn=function(t,e,n){return function(r){var o=Object.assign({tryToFit:!1,direction:0},n),i=P(r.selection);if(!i)return r;var s=tt(t)(r).indexes,a=tt(e)(r).indexes;if(s.indexOf(e)>-1)return r;!o.tryToFit&&a.length>1&&_(t,e,a,"column");var c=function(t,e,n,r){var o=S(C(t.node));return o=M(o,e,n,r),o=S(o),O(t.node,o)}(i,s,a,o.direction);return d(r).replaceWith(i.pos,i.pos+i.node.nodeSize,c)}},e.addRowAt=function(t,e){return function(n){var r=P(n.selection);if(r){var o=i.TableMap.get(r.node),s=t-1;if(e&&s>=0)return d(H(s)(n));if(t>=0&&t<=o.height)return d(i.addRow(n,{map:o,tableStart:r.start,table:r.node},t))}return n}},e.cloneRowAt=H,e.removeColumnAt=U,e.removeRowAt=K,e.removeTable=Z,e.removeSelectedColumns=function(t){var e=t.selection;if(q(e))return Z(t);if(B(e)){var n=P(e);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(e.$anchorCell.pos-n.start,e.$headCell.pos-n.start);if(0==o.left&&o.right==r.width)return!1;for(var s=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=s.right-1;i.removeColumn(t,s,a),a!==s.left;a--)s.table=s.tableStart?t.doc.nodeAt(s.tableStart-1):t.doc,s.map=i.TableMap.get(s.table);return d(t)}}return t},e.removeSelectedRows=function(t){var e=t.selection;if(q(e))return Z(t);if(B(e)){var n=P(e);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(e.$anchorCell.pos-n.start,e.$headCell.pos-n.start);if(0==o.top&&o.bottom==r.height)return!1;for(var s=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=s.bottom-1;i.removeRow(t,s,a),a!==s.top;a--)s.table=s.tableStart?t.doc.nodeAt(s.tableStart-1):t.doc,s.map=i.TableMap.get(s.table);return d(t)}}return t},e.removeColumnClosestToPos=function(t){return function(e){var n=X(t);return n?U(n.left)(c(t.pos)(e)):e}},e.removeRowClosestToPos=function(t){return function(e){var n=X(t);return n?K(n.top)(c(t.pos)(e)):e}},e.forEachCellInColumn=function(t,e,n){return function(o){var i=$(t)(o.selection);if(i){for(var s=i.length-1;s>=0;s--)o=e(i[s],o);if(n){var a=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(a))}return d(o)}return o}},e.forEachCellInRow=function(t,e,n){return function(o){var i=L(t)(o.selection);if(i){for(var s=i.length-1;s>=0;s--)o=e(i[s],o);if(n){var a=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(a))}}return o}},e.setCellAttrs=G,e.createTable=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=g(t),s=i.cell,a=i.header_cell,c=i.row,u=i.table,h=[],l=[],p=0;p<n;p++)h.push(w(s,o)),r&&l.push(w(a,o));for(var f=[],d=0;d<e;d++)f.push(c.createChecked(null,r&&0===d?l:h));return u.createChecked(null,f)},e.findCellClosestToPos=Y,e.findCellRectClosestToPos=X,e.getSelectionRangeInColumn=tt,e.getSelectionRangeInRow=et,e.removeParentNodeOfType=function(t){return function(e){var n=z(t)(e.selection);return n?y(n.pos)(e):e}},e.replaceParentNodeOfType=s,e.removeSelectedNode=function(t){if(p(t.selection)){var e=t.selection.$from.pos,n=t.selection.$to.pos;return d(t.delete(e,n))}return t},e.replaceSelectedNode=a,e.setTextSelection=c,e.safeInsert=l,e.setParentNodeMarkup=function(t,e,n,r){return function(o){var i=z(t)(o.selection);return i?d(o.setNodeMarkup(i.pos,e,Object.assign({},i.node.attrs,n),r)):o}},e.selectParentNodeOfType=function(t){return function(e){if(!p(e.selection)){var n=z(t)(e.selection);if(n)return d(e.setSelection(r.NodeSelection.create(e.doc,n.pos)))}return e}},e.removeNodeBefore=function(t){var e=R(t.selection);return"number"===typeof e?y(e)(t):t}},962:function(t,e,n){"use strict";n.r(e),n.d(e,"addListNodes",(function(){return p})),n.d(e,"bulletList",(function(){return u})),n.d(e,"liftListItem",(function(){return m})),n.d(e,"listItem",(function(){return h})),n.d(e,"orderedList",(function(){return c})),n.d(e,"sinkListItem",(function(){return v})),n.d(e,"splitListItem",(function(){return d})),n.d(e,"wrapInList",(function(){return f}));var r=n(78),o=n(21),i=["ol",0],s=["ul",0],a=["li",0],c={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1}}}],toDOM:function(t){return 1==t.attrs.order?i:["ol",{start:t.attrs.order},0]}},u={parseDOM:[{tag:"ul"}],toDOM:function(){return s}},h={parseDOM:[{tag:"li"}],toDOM:function(){return a},defining:!0};function l(t,e){var n={};for(var r in t)n[r]=t[r];for(var o in e)n[o]=e[o];return n}function p(t,e,n){return t.append({ordered_list:l(c,{content:"list_item+",group:n}),bullet_list:l(u,{content:"list_item+",group:n}),list_item:l(h,{content:e})})}function f(t,e){return function(n,i){var s=n.selection,a=s.$from,c=s.$to,u=a.blockRange(c),h=!1,l=u;if(!u)return!1;if(u.depth>=2&&a.node(u.depth-1).type.compatibleContent(t)&&0==u.startIndex){if(0==a.index(u.depth-1))return!1;var p=n.doc.resolve(u.start-2);l=new o.NodeRange(p,p,u.depth),u.endIndex<u.parent.childCount&&(u=new o.NodeRange(a,n.doc.resolve(c.end(u.depth)),u.depth)),h=!0}var f=Object(r.h)(l,t,e,u);return!!f&&(i&&i(function(t,e,n,i,s){for(var a=o.Fragment.empty,c=n.length-1;c>=0;c--)a=o.Fragment.from(n[c].type.create(n[c].attrs,a));t.step(new r.b(e.start-(i?2:0),e.end,e.start,e.end,new o.Slice(a,0,0),n.length,!0));for(var u=0,h=0;h<n.length;h++)n[h].type==s&&(u=h+1);for(var l=n.length-u,p=e.start+n.length-(i?2:0),f=e.parent,d=e.startIndex,m=e.endIndex,v=!0;d<m;d++,v=!1)!v&&Object(r.f)(t.doc,p,l)&&(t.split(p,l),p+=2*l),p+=f.child(d).nodeSize;return t}(n.tr,u,f,h,t).scrollIntoView()),!0)}}function d(t){return function(e,n){var i=e.selection,s=i.$from,a=i.$to,c=i.node;if(c&&c.isBlock||s.depth<2||!s.sameParent(a))return!1;var u=s.node(-1);if(u.type!=t)return!1;if(0==s.parent.content.size&&s.node(-1).childCount==s.indexAfter(-1)){if(2==s.depth||s.node(-3).type!=t||s.index(-2)!=s.node(-2).childCount-1)return!1;if(n){for(var h=o.Fragment.empty,l=s.index(-1)>0,p=s.depth-(l?1:2);p>=s.depth-3;p--)h=o.Fragment.from(s.node(p).copy(h));h=h.append(o.Fragment.from(t.createAndFill()));var f=e.tr.replace(s.before(l?null:-1),s.after(-3),new o.Slice(h,l?3:2,2));f.setSelection(e.selection.constructor.near(f.doc.resolve(s.pos+(l?3:2)))),n(f.scrollIntoView())}return!0}var d=a.pos==s.end()?u.contentMatchAt(0).defaultType:null,m=e.tr.delete(s.pos,a.pos),v=d&&[null,{type:d}];return!!Object(r.f)(m.doc,s.pos,2,v)&&(n&&n(m.split(s.pos,2,v).scrollIntoView()),!0)}}function m(t){return function(e,n){var i=e.selection,s=i.$from,a=i.$to,c=s.blockRange(a,(function(e){return e.childCount&&e.firstChild.type==t}));return!!c&&(!n||(s.node(c.depth-1).type==t?function(t,e,n,i){var s=t.tr,a=i.end,c=i.$to.end(i.depth);a<c&&(s.step(new r.b(a-1,c,a,c,new o.Slice(o.Fragment.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new o.NodeRange(s.doc.resolve(i.$from.pos),s.doc.resolve(c),i.depth));return e(s.lift(i,Object(r.j)(i)).scrollIntoView()),!0}(e,n,t,c):function(t,e,n){for(var i=t.tr,s=n.parent,a=n.end,c=n.endIndex-1,u=n.startIndex;c>u;c--)a-=s.child(c).nodeSize,i.delete(a-1,a+1);var h=i.doc.resolve(n.start),l=h.nodeAfter,p=0==n.startIndex,f=n.endIndex==s.childCount,d=h.node(-1),m=h.index(-1);if(!d.canReplace(m+(p?0:1),m+1,l.content.append(f?o.Fragment.empty:o.Fragment.from(s))))return!1;var v=h.pos,y=v+l.nodeSize;return i.step(new r.b(v-(p?1:0),y+(f?1:0),v+1,y-1,new o.Slice((p?o.Fragment.empty:o.Fragment.from(s.copy(o.Fragment.empty))).append(f?o.Fragment.empty:o.Fragment.from(s.copy(o.Fragment.empty))),p?0:1,f?0:1),p?0:1)),e(i.scrollIntoView()),!0}(e,n,c)))}}function v(t){return function(e,n){var i=e.selection,s=i.$from,a=i.$to,c=s.blockRange(a,(function(e){return e.childCount&&e.firstChild.type==t}));if(!c)return!1;var u=c.startIndex;if(0==u)return!1;var h=c.parent,l=h.child(u-1);if(l.type!=t)return!1;if(n){var p=l.lastChild&&l.lastChild.type==h.type,f=o.Fragment.from(p?t.create():null),d=new o.Slice(o.Fragment.from(t.create(null,o.Fragment.from(h.type.create(null,f)))),p?3:1,0),m=c.start,v=c.end;n(e.tr.step(new r.b(m-(p?3:1),v,m,v,d,1,!0)).scrollIntoView())}return!0}}},963:function(t,e,n){"use strict";n.r(e),n.d(e,"MarkdownParser",(function(){return p})),n.d(e,"MarkdownSerializer",(function(){return m})),n.d(e,"MarkdownSerializerState",(function(){return k})),n.d(e,"defaultMarkdownParser",(function(){return d})),n.d(e,"defaultMarkdownSerializer",(function(){return v})),n.d(e,"schema",(function(){return s}));var r=n(21),o=n(771),i=n.n(o),s=new r.Schema({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(t){return{params:t.getAttribute("data-params")||""}}}],toDOM:function(t){return["pre",t.attrs.params?{"data-params":t.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:function(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1,tight:t.hasAttribute("data-tight")}}}],toDOM:function(t){return["ol",{start:1==t.attrs.order?null:t.attrs.order,"data-tight":t.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:function(t){return{tight:t.hasAttribute("data-tight")}}}],toDOM:function(t){return["ul",{"data-tight":t.attrs.tight?"true":null},0]}},list_item:{content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM:function(t){return["img",t.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:function(t){return"italic"==t&&null}}],toDOM:function(){return["em"]}},strong:{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function(t){return["a",t.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}}});var a=function(t,e){this.schema=t,this.stack=[{type:t.topNodeType,content:[]}],this.marks=r.Mark.none,this.tokenHandlers=e};function c(t,e,n,r){return t.getAttrs?t.getAttrs(e,n,r):t.attrs instanceof Function?t.attrs(e):t.attrs}function u(t,e){return t.noCloseToken||"code_inline"==e||"code_block"==e||"fence"==e}function h(t){return"\n"==t[t.length-1]?t.slice(0,t.length-1):t}function l(){}a.prototype.top=function(){return this.stack[this.stack.length-1]},a.prototype.push=function(t){this.stack.length&&this.top().content.push(t)},a.prototype.addText=function(t){if(t){var e,n=this.top().content,o=n[n.length-1],i=this.schema.text(t,this.marks);o&&(e=function(t,e){if(t.isText&&e.isText&&r.Mark.sameSet(t.marks,e.marks))return t.withText(t.text+e.text)}(o,i))?n[n.length-1]=e:n.push(i)}},a.prototype.openMark=function(t){this.marks=t.addToSet(this.marks)},a.prototype.closeMark=function(t){this.marks=t.removeFromSet(this.marks)},a.prototype.parseTokens=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.tokenHandlers[n.type];if(!r)throw new Error("Token type `"+n.type+"` not supported by Markdown parser");r(this,n,t,e)}},a.prototype.addNode=function(t,e,n){var r=t.createAndFill(e,n,this.marks);return r?(this.push(r),r):null},a.prototype.openNode=function(t,e){this.stack.push({type:t,attrs:e,content:[]})},a.prototype.closeNode=function(){this.marks.length&&(this.marks=r.Mark.none);var t=this.stack.pop();return this.addNode(t.type,t.attrs,t.content)};var p=function(t,e,n){this.tokens=n,this.schema=t,this.tokenizer=e,this.tokenHandlers=function(t,e){var n=Object.create(null),r=function(r){var o=e[r];if(o.block){var i=t.nodeType(o.block);u(o,r)?n[r]=function(t,e,n,r){t.openNode(i,c(o,e,n,r)),t.addText(h(e.content)),t.closeNode()}:(n[r+"_open"]=function(t,e,n,r){return t.openNode(i,c(o,e,n,r))},n[r+"_close"]=function(t){return t.closeNode()})}else if(o.node){var s=t.nodeType(o.node);n[r]=function(t,e,n,r){return t.addNode(s,c(o,e,n,r))}}else if(o.mark){var a=t.marks[o.mark];u(o,r)?n[r]=function(t,e,n,r){t.openMark(a.create(c(o,e,n,r))),t.addText(h(e.content)),t.closeMark(a)}:(n[r+"_open"]=function(t,e,n,r){return t.openMark(a.create(c(o,e,n,r)))},n[r+"_close"]=function(t){return t.closeMark(a)})}else{if(!o.ignore)throw new RangeError("Unrecognized parsing spec "+JSON.stringify(o));u(o,r)?n[r]=l:(n[r+"_open"]=l,n[r+"_close"]=l)}};for(var o in e)r(o);return n.text=function(t,e){return t.addText(e.content)},n.inline=function(t,e){return t.parseTokens(e.children)},n.softbreak=n.softbreak||function(t){return t.addText("\n")},n}(t,n)};function f(t,e){for(;++e<t.length;)if("list_item_open"!=t[e].type)return t[e].hidden;return!1}p.prototype.parse=function(t){var e,n=new a(this.schema,this.tokenHandlers);n.parseTokens(this.tokenizer.parse(t,{}));do{e=n.closeNode()}while(n.stack.length);return e};var d=new p(s,i()("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:function(t,e,n){return{tight:f(e,n)}}},ordered_list:{block:"ordered_list",getAttrs:function(t,e,n){return{order:+t.attrGet("start")||1,tight:f(e,n)}}},heading:{block:"heading",getAttrs:function(t){return{level:+t.tag.slice(1)}}},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:function(t){return{params:t.info||""}},noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:function(t){return{src:t.attrGet("src"),title:t.attrGet("title")||null,alt:t.children[0]&&t.children[0].content||null}}},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:function(t){return{href:t.attrGet("href"),title:t.attrGet("title")||null}}},code_inline:{mark:"code",noCloseToken:!0}}),m=function(t,e){this.nodes=t,this.marks=e};m.prototype.serialize=function(t,e){var n=new k(this.nodes,this.marks,e);return n.renderContent(t),n.out};var v=new m({blockquote:function(t,e){t.wrapBlock("> ",null,e,(function(){return t.renderContent(e)}))},code_block:function(t,e){t.write("```"+(e.attrs.params||"")+"\n"),t.text(e.textContent,!1),t.ensureNewLine(),t.write("```"),t.closeBlock(e)},heading:function(t,e){t.write(t.repeat("#",e.attrs.level)+" "),t.renderInline(e),t.closeBlock(e)},horizontal_rule:function(t,e){t.write(e.attrs.markup||"---"),t.closeBlock(e)},bullet_list:function(t,e){t.renderList(e,"  ",(function(){return(e.attrs.bullet||"*")+" "}))},ordered_list:function(t,e){var n=e.attrs.order||1,r=String(n+e.childCount-1).length,o=t.repeat(" ",r+2);t.renderList(e,o,(function(e){var o=String(n+e);return t.repeat(" ",r-o.length)+o+". "}))},list_item:function(t,e){t.renderContent(e)},paragraph:function(t,e){t.renderInline(e),t.closeBlock(e)},image:function(t,e){t.write("!["+t.esc(e.attrs.alt||"")+"]("+t.esc(e.attrs.src)+(e.attrs.title?" "+t.quote(e.attrs.title):"")+")")},hard_break:function(t,e,n,r){for(var o=r+1;o<n.childCount;o++)if(n.child(o).type!=e.type)return void t.write("\\\n")},text:function(t,e){t.text(e.text)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open:function(t,e,n,r){return g(e,n,r,1)?"<":"["},close:function(t,e,n,r){return g(e,n,r,-1)?">":"]("+t.esc(e.attrs.href)+(e.attrs.title?" "+t.quote(e.attrs.title):"")+")"}},code:{open:function(t,e,n,r){return y(n.child(r),-1)},close:function(t,e,n,r){return y(n.child(r-1),1)},escape:!1}});function y(t,e){var n,r=/`+/g,o=0;if(t.isText)for(;n=r.exec(t.text);)o=Math.max(o,n[0].length);for(var i=o>0&&e>0?" `":"`",s=0;s<o;s++)i+="`";return o>0&&e<0&&(i+=" "),i}function g(t,e,n,r){if(t.attrs.title||!/^\w+:/.test(t.attrs.href))return!1;var o=e.child(n+(r<0?-1:0));if(!o.isText||o.text!=t.attrs.href||o.marks[o.marks.length-1]!=t)return!1;if(n==(r<0?1:e.childCount-1))return!0;var i=e.child(n+(r<0?-2:1));return!t.isInSet(i.marks)}var k=function(t,e,n){this.nodes=t,this.marks=e,this.delim=this.out="",this.closed=!1,this.inTightList=!1,this.options=n||{},"undefined"==typeof this.options.tightLists&&(this.options.tightLists=!1)};k.prototype.flushClose=function(t){if(this.closed){if(this.atBlank()||(this.out+="\n"),null==t&&(t=2),t>1){var e=this.delim,n=/\s+$/.exec(e);n&&(e=e.slice(0,e.length-n[0].length));for(var r=1;r<t;r++)this.out+=e+"\n"}this.closed=!1}},k.prototype.wrapBlock=function(t,e,n,r){var o=this.delim;this.write(e||t),this.delim+=t,r(),this.delim=o,this.closeBlock(n)},k.prototype.atBlank=function(){return/(^|\n)$/.test(this.out)},k.prototype.ensureNewLine=function(){this.atBlank()||(this.out+="\n")},k.prototype.write=function(t){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),t&&(this.out+=t)},k.prototype.closeBlock=function(t){this.closed=t},k.prototype.text=function(t,e){for(var n=t.split("\n"),r=0;r<n.length;r++){var o=this.atBlank()||this.closed;this.write(),this.out+=!1!==e?this.esc(n[r],o):n[r],r!=n.length-1&&(this.out+="\n")}},k.prototype.render=function(t,e,n){if("number"==typeof e)throw new Error("!");if(!this.nodes[t.type.name])throw new Error("Token type `"+t.type.name+"` not supported by Markdown renderer");this.nodes[t.type.name](this,t,e,n)},k.prototype.renderContent=function(t){var e=this;t.forEach((function(n,r,o){return e.render(n,t,o)}))},k.prototype.renderInline=function(t){var e=this,n=[],r="",o=function(o,i,s){var a=o?o.marks:[];o&&"hard_break"===o.type.name&&(a=a.filter((function(e){if(s+1==t.childCount)return!1;var n=t.child(s+1);return e.isInSet(n.marks)&&(!n.isText||/\S/.test(n.text))})));var c=r;if(r="",o&&o.isText&&a.some((function(t){var n=e.marks[t.type.name];return n&&n.expelEnclosingWhitespace}))){var u=/^(\s*)(.*?)(\s*)$/m.exec(o.text),h=(u[0],u[1]),l=u[2],p=u[3];c+=h,r=p,(h||p)&&((o=l?o.withText(l):null)||(a=n))}var f=a.length&&a[a.length-1],d=f&&!1===e.marks[f.type.name].escape,m=a.length-(d?1:0);t:for(var v=0;v<m;v++){var y=a[v];if(!e.marks[y.type.name].mixable)break;for(var g=0;g<n.length;g++){var k=n[g];if(!e.marks[k.type.name].mixable)break;if(y.eq(k)){v>g?a=a.slice(0,g).concat(y).concat(a.slice(g,v)).concat(a.slice(v+1,m)):g>v&&(a=a.slice(0,v).concat(a.slice(v+1,g)).concat(y).concat(a.slice(g,m)));continue t}}}for(var b=0;b<Math.min(n.length,m)&&a[b].eq(n[b]);)++b;for(;b<n.length;)e.text(e.markString(n.pop(),!1,t,s),!1);if(c&&e.text(c),o){for(;n.length<m;){var w=a[n.length];n.push(w),e.text(e.markString(w,!0,t,s),!1)}d&&o.isText?e.text(e.markString(f,!0,t,s)+o.text+e.markString(f,!1,t,s+1),!1):e.render(o,t,s)}};t.forEach(o),o(null,0,t.childCount)},k.prototype.renderList=function(t,e,n){var r=this;this.closed&&this.closed.type==t.type?this.flushClose(3):this.inTightList&&this.flushClose(1);var o="undefined"!=typeof t.attrs.tight?t.attrs.tight:this.options.tightLists,i=this.inTightList;this.inTightList=o,t.forEach((function(i,s,a){a&&o&&r.flushClose(1),r.wrapBlock(e,n(a),t,(function(){return r.render(i,t,a)}))})),this.inTightList=i},k.prototype.esc=function(t,e){return t=t.replace(/[`*\\~\[\]]/g,"\\$&"),e&&(t=t.replace(/^[:#\-*+]/,"\\$&").replace(/^(\s*\d+)\./,"$1\\.")),t},k.prototype.quote=function(t){var e=-1==t.indexOf('"')?'""':-1==t.indexOf("'")?"''":"()";return e[0]+t+e[1]},k.prototype.repeat=function(t,e){for(var n="",r=0;r<e;r++)n+=t;return n},k.prototype.markString=function(t,e,n,r){var o=this.marks[t.type.name],i=e?o.open:o.close;return"string"==typeof i?i:i(this,t,n,r)},k.prototype.getEnclosingWhitespace=function(t){return{leading:(t.match(/^(\s+)/)||[])[0],trailing:(t.match(/(\s+)$/)||[])[0]}}},964:function(t,e,n){"use strict";var r=n(107),o=n(966),i=n(970),s=n(971),a=n(979),c=n(993),u=n(1006),h=n(322),l=n(607),p={default:n(1008),zero:n(1009),commonmark:n(1010)},f=/^(vbscript|javascript|file|data):/,d=/^data:image\/(gif|png|jpeg|webp);/;function m(t){var e=t.trim().toLowerCase();return!f.test(e)||!!d.test(e)}var v=["http:","https:","mailto:"];function y(t){var e=h.parse(t,!0);if(e.hostname&&(!e.protocol||v.indexOf(e.protocol)>=0))try{e.hostname=l.toASCII(e.hostname)}catch(n){}return h.encode(h.format(e))}function g(t){var e=h.parse(t,!0);if(e.hostname&&(!e.protocol||v.indexOf(e.protocol)>=0))try{e.hostname=l.toUnicode(e.hostname)}catch(n){}return h.decode(h.format(e))}function k(t,e){if(!(this instanceof k))return new k(t,e);e||r.isString(t)||(e=t||{},t="default"),this.inline=new c,this.block=new a,this.core=new s,this.renderer=new i,this.linkify=new u,this.validateLink=m,this.normalizeLink=y,this.normalizeLinkText=g,this.utils=r,this.helpers=r.assign({},o),this.options={},this.configure(t),e&&this.set(e)}k.prototype.set=function(t){return r.assign(this.options,t),this},k.prototype.configure=function(t){var e,n=this;if(r.isString(t)&&!(t=p[e=t]))throw new Error('Wrong `markdown-it` preset "'+e+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&n.set(t.options),t.components&&Object.keys(t.components).forEach((function(e){t.components[e].rules&&n[e].ruler.enableOnly(t.components[e].rules),t.components[e].rules2&&n[e].ruler2.enableOnly(t.components[e].rules2)})),this},k.prototype.enable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach((function(e){n=n.concat(this[e].ruler.enable(t,!0))}),this),n=n.concat(this.inline.ruler2.enable(t,!0));var r=t.filter((function(t){return n.indexOf(t)<0}));if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},k.prototype.disable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach((function(e){n=n.concat(this[e].ruler.disable(t,!0))}),this),n=n.concat(this.inline.ruler2.disable(t,!0));var r=t.filter((function(t){return n.indexOf(t)<0}));if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},k.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this},k.prototype.parse=function(t,e){if("string"!==typeof t)throw new Error("Input data should be a String");var n=new this.core.State(t,this,e);return this.core.process(n),n.tokens},k.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)},k.prototype.parseInline=function(t,e){var n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens},k.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)},t.exports=k},965:function(t){t.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\ud835\udd04","afr":"\ud835\udd1e","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\ud835\udd38","aopf":"\ud835\udd52","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\ud835\udc9c","ascr":"\ud835\udcb6","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\ud835\udd05","bfr":"\ud835\udd1f","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\ud835\udd39","bopf":"\ud835\udd53","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\ud835\udcb7","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\ud835\udd20","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\ud835\udd54","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\ud835\udc9e","cscr":"\ud835\udcb8","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\ud835\udd07","dfr":"\ud835\udd21","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\ud835\udd3b","dopf":"\ud835\udd55","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\ud835\udc9f","dscr":"\ud835\udcb9","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\ud835\udd08","efr":"\ud835\udd22","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\ud835\udd3c","eopf":"\ud835\udd56","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\ud835\udd09","ffr":"\ud835\udd23","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\ud835\udd3d","fopf":"\ud835\udd57","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\ud835\udcbb","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\ud835\udd0a","gfr":"\ud835\udd24","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\ud835\udd3e","gopf":"\ud835\udd58","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\ud835\udca2","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\ud835\udd25","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\ud835\udd59","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\ud835\udcbd","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\ud835\udd26","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\ud835\udd40","iopf":"\ud835\udd5a","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\ud835\udcbe","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\ud835\udd0d","jfr":"\ud835\udd27","jmath":"\u0237","Jopf":"\ud835\udd41","jopf":"\ud835\udd5b","Jscr":"\ud835\udca5","jscr":"\ud835\udcbf","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\ud835\udd0e","kfr":"\ud835\udd28","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\ud835\udd42","kopf":"\ud835\udd5c","Kscr":"\ud835\udca6","kscr":"\ud835\udcc0","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\ud835\udd0f","lfr":"\ud835\udd29","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\ud835\udd43","lopf":"\ud835\udd5d","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\ud835\udcc1","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\ud835\udd10","mfr":"\ud835\udd2a","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\ud835\udd44","mopf":"\ud835\udd5e","mp":"\u2213","mscr":"\ud835\udcc2","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\ud835\udd11","nfr":"\ud835\udd2b","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\ud835\udd5f","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\ud835\udca9","nscr":"\ud835\udcc3","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\ud835\udd12","ofr":"\ud835\udd2c","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\ud835\udd46","oopf":"\ud835\udd60","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\ud835\udcaa","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\ud835\udd13","pfr":"\ud835\udd2d","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\ud835\udd61","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\ud835\udcab","pscr":"\ud835\udcc5","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\ud835\udd14","qfr":"\ud835\udd2e","qint":"\u2a0c","qopf":"\ud835\udd62","Qopf":"\u211a","qprime":"\u2057","Qscr":"\ud835\udcac","qscr":"\ud835\udcc6","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\ud835\udd2f","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\ud835\udd63","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\ud835\udcc7","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\ud835\udd16","sfr":"\ud835\udd30","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\ud835\udd4a","sopf":"\ud835\udd64","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\ud835\udcae","sscr":"\ud835\udcc8","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\ud835\udd17","tfr":"\ud835\udd31","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\ud835\udd4b","topf":"\ud835\udd65","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\ud835\udcaf","tscr":"\ud835\udcc9","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\ud835\udd18","ufr":"\ud835\udd32","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\ud835\udd4c","uopf":"\ud835\udd66","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\ud835\udcb0","uscr":"\ud835\udcca","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\ud835\udd19","vfr":"\ud835\udd33","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\ud835\udd4d","vopf":"\ud835\udd67","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\ud835\udcb1","vscr":"\ud835\udccb","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\ud835\udd1a","wfr":"\ud835\udd34","Wopf":"\ud835\udd4e","wopf":"\ud835\udd68","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\ud835\udcb2","wscr":"\ud835\udccc","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\ud835\udd1b","xfr":"\ud835\udd35","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\ud835\udd4f","xopf":"\ud835\udd69","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\ud835\udcb3","xscr":"\ud835\udccd","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\ud835\udd1c","yfr":"\ud835\udd36","YIcy":"\u0407","yicy":"\u0457","Yopf":"\ud835\udd50","yopf":"\ud835\udd6a","Yscr":"\ud835\udcb4","yscr":"\ud835\udcce","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\ud835\udd37","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\ud835\udd6b","Zopf":"\u2124","Zscr":"\ud835\udcb5","zscr":"\ud835\udccf","zwj":"\u200d","zwnj":"\u200c"}')},966:function(t,e,n){"use strict";e.parseLinkLabel=n(967),e.parseLinkDestination=n(968),e.parseLinkTitle=n(969)},967:function(t,e,n){"use strict";t.exports=function(t,e,n){var r,o,i,s,a=-1,c=t.posMax,u=t.pos;for(t.pos=e+1,r=1;t.pos<c;){if(93===(i=t.src.charCodeAt(t.pos))&&0===--r){o=!0;break}if(s=t.pos,t.md.inline.skipToken(t),91===i)if(s===t.pos-1)r++;else if(n)return t.pos=u,-1}return o&&(a=t.pos),t.pos=u,a}},968:function(t,e,n){"use strict";var r=n(107).unescapeAll;t.exports=function(t,e,n){var o,i,s=e,a={ok:!1,pos:0,lines:0,str:""};if(60===t.charCodeAt(e)){for(e++;e<n;){if(10===(o=t.charCodeAt(e)))return a;if(62===o)return a.pos=e+1,a.str=r(t.slice(s+1,e)),a.ok=!0,a;92===o&&e+1<n?e+=2:e++}return a}for(i=0;e<n&&32!==(o=t.charCodeAt(e))&&!(o<32||127===o);)if(92===o&&e+1<n)e+=2;else{if(40===o&&i++,41===o){if(0===i)break;i--}e++}return s===e||0!==i||(a.str=r(t.slice(s,e)),a.lines=0,a.pos=e,a.ok=!0),a}},969:function(t,e,n){"use strict";var r=n(107).unescapeAll;t.exports=function(t,e,n){var o,i,s=0,a=e,c={ok:!1,pos:0,lines:0,str:""};if(e>=n)return c;if(34!==(i=t.charCodeAt(e))&&39!==i&&40!==i)return c;for(e++,40===i&&(i=41);e<n;){if((o=t.charCodeAt(e))===i)return c.pos=e+1,c.lines=s,c.str=r(t.slice(a+1,e)),c.ok=!0,c;10===o?s++:92===o&&e+1<n&&(e++,10===t.charCodeAt(e)&&s++),e++}return c}},970:function(t,e,n){"use strict";var r=n(107).assign,o=n(107).unescapeAll,i=n(107).escapeHtml,s={};function a(){this.rules=r({},s)}s.code_inline=function(t,e,n,r,o){var s=t[e];return"<code"+o.renderAttrs(s)+">"+i(t[e].content)+"</code>"},s.code_block=function(t,e,n,r,o){var s=t[e];return"<pre"+o.renderAttrs(s)+"><code>"+i(t[e].content)+"</code></pre>\n"},s.fence=function(t,e,n,r,s){var a,c,u,h,l=t[e],p=l.info?o(l.info).trim():"",f="";return p&&(f=p.split(/\s+/g)[0]),0===(a=n.highlight&&n.highlight(l.content,f)||i(l.content)).indexOf("<pre")?a+"\n":p?(c=l.attrIndex("class"),u=l.attrs?l.attrs.slice():[],c<0?u.push(["class",n.langPrefix+f]):u[c][1]+=" "+n.langPrefix+f,h={attrs:u},"<pre><code"+s.renderAttrs(h)+">"+a+"</code></pre>\n"):"<pre><code"+s.renderAttrs(l)+">"+a+"</code></pre>\n"},s.image=function(t,e,n,r,o){var i=t[e];return i.attrs[i.attrIndex("alt")][1]=o.renderInlineAsText(i.children,n,r),o.renderToken(t,e,n)},s.hardbreak=function(t,e,n){return n.xhtmlOut?"<br />\n":"<br>\n"},s.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},s.text=function(t,e){return i(t[e].content)},s.html_block=function(t,e){return t[e].content},s.html_inline=function(t,e){return t[e].content},a.prototype.renderAttrs=function(t){var e,n,r;if(!t.attrs)return"";for(r="",e=0,n=t.attrs.length;e<n;e++)r+=" "+i(t.attrs[e][0])+'="'+i(t.attrs[e][1])+'"';return r},a.prototype.renderToken=function(t,e,n){var r,o="",i=!1,s=t[e];return s.hidden?"":(s.block&&-1!==s.nesting&&e&&t[e-1].hidden&&(o+="\n"),o+=(-1===s.nesting?"</":"<")+s.tag,o+=this.renderAttrs(s),0===s.nesting&&n.xhtmlOut&&(o+=" /"),s.block&&(i=!0,1===s.nesting&&e+1<t.length&&("inline"===(r=t[e+1]).type||r.hidden||-1===r.nesting&&r.tag===s.tag)&&(i=!1)),o+=i?">\n":">")},a.prototype.renderInline=function(t,e,n){for(var r,o="",i=this.rules,s=0,a=t.length;s<a;s++)"undefined"!==typeof i[r=t[s].type]?o+=i[r](t,s,e,n,this):o+=this.renderToken(t,s,e);return o},a.prototype.renderInlineAsText=function(t,e,n){for(var r="",o=0,i=t.length;o<i;o++)"text"===t[o].type?r+=t[o].content:"image"===t[o].type&&(r+=this.renderInlineAsText(t[o].children,e,n));return r},a.prototype.render=function(t,e,n){var r,o,i,s="",a=this.rules;for(r=0,o=t.length;r<o;r++)"inline"===(i=t[r].type)?s+=this.renderInline(t[r].children,e,n):"undefined"!==typeof a[i]?s+=a[t[r].type](t,r,e,n,this):s+=this.renderToken(t,r,e,n);return s},t.exports=a},971:function(t,e,n){"use strict";var r=n(632),o=[["normalize",n(972)],["block",n(973)],["inline",n(974)],["linkify",n(975)],["replacements",n(976)],["smartquotes",n(977)]];function i(){this.ruler=new r;for(var t=0;t<o.length;t++)this.ruler.push(o[t][0],o[t][1])}i.prototype.process=function(t){var e,n,r;for(e=0,n=(r=this.ruler.getRules("")).length;e<n;e++)r[e](t)},i.prototype.State=n(978),t.exports=i},972:function(t,e,n){"use strict";var r=/\r\n?|\n/g,o=/\0/g;t.exports=function(t){var e;e=(e=t.src.replace(r,"\n")).replace(o,"\ufffd"),t.src=e}},973:function(t,e,n){"use strict";t.exports=function(t){var e;t.inlineMode?((e=new t.Token("inline","",0)).content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}},974:function(t,e,n){"use strict";t.exports=function(t){var e,n,r,o=t.tokens;for(n=0,r=o.length;n<r;n++)"inline"===(e=o[n]).type&&t.md.inline.parse(e.content,t.md,t.env,e.children)}},975:function(t,e,n){"use strict";var r=n(107).arrayReplaceAt;function o(t){return/^<\/a\s*>/i.test(t)}t.exports=function(t){var e,n,i,s,a,c,u,h,l,p,f,d,m,v,y,g,k,b,w=t.tokens;if(t.md.options.linkify)for(n=0,i=w.length;n<i;n++)if("inline"===w[n].type&&t.md.linkify.pretest(w[n].content))for(m=0,e=(s=w[n].children).length-1;e>=0;e--)if("link_close"!==(c=s[e]).type){if("html_inline"===c.type&&(b=c.content,/^<a[>\s]/i.test(b)&&m>0&&m--,o(c.content)&&m++),!(m>0)&&"text"===c.type&&t.md.linkify.test(c.content)){for(l=c.content,k=t.md.linkify.match(l),u=[],d=c.level,f=0,h=0;h<k.length;h++)v=k[h].url,y=t.md.normalizeLink(v),t.md.validateLink(y)&&(g=k[h].text,g=k[h].schema?"mailto:"!==k[h].schema||/^mailto:/i.test(g)?t.md.normalizeLinkText(g):t.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):t.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,""),(p=k[h].index)>f&&((a=new t.Token("text","",0)).content=l.slice(f,p),a.level=d,u.push(a)),(a=new t.Token("link_open","a",1)).attrs=[["href",y]],a.level=d++,a.markup="linkify",a.info="auto",u.push(a),(a=new t.Token("text","",0)).content=g,a.level=d,u.push(a),(a=new t.Token("link_close","a",-1)).level=--d,a.markup="linkify",a.info="auto",u.push(a),f=k[h].lastIndex);f<l.length&&((a=new t.Token("text","",0)).content=l.slice(f),a.level=d,u.push(a)),w[n].children=s=r(s,e,u)}}else for(e--;s[e].level!==c.level&&"link_open"!==s[e].type;)e--}},976:function(t,e,n){"use strict";var r=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,o=/\((c|tm|r|p)\)/i,i=/\((c|tm|r|p)\)/gi,s={c:"\xa9",r:"\xae",p:"\xa7",tm:"\u2122"};function a(t,e){return s[e.toLowerCase()]}function c(t){var e,n,r=0;for(e=t.length-1;e>=0;e--)"text"!==(n=t[e]).type||r||(n.content=n.content.replace(i,a)),"link_open"===n.type&&"auto"===n.info&&r--,"link_close"===n.type&&"auto"===n.info&&r++}function u(t){var e,n,o=0;for(e=t.length-1;e>=0;e--)"text"!==(n=t[e]).type||o||r.test(n.content)&&(n.content=n.content.replace(/\+-/g,"\xb1").replace(/\.{2,}/g,"\u2026").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1\u2014$2").replace(/(^|\s)--(\s|$)/gm,"$1\u2013$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1\u2013$2")),"link_open"===n.type&&"auto"===n.info&&o--,"link_close"===n.type&&"auto"===n.info&&o++}t.exports=function(t){var e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)"inline"===t.tokens[e].type&&(o.test(t.tokens[e].content)&&c(t.tokens[e].children),r.test(t.tokens[e].content)&&u(t.tokens[e].children))}},977:function(t,e,n){"use strict";var r=n(107).isWhiteSpace,o=n(107).isPunctChar,i=n(107).isMdAsciiPunct,s=/['"]/,a=/['"]/g;function c(t,e,n){return t.substr(0,e)+n+t.substr(e+1)}function u(t,e){var n,s,u,h,l,p,f,d,m,v,y,g,k,b,w,x,S,C,O,M,_;for(O=[],n=0;n<t.length;n++){for(s=t[n],f=t[n].level,S=O.length-1;S>=0&&!(O[S].level<=f);S--);if(O.length=S+1,"text"===s.type){l=0,p=(u=s.content).length;t:for(;l<p&&(a.lastIndex=l,h=a.exec(u));){if(w=x=!0,l=h.index+1,C="'"===h[0],m=32,h.index-1>=0)m=u.charCodeAt(h.index-1);else for(S=n-1;S>=0&&("softbreak"!==t[S].type&&"hardbreak"!==t[S].type);S--)if("text"===t[S].type){m=t[S].content.charCodeAt(t[S].content.length-1);break}if(v=32,l<p)v=u.charCodeAt(l);else for(S=n+1;S<t.length&&("softbreak"!==t[S].type&&"hardbreak"!==t[S].type);S++)if("text"===t[S].type){v=t[S].content.charCodeAt(0);break}if(y=i(m)||o(String.fromCharCode(m)),g=i(v)||o(String.fromCharCode(v)),k=r(m),(b=r(v))?w=!1:g&&(k||y||(w=!1)),k?x=!1:y&&(b||g||(x=!1)),34===v&&'"'===h[0]&&m>=48&&m<=57&&(x=w=!1),w&&x&&(w=!1,x=g),w||x){if(x)for(S=O.length-1;S>=0&&(d=O[S],!(O[S].level<f));S--)if(d.single===C&&O[S].level===f){d=O[S],C?(M=e.md.options.quotes[2],_=e.md.options.quotes[3]):(M=e.md.options.quotes[0],_=e.md.options.quotes[1]),s.content=c(s.content,h.index,_),t[d.token].content=c(t[d.token].content,d.pos,M),l+=_.length-1,d.token===n&&(l+=M.length-1),p=(u=s.content).length,O.length=S;continue t}w?O.push({token:n,pos:h.index,single:C,level:f}):x&&C&&(s.content=c(s.content,h.index,"\u2019"))}else C&&(s.content=c(s.content,h.index,"\u2019"))}}}}t.exports=function(t){var e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)"inline"===t.tokens[e].type&&s.test(t.tokens[e].content)&&u(t.tokens[e].children,t)}},978:function(t,e,n){"use strict";var r=n(633);function o(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}o.prototype.Token=r,t.exports=o},979:function(t,e,n){"use strict";var r=n(632),o=[["table",n(980),["paragraph","reference"]],["code",n(981)],["fence",n(982),["paragraph","reference","blockquote","list"]],["blockquote",n(983),["paragraph","reference","blockquote","list"]],["hr",n(984),["paragraph","reference","blockquote","list"]],["list",n(985),["paragraph","reference","blockquote"]],["reference",n(986)],["heading",n(987),["paragraph","reference","blockquote"]],["lheading",n(988)],["html_block",n(989),["paragraph","reference","blockquote"]],["paragraph",n(991)]];function i(){this.ruler=new r;for(var t=0;t<o.length;t++)this.ruler.push(o[t][0],o[t][1],{alt:(o[t][2]||[]).slice()})}i.prototype.tokenize=function(t,e,n){for(var r,o=this.ruler.getRules(""),i=o.length,s=e,a=!1,c=t.md.options.maxNesting;s<n&&(t.line=s=t.skipEmptyLines(s),!(s>=n))&&!(t.sCount[s]<t.blkIndent);){if(t.level>=c){t.line=n;break}for(r=0;r<i&&!o[r](t,s,n,!1);r++);t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),(s=t.line)<n&&t.isEmpty(s)&&(a=!0,s++,t.line=s)}},i.prototype.parse=function(t,e,n,r){var o;t&&(o=new this.State(t,e,n,r),this.tokenize(o,o.line,o.lineMax))},i.prototype.State=n(992),t.exports=i},980:function(t,e,n){"use strict";var r=n(107).isSpace;function o(t,e){var n=t.bMarks[e]+t.blkIndent,r=t.eMarks[e];return t.src.substr(n,r-n)}function i(t){var e,n=[],r=0,o=t.length,i=0,s=0,a=!1,c=0;for(e=t.charCodeAt(r);r<o;)96===e?a?(a=!1,c=r):i%2===0&&(a=!0,c=r):124!==e||i%2!==0||a||(n.push(t.substring(s,r)),s=r+1),92===e?i++:i=0,++r===o&&a&&(a=!1,r=c+1),e=t.charCodeAt(r);return n.push(t.substring(s)),n}t.exports=function(t,e,n,s){var a,c,u,h,l,p,f,d,m,v,y,g;if(e+2>n)return!1;if(l=e+1,t.sCount[l]<t.blkIndent)return!1;if(t.sCount[l]-t.blkIndent>=4)return!1;if((u=t.bMarks[l]+t.tShift[l])>=t.eMarks[l])return!1;if(124!==(a=t.src.charCodeAt(u++))&&45!==a&&58!==a)return!1;for(;u<t.eMarks[l];){if(124!==(a=t.src.charCodeAt(u))&&45!==a&&58!==a&&!r(a))return!1;u++}for(p=(c=o(t,e+1)).split("|"),m=[],h=0;h<p.length;h++){if(!(v=p[h].trim())){if(0===h||h===p.length-1)continue;return!1}if(!/^:?-+:?$/.test(v))return!1;58===v.charCodeAt(v.length-1)?m.push(58===v.charCodeAt(0)?"center":"right"):58===v.charCodeAt(0)?m.push("left"):m.push("")}if(-1===(c=o(t,e).trim()).indexOf("|"))return!1;if(t.sCount[e]-t.blkIndent>=4)return!1;if((f=(p=i(c.replace(/^\||\|$/g,""))).length)>m.length)return!1;if(s)return!0;for((d=t.push("table_open","table",1)).map=y=[e,0],(d=t.push("thead_open","thead",1)).map=[e,e+1],(d=t.push("tr_open","tr",1)).map=[e,e+1],h=0;h<p.length;h++)(d=t.push("th_open","th",1)).map=[e,e+1],m[h]&&(d.attrs=[["style","text-align:"+m[h]]]),(d=t.push("inline","",0)).content=p[h].trim(),d.map=[e,e+1],d.children=[],d=t.push("th_close","th",-1);for(d=t.push("tr_close","tr",-1),d=t.push("thead_close","thead",-1),(d=t.push("tbody_open","tbody",1)).map=g=[e+2,0],l=e+2;l<n&&!(t.sCount[l]<t.blkIndent)&&-1!==(c=o(t,l).trim()).indexOf("|")&&!(t.sCount[l]-t.blkIndent>=4);l++){for(p=i(c.replace(/^\||\|$/g,"")),d=t.push("tr_open","tr",1),h=0;h<f;h++)d=t.push("td_open","td",1),m[h]&&(d.attrs=[["style","text-align:"+m[h]]]),(d=t.push("inline","",0)).content=p[h]?p[h].trim():"",d.children=[],d=t.push("td_close","td",-1);d=t.push("tr_close","tr",-1)}return d=t.push("tbody_close","tbody",-1),d=t.push("table_close","table",-1),y[1]=g[1]=l,t.line=l,!0}},981:function(t,e,n){"use strict";t.exports=function(t,e,n){var r,o,i;if(t.sCount[e]-t.blkIndent<4)return!1;for(o=r=e+1;r<n;)if(t.isEmpty(r))r++;else{if(!(t.sCount[r]-t.blkIndent>=4))break;o=++r}return t.line=o,(i=t.push("code_block","code",0)).content=t.getLines(e,o,4+t.blkIndent,!0),i.map=[e,t.line],!0}},982:function(t,e,n){"use strict";t.exports=function(t,e,n,r){var o,i,s,a,c,u,h,l=!1,p=t.bMarks[e]+t.tShift[e],f=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(p+3>f)return!1;if(126!==(o=t.src.charCodeAt(p))&&96!==o)return!1;if(c=p,(i=(p=t.skipChars(p,o))-c)<3)return!1;if(h=t.src.slice(c,p),s=t.src.slice(p,f),96===o&&s.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;for(a=e;!(++a>=n)&&!((p=c=t.bMarks[a]+t.tShift[a])<(f=t.eMarks[a])&&t.sCount[a]<t.blkIndent);)if(t.src.charCodeAt(p)===o&&!(t.sCount[a]-t.blkIndent>=4)&&!((p=t.skipChars(p,o))-c<i)&&!((p=t.skipSpaces(p))<f)){l=!0;break}return i=t.sCount[e],t.line=a+(l?1:0),(u=t.push("fence","code",0)).info=s,u.content=t.getLines(e+1,a,i,!0),u.markup=h,u.map=[e,t.line],!0}},983:function(t,e,n){"use strict";var r=n(107).isSpace;t.exports=function(t,e,n,o){var i,s,a,c,u,h,l,p,f,d,m,v,y,g,k,b,w,x,S,C,O=t.lineMax,M=t.bMarks[e]+t.tShift[e],_=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(62!==t.src.charCodeAt(M++))return!1;if(o)return!0;for(c=f=t.sCount[e]+M-(t.bMarks[e]+t.tShift[e]),32===t.src.charCodeAt(M)?(M++,c++,f++,i=!1,b=!0):9===t.src.charCodeAt(M)?(b=!0,(t.bsCount[e]+f)%4===3?(M++,c++,f++,i=!1):i=!0):b=!1,d=[t.bMarks[e]],t.bMarks[e]=M;M<_&&(s=t.src.charCodeAt(M),r(s));)9===s?f+=4-(f+t.bsCount[e]+(i?1:0))%4:f++,M++;for(m=[t.bsCount[e]],t.bsCount[e]=t.sCount[e]+1+(b?1:0),h=M>=_,g=[t.sCount[e]],t.sCount[e]=f-c,k=[t.tShift[e]],t.tShift[e]=M-t.bMarks[e],x=t.md.block.ruler.getRules("blockquote"),y=t.parentType,t.parentType="blockquote",C=!1,p=e+1;p<n&&(t.sCount[p]<t.blkIndent&&(C=!0),!((M=t.bMarks[p]+t.tShift[p])>=(_=t.eMarks[p])));p++)if(62!==t.src.charCodeAt(M++)||C){if(h)break;for(w=!1,a=0,u=x.length;a<u;a++)if(x[a](t,p,n,!0)){w=!0;break}if(w){t.lineMax=p,0!==t.blkIndent&&(d.push(t.bMarks[p]),m.push(t.bsCount[p]),k.push(t.tShift[p]),g.push(t.sCount[p]),t.sCount[p]-=t.blkIndent);break}d.push(t.bMarks[p]),m.push(t.bsCount[p]),k.push(t.tShift[p]),g.push(t.sCount[p]),t.sCount[p]=-1}else{for(c=f=t.sCount[p]+M-(t.bMarks[p]+t.tShift[p]),32===t.src.charCodeAt(M)?(M++,c++,f++,i=!1,b=!0):9===t.src.charCodeAt(M)?(b=!0,(t.bsCount[p]+f)%4===3?(M++,c++,f++,i=!1):i=!0):b=!1,d.push(t.bMarks[p]),t.bMarks[p]=M;M<_&&(s=t.src.charCodeAt(M),r(s));)9===s?f+=4-(f+t.bsCount[p]+(i?1:0))%4:f++,M++;h=M>=_,m.push(t.bsCount[p]),t.bsCount[p]=t.sCount[p]+1+(b?1:0),g.push(t.sCount[p]),t.sCount[p]=f-c,k.push(t.tShift[p]),t.tShift[p]=M-t.bMarks[p]}for(v=t.blkIndent,t.blkIndent=0,(S=t.push("blockquote_open","blockquote",1)).markup=">",S.map=l=[e,0],t.md.block.tokenize(t,e,p),(S=t.push("blockquote_close","blockquote",-1)).markup=">",t.lineMax=O,t.parentType=y,l[1]=t.line,a=0;a<k.length;a++)t.bMarks[a+e]=d[a],t.tShift[a+e]=k[a],t.sCount[a+e]=g[a],t.bsCount[a+e]=m[a];return t.blkIndent=v,!0}},984:function(t,e,n){"use strict";var r=n(107).isSpace;t.exports=function(t,e,n,o){var i,s,a,c,u=t.bMarks[e]+t.tShift[e],h=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(42!==(i=t.src.charCodeAt(u++))&&45!==i&&95!==i)return!1;for(s=1;u<h;){if((a=t.src.charCodeAt(u++))!==i&&!r(a))return!1;a===i&&s++}return!(s<3)&&(o||(t.line=e+1,(c=t.push("hr","hr",0)).map=[e,t.line],c.markup=Array(s+1).join(String.fromCharCode(i))),!0)}},985:function(t,e,n){"use strict";var r=n(107).isSpace;function o(t,e){var n,o,i,s;return o=t.bMarks[e]+t.tShift[e],i=t.eMarks[e],42!==(n=t.src.charCodeAt(o++))&&45!==n&&43!==n||o<i&&(s=t.src.charCodeAt(o),!r(s))?-1:o}function i(t,e){var n,o=t.bMarks[e]+t.tShift[e],i=o,s=t.eMarks[e];if(i+1>=s)return-1;if((n=t.src.charCodeAt(i++))<48||n>57)return-1;for(;;){if(i>=s)return-1;if(!((n=t.src.charCodeAt(i++))>=48&&n<=57)){if(41===n||46===n)break;return-1}if(i-o>=10)return-1}return i<s&&(n=t.src.charCodeAt(i),!r(n))?-1:i}t.exports=function(t,e,n,r){var s,a,c,u,h,l,p,f,d,m,v,y,g,k,b,w,x,S,C,O,M,_,T,E,N,A,z,R,I=!1,D=!0;if(t.sCount[e]-t.blkIndent>=4)return!1;if(t.listIndent>=0&&t.sCount[e]-t.listIndent>=4&&t.sCount[e]<t.blkIndent)return!1;if(r&&"paragraph"===t.parentType&&t.tShift[e]>=t.blkIndent&&(I=!0),(T=i(t,e))>=0){if(p=!0,N=t.bMarks[e]+t.tShift[e],g=Number(t.src.substr(N,T-N-1)),I&&1!==g)return!1}else{if(!((T=o(t,e))>=0))return!1;p=!1}if(I&&t.skipSpaces(T)>=t.eMarks[e])return!1;if(y=t.src.charCodeAt(T-1),r)return!0;for(v=t.tokens.length,p?(R=t.push("ordered_list_open","ol",1),1!==g&&(R.attrs=[["start",g]])):R=t.push("bullet_list_open","ul",1),R.map=m=[e,0],R.markup=String.fromCharCode(y),b=e,E=!1,z=t.md.block.ruler.getRules("list"),S=t.parentType,t.parentType="list";b<n;){for(_=T,k=t.eMarks[b],l=w=t.sCount[b]+T-(t.bMarks[e]+t.tShift[e]);_<k;){if(9===(s=t.src.charCodeAt(_)))w+=4-(w+t.bsCount[b])%4;else{if(32!==s)break;w++}_++}if((h=(a=_)>=k?1:w-l)>4&&(h=1),u=l+h,(R=t.push("list_item_open","li",1)).markup=String.fromCharCode(y),R.map=f=[e,0],M=t.tight,O=t.tShift[e],C=t.sCount[e],x=t.listIndent,t.listIndent=t.blkIndent,t.blkIndent=u,t.tight=!0,t.tShift[e]=a-t.bMarks[e],t.sCount[e]=w,a>=k&&t.isEmpty(e+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,e,n,!0),t.tight&&!E||(D=!1),E=t.line-e>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=x,t.tShift[e]=O,t.sCount[e]=C,t.tight=M,(R=t.push("list_item_close","li",-1)).markup=String.fromCharCode(y),b=e=t.line,f[1]=b,a=t.bMarks[e],b>=n)break;if(t.sCount[b]<t.blkIndent)break;if(t.sCount[e]-t.blkIndent>=4)break;for(A=!1,c=0,d=z.length;c<d;c++)if(z[c](t,b,n,!0)){A=!0;break}if(A)break;if(p){if((T=i(t,b))<0)break}else if((T=o(t,b))<0)break;if(y!==t.src.charCodeAt(T-1))break}return(R=p?t.push("ordered_list_close","ol",-1):t.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(y),m[1]=b,t.line=b,t.parentType=S,D&&function(t,e){var n,r,o=t.level+2;for(n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===o&&"paragraph_open"===t.tokens[n].type&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}(t,v),!0}},986:function(t,e,n){"use strict";var r=n(107).normalizeReference,o=n(107).isSpace;t.exports=function(t,e,n,i){var s,a,c,u,h,l,p,f,d,m,v,y,g,k,b,w,x=0,S=t.bMarks[e]+t.tShift[e],C=t.eMarks[e],O=e+1;if(t.sCount[e]-t.blkIndent>=4)return!1;if(91!==t.src.charCodeAt(S))return!1;for(;++S<C;)if(93===t.src.charCodeAt(S)&&92!==t.src.charCodeAt(S-1)){if(S+1===C)return!1;if(58!==t.src.charCodeAt(S+1))return!1;break}for(u=t.lineMax,b=t.md.block.ruler.getRules("reference"),m=t.parentType,t.parentType="reference";O<u&&!t.isEmpty(O);O++)if(!(t.sCount[O]-t.blkIndent>3)&&!(t.sCount[O]<0)){for(k=!1,l=0,p=b.length;l<p;l++)if(b[l](t,O,u,!0)){k=!0;break}if(k)break}for(C=(g=t.getLines(e,O,t.blkIndent,!1).trim()).length,S=1;S<C;S++){if(91===(s=g.charCodeAt(S)))return!1;if(93===s){d=S;break}(10===s||92===s&&++S<C&&10===g.charCodeAt(S))&&x++}if(d<0||58!==g.charCodeAt(d+1))return!1;for(S=d+2;S<C;S++)if(10===(s=g.charCodeAt(S)))x++;else if(!o(s))break;if(!(v=t.md.helpers.parseLinkDestination(g,S,C)).ok)return!1;if(h=t.md.normalizeLink(v.str),!t.md.validateLink(h))return!1;for(a=S=v.pos,c=x+=v.lines,y=S;S<C;S++)if(10===(s=g.charCodeAt(S)))x++;else if(!o(s))break;for(v=t.md.helpers.parseLinkTitle(g,S,C),S<C&&y!==S&&v.ok?(w=v.str,S=v.pos,x+=v.lines):(w="",S=a,x=c);S<C&&(s=g.charCodeAt(S),o(s));)S++;if(S<C&&10!==g.charCodeAt(S)&&w)for(w="",S=a,x=c;S<C&&(s=g.charCodeAt(S),o(s));)S++;return!(S<C&&10!==g.charCodeAt(S))&&(!!(f=r(g.slice(1,d)))&&(i||("undefined"===typeof t.env.references&&(t.env.references={}),"undefined"===typeof t.env.references[f]&&(t.env.references[f]={title:w,href:h}),t.parentType=m,t.line=e+x+1),!0))}},987:function(t,e,n){"use strict";var r=n(107).isSpace;t.exports=function(t,e,n,o){var i,s,a,c,u=t.bMarks[e]+t.tShift[e],h=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(35!==(i=t.src.charCodeAt(u))||u>=h)return!1;for(s=1,i=t.src.charCodeAt(++u);35===i&&u<h&&s<=6;)s++,i=t.src.charCodeAt(++u);return!(s>6||u<h&&!r(i))&&(o||(h=t.skipSpacesBack(h,u),(a=t.skipCharsBack(h,35,u))>u&&r(t.src.charCodeAt(a-1))&&(h=a),t.line=e+1,(c=t.push("heading_open","h"+String(s),1)).markup="########".slice(0,s),c.map=[e,t.line],(c=t.push("inline","",0)).content=t.src.slice(u,h).trim(),c.map=[e,t.line],c.children=[],(c=t.push("heading_close","h"+String(s),-1)).markup="########".slice(0,s)),!0)}},988:function(t,e,n){"use strict";t.exports=function(t,e,n){var r,o,i,s,a,c,u,h,l,p,f=e+1,d=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;for(p=t.parentType,t.parentType="paragraph";f<n&&!t.isEmpty(f);f++)if(!(t.sCount[f]-t.blkIndent>3)){if(t.sCount[f]>=t.blkIndent&&(c=t.bMarks[f]+t.tShift[f])<(u=t.eMarks[f])&&(45===(l=t.src.charCodeAt(c))||61===l)&&(c=t.skipChars(c,l),(c=t.skipSpaces(c))>=u)){h=61===l?1:2;break}if(!(t.sCount[f]<0)){for(o=!1,i=0,s=d.length;i<s;i++)if(d[i](t,f,n,!0)){o=!0;break}if(o)break}}return!!h&&(r=t.getLines(e,f,t.blkIndent,!1).trim(),t.line=f+1,(a=t.push("heading_open","h"+String(h),1)).markup=String.fromCharCode(l),a.map=[e,t.line],(a=t.push("inline","",0)).content=r,a.map=[e,t.line-1],a.children=[],(a=t.push("heading_close","h"+String(h),-1)).markup=String.fromCharCode(l),t.parentType=p,!0)}},989:function(t,e,n){"use strict";var r=n(990),o=n(759).HTML_OPEN_CLOSE_TAG_RE,i=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+r.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(o.source+"\\s*$"),/^$/,!1]];t.exports=function(t,e,n,r){var o,s,a,c,u=t.bMarks[e]+t.tShift[e],h=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(!t.md.options.html)return!1;if(60!==t.src.charCodeAt(u))return!1;for(c=t.src.slice(u,h),o=0;o<i.length&&!i[o][0].test(c);o++);if(o===i.length)return!1;if(r)return i[o][2];if(s=e+1,!i[o][1].test(c))for(;s<n&&!(t.sCount[s]<t.blkIndent);s++)if(u=t.bMarks[s]+t.tShift[s],h=t.eMarks[s],c=t.src.slice(u,h),i[o][1].test(c)){0!==c.length&&s++;break}return t.line=s,(a=t.push("html_block","",0)).map=[e,s],a.content=t.getLines(e,s,t.blkIndent,!0),!0}},990:function(t,e,n){"use strict";t.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},991:function(t,e,n){"use strict";t.exports=function(t,e){var n,r,o,i,s,a,c=e+1,u=t.md.block.ruler.getRules("paragraph"),h=t.lineMax;for(a=t.parentType,t.parentType="paragraph";c<h&&!t.isEmpty(c);c++)if(!(t.sCount[c]-t.blkIndent>3)&&!(t.sCount[c]<0)){for(r=!1,o=0,i=u.length;o<i;o++)if(u[o](t,c,h,!0)){r=!0;break}if(r)break}return n=t.getLines(e,c,t.blkIndent,!1).trim(),t.line=c,(s=t.push("paragraph_open","p",1)).map=[e,t.line],(s=t.push("inline","",0)).content=n,s.map=[e,t.line],s.children=[],s=t.push("paragraph_close","p",-1),t.parentType=a,!0}},992:function(t,e,n){"use strict";var r=n(633),o=n(107).isSpace;function i(t,e,n,r){var i,s,a,c,u,h,l,p;for(this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",p=!1,a=c=h=l=0,u=(s=this.src).length;c<u;c++){if(i=s.charCodeAt(c),!p){if(o(i)){h++,9===i?l+=4-l%4:l++;continue}p=!0}10!==i&&c!==u-1||(10!==i&&c++,this.bMarks.push(a),this.eMarks.push(c),this.tShift.push(h),this.sCount.push(l),this.bsCount.push(0),p=!1,h=0,l=0,a=c+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}i.prototype.push=function(t,e,n){var o=new r(t,e,n);return o.block=!0,n<0&&this.level--,o.level=this.level,n>0&&this.level++,this.tokens.push(o),o},i.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]},i.prototype.skipEmptyLines=function(t){for(var e=this.lineMax;t<e&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t},i.prototype.skipSpaces=function(t){for(var e,n=this.src.length;t<n&&(e=this.src.charCodeAt(t),o(e));t++);return t},i.prototype.skipSpacesBack=function(t,e){if(t<=e)return t;for(;t>e;)if(!o(this.src.charCodeAt(--t)))return t+1;return t},i.prototype.skipChars=function(t,e){for(var n=this.src.length;t<n&&this.src.charCodeAt(t)===e;t++);return t},i.prototype.skipCharsBack=function(t,e,n){if(t<=n)return t;for(;t>n;)if(e!==this.src.charCodeAt(--t))return t+1;return t},i.prototype.getLines=function(t,e,n,r){var i,s,a,c,u,h,l,p=t;if(t>=e)return"";for(h=new Array(e-t),i=0;p<e;p++,i++){for(s=0,l=c=this.bMarks[p],u=p+1<e||r?this.eMarks[p]+1:this.eMarks[p];c<u&&s<n;){if(a=this.src.charCodeAt(c),o(a))9===a?s+=4-(s+this.bsCount[p])%4:s++;else{if(!(c-l<this.tShift[p]))break;s++}c++}h[i]=s>n?new Array(s-n+1).join(" ")+this.src.slice(c,u):this.src.slice(c,u)}return h.join("")},i.prototype.Token=r,t.exports=i},993:function(t,e,n){"use strict";var r=n(632),o=[["text",n(994)],["newline",n(995)],["escape",n(996)],["backticks",n(997)],["strikethrough",n(760).tokenize],["emphasis",n(761).tokenize],["link",n(998)],["image",n(999)],["autolink",n(1e3)],["html_inline",n(1001)],["entity",n(1002)]],i=[["balance_pairs",n(1003)],["strikethrough",n(760).postProcess],["emphasis",n(761).postProcess],["text_collapse",n(1004)]];function s(){var t;for(this.ruler=new r,t=0;t<o.length;t++)this.ruler.push(o[t][0],o[t][1]);for(this.ruler2=new r,t=0;t<i.length;t++)this.ruler2.push(i[t][0],i[t][1])}s.prototype.skipToken=function(t){var e,n,r=t.pos,o=this.ruler.getRules(""),i=o.length,s=t.md.options.maxNesting,a=t.cache;if("undefined"===typeof a[r]){if(t.level<s)for(n=0;n<i&&(t.level++,e=o[n](t,!0),t.level--,!e);n++);else t.pos=t.posMax;e||t.pos++,a[r]=t.pos}else t.pos=a[r]},s.prototype.tokenize=function(t){for(var e,n,r=this.ruler.getRules(""),o=r.length,i=t.posMax,s=t.md.options.maxNesting;t.pos<i;){if(t.level<s)for(n=0;n<o&&!(e=r[n](t,!1));n++);if(e){if(t.pos>=i)break}else t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()},s.prototype.parse=function(t,e,n,r){var o,i,s,a=new this.State(t,e,n,r);for(this.tokenize(a),s=(i=this.ruler2.getRules("")).length,o=0;o<s;o++)i[o](a)},s.prototype.State=n(1005),t.exports=s},994:function(t,e,n){"use strict";function r(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}t.exports=function(t,e){for(var n=t.pos;n<t.posMax&&!r(t.src.charCodeAt(n));)n++;return n!==t.pos&&(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}},995:function(t,e,n){"use strict";var r=n(107).isSpace;t.exports=function(t,e){var n,o,i=t.pos;if(10!==t.src.charCodeAt(i))return!1;for(n=t.pending.length-1,o=t.posMax,e||(n>=0&&32===t.pending.charCodeAt(n)?n>=1&&32===t.pending.charCodeAt(n-1)?(t.pending=t.pending.replace(/ +$/,""),t.push("hardbreak","br",0)):(t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0)):t.push("softbreak","br",0)),i++;i<o&&r(t.src.charCodeAt(i));)i++;return t.pos=i,!0}},996:function(t,e,n){"use strict";for(var r=n(107).isSpace,o=[],i=0;i<256;i++)o.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(t){o[t.charCodeAt(0)]=1})),t.exports=function(t,e){var n,i=t.pos,s=t.posMax;if(92!==t.src.charCodeAt(i))return!1;if(++i<s){if((n=t.src.charCodeAt(i))<256&&0!==o[n])return e||(t.pending+=t.src[i]),t.pos+=2,!0;if(10===n){for(e||t.push("hardbreak","br",0),i++;i<s&&(n=t.src.charCodeAt(i),r(n));)i++;return t.pos=i,!0}}return e||(t.pending+="\\"),t.pos++,!0}},997:function(t,e,n){"use strict";t.exports=function(t,e){var n,r,o,i,s,a,c=t.pos;if(96!==t.src.charCodeAt(c))return!1;for(n=c,c++,r=t.posMax;c<r&&96===t.src.charCodeAt(c);)c++;for(o=t.src.slice(n,c),i=s=c;-1!==(i=t.src.indexOf("`",s));){for(s=i+1;s<r&&96===t.src.charCodeAt(s);)s++;if(s-i===o.length)return e||((a=t.push("code_inline","code",0)).markup=o,a.content=t.src.slice(c,i).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),t.pos=s,!0}return e||(t.pending+=o),t.pos+=o.length,!0}},998:function(t,e,n){"use strict";var r=n(107).normalizeReference,o=n(107).isSpace;t.exports=function(t,e){var n,i,s,a,c,u,h,l,p,f="",d=t.pos,m=t.posMax,v=t.pos,y=!0;if(91!==t.src.charCodeAt(t.pos))return!1;if(c=t.pos+1,(a=t.md.helpers.parseLinkLabel(t,t.pos,!0))<0)return!1;if((u=a+1)<m&&40===t.src.charCodeAt(u)){for(y=!1,u++;u<m&&(i=t.src.charCodeAt(u),o(i)||10===i);u++);if(u>=m)return!1;for(v=u,(h=t.md.helpers.parseLinkDestination(t.src,u,t.posMax)).ok&&(f=t.md.normalizeLink(h.str),t.md.validateLink(f)?u=h.pos:f=""),v=u;u<m&&(i=t.src.charCodeAt(u),o(i)||10===i);u++);if(h=t.md.helpers.parseLinkTitle(t.src,u,t.posMax),u<m&&v!==u&&h.ok)for(p=h.str,u=h.pos;u<m&&(i=t.src.charCodeAt(u),o(i)||10===i);u++);else p="";(u>=m||41!==t.src.charCodeAt(u))&&(y=!0),u++}if(y){if("undefined"===typeof t.env.references)return!1;if(u<m&&91===t.src.charCodeAt(u)?(v=u+1,(u=t.md.helpers.parseLinkLabel(t,u))>=0?s=t.src.slice(v,u++):u=a+1):u=a+1,s||(s=t.src.slice(c,a)),!(l=t.env.references[r(s)]))return t.pos=d,!1;f=l.href,p=l.title}return e||(t.pos=c,t.posMax=a,t.push("link_open","a",1).attrs=n=[["href",f]],p&&n.push(["title",p]),t.md.inline.tokenize(t),t.push("link_close","a",-1)),t.pos=u,t.posMax=m,!0}},999:function(t,e,n){"use strict";var r=n(107).normalizeReference,o=n(107).isSpace;t.exports=function(t,e){var n,i,s,a,c,u,h,l,p,f,d,m,v,y="",g=t.pos,k=t.posMax;if(33!==t.src.charCodeAt(t.pos))return!1;if(91!==t.src.charCodeAt(t.pos+1))return!1;if(u=t.pos+2,(c=t.md.helpers.parseLinkLabel(t,t.pos+1,!1))<0)return!1;if((h=c+1)<k&&40===t.src.charCodeAt(h)){for(h++;h<k&&(i=t.src.charCodeAt(h),o(i)||10===i);h++);if(h>=k)return!1;for(v=h,(p=t.md.helpers.parseLinkDestination(t.src,h,t.posMax)).ok&&(y=t.md.normalizeLink(p.str),t.md.validateLink(y)?h=p.pos:y=""),v=h;h<k&&(i=t.src.charCodeAt(h),o(i)||10===i);h++);if(p=t.md.helpers.parseLinkTitle(t.src,h,t.posMax),h<k&&v!==h&&p.ok)for(f=p.str,h=p.pos;h<k&&(i=t.src.charCodeAt(h),o(i)||10===i);h++);else f="";if(h>=k||41!==t.src.charCodeAt(h))return t.pos=g,!1;h++}else{if("undefined"===typeof t.env.references)return!1;if(h<k&&91===t.src.charCodeAt(h)?(v=h+1,(h=t.md.helpers.parseLinkLabel(t,h))>=0?a=t.src.slice(v,h++):h=c+1):h=c+1,a||(a=t.src.slice(u,c)),!(l=t.env.references[r(a)]))return t.pos=g,!1;y=l.href,f=l.title}return e||(s=t.src.slice(u,c),t.md.inline.parse(s,t.md,t.env,m=[]),(d=t.push("image","img",0)).attrs=n=[["src",y],["alt",""]],d.children=m,d.content=s,f&&n.push(["title",f])),t.pos=h,t.posMax=k,!0}}}]);
//# sourceMappingURL=37-0d9ba3bef558b2b25146.chunk.js.map