{"version":3,"sources":["webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/constants.js","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/AgentTable.vue?8706","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/MetricCard.vue?ff0d","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/LiveReports.vue?a116","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/AgentTable.vue?267c","webpack:///app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/AgentTable.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/AgentTable.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/AgentTable.vue?dc1d","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/MetricCard.vue?9e37","webpack:///app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/MetricCard.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/MetricCard.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/MetricCard.vue?a4ec","webpack:///Heatmap.vue","webpack:///./node_modules/date-fns/esm/getDay/index.js","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/Heatmap.vue?26fa","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/Heatmap.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/Heatmap.vue?a892","webpack:///app/javascript/dashboard/routes/dashboard/settings/reports/LiveReports.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/LiveReports.vue?44cc","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/LiveReports.vue"],"names":["GROUP_BY_FILTER","id","period","GROUP_BY_OPTIONS","DAY","translationKey","WEEK","MONTH","YEAR","DATE_RANGE_OPTIONS","LAST_7_DAYS","offset","groupByOptions","LAST_30_DAYS","LAST_3_MONTHS","LAST_6_MONTHS","LAST_YEAR","CUSTOM_DATE_RANGE","CHART_FONT_FAMILY","DEFAULT_BAR_CHART","type","backgroundColor","DEFAULT_CHART","datasets","scales","xAxes","ticks","fontFamily","gridLines","drawOnChartArea","yAxes","position","beginAtZero","stepSize","callback","value","index","values","length","TIME_CHART_CONFIG","timeInSeconds","minutes","Math","floor","hours","days","formatTime","METRIC_CHART","conversations_count","incoming_messages_count","outgoing_messages_count","avg_first_response_time","reply_time","avg_resolution_time","resolutions_count","bot_resolutions_count","bot_handoffs_count","OVERVIEW_METRICS","open","unattended","unassigned","pending","online","busy","offline","_vm","this","_c","_self","staticClass","attrs","columns","tableData","_v","_s","$t","isLoading","agentMetrics","_e","agents","pageIndex","on","onPageNumberChange","_t","header","loadingMessage","t","useI18n","processedData","props","heatData","quantileRange","flattendedData","map","data","count","dateString","format","Date","date","dayIndex","dirtyDate","requiredArgs","arguments","toDate","getDay","level","Infinity","findIndex","range","_setup","_setupProxy","_l","ii","key","jj","keys","dateKey","getDayOfTheWeek","formatDate","get","directives","name","rawName","getCountTooltip","expression","modifiers","timestamp","class","getHeatmapLevelClass","uiFlags","isFetchingAccountConversationMetric","metric","scopedSlots","_u","fn","downloadHeatmapData","proxy","accountConversationHeatmap","isFetchingAccountConversationsHeatmap","agentConversationMetric","isFetchingAgentConversationMetric"],"mappings":"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","file":"js/62-fb2979f1e7fb559c5edc.chunk.js","sourcesContent":["export const formatTime = timeInSeconds => {\n  if (!timeInSeconds) {\n    return '';\n  }\n\n  if (timeInSeconds < 60) {\n    return `${timeInSeconds}s`;\n  }\n\n  if (timeInSeconds < 3600) {\n    const minutes = Math.floor(timeInSeconds / 60);\n    return `${minutes}m`;\n  }\n\n  if (timeInSeconds < 86400) {\n    const hours = Math.floor(timeInSeconds / 3600);\n    return `${hours}h`;\n  }\n\n  const days = Math.floor(timeInSeconds / 86400);\n  return `${days}d`;\n};\n\nexport const GROUP_BY_FILTER = {\n  1: { id: 1, period: 'day' },\n  2: { id: 2, period: 'week' },\n  3: { id: 3, period: 'month' },\n  4: { id: 4, period: 'year' },\n};\n\nexport const GROUP_BY_OPTIONS = {\n  DAY: {\n    id: 'DAY',\n    period: 'day',\n    translationKey: 'REPORT.GROUPING_OPTIONS.DAY',\n  },\n  WEEK: {\n    id: 'WEEK',\n    period: 'week',\n    translationKey: 'REPORT.GROUPING_OPTIONS.WEEK',\n  },\n  MONTH: {\n    id: 'MONTH',\n    period: 'month',\n    translationKey: 'REPORT.GROUPING_OPTIONS.MONTH',\n  },\n  YEAR: {\n    id: 'YEAR',\n    period: 'year',\n    translationKey: 'REPORT.GROUPING_OPTIONS.YEAR',\n  },\n};\n\nexport const DATE_RANGE_OPTIONS = {\n  LAST_7_DAYS: {\n    id: 'LAST_7_DAYS',\n    translationKey: 'REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS',\n    offset: 6,\n    groupByOptions: [GROUP_BY_OPTIONS.DAY],\n  },\n  LAST_30_DAYS: {\n    id: 'LAST_30_DAYS',\n    translationKey: 'REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS',\n    offset: 29,\n    groupByOptions: [GROUP_BY_OPTIONS.DAY, GROUP_BY_OPTIONS.WEEK],\n  },\n  LAST_3_MONTHS: {\n    id: 'LAST_3_MONTHS',\n    translationKey: 'REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS',\n    offset: 89,\n    groupByOptions: [\n      GROUP_BY_OPTIONS.DAY,\n      GROUP_BY_OPTIONS.WEEK,\n      GROUP_BY_OPTIONS.MONTH,\n    ],\n  },\n  LAST_6_MONTHS: {\n    id: 'LAST_6_MONTHS',\n    translationKey: 'REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS',\n    offset: 179,\n    groupByOptions: [GROUP_BY_OPTIONS.WEEK, GROUP_BY_OPTIONS.MONTH],\n  },\n  LAST_YEAR: {\n    id: 'LAST_YEAR',\n    translationKey: 'REPORT.DATE_RANGE_OPTIONS.LAST_YEAR',\n    offset: 364,\n    groupByOptions: [GROUP_BY_OPTIONS.WEEK, GROUP_BY_OPTIONS.MONTH],\n  },\n  CUSTOM_DATE_RANGE: {\n    id: 'CUSTOM_DATE_RANGE',\n    translationKey: 'REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE',\n    offset: null,\n    groupByOptions: [\n      GROUP_BY_OPTIONS.DAY,\n      GROUP_BY_OPTIONS.WEEK,\n      GROUP_BY_OPTIONS.MONTH,\n      GROUP_BY_OPTIONS.YEAR,\n    ],\n  },\n};\n\nexport const CHART_FONT_FAMILY =\n  'PlusJakarta,-apple-system,system-ui,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif';\n\nexport const DEFAULT_LINE_CHART = {\n  type: 'line',\n  fill: false,\n  borderColor: '#779BBB',\n  pointBackgroundColor: '#779BBB',\n};\n\nexport const DEFAULT_BAR_CHART = {\n  type: 'bar',\n  backgroundColor: 'rgb(31, 147, 255)',\n};\n\nexport const DEFAULT_CHART = {\n  datasets: [DEFAULT_BAR_CHART],\n  scales: {\n    xAxes: [\n      {\n        ticks: {\n          fontFamily: CHART_FONT_FAMILY,\n        },\n        gridLines: {\n          drawOnChartArea: false,\n        },\n      },\n    ],\n    yAxes: [\n      {\n        id: 'y-left',\n        type: 'linear',\n        position: 'left',\n        ticks: {\n          fontFamily: CHART_FONT_FAMILY,\n          beginAtZero: true,\n          stepSize: 1,\n          callback: (value, index, values) => {\n            if (!index || index === values.length - 1) {\n              return value;\n            }\n            return '';\n          },\n        },\n        gridLines: {\n          drawOnChartArea: false,\n        },\n      },\n    ],\n  },\n};\n\nconst TIME_CHART_CONFIG = {\n  datasets: [DEFAULT_BAR_CHART],\n  scales: {\n    xAxes: [\n      {\n        ticks: {\n          fontFamily: CHART_FONT_FAMILY,\n        },\n        gridLines: {\n          drawOnChartArea: false,\n        },\n      },\n    ],\n    yAxes: [\n      {\n        id: 'y-left',\n        type: 'linear',\n        position: 'left',\n        ticks: {\n          fontFamily: CHART_FONT_FAMILY,\n          callback: (value, index, values) => {\n            if (!index || index === values.length - 1) {\n              return formatTime(value);\n            }\n            return '';\n          },\n        },\n        gridLines: {\n          drawOnChartArea: false,\n        },\n      },\n    ],\n  },\n};\n\nexport const METRIC_CHART = {\n  conversations_count: DEFAULT_CHART,\n  incoming_messages_count: DEFAULT_CHART,\n  outgoing_messages_count: DEFAULT_CHART,\n  avg_first_response_time: TIME_CHART_CONFIG,\n  reply_time: TIME_CHART_CONFIG,\n  avg_resolution_time: TIME_CHART_CONFIG,\n  resolutions_count: DEFAULT_CHART,\n  bot_resolutions_count: DEFAULT_CHART,\n  bot_handoffs_count: DEFAULT_CHART,\n};\n\nexport const OVERVIEW_METRICS = {\n  open: 'OPEN',\n  unattended: 'UNATTENDED',\n  unassigned: 'UNASSIGNED',\n  pending: 'PENDING',\n  online: 'ONLINE',\n  busy: 'BUSY',\n  offline: 'OFFLINE',\n};\n","export * from \"-!../../../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentTable.vue?vue&type=style&index=0&id=79c10260&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetricCard.vue?vue&type=style&index=0&id=a2e7d924&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex-1 overflow-auto p-4\"},[_c('div',{staticClass:\"flex flex-col md:flex-row items-center\"},[_c('div',{staticClass:\"flex-1 w-full max-w-full md:w-[65%] md:max-w-[65%] conversation-metric\"},[_c('metric-card',{attrs:{\"header\":_vm.$t('OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.HEADER'),\"is-loading\":_vm.uiFlags.isFetchingAccountConversationMetric,\"loading-message\":_vm.$t('OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.LOADING_MESSAGE')}},_vm._l((_vm.conversationMetrics),function(metric,name,index){return _c('div',{key:index,staticClass:\"metric-content flex-1 min-w-0\"},[_c('h3',{staticClass:\"heading\"},[_vm._v(\"\\n            \"+_vm._s(name)+\"\\n          \")]),_vm._v(\" \"),_c('p',{staticClass:\"metric\"},[_vm._v(_vm._s(metric))])])}),0)],1),_vm._v(\" \"),_c('div',{staticClass:\"flex-1 w-full max-w-full md:w-[35%] md:max-w-[35%]\"},[_c('metric-card',{attrs:{\"header\":_vm.$t('OVERVIEW_REPORTS.AGENT_STATUS.HEADER')}},_vm._l((_vm.agentStatusMetrics),function(metric,name,index){return _c('div',{key:index,staticClass:\"metric-content flex-1 min-w-0\"},[_c('h3',{staticClass:\"heading\"},[_vm._v(\"\\n            \"+_vm._s(name)+\"\\n          \")]),_vm._v(\" \"),_c('p',{staticClass:\"metric\"},[_vm._v(_vm._s(metric))])])}),0)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"max-w-full flex flex-wrap flex-row ml-auto mr-auto\"},[_c('metric-card',{attrs:{\"header\":_vm.$t('OVERVIEW_REPORTS.CONVERSATION_HEATMAP.HEADER')},scopedSlots:_vm._u([{key:\"control\",fn:function(){return [_c('woot-button',{attrs:{\"icon\":\"arrow-download\",\"size\":\"small\",\"variant\":\"smooth\",\"color-scheme\":\"secondary\"},on:{\"click\":_vm.downloadHeatmapData}},[_vm._v(\"\\n          Download Report\\n        \")])]},proxy:true}])},[_vm._v(\" \"),_c('report-heatmap',{attrs:{\"heat-data\":_vm.accountConversationHeatmap,\"is-loading\":_vm.uiFlags.isFetchingAccountConversationsHeatmap}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"max-w-full flex flex-wrap flex-row ml-auto mr-auto\"},[_c('metric-card',{attrs:{\"header\":_vm.$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.HEADER')}},[_c('agent-table',{attrs:{\"agents\":_vm.agents,\"agent-metrics\":_vm.agentConversationMetric,\"page-index\":_vm.pageIndex,\"is-loading\":_vm.uiFlags.isFetchingAgentConversationMetric},on:{\"page-change\":_vm.onPageNumberChange}})],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentTable.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"agent-table-container\">\n    <ve-table\n      max-height=\"calc(100vh - 21.875rem)\"\n      :fixed-header=\"true\"\n      :columns=\"columns\"\n      :table-data=\"tableData\"\n    />\n    <div v-if=\"isLoading\" class=\"agents-loader\">\n      <spinner />\n      <span>{{\n        $t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.LOADING_MESSAGE')\n      }}</span>\n    </div>\n    <empty-state\n      v-else-if=\"!isLoading && !agentMetrics.length\"\n      :title=\"$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.NO_AGENTS')\"\n    />\n    <div v-if=\"agentMetrics.length > 0\" class=\"table-pagination\">\n      <ve-pagination\n        :total=\"agents.length\"\n        :page-index=\"pageIndex\"\n        :page-size=\"25\"\n        :page-size-option=\"[25]\"\n        @on-page-number-change=\"onPageNumberChange\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { VeTable, VePagination } from 'vue-easytable';\nimport Spinner from 'shared/components/Spinner.vue';\nimport EmptyState from 'dashboard/components/widgets/EmptyState.vue';\nimport rtlMixin from 'shared/mixins/rtlMixin';\nimport Thumbnail from 'dashboard/components/widgets/Thumbnail.vue';\n\nexport default {\n  name: 'AgentTable',\n  components: {\n    EmptyState,\n    Spinner,\n    VeTable,\n    VePagination,\n  },\n  mixins: [rtlMixin],\n  props: {\n    agents: {\n      type: Array,\n      default: () => [],\n    },\n    agentMetrics: {\n      type: Array,\n      default: () => [],\n    },\n    isLoading: {\n      type: Boolean,\n      default: false,\n    },\n    pageIndex: {\n      type: Number,\n      default: 1,\n    },\n  },\n  computed: {\n    tableData() {\n      return this.agentMetrics\n        .filter(agentMetric => this.getAgentInformation(agentMetric.id))\n        .map(agent => {\n          const agentInformation = this.getAgentInformation(agent.id);\n          return {\n            agent: agentInformation.name || agentInformation.available_name,\n            email: agentInformation.email,\n            thumbnail: agentInformation.thumbnail,\n            open: agent.metric.open || 0,\n            unattended: agent.metric.unattended || 0,\n            status: agentInformation.availability_status,\n          };\n        });\n    },\n    columns() {\n      return [\n        {\n          field: 'agent',\n          key: 'agent',\n          title: this.$t(\n            'OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.AGENT'\n          ),\n          fixed: 'left',\n          align: this.isRTLView ? 'right' : 'left',\n          width: 25,\n          renderBodyCell: ({ row }) => (\n            <div class=\"row-user-block\">\n              <Thumbnail\n                src={row.thumbnail}\n                size=\"32px\"\n                username={row.agent}\n                status={row.status}\n              />\n              <div class=\"user-block\">\n                <h6 class=\"title overflow-hidden whitespace-nowrap text-ellipsis\">\n                  {row.agent}\n                </h6>\n                <span class=\"sub-title\">{row.email}</span>\n              </div>\n            </div>\n          ),\n        },\n        {\n          field: 'open',\n          key: 'open',\n          title: this.$t(\n            'OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.OPEN'\n          ),\n          align: this.isRTLView ? 'right' : 'left',\n          width: 10,\n        },\n        {\n          field: 'unattended',\n          key: 'unattended',\n          title: this.$t(\n            'OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.UNATTENDED'\n          ),\n          align: this.isRTLView ? 'right' : 'left',\n          width: 10,\n        },\n      ];\n    },\n  },\n  methods: {\n    onPageNumberChange(pageIndex) {\n      this.$emit('page-change', pageIndex);\n    },\n    getAgentInformation(id) {\n      return this.agents?.find(agent => agent.id === Number(id));\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.agent-table-container {\n  @apply flex flex-col flex-1;\n\n  .ve-table {\n    &::v-deep {\n      th.ve-table-header-th {\n        font-size: var(--font-size-mini) !important;\n        padding: var(--space-small) var(--space-two) !important;\n      }\n\n      td.ve-table-body-td {\n        padding: var(--space-one) var(--space-two) !important;\n      }\n    }\n  }\n\n  &::v-deep .ve-pagination {\n    @apply bg-transparent dark:bg-transparent;\n  }\n\n  &::v-deep .ve-pagination-select {\n    @apply hidden;\n  }\n\n  .row-user-block {\n    @apply items-center flex text-left;\n\n    .user-block {\n      @apply items-start flex flex-col min-w-0 my-0 mx-2;\n\n      .title {\n        @apply text-sm m-0 leading-[1.2] text-slate-800 dark:text-slate-100;\n      }\n      .sub-title {\n        @apply text-xs text-slate-600 dark:text-slate-200;\n      }\n    }\n  }\n\n  .table-pagination {\n    @apply mt-4 text-right;\n  }\n}\n\n.agents-loader {\n  @apply items-center flex text-base justify-center p-8;\n}\n</style>\n","import { render, staticRenderFns } from \"./AgentTable.vue?vue&type=template&id=79c10260&scoped=true&\"\nimport script from \"./AgentTable.vue?vue&type=script&lang=js&\"\nexport * from \"./AgentTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AgentTable.vue?vue&type=style&index=0&id=79c10260&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"79c10260\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"agent-table-container\"},[_c('ve-table',{attrs:{\"max-height\":\"calc(100vh - 21.875rem)\",\"fixed-header\":true,\"columns\":_vm.columns,\"table-data\":_vm.tableData}}),_vm._v(\" \"),(_vm.isLoading)?_c('div',{staticClass:\"agents-loader\"},[_c('spinner'),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.LOADING_MESSAGE')))])],1):(!_vm.isLoading && !_vm.agentMetrics.length)?_c('empty-state',{attrs:{\"title\":_vm.$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.NO_AGENTS')}}):_vm._e(),_vm._v(\" \"),(_vm.agentMetrics.length > 0)?_c('div',{staticClass:\"table-pagination\"},[_c('ve-pagination',{attrs:{\"total\":_vm.agents.length,\"page-index\":_vm.pageIndex,\"page-size\":25,\"page-size-option\":[25]},on:{\"on-page-number-change\":_vm.onPageNumberChange}})],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetricCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetricCard.vue?vue&type=script&lang=js&\"","<template>\n  <div\n    class=\"metric-card flex flex-col m-2 p-4 border border-solid overflow-hidden rounded-md flex-grow shadow-sm text-slate-700 dark:text-slate-100 bg-white dark:bg-slate-800 border-slate-75 dark:border-slate-700 min-h-[10rem]\"\n  >\n    <div class=\"card-header\">\n      <slot name=\"header\">\n        <div class=\"flex items-center gap-0.5 flex-row\">\n          <h5\n            class=\"mb-0 text-slate-800 dark:text-slate-100 font-medium text-xl\"\n          >\n            {{ header }}\n          </h5>\n          <span\n            class=\"flex flex-row items-center pr-2 pl-2 m-1 rounded-sm text-green-400 dark:text-green-400 text-xs bg-green-100/30 dark:bg-green-100/20\"\n          >\n            <span\n              class=\"bg-green-500 dark:bg-green-500 h-1 w-1 rounded-full mr-1 rtl:mr-0 rtl:ml-0\"\n            />\n            <span>\n              {{ $t('OVERVIEW_REPORTS.LIVE') }}\n            </span>\n          </span>\n        </div>\n        <div class=\"card-header--control-area\">\n          <slot name=\"control\" />\n        </div>\n      </slot>\n    </div>\n    <div\n      v-if=\"!isLoading\"\n      class=\"card-body max-w-full w-full ml-auto mr-auto justify-between flex\"\n    >\n      <slot />\n    </div>\n    <div\n      v-else-if=\"isLoading\"\n      class=\"items-center flex text-base justify-center px-12 py-6\"\n    >\n      <spinner />\n      <span class=\"text-slate-300 dark:text-slate-200\">\n        {{ loadingMessage }}\n      </span>\n    </div>\n  </div>\n</template>\n<script>\nimport Spinner from 'shared/components/Spinner.vue';\n\nexport default {\n  name: 'MetricCard',\n  components: {\n    Spinner,\n  },\n  props: {\n    header: {\n      type: String,\n      default: '',\n    },\n    isLoading: {\n      type: Boolean,\n      default: false,\n    },\n    loadingMessage: {\n      type: String,\n      default: '',\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.metric-card {\n  @apply flex flex-col mb-2 p-4 border border-solid overflow-hidden rounded-md flex-grow shadow-sm text-slate-700 dark:text-slate-100 bg-white dark:bg-slate-800 border-slate-75 dark:border-slate-700 min-h-[10rem];\n\n  .card-header--control-area {\n    transition: opacity 0.2s ease-in-out;\n    @apply opacity-20;\n  }\n\n  &:hover {\n    .card-header--control-area {\n      @apply opacity-100;\n    }\n  }\n}\n\n.card-header {\n  grid-template-columns: repeat(auto-fit, minmax(max-content, 50%));\n  gap: var(--space-small) 0px;\n  @apply grid flex-grow w-full mb-6;\n\n  .card-header--control-area {\n    @apply flex flex-row items-center justify-end gap-2;\n  }\n}\n\n.card-body {\n  .metric-content {\n    @apply pb-2;\n    .heading {\n      @apply text-base text-slate-700 dark:text-slate-100;\n    }\n    .metric {\n      @apply text-woot-800 dark:text-woot-300 text-3xl mb-0 mt-1;\n    }\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./MetricCard.vue?vue&type=template&id=a2e7d924&scoped=true&\"\nimport script from \"./MetricCard.vue?vue&type=script&lang=js&\"\nexport * from \"./MetricCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MetricCard.vue?vue&type=style&index=0&id=a2e7d924&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a2e7d924\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"metric-card flex flex-col m-2 p-4 border border-solid overflow-hidden rounded-md flex-grow shadow-sm text-slate-700 dark:text-slate-100 bg-white dark:bg-slate-800 border-slate-75 dark:border-slate-700 min-h-[10rem]\"},[_c('div',{staticClass:\"card-header\"},[_vm._t(\"header\",function(){return [_c('div',{staticClass:\"flex items-center gap-0.5 flex-row\"},[_c('h5',{staticClass:\"mb-0 text-slate-800 dark:text-slate-100 font-medium text-xl\"},[_vm._v(\"\\n          \"+_vm._s(_vm.header)+\"\\n        \")]),_vm._v(\" \"),_c('span',{staticClass:\"flex flex-row items-center pr-2 pl-2 m-1 rounded-sm text-green-400 dark:text-green-400 text-xs bg-green-100/30 dark:bg-green-100/20\"},[_c('span',{staticClass:\"bg-green-500 dark:bg-green-500 h-1 w-1 rounded-full mr-1 rtl:mr-0 rtl:ml-0\"}),_vm._v(\" \"),_c('span',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('OVERVIEW_REPORTS.LIVE'))+\"\\n          \")])])]),_vm._v(\" \"),_c('div',{staticClass:\"card-header--control-area\"},[_vm._t(\"control\")],2)]})],2),_vm._v(\" \"),(!_vm.isLoading)?_c('div',{staticClass:\"card-body max-w-full w-full ml-auto mr-auto justify-between flex\"},[_vm._t(\"default\")],2):(_vm.isLoading)?_c('div',{staticClass:\"items-center flex text-base justify-center px-12 py-6\"},[_c('spinner'),_vm._v(\" \"),_c('span',{staticClass:\"text-slate-300 dark:text-slate-200\"},[_vm._v(\"\\n      \"+_vm._s(_vm.loadingMessage)+\"\\n    \")])],1):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script setup>\nimport { computed } from 'vue';\n\nimport format from 'date-fns/format';\nimport getDay from 'date-fns/getDay';\n\nimport { getQuantileIntervals } from '@chatwoot/utils';\n\nimport { groupHeatmapByDay } from 'helpers/ReportsDataHelper';\nimport { useI18n } from 'dashboard/composables/useI18n';\n\nconst { t } = useI18n();\nconst props = defineProps({\n  heatData: {\n    type: Array,\n    default: () => [],\n  },\n  isLoading: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst processedData = computed(() => {\n  return groupHeatmapByDay(props.heatData);\n});\n\nconst quantileRange = computed(() => {\n  const flattendedData = props.heatData.map(data => data.value);\n  return getQuantileIntervals(flattendedData, [0.2, 0.4, 0.6, 0.8, 0.9, 0.99]);\n});\n\nfunction getCountTooltip(value) {\n  if (!value) {\n    return t('OVERVIEW_REPORTS.CONVERSATION_HEATMAP.NO_CONVERSATIONS');\n  }\n\n  if (value === 1) {\n    return t('OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATION', {\n      count: value,\n    });\n  }\n\n  return t('OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATIONS', {\n    count: value,\n  });\n}\n\nfunction formatDate(dateString) {\n  return format(new Date(dateString), 'MMM d, yyyy');\n}\n\nfunction getDayOfTheWeek(date) {\n  const dayIndex = getDay(date);\n  const days = [\n    t('DAYS_OF_WEEK.SUNDAY'),\n    t('DAYS_OF_WEEK.MONDAY'),\n    t('DAYS_OF_WEEK.TUESDAY'),\n    t('DAYS_OF_WEEK.WEDNESDAY'),\n    t('DAYS_OF_WEEK.THURSDAY'),\n    t('DAYS_OF_WEEK.FRIDAY'),\n    t('DAYS_OF_WEEK.SATURDAY'),\n  ];\n  return days[dayIndex];\n}\nfunction getHeatmapLevelClass(value) {\n  if (!value)\n    return 'outline-slate-100 dark:outline-slate-700 dark:bg-slate-700/40 bg-slate-50/50';\n\n  let level = [...quantileRange.value, Infinity].findIndex(\n    range => value <= range && value > 0\n  );\n\n  if (level > 6) level = 5;\n\n  if (level === 0) {\n    return 'outline-slate-100 dark:outline-slate-700 dark:bg-slate-700/40 bg-slate-50/50';\n  }\n\n  const classes = [\n    'bg-woot-50 dark:bg-woot-800/40 dark:outline-woot-800/80',\n    'bg-woot-100 dark:bg-woot-800/30 dark:outline-woot-800/80',\n    'bg-woot-200 dark:bg-woot-500/40 dark:outline-woot-700/80',\n    'bg-woot-300 dark:bg-woot-500/60 dark:outline-woot-600/80',\n    'bg-woot-600 dark:bg-woot-500/80 dark:outline-woot-500/80',\n    'bg-woot-800 dark:bg-woot-500 dark:outline-woot-400/80',\n  ];\n\n  return classes[level - 1];\n}\n</script>\n\n<template>\n  <div\n    class=\"grid relative w-full gap-x-4 gap-y-2.5 overflow-y-scroll md:overflow-visible grid-cols-[80px_1fr] min-h-72\"\n  >\n    <template v-if=\"isLoading\">\n      <div class=\"grid gap-[5px] flex-shrink-0\">\n        <div\n          v-for=\"ii in 7\"\n          :key=\"ii\"\n          class=\"w-full rounded-sm bg-slate-100 dark:bg-slate-900 animate-loader-pulse h-8 min-w-[70px]\"\n        />\n      </div>\n      <div class=\"grid gap-[5px] w-full min-w-[700px]\">\n        <div\n          v-for=\"ii in 7\"\n          :key=\"ii\"\n          class=\"grid gap-[5px] grid-cols-[repeat(24,_1fr)]\"\n        >\n          <div\n            v-for=\"jj in 24\"\n            :key=\"jj\"\n            class=\"w-full h-8 rounded-sm bg-slate-100 dark:bg-slate-900 animate-loader-pulse\"\n          />\n        </div>\n      </div>\n      <div />\n      <div\n        class=\"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-slate-800 dark:text-slate-200\"\n      >\n        <div\n          v-for=\"ii in 24\"\n          :key=\"ii\"\n          class=\"flex items-center justify-center\"\n        >\n          {{ ii - 1 }} – {{ ii }}\n        </div>\n      </div>\n    </template>\n    <template v-else>\n      <div class=\"grid gap-[5px] flex-shrink-0\">\n        <div\n          v-for=\"dateKey in processedData.keys()\"\n          :key=\"dateKey\"\n          class=\"h-8 min-w-[70px] text-slate-800 dark:text-slate-200 text-[10px] font-semibold flex flex-col items-end justify-center\"\n        >\n          {{ getDayOfTheWeek(new Date(dateKey)) }}\n          <time class=\"font-normal text-slate-700 dark:text-slate-200\">\n            {{ formatDate(dateKey) }}\n          </time>\n        </div>\n      </div>\n      <div class=\"grid gap-[5px] w-full min-w-[700px]\">\n        <div\n          v-for=\"dateKey in processedData.keys()\"\n          :key=\"dateKey\"\n          class=\"grid gap-[5px] grid-cols-[repeat(24,_1fr)]\"\n        >\n          <div\n            v-for=\"data in processedData.get(dateKey)\"\n            :key=\"data.timestamp\"\n            v-tooltip.top=\"getCountTooltip(data.value)\"\n            class=\"h-8 rounded-sm shadow-inner dark:outline dark:outline-1 shadow-black\"\n            :class=\"getHeatmapLevelClass(data.value)\"\n          />\n        </div>\n      </div>\n      <div />\n      <div\n        class=\"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-slate-800 dark:text-slate-200\"\n      >\n        <div\n          v-for=\"ii in 24\"\n          :key=\"ii\"\n          class=\"flex items-center justify-center\"\n        >\n          {{ ii - 1 }} – {{ ii }}\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name getDay\n * @category Weekday Helpers\n * @summary Get the day of the week of the given date.\n *\n * @description\n * Get the day of the week of the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the given date\n * @returns {0|1|2|3|4|5|6} the day of week, 0 represents Sunday\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Which day of the week is 29 February 2012?\n * const result = getDay(new Date(2012, 1, 29))\n * //=> 3\n */\n\nexport default function getDay(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var day = date.getDay();\n  return day;\n}","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Heatmap.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Heatmap.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./Heatmap.vue?vue&type=template&id=2f68d576&\"\nimport script from \"./Heatmap.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./Heatmap.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"grid relative w-full gap-x-4 gap-y-2.5 overflow-y-scroll md:overflow-visible grid-cols-[80px_1fr] min-h-72\"},[(_vm.isLoading)?[_c('div',{staticClass:\"grid gap-[5px] flex-shrink-0\"},_vm._l((7),function(ii){return _c('div',{key:ii,staticClass:\"w-full rounded-sm bg-slate-100 dark:bg-slate-900 animate-loader-pulse h-8 min-w-[70px]\"})}),0),_vm._v(\" \"),_c('div',{staticClass:\"grid gap-[5px] w-full min-w-[700px]\"},_vm._l((7),function(ii){return _c('div',{key:ii,staticClass:\"grid gap-[5px] grid-cols-[repeat(24,_1fr)]\"},_vm._l((24),function(jj){return _c('div',{key:jj,staticClass:\"w-full h-8 rounded-sm bg-slate-100 dark:bg-slate-900 animate-loader-pulse\"})}),0)}),0),_vm._v(\" \"),_c('div'),_vm._v(\" \"),_c('div',{staticClass:\"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-slate-800 dark:text-slate-200\"},_vm._l((24),function(ii){return _c('div',{key:ii,staticClass:\"flex items-center justify-center\"},[_vm._v(\"\\n        \"+_vm._s(ii - 1)+\" – \"+_vm._s(ii)+\"\\n      \")])}),0)]:[_c('div',{staticClass:\"grid gap-[5px] flex-shrink-0\"},_vm._l((_setup.processedData.keys()),function(dateKey){return _c('div',{key:dateKey,staticClass:\"h-8 min-w-[70px] text-slate-800 dark:text-slate-200 text-[10px] font-semibold flex flex-col items-end justify-center\"},[_vm._v(\"\\n        \"+_vm._s(_setup.getDayOfTheWeek(new Date(dateKey)))+\"\\n        \"),_c('time',{staticClass:\"font-normal text-slate-700 dark:text-slate-200\"},[_vm._v(\"\\n          \"+_vm._s(_setup.formatDate(dateKey))+\"\\n        \")])])}),0),_vm._v(\" \"),_c('div',{staticClass:\"grid gap-[5px] w-full min-w-[700px]\"},_vm._l((_setup.processedData.keys()),function(dateKey){return _c('div',{key:dateKey,staticClass:\"grid gap-[5px] grid-cols-[repeat(24,_1fr)]\"},_vm._l((_setup.processedData.get(dateKey)),function(data){return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip.top\",value:(_setup.getCountTooltip(data.value)),expression:\"getCountTooltip(data.value)\",modifiers:{\"top\":true}}],key:data.timestamp,staticClass:\"h-8 rounded-sm shadow-inner dark:outline dark:outline-1 shadow-black\",class:_setup.getHeatmapLevelClass(data.value)})}),0)}),0),_vm._v(\" \"),_c('div'),_vm._v(\" \"),_c('div',{staticClass:\"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-slate-800 dark:text-slate-200\"},_vm._l((24),function(ii){return _c('div',{key:ii,staticClass:\"flex items-center justify-center\"},[_vm._v(\"\\n        \"+_vm._s(ii - 1)+\" – \"+_vm._s(ii)+\"\\n      \")])}),0)]],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"flex-1 overflow-auto p-4\">\n    <div class=\"flex flex-col md:flex-row items-center\">\n      <div\n        class=\"flex-1 w-full max-w-full md:w-[65%] md:max-w-[65%] conversation-metric\"\n      >\n        <metric-card\n          :header=\"$t('OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.HEADER')\"\n          :is-loading=\"uiFlags.isFetchingAccountConversationMetric\"\n          :loading-message=\"\n            $t('OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.LOADING_MESSAGE')\n          \"\n        >\n          <div\n            v-for=\"(metric, name, index) in conversationMetrics\"\n            :key=\"index\"\n            class=\"metric-content flex-1 min-w-0\"\n          >\n            <h3 class=\"heading\">\n              {{ name }}\n            </h3>\n            <p class=\"metric\">{{ metric }}</p>\n          </div>\n        </metric-card>\n      </div>\n      <div class=\"flex-1 w-full max-w-full md:w-[35%] md:max-w-[35%]\">\n        <metric-card :header=\"$t('OVERVIEW_REPORTS.AGENT_STATUS.HEADER')\">\n          <div\n            v-for=\"(metric, name, index) in agentStatusMetrics\"\n            :key=\"index\"\n            class=\"metric-content flex-1 min-w-0\"\n          >\n            <h3 class=\"heading\">\n              {{ name }}\n            </h3>\n            <p class=\"metric\">{{ metric }}</p>\n          </div>\n        </metric-card>\n      </div>\n    </div>\n    <div class=\"max-w-full flex flex-wrap flex-row ml-auto mr-auto\">\n      <metric-card :header=\"$t('OVERVIEW_REPORTS.CONVERSATION_HEATMAP.HEADER')\">\n        <template #control>\n          <woot-button\n            icon=\"arrow-download\"\n            size=\"small\"\n            variant=\"smooth\"\n            color-scheme=\"secondary\"\n            @click=\"downloadHeatmapData\"\n          >\n            Download Report\n          </woot-button>\n        </template>\n        <report-heatmap\n          :heat-data=\"accountConversationHeatmap\"\n          :is-loading=\"uiFlags.isFetchingAccountConversationsHeatmap\"\n        />\n      </metric-card>\n    </div>\n    <div class=\"max-w-full flex flex-wrap flex-row ml-auto mr-auto\">\n      <metric-card :header=\"$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.HEADER')\">\n        <agent-table\n          :agents=\"agents\"\n          :agent-metrics=\"agentConversationMetric\"\n          :page-index=\"pageIndex\"\n          :is-loading=\"uiFlags.isFetchingAgentConversationMetric\"\n          @page-change=\"onPageNumberChange\"\n        />\n      </metric-card>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex';\nimport AgentTable from './components/overview/AgentTable.vue';\nimport MetricCard from './components/overview/MetricCard.vue';\nimport { OVERVIEW_METRICS } from './constants';\nimport ReportHeatmap from './components/Heatmap.vue';\n\nimport endOfDay from 'date-fns/endOfDay';\nimport getUnixTime from 'date-fns/getUnixTime';\nimport startOfDay from 'date-fns/startOfDay';\nimport subDays from 'date-fns/subDays';\n\nexport default {\n  name: 'LiveReports',\n  components: {\n    AgentTable,\n    MetricCard,\n    ReportHeatmap,\n  },\n  data() {\n    return {\n      pageIndex: 1,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      agentStatus: 'agents/getAgentStatus',\n      agents: 'agents/getAgents',\n      accountConversationMetric: 'getAccountConversationMetric',\n      agentConversationMetric: 'getAgentConversationMetric',\n      accountConversationHeatmap: 'getAccountConversationHeatmapData',\n      uiFlags: 'getOverviewUIFlags',\n    }),\n    agentStatusMetrics() {\n      let metric = {};\n      Object.keys(this.agentStatus).forEach(key => {\n        const metricName = this.$t(\n          `OVERVIEW_REPORTS.AGENT_STATUS.${OVERVIEW_METRICS[key]}`\n        );\n        metric[metricName] = this.agentStatus[key];\n      });\n      return metric;\n    },\n    conversationMetrics() {\n      let metric = {};\n      Object.keys(this.accountConversationMetric).forEach(key => {\n        const metricName = this.$t(\n          `OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.${OVERVIEW_METRICS[key]}`\n        );\n        metric[metricName] = this.accountConversationMetric[key];\n      });\n      return metric;\n    },\n  },\n  mounted() {\n    this.$store.dispatch('agents/get');\n    this.fetchAllData();\n\n    this.$emitter.on('fetch_overview_reports', () => {\n      this.fetchAllData();\n    });\n  },\n  methods: {\n    fetchAllData() {\n      this.fetchAccountConversationMetric();\n      this.fetchAgentConversationMetric();\n      this.fetchHeatmapData();\n    },\n    downloadHeatmapData() {\n      let to = endOfDay(new Date());\n\n      this.$store.dispatch('downloadAccountConversationHeatmap', {\n        to: getUnixTime(to),\n      });\n    },\n    fetchHeatmapData() {\n      if (this.uiFlags.isFetchingAccountConversationsHeatmap) {\n        return;\n      }\n\n      // the data for the last 6 days won't ever change,\n      // so there's no need to fetch it again\n      // but we can write some logic to check if the data is already there\n      // if it is there, we can refetch data only for today all over again\n      // and reconcile it with the rest of the data\n      // this will reduce the load on the server doing number crunching\n      let to = endOfDay(new Date());\n      let from = startOfDay(subDays(to, 6));\n\n      if (this.accountConversationHeatmap.length) {\n        to = endOfDay(new Date());\n        from = startOfDay(to);\n      }\n\n      this.$store.dispatch('fetchAccountConversationHeatmap', {\n        metric: 'conversations_count',\n        from: getUnixTime(from),\n        to: getUnixTime(to),\n        groupBy: 'hour',\n        businessHours: false,\n      });\n    },\n    fetchAccountConversationMetric() {\n      this.$store.dispatch('fetchAccountConversationMetric', {\n        type: 'account',\n      });\n    },\n    fetchAgentConversationMetric() {\n      this.$store.dispatch('fetchAgentConversationMetric', {\n        type: 'agent',\n        page: this.pageIndex,\n      });\n    },\n    onPageNumberChange(pageIndex) {\n      this.pageIndex = pageIndex;\n      this.fetchAgentConversationMetric();\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LiveReports.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LiveReports.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LiveReports.vue?vue&type=template&id=67122705&\"\nimport script from \"./LiveReports.vue?vue&type=script&lang=js&\"\nexport * from \"./LiveReports.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}