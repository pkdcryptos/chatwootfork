{"version":3,"sources":["webpack:///./app/javascript/dashboard/helper/portalHelper.js","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/components/Layout/SettingsLayout.vue?5af0","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/components/Layout/SettingsLayout.vue?98ca","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/components/Layout/SettingsLayout.vue","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/components/PortalSettingsBasicForm.vue?4761","webpack:///PortalSettingsBasicForm.vue","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/components/PortalSettingsBasicForm.vue?23d7","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/components/PortalSettingsBasicForm.vue","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/pages/portals/EditPortalBasic.vue?5f9c","webpack:///EditPortalBasic.vue","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/pages/portals/EditPortalBasic.vue?fe43","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/pages/portals/EditPortalBasic.vue"],"names":["buildPortalURL","portalSlug","window","chatwootConfig","hostURL","helpCenterURL","buildPortalArticleURL","categorySlug","locale","articleSlug","portalURL","component","_vm","this","_c","_self","_setupProxy","staticClass","$slots","title","_t","_v","_s","_e","EXAMPLE_URL","t","useI18n","name","state","slug","domain","logoUrl","avatarBlobId","rules","required","minLength","isDomain","v$","nameError","value","$error","slugError","domainError","domainHelpText","domainExampleHelpText","exampleURL","showDeleteButton","emit","uploadLogoToStorage","file","fileUrl","blobId","portal","props","custom_domain","logo","logoURL","file_url","blob_id","$touch","$invalid","size","_setup","SettingsLayout","attrs","$t","scopedSlots","_u","key","fn","isSubmitting","on","onSubmitClick","submitButtonText","proxy","onFileChange","deleteAvatar","class","error","onNameChange","model","callback","$$v","$set","expression","getters","route","router","store","uiFlags","lastPortalSlug","currentPortalSlug","params","currentPortal","portalObj","alertMessage","dispatch","replace","message","PortalSettingsBasicForm","isUpdating","updatePortalSettings","deleteLogo"],"mappings":"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","file":"js/85-9965a6657fe4b2069eb0.chunk.js","sourcesContent":["export const buildPortalURL = portalSlug => {\n  const { hostURL, helpCenterURL } = window.chatwootConfig;\n  const baseURL = helpCenterURL || hostURL || '';\n  return `${baseURL}/hc/${portalSlug}`;\n};\n\nexport const buildPortalArticleURL = (\n  portalSlug,\n  categorySlug,\n  locale,\n  articleSlug\n) => {\n  const portalURL = buildPortalURL(portalSlug);\n  return `${portalURL}/articles/${articleSlug}`;\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"flex-grow-0 flex-shrink-0 w-full h-full max-w-full bg-white border border-transparent border-solid dark:bg-slate-900 dark:border-transparent md:max-w-2xl\"},[(_vm.$slots.title || _vm.title)?_c('h3',{staticClass:\"text-lg text-black-900 dark:text-slate-200\"},[_vm._t(\"title\",function(){return [_vm._v(_vm._s(_vm.title))]})],2):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"mx-0 my-4 border-b border-solid border-slate-25 dark:border-slate-800\"},[_vm._t(\"default\")],2),_vm._v(\" \"),_c('div',{staticClass:\"flex justify-between\"},[_c('div',[_vm._t(\"footer-left\")],2),_vm._v(\" \"),_c('div',[_vm._t(\"footer-right\")],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SettingsLayout.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SettingsLayout.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./SettingsLayout.vue?vue&type=template&id=513e5b46&\"\nimport script from \"./SettingsLayout.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./SettingsLayout.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c(_setup.SettingsLayout,{attrs:{\"title\":_vm.$t('HELP_CENTER.PORTAL.ADD.CREATE_FLOW_PAGE.BASIC_SETTINGS_PAGE.TITLE')},scopedSlots:_vm._u([{key:\"footer-right\",fn:function(){return [_c('woot-button',{attrs:{\"is-loading\":_vm.isSubmitting,\"is-disabled\":_setup.v$.$invalid},on:{\"click\":_setup.onSubmitClick}},[_vm._v(\"\\n      \"+_vm._s(_vm.submitButtonText)+\"\\n    \")])]},proxy:true}])},[_c('div',[_c('div',{staticClass:\"mb-4\"},[_c('div',{staticClass:\"flex flex-row items-center\"},[_c('woot-avatar-uploader',{attrs:{\"label\":_vm.$t('HELP_CENTER.PORTAL.ADD.LOGO.LABEL'),\"src\":_setup.state.logoUrl},on:{\"change\":_setup.onFileChange}}),_vm._v(\" \"),(_setup.showDeleteButton)?_c('div',{staticClass:\"avatar-delete-btn\"},[_c('woot-button',{attrs:{\"type\":\"button\",\"color-scheme\":\"alert\",\"variant\":\"hollow\",\"size\":\"small\"},on:{\"click\":_setup.deleteAvatar}},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('PROFILE_SETTINGS.DELETE_AVATAR'))+\"\\n          \")])],1):_vm._e()],1),_vm._v(\" \"),_c('p',{staticClass:\"mt-1 mb-0 text-xs not-italic text-slate-600 dark:text-slate-400\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('HELP_CENTER.PORTAL.ADD.LOGO.HELP_TEXT'))+\"\\n      \")])]),_vm._v(\" \"),_c('div',{staticClass:\"mb-4\"},[_c('woot-input',{class:{ error: _setup.v$.name.$error },attrs:{\"error\":_setup.nameError,\"label\":_vm.$t('HELP_CENTER.PORTAL.ADD.NAME.LABEL'),\"placeholder\":_vm.$t('HELP_CENTER.PORTAL.ADD.NAME.PLACEHOLDER'),\"help-text\":_vm.$t('HELP_CENTER.PORTAL.ADD.NAME.HELP_TEXT')},on:{\"blur\":_setup.v$.name.$touch,\"input\":_setup.onNameChange},model:{value:(_setup.state.name),callback:function ($$v) {_vm.$set(_setup.state, \"name\", $$v)},expression:\"state.name\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"mb-4\"},[_c('woot-input',{class:{ error: _setup.v$.slug.$error },attrs:{\"error\":_setup.slugError,\"label\":_vm.$t('HELP_CENTER.PORTAL.ADD.SLUG.LABEL'),\"placeholder\":_vm.$t('HELP_CENTER.PORTAL.ADD.SLUG.PLACEHOLDER'),\"help-text\":_setup.domainHelpText},on:{\"blur\":_setup.v$.slug.$touch},model:{value:(_setup.state.slug),callback:function ($$v) {_vm.$set(_setup.state, \"slug\", $$v)},expression:\"state.slug\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"mb-4\"},[_c('woot-input',{class:{ error: _setup.v$.domain.$error },attrs:{\"label\":_vm.$t('HELP_CENTER.PORTAL.ADD.DOMAIN.LABEL'),\"placeholder\":_vm.$t('HELP_CENTER.PORTAL.ADD.DOMAIN.PLACEHOLDER'),\"help-text\":_setup.domainExampleHelpText,\"error\":_setup.domainError},on:{\"blur\":_setup.v$.domain.$touch},model:{value:(_setup.state.domain),callback:function ($$v) {_vm.$set(_setup.state, \"domain\", $$v)},expression:\"state.domain\"}})],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script setup>\nimport { useVuelidate } from '@vuelidate/core';\nimport { required, minLength } from '@vuelidate/validators';\n\nimport { defineComponent, reactive, computed, onMounted } from 'vue';\nimport { useI18n } from 'dashboard/composables/useI18n';\nimport { useAlert } from 'dashboard/composables';\n\nimport { convertToCategorySlug } from 'dashboard/helper/commons.js';\nimport { buildPortalURL } from 'dashboard/helper/portalHelper';\nimport wootConstants from 'dashboard/constants/globals';\nimport { hasValidAvatarUrl } from 'dashboard/helper/URLHelper';\nimport { checkFileSizeLimit } from 'shared/helpers/FileHelper';\nimport { uploadFile } from 'dashboard/helper/uploadHelper';\nimport { isDomain } from 'shared/helpers/Validators';\nimport SettingsLayout from './Layout/SettingsLayout.vue';\n\nconst { EXAMPLE_URL } = wootConstants;\nconst MAXIMUM_FILE_UPLOAD_SIZE = 4; // in MB\n\nconst { t } = useI18n();\n\ndefineComponent({\n  name: 'PortalSettingsBasicForm',\n});\n\nconst props = defineProps({\n  portal: {\n    type: Object,\n    default: () => {},\n  },\n  isSubmitting: {\n    type: Boolean,\n    default: false,\n  },\n  submitButtonText: {\n    type: String,\n    default: '',\n  },\n});\n\nconst state = reactive({\n  name: '',\n  slug: '',\n  domain: '',\n  logoUrl: '',\n  avatarBlobId: '',\n});\n\nconst rules = {\n  name: {\n    required,\n    minLength: minLength(2),\n  },\n  slug: {\n    required,\n  },\n  domain: {\n    isDomain,\n  },\n};\n\nconst v$ = useVuelidate(rules, state);\n\nconst nameError = computed(() => {\n  if (v$.value.name.$error) {\n    return t('HELP_CENTER.CATEGORY.ADD.NAME.ERROR');\n  }\n  return '';\n});\n\nconst slugError = computed(() => {\n  if (v$.value.slug.$error) {\n    return t('HELP_CENTER.CATEGORY.ADD.SLUG.ERROR');\n  }\n  return '';\n});\n\nconst domainError = computed(() => {\n  if (v$.value.domain.$error) {\n    return t('HELP_CENTER.PORTAL.ADD.DOMAIN.ERROR');\n  }\n  return '';\n});\n\nconst domainHelpText = computed(() => {\n  return buildPortalURL(state.slug);\n});\n\nconst domainExampleHelpText = computed(() => {\n  return t('HELP_CENTER.PORTAL.ADD.DOMAIN.HELP_TEXT', {\n    exampleURL: EXAMPLE_URL,\n  });\n});\n\nconst showDeleteButton = computed(() => {\n  return hasValidAvatarUrl(state.logoUrl);\n});\n\nconst emit = defineEmits(['submit', 'delete-logo']);\n\nonMounted(() => {\n  const portal = props.portal || {};\n  state.name = portal.name || '';\n  state.slug = portal.slug || '';\n  state.domain = portal.custom_domain || '';\n\n  if (portal.logo) {\n    const {\n      logo: { file_url: logoURL, blob_id: blobId },\n    } = portal;\n    state.logoUrl = logoURL;\n    state.avatarBlobId = blobId;\n  }\n});\n\nfunction onNameChange() {\n  state.slug = convertToCategorySlug(state.name);\n}\n\nfunction onSubmitClick() {\n  v$.value.$touch();\n  if (v$.value.$invalid) {\n    return;\n  }\n\n  const portal = {\n    name: state.name,\n    slug: state.slug,\n    custom_domain: state.domain,\n    blob_id: state.avatarBlobId || null,\n  };\n  emit('submit', portal);\n}\nasync function deleteAvatar() {\n  state.logoUrl = '';\n  state.avatarBlobId = '';\n  emit('delete-logo');\n}\n\nasync function uploadLogoToStorage(file) {\n  try {\n    const { fileUrl, blobId } = await uploadFile(file);\n    if (fileUrl) {\n      state.logoUrl = fileUrl;\n      state.avatarBlobId = blobId;\n    }\n  } catch (error) {\n    useAlert(t('HELP_CENTER.PORTAL.ADD.LOGO.IMAGE_UPLOAD_ERROR'));\n  }\n}\n\nfunction onFileChange({ file }) {\n  if (checkFileSizeLimit(file, MAXIMUM_FILE_UPLOAD_SIZE)) {\n    uploadLogoToStorage(file);\n  } else {\n    const errorKey =\n      'PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_SIZE_ERROR';\n    useAlert(t(errorKey, { size: MAXIMUM_FILE_UPLOAD_SIZE }));\n  }\n}\n</script>\n\n<template>\n  <SettingsLayout\n    :title=\"\n      $t('HELP_CENTER.PORTAL.ADD.CREATE_FLOW_PAGE.BASIC_SETTINGS_PAGE.TITLE')\n    \"\n  >\n    <div>\n      <div class=\"mb-4\">\n        <div class=\"flex flex-row items-center\">\n          <woot-avatar-uploader\n            :label=\"$t('HELP_CENTER.PORTAL.ADD.LOGO.LABEL')\"\n            :src=\"state.logoUrl\"\n            @change=\"onFileChange\"\n          />\n          <div v-if=\"showDeleteButton\" class=\"avatar-delete-btn\">\n            <woot-button\n              type=\"button\"\n              color-scheme=\"alert\"\n              variant=\"hollow\"\n              size=\"small\"\n              @click=\"deleteAvatar\"\n            >\n              {{ $t('PROFILE_SETTINGS.DELETE_AVATAR') }}\n            </woot-button>\n          </div>\n        </div>\n        <p\n          class=\"mt-1 mb-0 text-xs not-italic text-slate-600 dark:text-slate-400\"\n        >\n          {{ $t('HELP_CENTER.PORTAL.ADD.LOGO.HELP_TEXT') }}\n        </p>\n      </div>\n      <div class=\"mb-4\">\n        <woot-input\n          v-model=\"state.name\"\n          :class=\"{ error: v$.name.$error }\"\n          :error=\"nameError\"\n          :label=\"$t('HELP_CENTER.PORTAL.ADD.NAME.LABEL')\"\n          :placeholder=\"$t('HELP_CENTER.PORTAL.ADD.NAME.PLACEHOLDER')\"\n          :help-text=\"$t('HELP_CENTER.PORTAL.ADD.NAME.HELP_TEXT')\"\n          @blur=\"v$.name.$touch\"\n          @input=\"onNameChange\"\n        />\n      </div>\n      <div class=\"mb-4\">\n        <woot-input\n          v-model=\"state.slug\"\n          :class=\"{ error: v$.slug.$error }\"\n          :error=\"slugError\"\n          :label=\"$t('HELP_CENTER.PORTAL.ADD.SLUG.LABEL')\"\n          :placeholder=\"$t('HELP_CENTER.PORTAL.ADD.SLUG.PLACEHOLDER')\"\n          :help-text=\"domainHelpText\"\n          @blur=\"v$.slug.$touch\"\n        />\n      </div>\n      <div class=\"mb-4\">\n        <woot-input\n          v-model=\"state.domain\"\n          :class=\"{ error: v$.domain.$error }\"\n          :label=\"$t('HELP_CENTER.PORTAL.ADD.DOMAIN.LABEL')\"\n          :placeholder=\"$t('HELP_CENTER.PORTAL.ADD.DOMAIN.PLACEHOLDER')\"\n          :help-text=\"domainExampleHelpText\"\n          :error=\"domainError\"\n          @blur=\"v$.domain.$touch\"\n        />\n      </div>\n    </div>\n    <template #footer-right>\n      <woot-button\n        :is-loading=\"isSubmitting\"\n        :is-disabled=\"v$.$invalid\"\n        @click=\"onSubmitClick\"\n      >\n        {{ submitButtonText }}\n      </woot-button>\n    </template>\n  </SettingsLayout>\n</template>\n","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PortalSettingsBasicForm.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PortalSettingsBasicForm.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./PortalSettingsBasicForm.vue?vue&type=template&id=f1e8e3ee&\"\nimport script from \"./PortalSettingsBasicForm.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./PortalSettingsBasicForm.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return (_setup.currentPortal)?_c(_setup.PortalSettingsBasicForm,{attrs:{\"portal\":_setup.currentPortal,\"is-submitting\":_setup.uiFlags.isUpdating,\"submit-button-text\":_vm.$t('HELP_CENTER.PORTAL.EDIT.EDIT_BASIC_INFO.BUTTON_TEXT')},on:{\"submit\":_setup.updatePortalSettings,\"delete-logo\":_setup.deleteLogo}}):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script setup>\nimport PortalSettingsBasicForm from 'dashboard/routes/dashboard/helpcenter/components/PortalSettingsBasicForm.vue';\n\nimport { useAlert } from 'dashboard/composables';\nimport { useStoreGetters, useStore } from 'dashboard/composables/store';\nimport { useRoute, useRouter } from 'dashboard/composables/route';\nimport { useI18n } from 'dashboard/composables/useI18n';\nimport { defineComponent, computed, ref, onMounted } from 'vue';\n\ndefineComponent({ name: 'EditPortalBasic' });\n\nconst getters = useStoreGetters();\nconst route = useRoute();\nconst router = useRouter();\nconst store = useStore();\nconst { t } = useI18n();\n\nconst uiFlags = getters['portals/uiFlagsIn'];\n\nconst lastPortalSlug = ref(null);\n\nconst currentPortalSlug = computed(() => {\n  return route.params.portalSlug;\n});\n\nconst currentPortal = computed(() => {\n  const slug = route.params.portalSlug;\n  return getters['portals/portalBySlug'].value(slug);\n});\n\nonMounted(() => {\n  lastPortalSlug.value = currentPortalSlug.value;\n});\n\nasync function updatePortalSettings(portalObj) {\n  let alertMessage = '';\n\n  try {\n    const portalSlug = lastPortalSlug.value;\n    await store.dispatch('portals/update', { ...portalObj, portalSlug });\n\n    alertMessage = t('HELP_CENTER.PORTAL.ADD.API.SUCCESS_MESSAGE_FOR_UPDATE');\n\n    if (lastPortalSlug.value !== portalObj.slug) {\n      await store.dispatch('portals/index');\n      router.replace({\n        name: route.name,\n        params: { portalSlug: portalObj.slug },\n      });\n    }\n  } catch (error) {\n    alertMessage =\n      error?.message ||\n      t('HELP_CENTER.PORTAL.ADD.API.ERROR_MESSAGE_FOR_UPDATE');\n  } finally {\n    useAlert(alertMessage);\n  }\n}\nasync function deleteLogo() {\n  try {\n    const portalSlug = lastPortalSlug.value;\n    await store.dispatch('portals/deleteLogo', {\n      portalSlug,\n    });\n  } catch (error) {\n    useAlert(\n      error?.message || t('HELP_CENTER.PORTAL.ADD.LOGO.IMAGE_DELETE_ERROR')\n    );\n  }\n}\n</script>\n\n<template>\n  <portal-settings-basic-form\n    v-if=\"currentPortal\"\n    :portal=\"currentPortal\"\n    :is-submitting=\"uiFlags.isUpdating\"\n    :submit-button-text=\"\n      $t('HELP_CENTER.PORTAL.EDIT.EDIT_BASIC_INFO.BUTTON_TEXT')\n    \"\n    @submit=\"updatePortalSettings\"\n    @delete-logo=\"deleteLogo\"\n  />\n</template>\n","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPortalBasic.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPortalBasic.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./EditPortalBasic.vue?vue&type=template&id=3012ffe0&\"\nimport script from \"./EditPortalBasic.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./EditPortalBasic.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}