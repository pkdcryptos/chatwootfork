(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{191:function(t,e,n){"use strict";var r={props:{size:{type:String,default:"small"},colorScheme:{type:String,default:""}},computed:{colorSchemeClasses:function(){return"primary"===this.colorScheme?"before:!border-t-woot-500":"warning"===this.colorScheme?"before:!border-t-yellow-500":"success"===this.colorScheme?"before:!border-t-success-500":this.colorScheme}}},a=(n(370),n(8)),s=Object(a.a)(r,(function(){var t=this;return(0,t._self._c)("span",{staticClass:"spinner",class:`${t.size} ${t.colorSchemeClasses}`})}),[],!1,null,"25f4edd6",null);e.a=s.exports},2634:function(t,e,n){"use strict";var r=n(541),a=(window.chatwootConfig||{}).apiHost,s=void 0===a?"":a,o=r.a.create({baseURL:"".concat(s,"/")});e.a=o},2639:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"c",(function(){return f}));n(1778),n(10),n(28),n(13),n(9),n(37);var r=n(54),a=n(2634),s=n(381);function o(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function i(t,e,n,r,a,s,o){try{var i=t[s](o),l=i.value}catch(u){return void n(u)}i.done?e(l):Promise.resolve(l).then(r,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var s=t.apply(e,n);function o(t){i(s,r,a,o,l,"next",t)}function l(t){i(s,r,a,o,l,"throw",t)}o(void 0)}))}}var u=function(){var t=l(regeneratorRuntime.mark((function t(e){var n,i,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.ssoAccountId,i=e.ssoConversationId,l=o(e,["ssoAccountId","ssoConversationId"]),t.prev=1,t.next=4,a.a.post("auth/sign_in",l);case 4:u=t.sent,Object(r.g)(u),Object(r.c)(),window.location=Object(s.a)({ssoAccountId:n,ssoConversationId:i,user:u.data.data}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),Object(r.i)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=l(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.a.post("api/v1/accounts.json",{account_name:e.accountName.trim(),user_full_name:e.fullName.trim(),email:e.email,password:e.password,h_captcha_client_response:e.hCaptchaClientResponse});case 3:return n=t.sent,Object(r.g)(n),t.abrupt("return",n.data);case 8:t.prev=8,t.t0=t.catch(0),Object(r.i)(t.t0);case 11:return t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=l(regeneratorRuntime.mark((function t(e){var n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.confirmationToken,t.prev=1,t.next=4,a.a.post("auth/confirmation",{confirmation_token:n});case 4:s=t.sent,Object(r.g)(s),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Object(r.i)(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=l(regeneratorRuntime.mark((function t(e){var n,s,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.resetPasswordToken,s=e.password,o=e.confirmPassword,t.prev=1,t.next=4,a.a.put("auth/password",{reset_password_token:n,password_confirmation:o,password:s});case 4:i=t.sent,Object(r.g)(i),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Object(r.i)(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=l(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.email,t.abrupt("return",a.a.post("auth/password",{email:n}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},2642:function(t,e,n){"use strict";var r={props:{label:{type:String,default:""},name:{type:String,required:!0},icon:{type:String,default:""},hasError:{type:Boolean,default:!1},errorMessage:{type:String,default:""}}},a=n(8),s=Object(a.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"space-y-1"},[t.label?e("label",{staticClass:"flex justify-between text-sm font-medium leading-6 text-slate-900 dark:text-white",class:{"text-red-500":t.hasError},attrs:{for:t.name}},[t._t("label",(function(){return[t._v("\n      "+t._s(t.label)+"\n    ")]})),t._v(" "),t._t("rightOfLabel")],2):t._e(),t._v(" "),e("div",{staticClass:"w-full"},[e("div",{staticClass:"flex items-center relative w-full"},[t.icon?e("fluent-icon",{staticClass:"absolute left-2 transform text-slate-400 dark:text-slate-600 w-5 h-5",attrs:{size:"16",icon:t.icon}}):t._e(),t._v(" "),t._t("default")],2),t._v(" "),t.errorMessage&&t.hasError?e("span",{staticClass:"text-xs text-red-400 leading-2"},[t._v("\n      "+t._s(t.errorMessage)+"\n    ")]):t._e()])])}),[],!1,null,null,null);e.a=s.exports},2681:function(t,e,n){"use strict";n(51);var r={components:{Spinner:n(191).a},props:{disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},buttonText:{type:String,default:""},buttonClass:{type:String,default:""},iconClass:{type:String,default:""},type:{type:String,default:"submit"}},computed:{computedClass:function(){return"\n        ".concat(this.disabled?"opacity-40 hover:bg-woot-500":"","\n        ").concat(this.buttonClass||" ","\n      ")}},methods:{onClick:function(){this.$emit("click")}}},a=n(8),s=Object(a.a)(r,(function(){var t=this,e=t._self._c;return e("button",{staticClass:"flex items-center w-full justify-center rounded-md bg-woot-500 py-3 px-3 text-base font-medium text-white shadow-sm hover:bg-woot-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-woot-500 cursor-pointer",class:t.computedClass,attrs:{type:t.type,"data-testid":"submit_button",disabled:t.disabled},on:{click:t.onClick}},[e("span",[t._v(t._s(t.buttonText))]),t._v(" "),t.iconClass?e("fluent-icon",{staticClass:"icon",attrs:{icon:t.iconClass}}):t._e(),t._v(" "),t.loading?e("spinner"):t._e()],1)}),[],!1,null,null,null);e.a=s.exports},2682:function(t,e,n){"use strict";n(57),n(80);var r={components:{WithLabel:n(2642).a},props:{label:{type:String,default:""},name:{type:String,required:!0},type:{type:String,default:"text"},tabindex:{type:Number,default:void 0},required:{type:Boolean,default:!1},placeholder:{type:String,default:""},value:{type:[String,Number],default:""},icon:{type:String,default:""},hasError:{type:Boolean,default:!1},errorMessage:{type:String,default:""},dataTestid:{type:String,default:""},spacing:{type:String,default:"base",validator:function(t){return["base","compact"].includes(t)}}},methods:{onInput:function(t){this.$emit("input",t.target.value)}}},a=n(8),s=Object(a.a)(r,(function(){var t=this,e=t._self._c;return e("with-label",{attrs:{label:t.label,icon:t.icon,name:t.name,"has-error":t.hasError,"error-message":t.errorMessage},scopedSlots:t._u([{key:"rightOfLabel",fn:function(){return[t._t("default")]},proxy:!0}],null,!0)},[t._v(" "),e("input",{staticClass:"block w-full border-none rounded-md shadow-sm appearance-none outline outline-1 focus:outline-2 text-slate-900 dark:text-slate-100 placeholder:text-slate-400 sm:text-sm sm:leading-6 dark:bg-slate-800",class:{"focus:outline-red-600 outline-red-600 dark:focus:outline-red-600 dark:outline-red-600":t.hasError,"outline-slate-200 dark:outline-slate-600 dark:focus:outline-woot-500 focus:outline-woot-500":!t.hasError,"px-3 py-3":"base"===t.spacing,"px-3 py-2 mb-0":"compact"===t.spacing,"pl-9":t.icon},attrs:{id:t.name,name:t.name,type:t.type,autocomplete:"off",tabindex:t.tabindex,required:t.required,placeholder:t.placeholder,"data-testid":t.dataTestid},domProps:{value:t.value},on:{input:t.onInput,blur:function(e){return t.$emit("blur")}}})])}),[],!1,null,null,null);e.a=s.exports},272:function(t,e,n){"use strict";n.d(e,"b",(function(){return r}));n(52),n(73);var r=function(t,e){return t&&e?t.replace(/Chatwoot/g,e):t};e.a={methods:{useInstallationName:r}}},2859:function(t,e,n){"use strict";n(10),n(148),n(21),n(23),n(25),n(208);var r={props:{label:{type:String,default:""}}},a=n(8),s={components:{SimpleDivider:Object(a.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative my-4 section-separator"},[t._m(0),t._v(" "),t.label?e("div",{staticClass:"relative flex justify-center text-sm"},[e("span",{staticClass:"bg-white dark:bg-slate-800 px-2 text-slate-500 dark:text-white"},[t._v("\n      "+t._s(t.label)+"\n    ")])]):t._e()])}),[function(){var t=this._self._c;return t("div",{staticClass:"absolute inset-0 flex items-center",attrs:{"aria-hidden":"true"}},[t("div",{staticClass:"w-full border-t border-slate-200 dark:border-slate-600"})])}],!1,null,null,null).exports},props:{showSeparator:{type:Boolean,default:!0}},methods:{getGoogleAuthUrl:function(){var t=window.chatwootConfig.googleOAuthClientId,e=window.chatwootConfig.googleOAuthCallbackUrl,n=new URLSearchParams({client_id:t,redirect_uri:e,response_type:"code",scope:"email profile"}).toString();return"".concat("https://accounts.google.com/o/oauth2/auth/oauthchooseaccount","?").concat(n)}}},o=Object(a.a)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col"},[e("a",{staticClass:"inline-flex w-full justify-center rounded-md bg-white py-3 px-4 shadow-sm ring-1 ring-inset ring-slate-200 dark:ring-slate-600 hover:bg-slate-50 focus:outline-offset-0 dark:bg-slate-700 dark:hover:bg-slate-700",attrs:{href:t.getGoogleAuthUrl()}},[e("img",{staticClass:"h-6",attrs:{src:"/assets/images/auth/google.svg",alt:"Google Logo"}}),t._v(" "),e("span",{staticClass:"text-base font-medium ml-2 text-slate-600 dark:text-white"},[t._v("\n      "+t._s(t.$t("LOGIN.OAUTH.GOOGLE_LOGIN"))+"\n    ")])]),t._v(" "),t.showSeparator?e("simple-divider",{ref:"divider",staticClass:"uppercase",attrs:{label:t.$t("COMMON.OR")}}):t._e()],1)}),[],!1,null,null,null);e.a=o.exports},311:function(t,e,n){},3355:function(t,e,n){"use strict";n.r(e);n(52),n(73),n(13),n(9),n(11),n(15),n(12),n(16);var r=n(129),a=n(69),s=n(67),o=n(272),i=n(2681),l=n(34),u=n(280),c=n(2859),d=n(2682),p=n(2639),f=n(191);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b={"no-account-found":"LOGIN.OAUTH.NO_ACCOUNT_FOUND","business-account-only":"LOGIN.OAUTH.BUSINESS_ACCOUNTS_ONLY"},v={components:{FormInput:d.a,GoogleOAuthButton:c.a,Spinner:f.a,SubmitButton:i.a},mixins:[o.a],props:{ssoAuthToken:{type:String,default:""},ssoAccountId:{type:String,default:""},ssoConversationId:{type:String,default:""},config:{type:String,default:""},email:{type:String,default:""},authError:{type:String,default:""}},setup:function(){return{v$:Object(r.a)()}},data:function(){return{credentials:{email:"",password:""},loginApi:{message:"",showLoading:!1,hasErrored:!1},error:""}},validations:{credentials:{password:{required:a.f},email:{required:a.f,email:a.b}}},computed:g(g({},Object(l.mapGetters)({globalConfig:"globalConfig/get"})),{},{showGoogleOAuth:function(){return Boolean(window.chatwootConfig.googleOAuthClientId)},showSignupLink:function(){return Object(u.j)(window.chatwootConfig.signupEnabled)}}),created:function(){var t=this;if(this.ssoAuthToken&&this.submitLogin(),this.authError){var e,n=null!==(e=b[this.authError])&&void 0!==e?e:"LOGIN.API.UNAUTH";Object(s.a)(this.$t(n)),this.requestIdleCallbackPolyfill((function(){var e=t.$route.query;t.$router.replace({query:g(g({},e),{},{error:void 0})})}))}},methods:{requestIdleCallbackPolyfill:function(t){window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,0)},showAlertMessage:function(t){this.loginApi.showLoading=!1,this.loginApi.message=t,Object(s.a)(this.loginApi.message)},submitLogin:function(){var t=this;this.loginApi.hasErrored=!1,this.loginApi.showLoading=!0;var e={email:this.email?decodeURIComponent(this.email):this.credentials.email,password:this.credentials.password,sso_auth_token:this.ssoAuthToken,ssoAccountId:this.ssoAccountId,ssoConversationId:this.ssoConversationId};Object(p.a)(e).then((function(){t.showAlertMessage(t.$t("LOGIN.API.SUCCESS_MESSAGE"))})).catch((function(e){t.email&&(window.location="/app/login"),t.loginApi.hasErrored=!0,t.showAlertMessage((null===e||void 0===e?void 0:e.message)||t.$t("LOGIN.API.UNAUTH"))}))},submitFormLogin:function(){!this.v$.credentials.email.$invalid||this.email?this.submitLogin():this.showAlertMessage(this.$t("LOGIN.EMAIL.ERROR"))}}},w=n(8),O=Object(w.a)(v,(function(){var t=this,e=t._self._c;return e("main",{staticClass:"flex flex-col w-full min-h-screen py-20 bg-woot-25 sm:px-6 lg:px-8 dark:bg-slate-900"},[e("section",{staticClass:"max-w-5xl mx-auto"},[e("img",{staticClass:"block w-auto h-8 mx-auto dark:hidden",attrs:{src:t.globalConfig.logo,alt:t.globalConfig.installationName}}),t._v(" "),t.globalConfig.logoDark?e("img",{staticClass:"hidden w-auto h-8 mx-auto dark:block",attrs:{src:t.globalConfig.logoDark,alt:t.globalConfig.installationName}}):t._e(),t._v(" "),e("h2",{staticClass:"mt-6 text-3xl font-medium text-center text-slate-900 dark:text-woot-50"},[t._v("\n      "+t._s(t.useInstallationName(t.$t("LOGIN.TITLE"),t.globalConfig.installationName))+"\n    ")]),t._v(" "),t.showSignupLink?e("p",{staticClass:"mt-3 text-sm text-center text-slate-600 dark:text-slate-400"},[t._v("\n      "+t._s(t.$t("COMMON.OR"))+"\n      "),e("router-link",{staticClass:"lowercase text-link",attrs:{to:"auth/signup"}},[t._v("\n        "+t._s(t.$t("LOGIN.CREATE_NEW_ACCOUNT"))+"\n      ")])],1):t._e()]),t._v(" "),e("section",{staticClass:"bg-white shadow sm:mx-auto mt-11 sm:w-full sm:max-w-lg dark:bg-slate-800 p-11 sm:shadow-lg sm:rounded-lg",class:{"mb-8 mt-15":!t.showGoogleOAuth,"animate-wiggle":t.loginApi.hasErrored}},[t.email?e("div",{staticClass:"flex items-center justify-center"},[e("spinner",{attrs:{"color-scheme":"primary",size:""}})],1):e("div",[t.showGoogleOAuth?e("GoogleOAuthButton"):t._e(),t._v(" "),e("form",{staticClass:"space-y-5",on:{submit:function(e){return e.preventDefault(),t.submitFormLogin.apply(null,arguments)}}},[e("form-input",{attrs:{name:"email_address",type:"text","data-testid":"email_input",tabindex:1,required:"",label:t.$t("LOGIN.EMAIL.LABEL"),placeholder:t.$t("LOGIN.EMAIL.PLACEHOLDER"),"has-error":t.v$.credentials.email.$error},on:{input:t.v$.credentials.email.$touch},model:{value:t.credentials.email,callback:function(e){t.$set(t.credentials,"email","string"===typeof e?e.trim():e)},expression:"credentials.email"}}),t._v(" "),e("form-input",{attrs:{type:"password",name:"password","data-testid":"password_input",required:"",tabindex:2,label:t.$t("LOGIN.PASSWORD.LABEL"),placeholder:t.$t("LOGIN.PASSWORD.PLACEHOLDER"),"has-error":t.v$.credentials.password.$error},on:{input:t.v$.credentials.password.$touch},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password","string"===typeof e?e.trim():e)},expression:"credentials.password"}},[t.globalConfig.disableUserProfileUpdate?t._e():e("p",[e("router-link",{staticClass:"text-sm text-link",attrs:{to:"auth/reset/password",tabindex:"4"}},[t._v("\n              "+t._s(t.$t("LOGIN.FORGOT_PASSWORD"))+"\n            ")])],1)]),t._v(" "),e("submit-button",{attrs:{disabled:t.loginApi.showLoading,tabindex:3,"button-text":t.$t("LOGIN.SUBMIT"),loading:t.loginApi.showLoading}})],1)],1)])])}),[],!1,null,null,null);e.default=O.exports},370:function(t,e,n){"use strict";n(311)},67:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return o}));var r=n(6),a=n(55),s=function(){var t=Object(r.getCurrentInstance)();if(!t)throw new Error("must be called in setup");return t.proxy.$track},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a.a.emit("newToastMessage",{message:t,action:e})}}}]);
//# sourceMappingURL=51-bcd795b61a1b77ce4b02.chunk.js.map