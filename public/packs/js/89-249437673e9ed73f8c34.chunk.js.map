{"version":3,"sources":["webpack:///./app/javascript/dashboard/mixins/reportMixin.js","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue?3a47","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue?bcaa","webpack:///app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue","webpack:///app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue?6b6f","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue?f128","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportMetricCard.vue?64a5","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportMetricCard.vue?1611","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportMetricCard.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue?11a9","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/BotMetrics.vue?8c83","webpack:///BotMetrics.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/BotMetrics.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/BotMetrics.vue?e709","webpack:///app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue?b91d","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue"],"names":["props","accountSummaryKey","type","String","default","computed","mapGetters","accountReport","accountSummary","this","$store","getters","methods","calculateTrend","key","previous","diff","Math","round","displayMetric","isAverageMetricType","formatTime","Number","toLocaleString","displayInfoText","metrics","currentSelection","KEY","total","data","map","item","count","reduce","prev","curr","INFO_TEXT","includes","_vm","_c","_self","staticClass","_v","_s","metric","NAME","trend","class","trendColor","_e","_l","attrs","isFetching","$t","getCollection","getChartOptions","component","_setupProxy","ref","disabled","label","directives","name","rawName","value","expression","conversationCount","messageCount","resolutionRate","handoffRate","fetchMetrics","filters","to","from","getBotMetrics","then","response","conversation_count","message_count","resolution_rate","toString","handoff_rate","deep","_setup","ReportMetricCard","formatToPercent","on","onFilterChange","requestPayload","groupBy","reportKeys"],"mappings":"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","file":"js/89-249437673e9ed73f8c34.chunk.js","sourcesContent":["import { mapGetters } from 'vuex';\nimport { formatTime } from '@chatwoot/utils';\n\nexport default {\n  props: {\n    accountSummaryKey: {\n      type: String,\n      default: 'getAccountSummary',\n    },\n  },\n  computed: {\n    ...mapGetters({\n      accountReport: 'getAccountReports',\n    }),\n    accountSummary() {\n      return this.$store.getters[this.accountSummaryKey];\n    },\n  },\n  methods: {\n    calculateTrend(key) {\n      if (!this.accountSummary.previous[key]) return 0;\n      const diff = this.accountSummary[key] - this.accountSummary.previous[key];\n      return Math.round((diff / this.accountSummary.previous[key]) * 100);\n    },\n    displayMetric(key) {\n      if (this.isAverageMetricType(key)) {\n        return formatTime(this.accountSummary[key]);\n      }\n      return Number(this.accountSummary[key] || '').toLocaleString();\n    },\n    displayInfoText(key) {\n      if (this.metrics[this.currentSelection].KEY !== key) {\n        return '';\n      }\n      if (this.isAverageMetricType(key)) {\n        const total = this.accountReport.data\n          .map(item => item.count)\n          .reduce((prev, curr) => prev + curr, 0);\n        return `${this.metrics[this.currentSelection].INFO_TEXT} ${total}`;\n      }\n      return '';\n    },\n    isAverageMetricType(key) {\n      return [\n        'avg_first_response_time',\n        'avg_resolution_time',\n        'reply_time',\n      ].includes(key);\n    },\n  },\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 bg-white dark:bg-slate-800 p-2 border border-slate-100 dark:border-slate-700 rounded-md\"},_vm._l((_vm.metrics),function(metric){return _c('div',{key:metric.KEY,staticClass:\"p-4 rounded-md mb-3\"},[_c('chart-stats',{attrs:{\"metric\":metric,\"account-summary-key\":_vm.accountSummaryKey}}),_vm._v(\" \"),_c('div',{staticClass:\"mt-4 h-72\"},[(_vm.accountReport.isFetching[metric.KEY])?_c('woot-loading-state',{staticClass:\"text-xs\",attrs:{\"message\":_vm.$t('REPORT.LOADING_CHART')}}):_c('div',{staticClass:\"h-72 flex items-center justify-center\"},[(_vm.accountReport.data[metric.KEY].length)?_c('woot-bar',{staticClass:\"h-72 w-full\",attrs:{\"collection\":_vm.getCollection(metric),\"chart-options\":_vm.getChartOptions(metric)}}):_c('span',{staticClass:\"text-sm text-slate-600\"},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('REPORT.NO_ENOUGH_DATA'))+\"\\n        \")])],1)],1)],1)}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartStats.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartStats.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"text-slate-900 dark:text-slate-100\">\n    <span class=\"text-sm\">\n      {{ metric.NAME }}\n    </span>\n    <div class=\"flex items-end\">\n      <div class=\"font-medium text-xl\">\n        {{ displayMetric(metric.KEY) }}\n      </div>\n      <div v-if=\"metric.trend\" class=\"text-xs ml-4 flex items-center mb-0.5\">\n        <div\n          v-if=\"metric.trend < 0\"\n          class=\"h-0 w-0 border-x-4 medium border-x-transparent border-t-[8px] mr-1\"\n          :class=\"trendColor(metric.trend, metric.KEY)\"\n        />\n        <div\n          v-else\n          class=\"h-0 w-0 border-x-4 medium border-x-transparent border-b-[8px] mr-1\"\n          :class=\"trendColor(metric.trend, metric.KEY)\"\n        />\n        <span class=\"font-medium\" :class=\"trendColor(metric.trend, metric.KEY)\">\n          {{ calculateTrend(metric.KEY) }}%\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport reportMixin from 'dashboard/mixins/reportMixin';\nexport default {\n  mixins: [reportMixin],\n  props: {\n    metric: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  methods: {\n    trendColor(value, key) {\n      if (this.isAverageMetricType(key)) {\n        return value > 0\n          ? 'border-red-500 text-red-500'\n          : 'border-green-500 text-green-500';\n      }\n      return value < 0\n        ? 'border-red-500 text-red-500'\n        : 'border-green-500 text-green-500';\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 bg-white dark:bg-slate-800 p-2 border border-slate-100 dark:border-slate-700 rounded-md\"\n  >\n    <div\n      v-for=\"metric in metrics\"\n      :key=\"metric.KEY\"\n      class=\"p-4 rounded-md mb-3\"\n    >\n      <chart-stats :metric=\"metric\" :account-summary-key=\"accountSummaryKey\" />\n      <div class=\"mt-4 h-72\">\n        <woot-loading-state\n          v-if=\"accountReport.isFetching[metric.KEY]\"\n          class=\"text-xs\"\n          :message=\"$t('REPORT.LOADING_CHART')\"\n        />\n        <div v-else class=\"h-72 flex items-center justify-center\">\n          <woot-bar\n            v-if=\"accountReport.data[metric.KEY].length\"\n            :collection=\"getCollection(metric)\"\n            :chart-options=\"getChartOptions(metric)\"\n            class=\"h-72 w-full\"\n          />\n          <span v-else class=\"text-sm text-slate-600\">\n            {{ $t('REPORT.NO_ENOUGH_DATA') }}\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { GROUP_BY_FILTER, METRIC_CHART } from './constants';\nimport fromUnixTime from 'date-fns/fromUnixTime';\nimport format from 'date-fns/format';\nimport { formatTime } from '@chatwoot/utils';\nimport reportMixin from 'dashboard/mixins/reportMixin';\nimport ChartStats from './components/ChartElements/ChartStats.vue';\n\nexport default {\n  components: { ChartStats },\n  mixins: [reportMixin],\n  props: {\n    groupBy: {\n      type: Object,\n      default: () => ({}),\n    },\n    reportKeys: {\n      type: Object,\n      default: () => ({\n        CONVERSATIONS: 'conversations_count',\n        INCOMING_MESSAGES: 'incoming_messages_count',\n        OUTGOING_MESSAGES: 'outgoing_messages_count',\n        FIRST_RESPONSE_TIME: 'avg_first_response_time',\n        RESOLUTION_TIME: 'avg_resolution_time',\n        RESOLUTION_COUNT: 'resolutions_count',\n        REPLY_TIME: 'reply_time',\n      }),\n    },\n  },\n  computed: {\n    metrics() {\n      const reportKeys = Object.keys(this.reportKeys);\n      const infoText = {\n        FIRST_RESPONSE_TIME: this.$t(\n          `REPORT.METRICS.FIRST_RESPONSE_TIME.INFO_TEXT`\n        ),\n        RESOLUTION_TIME: this.$t(`REPORT.METRICS.RESOLUTION_TIME.INFO_TEXT`),\n      };\n      return reportKeys.map(key => ({\n        NAME: this.$t(`REPORT.METRICS.${key}.NAME`),\n        KEY: this.reportKeys[key],\n        DESC: this.$t(`REPORT.METRICS.${key}.DESC`),\n        INFO_TEXT: infoText[key],\n        TOOLTIP_TEXT: `REPORT.METRICS.${key}.TOOLTIP_TEXT`,\n        trend: this.calculateTrend(this.reportKeys[key]),\n      }));\n    },\n  },\n  methods: {\n    getCollection(metric) {\n      if (!this.accountReport.data[metric.KEY]) {\n        return {};\n      }\n      const data = this.accountReport.data[metric.KEY];\n      const labels = data.map(element => {\n        if (this.groupBy?.period === GROUP_BY_FILTER[2].period) {\n          let week_date = new Date(fromUnixTime(element.timestamp));\n          const first_day = week_date.getDate() - week_date.getDay();\n          const last_day = first_day + 6;\n          const week_first_date = new Date(week_date.setDate(first_day));\n          const week_last_date = new Date(week_date.setDate(last_day));\n          return `${format(week_first_date, 'dd-MMM')} - ${format(\n            week_last_date,\n            'dd-MMM'\n          )}`;\n        }\n        if (this.groupBy?.period === GROUP_BY_FILTER[3].period) {\n          return format(fromUnixTime(element.timestamp), 'MMM-yyyy');\n        }\n        if (this.groupBy?.period === GROUP_BY_FILTER[4].period) {\n          return format(fromUnixTime(element.timestamp), 'yyyy');\n        }\n        return format(fromUnixTime(element.timestamp), 'dd-MMM');\n      });\n      const datasets = METRIC_CHART[metric.KEY].datasets.map(dataset => {\n        switch (dataset.type) {\n          case 'bar':\n            return {\n              ...dataset,\n              yAxisID: 'y-left',\n              label: metric.NAME,\n              data: data.map(element => element.value),\n            };\n          case 'line':\n            return {\n              ...dataset,\n              yAxisID: 'y-right',\n              label: this.metrics[0].NAME,\n              data: data.map(element => element.count),\n            };\n          default:\n            return dataset;\n        }\n      });\n      return {\n        labels,\n        datasets,\n      };\n    },\n    getChartOptions(metric) {\n      let tooltips = {};\n      if (this.isAverageMetricType(metric.KEY)) {\n        tooltips.callbacks = {\n          label: tooltipItem => {\n            return this.$t(metric.TOOLTIP_TEXT, {\n              metricValue: formatTime(tooltipItem.yLabel),\n              conversationCount:\n                this.accountReport.data[metric.KEY][tooltipItem.index].count,\n            });\n          },\n        };\n      }\n      return {\n        scales: METRIC_CHART[metric.KEY].scales,\n        tooltips: tooltips,\n      };\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartStats.vue?vue&type=template&id=4bfd08f4&\"\nimport script from \"./ChartStats.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartStats.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"text-slate-900 dark:text-slate-100\"},[_c('span',{staticClass:\"text-sm\"},[_vm._v(\"\\n    \"+_vm._s(_vm.metric.NAME)+\"\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"flex items-end\"},[_c('div',{staticClass:\"font-medium text-xl\"},[_vm._v(\"\\n      \"+_vm._s(_vm.displayMetric(_vm.metric.KEY))+\"\\n    \")]),_vm._v(\" \"),(_vm.metric.trend)?_c('div',{staticClass:\"text-xs ml-4 flex items-center mb-0.5\"},[(_vm.metric.trend < 0)?_c('div',{staticClass:\"h-0 w-0 border-x-4 medium border-x-transparent border-t-[8px] mr-1\",class:_vm.trendColor(_vm.metric.trend, _vm.metric.KEY)}):_c('div',{staticClass:\"h-0 w-0 border-x-4 medium border-x-transparent border-b-[8px] mr-1\",class:_vm.trendColor(_vm.metric.trend, _vm.metric.KEY)}),_vm._v(\" \"),_c('span',{staticClass:\"font-medium\",class:_vm.trendColor(_vm.metric.trend, _vm.metric.KEY)},[_vm._v(\"\\n        \"+_vm._s(_vm.calculateTrend(_vm.metric.KEY))+\"%\\n      \")])]):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./ReportContainer.vue?vue&type=template&id=0c82c06e&\"\nimport script from \"./ReportContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./ReportContainer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{ref:\"reportMetricContainer\",staticClass:\"m-0 p-4\",class:{\n    'grayscale pointer-events-none opacity-30': _vm.disabled,\n  }},[_c('h3',{staticClass:\"flex items-center text-sm font-medium m-0 text-slate-800 dark:text-slate-100\"},[_c('span',{ref:\"reportMetricLabel\"},[_vm._v(_vm._s(_vm.label))]),_vm._v(\" \"),_c('fluent-icon',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.infoText),expression:\"infoText\"}],ref:\"reportMetricInfo\",staticClass:\"text-slate-500 dark:text-slate-200 my-0 mx-1 mt-0.5\",attrs:{\"size\":\"14\",\"icon\":\"info\"}})],1),_vm._v(\" \"),_c('h4',{ref:\"reportMetricValue\",staticClass:\"text-slate-700 dark:text-slate-100 mb-0 mt-1 font-thin text-3xl\"},[_vm._v(\"\\n    \"+_vm._s(_vm.value)+\"\\n  \")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportMetricCard.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportMetricCard.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./ReportMetricCard.vue?vue&type=template&id=1515d57f&\"\nimport script from \"./ReportMetricCard.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./ReportMetricCard.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex-1 p-4 overflow-auto\"},[_c('report-filter-selector',{attrs:{\"show-agents-filter\":false,\"show-group-by-filter\":true,\"show-business-hours-switch\":false},on:{\"filter-change\":_vm.onFilterChange}}),_vm._v(\" \"),_c('bot-metrics',{attrs:{\"filters\":_vm.requestPayload}}),_vm._v(\" \"),_c('report-container',{attrs:{\"group-by\":_vm.groupBy,\"report-keys\":_vm.reportKeys,\"account-summary-key\":'getBotSummary'}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotMetrics.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotMetrics.vue?vue&type=script&setup=true&lang=js&\"","<script setup>\nimport { ref, watch, onMounted } from 'vue';\nimport ReportMetricCard from './ReportMetricCard.vue';\nimport ReportsAPI from 'dashboard/api/reports';\n\nconst props = defineProps({\n  filters: {\n    type: Object,\n    required: true,\n  },\n});\n\nconst conversationCount = ref('0');\nconst messageCount = ref('0');\nconst resolutionRate = ref('0');\nconst handoffRate = ref('0');\n\nconst formatToPercent = value => {\n  return value ? `${value}%` : '--';\n};\n\nconst fetchMetrics = () => {\n  if (!props.filters.to || !props.filters.from) {\n    return;\n  }\n  ReportsAPI.getBotMetrics(props.filters).then(response => {\n    conversationCount.value = response.data.conversation_count.toLocaleString();\n    messageCount.value = response.data.message_count.toLocaleString();\n    resolutionRate.value = response.data.resolution_rate.toString();\n    handoffRate.value = response.data.handoff_rate.toString();\n  });\n};\n\nwatch(() => props.filters, fetchMetrics, { deep: true });\n\nonMounted(fetchMetrics);\n</script>\n\n<template>\n  <div\n    class=\"flex flex-wrap mx-0 bg-white dark:bg-slate-800 rounded-[4px] p-4 mb-5 border border-solid border-slate-75 dark:border-slate-700\"\n  >\n    <report-metric-card\n      :label=\"$t('BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.LABEL')\"\n      :info-text=\"$t('BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.TOOLTIP')\"\n      :value=\"conversationCount\"\n      class=\"flex-1\"\n    />\n    <report-metric-card\n      :label=\"$t('BOT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL')\"\n      :info-text=\"$t('BOT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP')\"\n      :value=\"messageCount\"\n      class=\"flex-1\"\n    />\n    <report-metric-card\n      :label=\"$t('BOT_REPORTS.METRIC.RESOLUTION_RATE.LABEL')\"\n      :info-text=\"$t('BOT_REPORTS.METRIC.RESOLUTION_RATE.TOOLTIP')\"\n      :value=\"formatToPercent(resolutionRate)\"\n      class=\"flex-1\"\n    />\n    <report-metric-card\n      :label=\"$t('BOT_REPORTS.METRIC.HANDOFF_RATE.LABEL')\"\n      :info-text=\"$t('BOT_REPORTS.METRIC.HANDOFF_RATE.TOOLTIP')\"\n      :value=\"formatToPercent(handoffRate)\"\n      class=\"flex-1\"\n    />\n  </div>\n</template>\n","import { render, staticRenderFns } from \"./BotMetrics.vue?vue&type=template&id=44ad0ea8&\"\nimport script from \"./BotMetrics.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./BotMetrics.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"flex flex-wrap mx-0 bg-white dark:bg-slate-800 rounded-[4px] p-4 mb-5 border border-solid border-slate-75 dark:border-slate-700\"},[_c(_setup.ReportMetricCard,{staticClass:\"flex-1\",attrs:{\"label\":_vm.$t('BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.LABEL'),\"info-text\":_vm.$t('BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.TOOLTIP'),\"value\":_setup.conversationCount}}),_vm._v(\" \"),_c(_setup.ReportMetricCard,{staticClass:\"flex-1\",attrs:{\"label\":_vm.$t('BOT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL'),\"info-text\":_vm.$t('BOT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP'),\"value\":_setup.messageCount}}),_vm._v(\" \"),_c(_setup.ReportMetricCard,{staticClass:\"flex-1\",attrs:{\"label\":_vm.$t('BOT_REPORTS.METRIC.RESOLUTION_RATE.LABEL'),\"info-text\":_vm.$t('BOT_REPORTS.METRIC.RESOLUTION_RATE.TOOLTIP'),\"value\":_setup.formatToPercent(_setup.resolutionRate)}}),_vm._v(\" \"),_c(_setup.ReportMetricCard,{staticClass:\"flex-1\",attrs:{\"label\":_vm.$t('BOT_REPORTS.METRIC.HANDOFF_RATE.LABEL'),\"info-text\":_vm.$t('BOT_REPORTS.METRIC.HANDOFF_RATE.TOOLTIP'),\"value\":_setup.formatToPercent(_setup.handoffRate)}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"flex-1 p-4 overflow-auto\">\n    <report-filter-selector\n      :show-agents-filter=\"false\"\n      :show-group-by-filter=\"true\"\n      :show-business-hours-switch=\"false\"\n      @filter-change=\"onFilterChange\"\n    />\n\n    <bot-metrics :filters=\"requestPayload\" />\n    <report-container\n      :group-by=\"groupBy\"\n      :report-keys=\"reportKeys\"\n      :account-summary-key=\"'getBotSummary'\"\n    />\n  </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex';\nimport { useAlert } from 'dashboard/composables';\nimport BotMetrics from './components/BotMetrics.vue';\nimport ReportFilterSelector from './components/FilterSelector.vue';\nimport { GROUP_BY_FILTER } from './constants';\nimport reportMixin from 'dashboard/mixins/reportMixin';\nimport ReportContainer from './ReportContainer.vue';\nimport { REPORTS_EVENTS } from '../../../../helper/AnalyticsHelper/events';\n\nexport default {\n  name: 'BotReports',\n  components: {\n    BotMetrics,\n    ReportFilterSelector,\n    ReportContainer,\n  },\n  mixins: [reportMixin],\n  data() {\n    return {\n      from: 0,\n      to: 0,\n      groupBy: GROUP_BY_FILTER[1],\n      reportKeys: {\n        BOT_RESOLUTION_COUNT: 'bot_resolutions_count',\n        BOT_HANDOFF_COUNT: 'bot_handoffs_count',\n      },\n      businessHours: false,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      accountReport: 'getAccountReports',\n    }),\n    requestPayload() {\n      return {\n        from: this.from,\n        to: this.to,\n      };\n    },\n  },\n  methods: {\n    fetchAllData() {\n      this.fetchBotSummary();\n      this.fetchChartData();\n    },\n    fetchBotSummary() {\n      try {\n        this.$store.dispatch('fetchBotSummary', this.getRequestPayload());\n      } catch {\n        useAlert(this.$t('REPORT.SUMMARY_FETCHING_FAILED'));\n      }\n    },\n    fetchChartData() {\n      Object.keys(this.reportKeys).forEach(async key => {\n        try {\n          await this.$store.dispatch('fetchAccountReport', {\n            metric: this.reportKeys[key],\n            ...this.getRequestPayload(),\n          });\n        } catch {\n          useAlert(this.$t('REPORT.DATA_FETCHING_FAILED'));\n        }\n      });\n    },\n    getRequestPayload() {\n      const { from, to, groupBy, businessHours } = this;\n\n      return {\n        from,\n        to,\n        groupBy: groupBy?.period,\n        businessHours,\n      };\n    },\n    onFilterChange({ from, to, groupBy, businessHours }) {\n      this.from = from;\n      this.to = to;\n      this.groupBy = groupBy;\n      this.businessHours = businessHours;\n      this.fetchAllData();\n\n      this.$track(REPORTS_EVENTS.FILTER_REPORT, {\n        filterValue: { from, to, groupBy, businessHours },\n        reportType: 'bots',\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotReports.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotReports.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BotReports.vue?vue&type=template&id=5f354f30&\"\nimport script from \"./BotReports.vue?vue&type=script&lang=js&\"\nexport * from \"./BotReports.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}