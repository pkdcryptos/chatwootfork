(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{279:function(n,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return M})),r.d(t,"c",(function(){return e})),r.d(t,"d",(function(){return T})),r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return i})),r.d(t,"g",(function(){return g})),r.d(t,"h",(function(){return f})),r.d(t,"i",(function(){return b})),r.d(t,"j",(function(){return l})),r.d(t,"k",(function(){return _})),r.d(t,"l",(function(){return u}));var e=function(n,t,r){var e;return function(){var i=null,o=arguments,u=function(){e=null,r||n.apply(i,o)},a=r&&!e;clearTimeout(e),e=window.setTimeout(u,t),a&&n.apply(i,o)}},i=function(n){var t=n.replace("#","");return.299*parseInt(t.slice(0,2),16)+.587*parseInt(t.slice(2,4),16)+.114*parseInt(t.slice(4,6),16)>186?"#000000":"#FFFFFF"},o=function(n){var t="";if(n>=60&&n<3600){var r=Math.floor(n/60);t=r+" Min";var e=60===r?0:Math.floor(n%60);return t+(e>0?" "+e+" Sec":"")}if(n>=3600&&n<86400){var i=Math.floor(n/3600);t=i+" Hr";var o=n%3600<60||24===i?0:Math.floor(n%3600/60);return t+(o>0?" "+o+" Min":"")}if(n>=86400){var u=Math.floor(n/86400);t=u+" Day";var a=n%86400<3600||u>=364?0:Math.floor(n%86400/3600);return t+(a>0?" "+a+" Hr":"")}return Math.floor(n)+" Sec"},u=function(n,t,r){void 0===n&&(n=""),void 0===t&&(t=1024),void 0===r&&(r=!1);var e=n;return n.length>t&&(e=n.substring(0,t)),r&&(e+="..."),e},a=function(n,t){return null===n||0===n?{time:"",unit:""}:n<3600?{time:Number((n/60).toFixed(1)),unit:t.minute}:n<86400?{time:Number((n/3600).toFixed(1)),unit:t.hour}:{time:Number((n/86400).toFixed(1)),unit:t.day}};function l(n){try{var t=String(n).toLowerCase();return Boolean(JSON.parse(t))}catch(r){return!1}}function c(n){return n.slice().sort((function(n,t){return n-t}))}function s(n,t){var r,e,i,o=(e=1,(i=t)<(r=0)?r:i>e?e:i),u=(n.length-1)*o,a=Math.floor(u),l=u-a;return void 0!==n[a+1]?n[a]+l*(n[a+1]-n[a]):n[a]}var f=function(n,t){var r=c(n);return t.map((function(n){return s(r,n)}))};function d(){return d=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},d.apply(this,arguments)}var h=/{{(.*?)}}/g,v=function(n){return(n||"").replace(/\b(\w)/g,(function(n){return n.toUpperCase()}))},p=function(n){var t=n.user,r=null!=t&&t.name?t.name.split(" ").shift():"";return v(r)},m=function(n){var t=n.user;if(t&&t.name){var r=t.name.split(" ").length>1?t.name.split(" ").pop():"";return v(r)}return""},g=function(n){var t,r=n.conversation,e=n.contact,i=r.meta,o=i.assignee,u=i.sender,a=r.id,l=r.custom_attributes,c=void 0===l?{}:l,s=(e||{}).custom_attributes;return d({},{"contact.name":v((null==u?void 0:u.name)||""),"contact.first_name":p({user:u}),"contact.last_name":m({user:u}),"contact.email":null==u?void 0:u.email,"contact.phone":null==u?void 0:u.phone_number,"contact.id":null==u?void 0:u.id,"conversation.id":a,"agent.name":v((null==o?void 0:o.name)||""),"agent.first_name":p({user:o}),"agent.last_name":m({user:o}),"agent.email":null!=(t=null==o?void 0:o.email)?t:""},Object.entries(null!=c?c:{}).reduce((function(n,t){var r=t[0],e=t[1];return n["conversation.custom_attribute."+r]=e,n}),{}),Object.entries(null!=s?s:{}).reduce((function(n,t){var r=t[0],e=t[1];return n["contact.custom_attribute."+r]=e,n}),{}))},_=function(n){var t=n.message,r=n.variables;return null==t?void 0:t.replace(h,(function(n,t){return r[t.trim()]?r[t.trim().toLowerCase()]:""}))},b=function(n){var t=n.message,r=n.variables,e=t.replace(/```(?:.|\n)+?```/g,"").match(h);return e?e.map((function(n){return n.replace("{{","").replace("}}","").trim()})).filter((function(n){return void 0===r[n]})):[]},M=function(n,t,r){var e=null,i=function(){e&&(clearTimeout(e),e=null,t())},o=function(){e&&clearTimeout(e),e=setTimeout((function(){i()}),r)};return{start:function(){e||n(),o()},stop:i}},S=function(n,t){return null===t?null:n+t-Math.floor(Date.now()/1e3)},y=function(n){var t={y:31536e3,mo:2592e3,d:86400,h:3600,m:60};if(n<60)return"1m";var r=[];return Object.keys(t).forEach((function(e){var i=Math.floor(n/t[e]);n<60&&r.length>0||2!==r.length&&i>0&&(r.push(i+e),n-=i*t[e])})),r.join(" ")},w=function(n,t){return["FRT","NRT","RT"].map((function(r){return function(n,t,r){var e=t.sla_first_response_time_threshold,i=t.sla_next_response_time_threshold,o=t.sla_resolution_time_threshold,u=t.created_at,a=r.first_reply_created_at,l=r.waiting_since,c=r.status,s={FRT:{threshold:S(u,e),condition:null!==e&&(!a||0===a)},NRT:{threshold:S(l,i),condition:null!==i&&!!a&&!!l},RT:{threshold:S(u,o),condition:"open"===c&&null!==o}}[n];return s?d({},s,{type:n}):null}(r,n,t)})).filter((function(n){return!!n&&n.condition})).map((function(n){return d({},n,{icon:n.threshold<=0?"flame":"alarm",isSlaMissed:n.threshold<=0})}))},T=function(n){var t=n.appliedSla,r=n.chat;if(!t||!r)return{type:"",threshold:"",icon:"",isSlaMissed:!1};var e=function(n){return n.sort((function(n,t){return Math.abs(n.threshold)-Math.abs(t.threshold)})),n[0]}(w(t,r));return e?{type:null==e?void 0:e.type,threshold:y(e.threshold<=0?-e.threshold:e.threshold),icon:e.icon,isSlaMissed:e.isSlaMissed}:{type:"",threshold:"",icon:"",isSlaMissed:!1}}},282:function(n,t,r){var e=r(53),i=Math.floor,o="".replace,u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,a=/\$([$&'`]|\d{1,2})/g;n.exports=function(n,t,r,l,c,s){var f=r+n.length,d=l.length,h=a;return void 0!==c&&(c=e(c),h=u),o.call(s,h,(function(e,o){var u;switch(o.charAt(0)){case"$":return"$";case"&":return n;case"`":return t.slice(0,r);case"'":return t.slice(f);case"<":u=c[o.slice(1,-1)];break;default:var a=+o;if(0===a)return e;if(a>d){var s=i(a/10);return 0===s?e:s<=d?void 0===l[s-1]?o.charAt(1):l[s-1]+o.charAt(1):e}u=l[a-1]}return void 0===u?"":u}))}},73:function(n,t,r){"use strict";var e=r(162),i=r(28),o=r(49),u=r(77),a=r(61),l=r(181),c=r(282),s=r(163),f=Math.max,d=Math.min;e("replace",2,(function(n,t,r,e){var h=e.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=e.REPLACE_KEEPS_$0,p=h?"$":"$0";return[function(r,e){var i=a(this),o=void 0==r?void 0:r[n];return void 0!==o?o.call(r,i,e):t.call(String(i),r,e)},function(n,e){if(!h&&v||"string"===typeof e&&-1===e.indexOf(p)){var a=r(t,n,this,e);if(a.done)return a.value}var m=i(n),g=String(this),_="function"===typeof e;_||(e=String(e));var b=m.global;if(b){var M=m.unicode;m.lastIndex=0}for(var S=[];;){var y=s(m,g);if(null===y)break;if(S.push(y),!b)break;""===String(y[0])&&(m.lastIndex=l(g,o(m.lastIndex),M))}for(var w,T="",E=0,F=0;F<S.length;F++){y=S[F];for(var x=String(y[0]),R=f(d(u(y.index),g.length),0),$=[],I=1;I<y.length;I++)$.push(void 0===(w=y[I])?w:String(w));var N=y.groups;if(_){var O=[x].concat($,R,g);void 0!==N&&O.push(N);var j=String(e.apply(void 0,O))}else j=c(x,g,R,$,N,e);R>=E&&(T+=g.slice(E,R)+j,E=R+x.length)}return T+g.slice(E)}]}))}}]);
//# sourceMappingURL=93-5ad2bc6b78f420ce2042.chunk.js.map