{"version":3,"sources":["webpack:///./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js","webpack:///./node_modules/@june-so/analytics-next/dist/pkg/core/query-string/pickPrefix.js","webpack:///./node_modules/@june-so/analytics-next/dist/pkg/core/query-string/index.js"],"names":["isPlainObject","obj","Object","prototype","toString","call","slice","toLowerCase","pickPrefix","prefix","object","keys","reduce","acc","key","startsWith","substr","length","queryString","analytics","query","a","document","createElement","href","params","search","split","str","_a","k","v","gracefulDecodeURIComponent","calls","ajs_uid","ajs_event","ajs_aid","options","useQueryString","_b","aid","aidPattern","_c","uid","uidPattern","anonId","Array","isArray","test","setAnonymousId","traits","push","identify","event_1","props","track","Promise","all"],"mappings":"4FASO,SAASA,EAAcC,GAC5B,MAA0E,WAAnEC,OAAOC,UAAUC,SAASC,KAAKJ,GAAKK,MAAM,GAAI,GAAGC,cAV1D,mC,kCCMO,SAASC,EAAWC,EAAQC,GACjC,OAAOR,OAAOS,KAAKD,GAAQE,QAAO,SAAUC,EAAKC,GAC3CA,EAAIC,WAAWN,KAEjBI,EADYC,EAAIE,OAAOP,EAAOQ,SACjBP,EAAOI,IAGtB,OAAOD,IACN,I,0ECXE,SAASK,EAAYC,EAAWC,GACrC,IAAIC,EAAIC,SAASC,cAAc,KAC/BF,EAAEG,KAAOJ,EACT,IACIK,EADSJ,EAAEK,OAAOpB,MAAM,GACRqB,MAAM,KAAKf,QAAO,SAAUC,EAAKe,GACnD,IAAIC,EAAKD,EAAID,MAAM,KACfG,EAAID,EAAG,GACPE,EAAIF,EAAG,GAGX,OADAhB,EAAIiB,GAAK,OAAAE,EAAA,GAA2BD,GAC7BlB,IACN,IACCoB,EAAQ,GACRC,EAAUT,EAAOS,QACjBC,EAAYV,EAAOU,UACnBC,EAAUX,EAAOW,QAEjBP,EAAK,YAAcV,EAAUkB,QAAQC,gBAAkBnB,EAAUkB,QAAQC,eAAiB,GAC1FC,EAAKV,EAAGW,IACRC,OAAoB,IAAPF,EAAgB,KAAOA,EACpCG,EAAKb,EAAGc,IACRC,OAAoB,IAAPF,EAAgB,KAAOA,EAExC,GAAIN,EAAS,CACX,IAAIS,EAASC,MAAMC,QAAQtB,EAAOW,SAAWX,EAAOW,QAAQ,GAAKX,EAAOW,QAEpEK,EAAWO,KAAKH,IAClB1B,EAAU8B,eAAeJ,GAI7B,GAAIX,EAAS,CACX,IAAIS,EAAMG,MAAMC,QAAQtB,EAAOS,SAAWT,EAAOS,QAAQ,GAAKT,EAAOS,QAErE,GAAIU,EAAWI,KAAKL,GAAM,CACxB,IAAIO,EAAS1C,EAAW,aAAciB,GACtCQ,EAAMkB,KAAKhC,EAAUiC,SAAST,EAAKO,KAIvC,GAAIf,EAAW,CACb,IAAIkB,EAAUP,MAAMC,QAAQtB,EAAOU,WAAaV,EAAOU,UAAU,GAAKV,EAAOU,UACzEmB,EAAQ9C,EAAW,YAAaiB,GACpCQ,EAAMkB,KAAKhC,EAAUoC,MAAMF,EAASC,IAGtC,OAAOE,QAAQC,IAAIxB","file":"js/queryString-5309da7b475cb5bb0a98.chunk.js","sourcesContent":["export function isString(obj) {\n  return typeof obj === 'string';\n}\nexport function isNumber(obj) {\n  return typeof obj === 'number';\n}\nexport function isFunction(obj) {\n  return typeof obj === 'function';\n}\nexport function isPlainObject(obj) {\n  return Object.prototype.toString.call(obj).slice(8, -1).toLowerCase() === 'object';\n}\nexport function hasUser(event) {\n  var _a, _b, _c;\n\n  var id = (_c = (_b = (_a = event.userId) !== null && _a !== void 0 ? _a : event.anonymousId) !== null && _b !== void 0 ? _b : event.groupId) !== null && _c !== void 0 ? _c : event.previousId;\n  return isString(id);\n}","/**\n * Returns an object containing only the properties prefixed by the input\n * string.\n * Ex: prefix('ajs_traits_', { ajs_traits_address: '123 St' })\n * will return { address: '123 St' }\n **/\nexport function pickPrefix(prefix, object) {\n  return Object.keys(object).reduce(function (acc, key) {\n    if (key.startsWith(prefix)) {\n      var field = key.substr(prefix.length);\n      acc[field] = object[key];\n    }\n\n    return acc;\n  }, {});\n}","import { pickPrefix } from './pickPrefix';\nimport { gracefulDecodeURIComponent } from './gracefulDecodeURIComponent';\nimport { isPlainObject } from '@segment/analytics-core';\nexport function queryString(analytics, query) {\n  var a = document.createElement('a');\n  a.href = query;\n  var parsed = a.search.slice(1);\n  var params = parsed.split('&').reduce(function (acc, str) {\n    var _a = str.split('='),\n        k = _a[0],\n        v = _a[1];\n\n    acc[k] = gracefulDecodeURIComponent(v);\n    return acc;\n  }, {});\n  var calls = [];\n  var ajs_uid = params.ajs_uid,\n      ajs_event = params.ajs_event,\n      ajs_aid = params.ajs_aid;\n\n  var _a = isPlainObject(analytics.options.useQueryString) ? analytics.options.useQueryString : {},\n      _b = _a.aid,\n      aidPattern = _b === void 0 ? /.+/ : _b,\n      _c = _a.uid,\n      uidPattern = _c === void 0 ? /.+/ : _c;\n\n  if (ajs_aid) {\n    var anonId = Array.isArray(params.ajs_aid) ? params.ajs_aid[0] : params.ajs_aid;\n\n    if (aidPattern.test(anonId)) {\n      analytics.setAnonymousId(anonId);\n    }\n  }\n\n  if (ajs_uid) {\n    var uid = Array.isArray(params.ajs_uid) ? params.ajs_uid[0] : params.ajs_uid;\n\n    if (uidPattern.test(uid)) {\n      var traits = pickPrefix('ajs_trait_', params);\n      calls.push(analytics.identify(uid, traits));\n    }\n  }\n\n  if (ajs_event) {\n    var event_1 = Array.isArray(params.ajs_event) ? params.ajs_event[0] : params.ajs_event;\n    var props = pickPrefix('ajs_prop_', params);\n    calls.push(analytics.track(event_1, props));\n  }\n\n  return Promise.all(calls);\n}"],"sourceRoot":""}