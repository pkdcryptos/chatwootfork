{"version":3,"sources":["webpack:///./app/javascript/superadmin_pages/views/playground/Index.vue?ef64","webpack:///./app/javascript/superadmin_pages/components/playground/Header.vue?6265","webpack:///./app/javascript/superadmin_pages/components/playground/Header.vue","webpack:///./app/javascript/superadmin_pages/components/playground/Header.vue?2bd1","webpack:///./app/javascript/superadmin_pages/components/playground/UserMessage.vue?cdd0","webpack:///./app/javascript/superadmin_pages/components/playground/UserMessage.vue","webpack:///./app/javascript/superadmin_pages/components/playground/UserMessage.vue?8dec","webpack:///./app/javascript/superadmin_pages/components/playground/BotMessage.vue?8cbb","webpack:///./app/javascript/superadmin_pages/components/playground/BotMessage.vue","webpack:///./app/javascript/superadmin_pages/components/playground/BotMessage.vue?cc36","webpack:///./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue?b0d5","webpack:///app/javascript/superadmin_pages/views/playground/Index.vue","webpack:///./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue","webpack:///./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue?6432","webpack:///./app/javascript/superadmin_pages/views/playground/Index.vue?18c9","webpack:///./app/javascript/superadmin_pages/views/playground/Index.vue","webpack:///./app/javascript/superadmin_pages/components/playground/assets/typing.gif","webpack:///./app/javascript/shared/mixins/keyboardEventListenerMixins.js","webpack:///./app/javascript/shared/helpers/KeyboardHelpers.js","webpack:///./app/javascript/shared/helpers/markdownIt/link.js","webpack:///./app/javascript/shared/helpers/MessageFormatter.js","webpack:///./app/javascript/shared/mixins/messageFormatterMixin.js"],"names":["_vm","this","_c","_self","_setupProxy","staticClass","attrs","responseSourcePath","_v","_s","responseSourceName","directives","name","rawName","value","expression","TypingIndicator","componentData","ref","_l","message","key","id","type","formatMessage","content","_e","domProps","on","$event","target","composing","messageContent","module","exports","taggedHandlers","mounted","events","getKeyboardEvents","wrappedEvents","wrapEventsInKeybindingsHandler","keydownHandler","createKeybindingsHandler","addEventHandler","beforeDestroy","$el","dataset","keydownHandlerIndex","handlerToRemove","document","removeEventListener","methods","indexToAppend","push","root","addEventListener","Object","keys","forEach","eventName","keydownWrapper","handler","e","actionToPerform","action","allowOnFocusedInput","isActiveElementTypeable","isEscape","blur","isEnter","hasPressedCommand","metaKey","hasPressedEnterAndNotCmdOrShift","shiftKey","hasPressedShift","hasPressedCommandAndEnter","activeElement","tagName","contentEditable","className","includes","USER_MENTIONS_REGEX","processInlineToken","blockToken","children","inlineToken","imgSrc","attrGet","height","URL","searchParams","get","attrSet","setImageHeight","md","require","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","maxNesting","use","renderer","rules","mention","tokens","idx","inline","ruler","before","state","silent","label","labelEnd","labelStart","pos","res","token","href","max","posMax","src","charCodeAt","helpers","parseLinkLabel","slice","parseLinkDestination","ok","normalizeLink","str","validateLink","match","RegExp","core","after","mila","class","rel","TWITTER_USERNAME_REGEX","TWITTER_HASH_REGEX","MessageFormatter","isATweet","isAPrivateNote","updatedMessage","replace","render","DOMParser","parseFromString","formattedMessage","body","textContent","getPlainText","plainText","truncateMessage","description","length","highlightContent","searchTerm","highlightClass","plainTextContent","escapedSearchTerm"],"mappings":"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","file":"js/78-ff40d75a7ee23ee0e7f4.chunk.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"h-full w-full flex flex-col bg-slate-25\"},[_c('PlaygroundHeader',{attrs:{\"response-source-name\":_vm.componentData.responseSourceName,\"response-source-path\":_vm.componentData.responseSourcePath}}),_vm._v(\" \"),_c('div',{ref:\"chatContainer\",staticClass:\"flex-1 overflow-auto px-8 py-4\"},[_vm._l((_vm.messages),function(message){return _c('div',{key:message.id,attrs:{\"id\":`message-${message.id}`}},[(message.type === 'User')?_c('UserMessage',{attrs:{\"message\":_vm.formatMessage(message.content)}}):_c('BotMessage',{attrs:{\"message\":_vm.formatMessage(message.content)}})],1)}),_vm._v(\" \"),(_vm.isWaiting)?_c('TypingIndicator'):_vm._e()],2),_vm._v(\" \"),_c('div',{staticClass:\"w-full px-8 py-6\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.messageContent),expression:\"messageContent\"}],ref:\"messageInput\",staticClass:\"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border !outline-2 border-slate-100 focus:ring-woot-500 focus:border-woot-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-woot-500 dark:focus:border-woot-500\",attrs:{\"rows\":4,\"placeholder\":\"Type a message... [CMD/CTRL + Enter to send]\",\"autofocus\":\"\",\"autocomplete\":\"off\"},domProps:{\"value\":(_vm.messageContent)},on:{\"input\":function($event){if($event.target.composing)return;_vm.messageContent=$event.target.value}}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=0fa12268&\"\nimport script from \"./Header.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./Header.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('header',{staticClass:\"flex items-center px-8 py-4 bg-white border-b border-slate-100\",attrs:{\"role\":\"banner\"}},[_c('a',{staticClass:\"text-woot-500 hover:underline mr-4\",attrs:{\"href\":_vm.responseSourcePath}},[_vm._v(\"\\n    Back\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"border border-solid border-slate-100 text-slate-700 mr-4 p-2 rounded-full\"},[_c('svg',{attrs:{\"width\":\"24\",\"height\":\"24\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-mist-fill\"}})])]),_vm._v(\" \"),_c('div',{staticClass:\"flex flex-col h-14 justify-center\"},[_c('h1',{staticClass:\"text-base font-medium text-slate-900\",attrs:{\"id\":\"page-title\"}},[_vm._v(\"\\n      Robin AI playground\\n    \")]),_vm._v(\" \"),_c('p',{staticClass:\"text-sm text-slate-600\"},[_vm._v(\"\\n      Chat with the source\\n      \"),_c('span',{staticClass:\"font-medium\"},[_vm._v(\"\\n        \"+_vm._s(_vm.responseSourceName)+\"\\n      \")]),_vm._v(\"\\n      and evaluate it’s efficiency.\\n    \")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMessage.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMessage.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./UserMessage.vue?vue&type=template&id=8cd00670&\"\nimport script from \"./UserMessage.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./UserMessage.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-end\"},[_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.message),expression:\"message\"}],staticClass:\"px-4 py-3 bg-woot-400 text-white text-sm rounded-md inline-block\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotMessage.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotMessage.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./BotMessage.vue?vue&type=template&id=92255130&\"\nimport script from \"./BotMessage.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./BotMessage.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-start\"},[_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.message),expression:\"message\"}],staticClass:\"px-4 py-3 bg-white max-w-4xl text-slate-700 leading-6 text-sm rounded-md inline-block border border-slate-100\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"","<template>\n  <section class=\"h-full w-full flex flex-col bg-slate-25\">\n    <PlaygroundHeader\n      :response-source-name=\"componentData.responseSourceName\"\n      :response-source-path=\"componentData.responseSourcePath\"\n    />\n    <div ref=\"chatContainer\" class=\"flex-1 overflow-auto px-8 py-4\">\n      <div\n        v-for=\"message in messages\"\n        :id=\"`message-${message.id}`\"\n        :key=\"message.id\"\n      >\n        <UserMessage\n          v-if=\"message.type === 'User'\"\n          :message=\"formatMessage(message.content)\"\n        />\n        <BotMessage v-else :message=\"formatMessage(message.content)\" />\n      </div>\n      <TypingIndicator v-if=\"isWaiting\" />\n    </div>\n    <div class=\"w-full px-8 py-6\">\n      <textarea\n        ref=\"messageInput\"\n        v-model=\"messageContent\"\n        :rows=\"4\"\n        class=\"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border !outline-2 border-slate-100 focus:ring-woot-500 focus:border-woot-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-woot-500 dark:focus:border-woot-500\"\n        placeholder=\"Type a message... [CMD/CTRL + Enter to send]\"\n        autofocus\n        autocomplete=\"off\"\n      />\n    </div>\n  </section>\n</template>\n\n<script>\nimport messageFormatterMixin from 'shared/mixins/messageFormatterMixin';\nimport keyboardEventListenerMixins from 'shared/mixins/keyboardEventListenerMixins';\nimport Header from '../../components/playground/Header.vue';\nimport UserMessage from '../../components/playground/UserMessage.vue';\nimport BotMessage from '../../components/playground/BotMessage.vue';\nimport TypingIndicator from '../../components/playground/TypingIndicator.vue';\n\nexport default {\n  components: {\n    PlaygroundHeader: Header,\n    UserMessage,\n    BotMessage,\n    TypingIndicator,\n  },\n  mixins: [messageFormatterMixin, keyboardEventListenerMixins],\n  props: {\n    componentData: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  data() {\n    return { messages: [], messageContent: '', isWaiting: false };\n  },\n  computed: {\n    previousMessages() {\n      return this.messages.map(message => ({\n        type: message.type,\n        message: message.content,\n      }));\n    },\n  },\n  mounted() {\n    this.focusInput();\n  },\n  methods: {\n    getKeyboardEvents() {\n      return {\n        '$mod+Enter': {\n          action: () => {\n            this.onMessageSend();\n          },\n          allowOnFocusedInput: true,\n        },\n      };\n    },\n    focusInput() {\n      this.$refs.messageInput.focus();\n    },\n    onMessageSend() {\n      this.addMessageToData('User', this.messageContent);\n      this.sendMessageToServer(this.messageContent);\n    },\n    scrollToLastMessage() {\n      this.$nextTick(() => {\n        const messageId = this.messages[this.messages.length - 1].id;\n        const messageElement = document.getElementById(`message-${messageId}`);\n        messageElement.scrollIntoView({ behavior: 'smooth' });\n      });\n    },\n    addMessageToData(type, content) {\n      this.messages.push({ id: this.messages.length, type, content });\n      this.scrollToLastMessage();\n    },\n    async sendMessageToServer(messageContent) {\n      this.messageContent = '';\n      this.isWaiting = true;\n      const csrfToken = document\n        .querySelector('meta[name=\"csrf-token\"]')\n        .getAttribute('content');\n\n      try {\n        const response = await fetch(window.location.href, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'X-CSRF-Token': csrfToken,\n          },\n          body: JSON.stringify({\n            message: messageContent,\n            previous_messages: this.previousMessages,\n          }),\n          credentials: 'include',\n        });\n\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const { message } = await response.json();\n        this.addMessageToData('Bot', message);\n      } catch (error) {\n        this.addMessageToData(\n          'bot',\n          'Error: Could not retrieve response. Please check the console for more details.'\n        );\n      } finally {\n        this.isWaiting = false;\n        this.focusInput();\n      }\n    },\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./TypingIndicator.vue?vue&type=template&id=278d0699&\"\nimport script from \"./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-start\"},[_c('div',{staticClass:\"px-2 py-2 bg-white max-w-4xl text-slate-700 leading-6 text-sm rounded-md inline-block border border-slate-100\"},[_c('img',{staticClass:\"h-4\",attrs:{\"src\":_setup.TypingIndicator,\"alt\":\"TypingIndicator\"}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=8aac9116&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"media/superadmin_pages/components/playground/assets/typing-929e3aeb589b7668d0b4ff57f73e17e3.gif\";","import { isActiveElementTypeable, isEscape } from '../helpers/KeyboardHelpers';\n\nimport { createKeybindingsHandler } from 'tinykeys';\n\n// this is a store that stores the handler globally, and only gets reset on reload\nconst taggedHandlers = [];\n\nexport default {\n  mounted() {\n    const events = this.getKeyboardEvents();\n    if (events) {\n      const wrappedEvents = this.wrapEventsInKeybindingsHandler(events);\n      const keydownHandler = createKeybindingsHandler(wrappedEvents);\n      this.addEventHandler(keydownHandler);\n    }\n  },\n  beforeDestroy() {\n    if (this.$el && this.$el.dataset?.keydownHandlerIndex) {\n      const handlerToRemove =\n        taggedHandlers[this.$el.dataset.keydownHandlerIndex];\n      document.removeEventListener('keydown', handlerToRemove);\n    }\n  },\n  methods: {\n    addEventHandler(keydownHandler) {\n      const indexToAppend = taggedHandlers.push(keydownHandler) - 1;\n      const root = this.$el;\n      if (root && root.dataset) {\n        // For the components with a top level v-if Vue renders it as an empty comment in the DOM\n        // so we need to check if the root element has a dataset property to ensure it is a valid element\n        document.addEventListener('keydown', keydownHandler);\n        root.dataset.keydownHandlerIndex = indexToAppend;\n      }\n    },\n    getKeyboardEvents() {\n      return null;\n    },\n    wrapEventsInKeybindingsHandler(events) {\n      const wrappedEvents = {};\n      Object.keys(events).forEach(eventName => {\n        wrappedEvents[eventName] = this.keydownWrapper(events[eventName]);\n      });\n\n      return wrappedEvents;\n    },\n    keydownWrapper(handler) {\n      return e => {\n        const actionToPerform =\n          typeof handler === 'function' ? handler : handler.action;\n        const allowOnFocusedInput =\n          typeof handler === 'function' ? false : handler.allowOnFocusedInput;\n\n        const isTypeable = isActiveElementTypeable(e);\n\n        if (isTypeable) {\n          if (isEscape(e)) {\n            e.target.blur();\n          }\n\n          if (!allowOnFocusedInput) return;\n        }\n\n        actionToPerform(e);\n      };\n    },\n  },\n};\n","export const isEnter = e => {\n  return e.key === 'Enter';\n};\n\nexport const isEscape = e => {\n  return e.key === 'Escape';\n};\n\nexport const hasPressedShift = e => {\n  return e.shiftKey;\n};\n\nexport const hasPressedCommand = e => {\n  return e.metaKey;\n};\n\nexport const hasPressedEnterAndNotCmdOrShift = e => {\n  return isEnter(e) && !hasPressedCommand(e) && !hasPressedShift(e);\n};\n\nexport const hasPressedCommandAndEnter = e => {\n  return hasPressedCommand(e) && isEnter(e);\n};\n\n/**\n * Determines whether the active element is typeable.\n *\n * @param {KeyboardEvent} e - The keyboard event object.\n * @returns {boolean} `true` if the active element is typeable, `false` otherwise.\n *\n * @example\n * document.addEventListener('keydown', e => {\n *   if (isActiveElementTypeable(e)) {\n *     handleTypeableElement(e);\n *   }\n * });\n */\nexport const isActiveElementTypeable = e => {\n  /** @type {HTMLElement | null} */\n  // @ts-ignore\n  const activeElement = e.target || document.activeElement;\n\n  return !!(\n    activeElement?.tagName === 'INPUT' ||\n    activeElement?.tagName === 'NINJA-KEYS' ||\n    activeElement?.tagName === 'TEXTAREA' ||\n    activeElement?.contentEditable === 'true' ||\n    activeElement?.className?.includes('ProseMirror')\n  );\n};\n","// Process [@mention](mention://user/1/Pranav)\nconst USER_MENTIONS_REGEX = /mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm;\n\nconst buildMentionTokens = () => (state, silent) => {\n  var label;\n  var labelEnd;\n  var labelStart;\n  var pos;\n  var res;\n  var token;\n  var href = '';\n  var max = state.posMax;\n\n  if (state.src.charCodeAt(state.pos) !== 0x5b /* [ */) {\n    return false;\n  }\n\n  labelStart = state.pos + 1;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos, true);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) {\n    return false;\n  }\n\n  label = state.src.slice(labelStart, labelEnd);\n  pos = labelEnd + 1;\n\n  if (pos < max && state.src.charCodeAt(pos) === 0x28 /* ( */) {\n    pos += 1;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n    pos += 1;\n  }\n\n  if (!href.match(new RegExp(USER_MENTIONS_REGEX))) {\n    return false;\n  }\n\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    token = state.push('mention', '');\n    token.href = href;\n    token.content = label;\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n\n  return true;\n};\n\nconst renderMentions = () => (tokens, idx) => {\n  return `<span class=\"prosemirror-mention-node\">${tokens[idx].content}</span>`;\n};\n\nexport default function mentionPlugin(md) {\n  md.renderer.rules.mention = renderMentions(md);\n  md.inline.ruler.before('link', 'mention', buildMentionTokens(md));\n}\n","import mila from 'markdown-it-link-attributes';\nimport mentionPlugin from './markdownIt/link';\n\nconst setImageHeight = inlineToken => {\n  const imgSrc = inlineToken.attrGet('src');\n  if (!imgSrc) return;\n  const url = new URL(imgSrc);\n  const height = url.searchParams.get('cw_image_height');\n  if (!height) return;\n  inlineToken.attrSet('style', `height: ${height};`);\n};\n\nconst processInlineToken = blockToken => {\n  blockToken.children.forEach(inlineToken => {\n    if (inlineToken.type === 'image') {\n      setImageHeight(inlineToken);\n    }\n  });\n};\n\nconst imgResizeManager = md => {\n  // Custom rule for image resize in markdown\n  // If the image url has a query param cw_image_height, then add a style attribute to the image\n  md.core.ruler.after('inline', 'add-image-height', state => {\n    state.tokens.forEach(blockToken => {\n      if (blockToken.type === 'inline') {\n        processInlineToken(blockToken);\n      }\n    });\n  });\n};\n\nconst md = require('markdown-it')({\n  html: false,\n  xhtmlOut: true,\n  breaks: true,\n  langPrefix: 'language-',\n  linkify: true,\n  typographer: true,\n  quotes: '\\u201c\\u201d\\u2018\\u2019',\n  maxNesting: 20,\n})\n  .use(mentionPlugin)\n  .use(imgResizeManager)\n  .use(mila, {\n    attrs: {\n      class: 'link',\n      rel: 'noreferrer noopener nofollow',\n      target: '_blank',\n    },\n  });\n\nconst TWITTER_USERNAME_REGEX = /(^|[^@\\w])@(\\w{1,15})\\b/g;\nconst TWITTER_USERNAME_REPLACEMENT = '$1[@$2](http://twitter.com/$2)';\nconst TWITTER_HASH_REGEX = /(^|\\s)#(\\w+)/g;\nconst TWITTER_HASH_REPLACEMENT = '$1[#$2](https://twitter.com/hashtag/$2)';\n\nclass MessageFormatter {\n  constructor(message, isATweet = false, isAPrivateNote = false) {\n    this.message = message || '';\n    this.isAPrivateNote = isAPrivateNote;\n    this.isATweet = isATweet;\n  }\n\n  formatMessage() {\n    let updatedMessage = this.message;\n    if (this.isATweet && !this.isAPrivateNote) {\n      updatedMessage = updatedMessage.replace(\n        TWITTER_USERNAME_REGEX,\n        TWITTER_USERNAME_REPLACEMENT\n      );\n      updatedMessage = updatedMessage.replace(\n        TWITTER_HASH_REGEX,\n        TWITTER_HASH_REPLACEMENT\n      );\n    }\n    return md.render(updatedMessage);\n  }\n\n  get formattedMessage() {\n    return this.formatMessage();\n  }\n\n  get plainText() {\n    const strippedOutHtml = new DOMParser().parseFromString(\n      this.formattedMessage,\n      'text/html'\n    );\n    return strippedOutHtml.body.textContent || '';\n  }\n}\n\nexport default MessageFormatter;\n","import MessageFormatter from '../helpers/MessageFormatter';\n\nexport default {\n  methods: {\n    formatMessage(message, isATweet, isAPrivateNote) {\n      const messageFormatter = new MessageFormatter(\n        message,\n        isATweet,\n        isAPrivateNote\n      );\n      return messageFormatter.formattedMessage;\n    },\n    getPlainText(message, isATweet) {\n      const messageFormatter = new MessageFormatter(message, isATweet);\n      return messageFormatter.plainText;\n    },\n    truncateMessage(description = '') {\n      if (description.length < 100) {\n        return description;\n      }\n\n      return `${description.slice(0, 97)}...`;\n    },\n\n    highlightContent(content = '', searchTerm = '', highlightClass = '') {\n      const plainTextContent = this.getPlainText(content);\n\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\n      const escapedSearchTerm = searchTerm.replace(\n        /[.*+?^${}()|[\\]\\\\]/g,\n        '\\\\$&'\n      );\n\n      return plainTextContent.replace(\n        new RegExp(`(${escapedSearchTerm})`, 'ig'),\n        `<span class=\"${highlightClass}\">$1</span>`\n      );\n    },\n  },\n};\n"],"sourceRoot":""}