(window.webpackJsonp=window.webpackJsonp||[]).push([[38,9],{1573:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(51);var r=function(t,e){return"".concat("https://app.dyte.in/meeting/stage/").concat(t,"?authToken=").concat(e,"&showSetupScreen=true&disableVideoBackground=true")}},1587:function(t,e,n){t.exports=n.p+"media/dashboard/assets/images/chatwoot_bot-905112376e6493b37e2cecea8f9dc50c.png"},1832:function(t,e,n){},1833:function(t,e,n){},1834:function(t,e,n){},1835:function(t,e,n){},1836:function(t,e,n){},1837:function(t,e,n){},1838:function(t,e,n){},1839:function(t,e,n){},1840:function(t,e,n){},1841:function(t,e,n){},1842:function(t,e,n){},1843:function(t,e,n){},1844:function(t,e,n){},1845:function(t,e,n){},1846:function(t,e,n){},1847:function(t,e,n){},1848:function(t,e,n){},1849:function(t,e,n){},1850:function(t,e,n){},1851:function(t,e,n){},2092:function(t,e,n){"use strict";n(1832)},2093:function(t,e,n){"use strict";n(1833)},2094:function(t,e,n){"use strict";n(1834)},2095:function(t,e,n){"use strict";n(1835)},2096:function(t,e,n){"use strict";n(1836)},2097:function(t,e,n){"use strict";n(1837)},2098:function(t,e,n){"use strict";n(1838)},2099:function(t,e,n){"use strict";n(1839)},2100:function(t,e,n){"use strict";n(1840)},2101:function(t,e,n){"use strict";n(1841)},2102:function(t,e,n){"use strict";n(1842)},2103:function(t,e,n){"use strict";n(1843)},2104:function(t,e,n){"use strict";n(1844)},2105:function(t,e,n){"use strict";n(1845)},2106:function(t,e,n){"use strict";n(1846)},2107:function(t,e,n){"use strict";n(1847)},2108:function(t,e,n){"use strict";n(1848)},2109:function(t,e,n){t.exports=n.p+"media/widget/assets/images/typing-929e3aeb589b7668d0b4ff57f73e17e3.gif"},2110:function(t,e,n){"use strict";n(1849)},2111:function(t,e,n){"use strict";n(1850)},2112:function(t,e,n){"use strict";n(1851)},2126:function(t,e,n){"use strict";n.r(e);n(26),n(11),n(23),n(30),n(25),n(31);var r=n(34),s=(n(9),n(24),n(37),n(279)),a=n(763),i=(n(36),n(39),n(16),n(18),n(20),n(68),n(44),n(72),n(319));function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,s,a=[],i=!0,o=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(c){o=!0,s=c}finally{try{i||null==n.return||n.return()}finally{if(o)throw s}}return a}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var l={name:"FooterReplyTo",components:{FluentIcon:i.a},props:{inReplyTo:{type:Object,default:function(){}}},computed:{replyToAttachment:function(){var t,e;if(null===(t=this.inReplyTo)||void 0===t||null===(e=t.attachments)||void 0===e||!e.length)return"";var n=o(this.inReplyTo.attachments,1)[0],r=(n=void 0===n?{}:n).file_type;return this.$t("ATTACHMENTS.".concat(r,".CONTENT"))}}},u=n(8),d=Object(u.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-2.5 rounded-[7px] dark:bg-slate-900 dark:text-slate-100 bg-slate-100 px-2 py-1.5 text-sm text-slate-700 flex items-center gap-2"},[e("div",{staticClass:"items-center flex-grow truncate"},[e("strong",[t._v("Replying to:")]),t._v("\n    "+t._s(t.inReplyTo.content||t.replyToAttachment)+"\n  ")]),t._v(" "),e("button",{staticClass:"items-end flex-shrink-0 p-1 rounded-md hover:bg-slate-200 dark:hover:bg-slate-800",on:{click:function(e){return t.$emit("dismiss")}}},[e("fluent-icon",{attrs:{icon:"dismiss",size:"12"}})],1)])}),[],!1,null,null,null).exports,p=(n(51),n(600),n(80),n(103),n(208),n(1511)),f=n.n(p),m=n(191),h=n(741),g=n(92),b=n(97),v=n(1512);function y(t,e,n,r,s,a,i){try{var o=t[a](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(r,s)}function O(t){return function(){var e=this,n=arguments;return new Promise((function(r,s){var a=t.apply(e,n);function i(t){y(a,r,s,i,o,"next",t)}function o(t){y(a,r,s,i,o,"throw",t)}i(void 0)}))}}function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x={components:{FluentIcon:i.a,FileUpload:f.a,Spinner:m.a},props:{onAttach:{type:Function,default:function(){}}},data:function(){return{isUploading:!1}},computed:_(_({},Object(r.mapGetters)({globalConfig:"globalConfig/get"})),{},{fileUploadSizeLimit:function(){return g.j},allowedFileTypes:function(){return g.a}}),mounted:function(){document.addEventListener("paste",this.handleClipboardPaste)},destroyed:function(){document.removeEventListener("paste",this.handleClipboardPaste)},methods:{handleClipboardPaste:function(t){var e=this;(t.clipboardData||t.originalEvent.clipboardData).items.forEach((function(n){if("file"===n.kind){t.preventDefault();var r=n.getAsFile();e.$refs.upload.add(r)}}))},getFileType:function(t){return t.includes("image")?"image":"file"},onFileUpload:function(t){var e=this;return O(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.globalConfig.directUploadsEnabled){n.next=5;break}return n.next=3,e.onDirectFileUpload(t);case 3:n.next=7;break;case 5:return n.next=7,e.onIndirectFileUpload(t);case 7:case"end":return n.stop()}}),n)})))()},onDirectFileUpload:function(t){var e=this;return O(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:e.isUploading=!0;try{Object(h.a)(t,g.j)?(r=window.chatwootWebChannel.websiteToken,new v.DirectUpload(t.file,"/api/v1/widget/direct_uploads?website_token=".concat(r),{directUploadWillCreateBlobWithXHR:function(t){t.setRequestHeader("X-Auth-Token",window.authToken)}}).create((function(n,r){n?e.$emitter.emit(b.a.SHOW_ALERT,{message:n}):e.onAttach(_({file:r.signed_id},e.getLocalFileAttributes(t)))}))):e.$emitter.emit(b.a.SHOW_ALERT,{message:e.$t("FILE_SIZE_LIMIT",{MAXIMUM_FILE_UPLOAD_SIZE:e.fileUploadSizeLimit})})}catch(s){}e.isUploading=!1;case 5:case"end":return n.stop()}}),n)})))()},onIndirectFileUpload:function(t){var e=this;return O(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(e.isUploading=!0,n.prev=3,!Object(h.a)(t,g.j)){n.next=9;break}return n.next=7,e.onAttach(_({file:t.file},e.getLocalFileAttributes(t)));case 7:n.next=10;break;case 9:e.$emitter.emit(b.a.SHOW_ALERT,{message:e.$t("FILE_SIZE_LIMIT",{MAXIMUM_FILE_UPLOAD_SIZE:e.fileUploadSizeLimit})});case 10:n.next=14;break;case 12:n.prev=12,n.t0=n.catch(3);case 14:e.isUploading=!1;case 15:case"end":return n.stop()}}),n,null,[[3,12]])})))()},getLocalFileAttributes:function(t){return{thumbUrl:window.URL.createObjectURL(t.file),fileType:this.getFileType(t.type)}}}},j=Object(u.a)(x,(function(){var t=this,e=t._self._c;return e("file-upload",{ref:"upload",attrs:{size:8388608,accept:t.allowedFileTypes,data:{direct_upload_url:"/api/v1/widget/direct_uploads",direct_upload:!0}},on:{"input-file":t.onFileUpload}},[e("button",{staticClass:"icon-button flex items-center justify-center"},[t.isUploading.image?t._e():e("fluent-icon",{attrs:{icon:"attach"}}),t._v(" "),t.isUploading?e("spinner",{attrs:{size:"small"}}):t._e()],1)])}),[],!1,null,null,null).exports,k={components:{FluentIcon:i.a,Spinner:m.a},props:{loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},onClick:{type:Function,default:function(){}},color:{type:String,default:"#6e6f73"}}},S=Object(u.a)(k,(function(){var t=this,e=t._self._c;return e("button",{staticClass:"icon-button flex items-center justify-center ml-1",attrs:{type:"submit",disabled:t.disabled},on:{click:t.onClick}},[t.loading?e("spinner",{attrs:{size:"small"}}):e("fluent-icon",{style:`color: ${t.color}`,attrs:{icon:"send"}})],1)}),[],!1,null,null,null).exports,T=n(353),E=n(754),A=n(311);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){$(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var R={name:"ChatInputWrap",components:{ChatAttachmentButton:j,ChatSendButton:S,EmojiInput:function(){return n.e(10).then(n.bind(null,2209))},FluentIcon:i.a,ResizableTextArea:E.a},mixins:[T.a,A.a],props:{onSendMessage:{type:Function,default:function(){}},onSendAttachment:{type:Function,default:function(){}}},data:function(){return{userInput:"",showEmojiPicker:!1,isFocused:!1}},computed:I(I({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor",isWidgetOpen:"appConfig/getIsWidgetOpen"})),{},{showAttachment:function(){return this.hasAttachmentsEnabled&&0===this.userInput.length},showSendButton:function(){return this.userInput.length>0},inputColor:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600"),"\n        ").concat(this.$dm("text-black-900","dark:text-slate-50"))},emojiIconColor:function(){return this.showEmojiPicker?"text-woot-500 ".concat(this.$dm("text-black-900","dark:text-slate-100")):"".concat(this.$dm("text-black-900","dark:text-slate-100"))}}),watch:{isWidgetOpen:function(t){t&&this.focusInput()}},destroyed:function(){document.removeEventListener("keypress",this.handleEnterKeyPress)},mounted:function(){document.addEventListener("keypress",this.handleEnterKeyPress),this.isWidgetOpen&&this.focusInput()},methods:{onBlur:function(){this.isFocused=!1},onFocus:function(){this.isFocused=!0},handleButtonClick:function(){this.userInput&&this.userInput.trim()&&this.onSendMessage(this.userInput),this.userInput="",this.focusInput()},handleEnterKeyPress:function(t){13!==t.keyCode||t.shiftKey||(t.preventDefault(),this.handleButtonClick())},toggleEmojiPicker:function(){this.showEmojiPicker=!this.showEmojiPicker},hideEmojiPicker:function(t){this.showEmojiPicker&&(t.stopPropagation(),this.toggleEmojiPicker())},emojiOnClick:function(t){this.userInput="".concat(this.userInput).concat(t," ")},onTypingOff:function(){this.toggleTyping("off")},onTypingOn:function(){this.toggleTyping("on")},toggleTyping:function(t){this.$store.dispatch("conversation/toggleUserTyping",{typingStatus:t})},focusInput:function(){this.$refs.chatInput.focus()}}},M=(n(2092),Object(u.a)(R,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-message--input is-focused",class:t.$dm("bg-white ","dark:bg-slate-600"),on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideEmojiPicker.apply(null,arguments)}}},[e("resizable-text-area",{ref:"chatInput",staticClass:"form-input user-message-input is-focused",class:t.inputColor,attrs:{id:"chat-input",rows:1,"aria-label":t.$t("CHAT_PLACEHOLDER"),placeholder:t.$t("CHAT_PLACEHOLDER")},on:{"typing-off":t.onTypingOff,"typing-on":t.onTypingOn,focus:t.onFocus,blur:t.onBlur},model:{value:t.userInput,callback:function(e){t.userInput=e},expression:"userInput"}}),t._v(" "),e("div",{staticClass:"button-wrap"},[t.showAttachment?e("chat-attachment-button",{class:t.$dm("text-black-900","dark:text-slate-100"),attrs:{"on-attach":t.onSendAttachment}}):t._e(),t._v(" "),t.hasEmojiPickerEnabled?e("button",{staticClass:"flex items-center justify-center icon-button",attrs:{"aria-label":"Emoji picker"},on:{click:t.toggleEmojiPicker}},[e("fluent-icon",{class:t.emojiIconColor,attrs:{icon:"emoji"}})],1):t._e(),t._v(" "),t.showEmojiPicker?e("emoji-input",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.hideEmojiPicker,expression:"hideEmojiPicker"}],attrs:{"on-click":t.emojiOnClick},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideEmojiPicker.apply(null,arguments)}}}):t._e(),t._v(" "),t.showSendButton?e("chat-send-button",{attrs:{"on-click":t.handleButtonClick,color:t.widgetColor}}):t._e()],1)],1)}),[],!1,null,"48624984",null)),D=M.exports,L=n(241),F=n(609),B=n(94),V=n(341);function N(t,e,n,r,s,a,i){try{var o=t[a](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(r,s)}function U(t){return function(){var e=this,n=arguments;return new Promise((function(r,s){var a=t.apply(e,n);function i(t){N(a,r,s,i,o,"next",t)}function o(t){N(a,r,s,i,o,"throw",t)}i(void 0)}))}}function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){q(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var G={components:{ChatInputWrap:D,CustomButton:a.a,FooterReplyTo:d},mixins:[F.a],props:{msg:{type:String,default:""}},data:function(){return{inReplyTo:null}},computed:W(W({},Object(r.mapGetters)({conversationAttributes:"conversationAttributes/getConversationParams",widgetColor:"appConfig/getWidgetColor",conversationSize:"conversation/getConversationSize",currentUser:"contacts/getCurrentUser",isWidgetStyleFlat:"appConfig/isWidgetStyleFlat"})),{},{textColor:function(){return Object(s.f)(this.widgetColor)},hideReplyBox:function(){var t=window.chatwootWebChannel.allowMessagesAfterResolved,e=this.conversationAttributes.status;return!t&&"resolved"===e},showEmailTranscriptButton:function(){return this.hasEmail},hasEmail:function(){return this.currentUser&&this.currentUser.has_email},hasReplyTo:function(){return this.inReplyTo&&(this.inReplyTo.content||this.inReplyTo.attachments)}}),mounted:function(){this.$emitter.on(b.a.TOGGLE_REPLY_TO_MESSAGE,this.toggleReplyTo)},methods:W(W(W({},Object(r.mapActions)("conversation",["sendMessage","sendAttachment","clearConversations"])),Object(r.mapActions)("conversationAttributes",["getAttributes","clearConversationAttributes"])),{},{handleSendMessage:function(t){var e=this;return U(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.sendMessage({content:t,replyTo:e.inReplyTo?e.inReplyTo.id:null});case 2:e.inReplyTo=null,0===e.conversationSize&&e.getAttributes();case 4:case"end":return n.stop()}}),n)})))()},handleSendAttachment:function(t){var e=this;return U(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.sendAttachment({attachment:t,replyTo:e.inReplyTo?e.inReplyTo.id:null});case 2:e.inReplyTo=null;case 3:case"end":return n.stop()}}),n)})))()},startNewConversation:function(){this.clearConversations(),this.clearConversationAttributes(),this.replaceRoute("prechat-form"),B.a.sendMessage({event:"onEvent",eventIdentifier:V.c,data:{hasConversation:!0}})},toggleReplyTo:function(t){this.inReplyTo=t},sendTranscript:function(){var t=this;return U(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasEmail){e.next=10;break}return e.prev=1,e.next=4,Object(L.f)();case 4:t.$emitter.emit(b.a.SHOW_ALERT,{message:t.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_SUCCESS"),type:"success"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t.$emitter.$emit(b.a.SHOW_ALERT,{message:t.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_ERROR")});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))()}})},H=(n(2093),Object(u.a)(G,(function(){var t=this,e=t._self._c;return t.hideReplyBox?e("div",[e("custom-button",{staticClass:"font-medium",attrs:{block:"","bg-color":t.widgetColor,"text-color":t.textColor},on:{click:t.startNewConversation}},[t._v("\n    "+t._s(t.$t("START_NEW_CONVERSATION"))+"\n  ")]),t._v(" "),t.showEmailTranscriptButton?e("custom-button",{staticClass:"font-normal",attrs:{type:"clear"},on:{click:t.sendTranscript}},[t._v("\n    "+t._s(t.$t("EMAIL_TRANSCRIPT.BUTTON_TEXT"))+"\n  ")]):t._e()],1):e("footer",{staticClass:"relative z-50 mb-1",class:{"rounded-lg":!t.isWidgetStyleFlat,"pt-2.5 shadow-[0px_-20px_20px_1px_rgba(0,_0,_0,_0.05)] dark:shadow-[0px_-20px_20px_1px_rgba(0,_0,_0,_0.15)] rounded-t-none":t.hasReplyTo}},[t.hasReplyTo?e("footer-reply-to",{attrs:{"in-reply-to":t.inReplyTo},on:{dismiss:function(e){t.inReplyTo=null}}}):t._e(),t._v(" "),e("chat-input-wrap",{staticClass:"shadow-sm",attrs:{"on-send-message":t.handleSendMessage,"on-send-attachment":t.handleSendAttachment}})],1)}),[],!1,null,"7f91e7fc",null).exports),X=(n(89),n(736)),Y={name:"UserMessageBubble",mixins:[X.a],props:{message:{type:String,default:""},status:{type:String,default:""},widgetColor:{type:String,default:""}},computed:{textColor:function(){return Object(s.f)(this.widgetColor)}}},K=(n(2094),Object(u.a)(Y,(function(){var t=this;return(0,t._self._c)("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.formatMessage(t.message,!1),expression:"formatMessage(message, false)"}],staticClass:"chat-bubble user",style:{background:t.widgetColor,color:t.textColor}})}),[],!1,null,"3309eefb",null).exports),Z={name:"MessageReplyButton",components:{FluentIcon:i.a}},J=Object(u.a)(Z,(function(){var t=this,e=t._self._c;return e("button",{staticClass:"p-1 mb-1 rounded-full dark:text-slate-500 dark:bg-slate-900 text-slate-600 bg-slate-100 hover:text-slate-800",on:{click:function(e){return t.$emit("click")}}},[e("FluentIcon",{staticClass:"flex-shrink-0",attrs:{icon:"arrow-reply",size:"11"}})],1)}),[],!1,null,null,null).exports,Q={props:{url:{type:String,default:""},thumb:{type:String,default:""},readableTime:{type:String,default:""}},methods:{onImgError:function(){this.$emit("error")},onClick:function(){this.$emit("click")}}},tt=(n(2095),Object(u.a)(Q,(function(){var t=this,e=t._self._c;return e("a",{staticClass:"image",attrs:{href:t.url,target:"_blank",rel:"noreferrer noopener nofollow"}},[e("div",{staticClass:"wrap"},[e("img",{attrs:{src:t.thumb,alt:"Picture message"},on:{click:t.onClick,error:t.onImgError}}),t._v(" "),e("span",{staticClass:"time"},[t._v(t._s(t.readableTime))])])])}),[],!1,null,"674f83bd",null).exports),et={__name:"VideoBubble",props:{url:{type:String,default:""},readableTime:{type:String,default:""}},emits:["error"],setup:function(t,e){var n=e.emit;return{__sfc:!0,emits:n,onVideoError:function(){n("error")}}}},nt=Object(u.a)(et,(function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"block relative max-w-full"},[e("video",{staticClass:"w-full max-w-[250px] h-auto",attrs:{src:t.url,controls:""},on:{error:n.onVideoError}}),t._v(" "),e("span",{staticClass:"text-xs absolute text-white dark:text-white right-3 bottom-1 whitespace-nowrap"},[t._v("\n    "+t._s(t.readableTime)+"\n  ")])])}),[],!1,null,null,null).exports,rt={components:{FluentIcon:i.a},mixins:[A.a],props:{url:{type:String,default:""},isInProgress:{type:Boolean,default:!1},widgetColor:{type:String,default:""},isUserBubble:{type:Boolean,default:!1}},computed:{title:function(){return this.isInProgress?this.$t("COMPONENTS.FILE_BUBBLE.UPLOADING"):decodeURI(this.fileName)},fileName:function(){return this.url.substring(this.url.lastIndexOf("/")+1)},contrastingTextColor:function(){return Object(s.f)(this.widgetColor)},textColor:function(){return this.isUserBubble&&this.widgetColor?this.contrastingTextColor:""},titleColor:function(){return this.isUserBubble?"":this.$dm("text-black-900","dark:text-slate-50")}},methods:{openLink:function(){window.open(this.url,"_blank").focus()}}},st=(n(2096),Object(u.a)(rt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"file flex flex-row items-center p-3 cursor-pointer"},[e("div",{staticClass:"icon-wrap",style:{color:t.textColor}},[e("fluent-icon",{attrs:{icon:"document",size:"28"}})],1),t._v(" "),e("div",{staticClass:"meta"},[e("div",{staticClass:"title",class:t.titleColor,style:{color:t.textColor}},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),e("div",{staticClass:"link-wrap mb-1"},[e("a",{staticClass:"download",style:{color:t.textColor},attrs:{rel:"noreferrer noopener nofollow",target:"_blank",href:t.url}},[t._v("\n        "+t._s(t.$t("COMPONENTS.FILE_BUBBLE.DOWNLOAD"))+"\n      ")])])])])}),[],!1,null,"3fc1205c",null).exports),at=n(737),it={computed:{messageContentAttributes:function(){var t=this.message.content_attributes;return void 0===t?{}:t},hasAttachments:function(){return!!(this.message.attachments&&this.message.attachments.length>0)}}};function ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,s,a=[],i=!0,o=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(c){o=!0,s=c}finally{try{i||null==n.return||n.return()}finally{if(o)throw s}}return a}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var lt={name:"AgentMessage",components:{FluentIcon:i.a},props:{replyTo:{type:Object,default:function(){}}},data:function(){return{timeOutID:null}},computed:{replyToAttachment:function(){var t,e;if(null===(t=this.replyTo)||void 0===t||null===(e=t.attachments)||void 0===e||!e.length)return"";var n=ot(this.replyTo.attachments,1)[0],r=(n=void 0===n?{}:n).file_type;return this.$t("ATTACHMENTS.".concat(r,".CONTENT"))}},beforeDestroy:function(){clearTimeout(this.timeOutID)},methods:{navigateTo:function(t){var e=this,n="cwmsg-".concat(t);this.$nextTick((function(){var t=document.getElementById(n);t.scrollIntoView(),t.classList.add("bg-slate-100","dark:bg-slate-900"),e.timeOutID=setTimeout((function(){t.classList.remove("bg-slate-100","dark:bg-slate-900")}),500)}))}}},ut=Object(u.a)(lt,(function(){var t=this,e=t._self._c;return e("button",{staticClass:"px-1.5 py-0.5 rounded-md text-slate-500 bg-slate-50 dark:bg-slate-900 opacity-60 hover:opacity-100 cursor-pointer flex items-center gap-1.5",on:{click:function(e){return t.navigateTo(t.replyTo.id)}}},[e("fluent-icon",{staticClass:"flex-shrink-0",attrs:{icon:"arrow-reply",size:"12"}}),t._v(" "),e("div",{staticClass:"truncate max-w-[8rem]"},[t._v("\n    "+t._s(t.replyTo.content||t.replyToAttachment)+"\n  ")])],1)}),[],!1,null,null,null).exports,dt={name:"DragWrapper",props:{direction:{type:String,required:!0,validator:function(t){return["left","right"].includes(t)}},disabled:{type:Boolean,default:!1}},data:function(){return{startX:null,dragDistance:0,threshold:50}},methods:{handleTouchStart:function(t){this.disabled||(this.startX=t.touches[0].clientX)},handleTouchMove:function(t){if(!this.disabled){var e=t.touches[0].clientX-this.startX;"right"===this.direction?this.dragDistance=Math.min(this.threshold,e):"left"===this.direction&&(this.dragDistance=Math.max(-this.threshold,e))}},resetPosition:function(){(this.dragDistance>=this.threshold&&"right"===this.direction||this.dragDistance<=-this.threshold&&"left"===this.direction)&&this.$emit("dragged",this.direction),this.dragDistance=0}}},pt=Object(u.a)(dt,(function(){var t=this;return(0,t._self._c)("div",{staticClass:"will-change-transform",style:{transform:`translateX(${t.dragDistance}px)`},on:{touchstart:t.handleTouchStart,touchmove:t.handleTouchMove,touchend:t.resetPosition}},[t._t("default")],2)}),[],!1,null,null,null).exports;function ft(t,e,n,r,s,a,i){try{var o=t[a](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(r,s)}function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(n),!0).forEach((function(e){gt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bt={name:"UserMessage",components:{UserMessageBubble:K,MessageReplyButton:J,ImageBubble:tt,VideoBubble:nt,FileBubble:st,FluentIcon:i.a,ReplyToChip:ut,DragWrapper:pt},mixins:[it],props:{message:{type:Object,default:function(){}},replyTo:{type:Object,default:function(){}}},data:function(){return{hasImageError:!1,hasVideoError:!1}},computed:ht(ht({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{isInProgress:function(){var t=this.message.status;return"in_progress"===(void 0===t?"":t)},showTextBubble:function(){return!!this.message.content},readableTime:function(){var t=this.message.created_at,e=void 0===t?"":t;return Object(at.c)(e)},isFailed:function(){var t=this.message.status;return"failed"===(void 0===t?"":t)},errorMessage:function(){var t=this.message.meta;return t?t.error:this.$t("COMPONENTS.MESSAGE_BUBBLE.ERROR_MESSAGE")},hasReplyTo:function(){return this.replyTo&&(this.replyTo.content||this.replyTo.attachments)}}),watch:{message:function(){this.hasImageError=!1,this.hasVideoError=!1}},mounted:function(){this.hasImageError=!1,this.hasVideoError=!1},methods:{retrySendMessage:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("conversation/sendMessageWithData",e.message);case 2:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,s){var a=t.apply(e,n);function i(t){ft(a,r,s,i,o,"next",t)}function o(t){ft(a,r,s,i,o,"throw",t)}i(void 0)}))})()},onImageLoadError:function(){this.hasImageError=!0},onVideoLoadError:function(){this.hasVideoError=!0},toggleReply:function(){this.$emitter.emit(b.a.TOGGLE_REPLY_TO_MESSAGE,this.message)}}},vt=bt,yt=Object(u.a)(vt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-message-wrap group"},[e("div",{staticClass:"flex gap-1 user-message"},[e("div",{staticClass:"message-wrap",class:{"in-progress":t.isInProgress,"is-failed":t.isFailed}},[t.hasReplyTo?e("div",{staticClass:"flex justify-end mt-2 mb-1 text-xs"},[e("reply-to-chip",{attrs:{"reply-to":t.replyTo}})],1):t._e(),t._v(" "),e("div",{staticClass:"flex justify-end gap-1"},[e("div",{staticClass:"flex flex-col justify-end"},[t.isInProgress||t.isFailed?t._e():e("message-reply-button",{staticClass:"transition-opacity delay-75 opacity-0 group-hover:opacity-100 sm:opacity-0",on:{click:t.toggleReply}})],1),t._v(" "),e("drag-wrapper",{attrs:{direction:"left"},on:{dragged:t.toggleReply}},[t.showTextBubble?e("user-message-bubble",{attrs:{message:t.message.content,status:t.message.status,"widget-color":t.widgetColor}}):t._e(),t._v(" "),t.hasAttachments?e("div",{staticClass:"chat-bubble has-attachment user",style:{backgroundColor:t.widgetColor}},t._l(t.message.attachments,(function(n){return e("div",{key:n.id},["image"!==n.file_type||t.hasImageError?t._e():e("image-bubble",{attrs:{url:n.data_url,thumb:n.data_url,"readable-time":t.readableTime},on:{error:t.onImageLoadError}}),t._v(" "),"video"!==n.file_type||t.hasVideoError?e("file-bubble",{attrs:{url:n.data_url,"is-in-progress":t.isInProgress,"widget-color":t.widgetColor,"is-user-bubble":""}}):e("video-bubble",{attrs:{url:n.data_url,"readable-time":t.readableTime},on:{error:t.onVideoLoadError}})],1)})),0):t._e()],1)],1),t._v(" "),t.isFailed?e("div",{staticClass:"flex justify-end px-4 py-2 text-red-700 align-middle"},[t.hasAttachments?t._e():e("button",{staticClass:"inline-flex items-center justify-center ml-2",attrs:{title:t.$t("COMPONENTS.MESSAGE_BUBBLE.RETRY")},on:{click:t.retrySendMessage}},[e("fluent-icon",{attrs:{icon:"arrow-clockwise",size:"14"}})],1)]):t._e()])])])}),[],!1,null,null,null).exports;n(57);function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){_t(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wt={components:{},props:{action:{type:Object,default:function(){}}},computed:Ct(Ct({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{textColor:function(){return Object(s.f)(this.widgetColor)},isLink:function(){return"link"===this.action.type}}),methods:{onClick:function(){}}},xt=(n(2097),{components:{CardButton:Object(u.a)(wt,(function(){var t=this,e=t._self._c;return t.isLink?e("a",{key:t.action.uri,staticClass:"action-button button",style:{background:t.widgetColor,borderColor:t.widgetColor,color:t.textColor},attrs:{href:t.action.uri,target:"_blank",rel:"noopener nofollow noreferrer"}},[t._v("\n  "+t._s(t.action.text)+"\n")]):e("button",{key:t.action.payload,staticClass:"action-button button",style:{borderColor:t.widgetColor,color:t.widgetColor},on:{click:t.onClick}},[t._v("\n  "+t._s(t.action.text)+"\n")])}),[],!1,null,"4071c27e",null).exports},mixins:[A.a],props:{title:{type:String,default:""},description:{type:String,default:""},mediaUrl:{type:String,default:""},actions:{type:Array,default:function(){return[]}},showAvatar:Boolean},computed:{}}),jt=(n(2098),Object(u.a)(xt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-message chat-bubble agent",class:t.$dm("bg-white","dark:bg-slate-700")},[e("img",{staticClass:"media",attrs:{src:t.mediaUrl}}),t._v(" "),e("div",{staticClass:"card-body"},[e("h4",{staticClass:"title",class:t.$dm("text-black-900","dark:text-slate-50")},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),e("p",{staticClass:"body",class:t.$dm("text-black-700","dark:text-slate-100")},[t._v("\n      "+t._s(t.description)+"\n    ")]),t._v(" "),t._l(t.actions,(function(t){return e("card-button",{key:t.id,attrs:{action:t}})}))],2)])}),[],!1,null,"6cf511a6",null).exports);function kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(n),!0).forEach((function(e){Tt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Et={mixins:[A.a],props:{buttonLabel:{type:String,default:""},items:{type:Array,default:function(){return[]}},submittedValues:{type:Array,default:function(){return[]}}},data:function(){return{formValues:{},hasSubmitted:!1}},computed:St(St({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{textColor:function(){return Object(s.f)(this.widgetColor)},inputColor:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600"),"\n        ").concat(this.$dm("text-black-900","dark:text-slate-50"))},isFormValid:function(){var t=this;return this.items.reduce((function(e,n){var r=n.name;return!!t.formValues[r]&&e}),!0)}}),mounted:function(){this.submittedValues.length?this.updateFormValues():this.setFormDefaults()},methods:{onSubmitClick:function(){this.hasSubmitted=!0},onSubmit:function(){this.isFormValid&&this.$emit("submit",this.formValues)},buildFormObject:function(t){return t.reduce((function(t,e){return St(St({},t),{},Tt({},e.name,e.value||e.default))}),{})},updateFormValues:function(){this.formValues=this.buildFormObject(this.submittedValues)},setFormDefaults:function(){this.formValues=this.buildFormObject(this.items)}}},At=(n(2099),Object(u.a)(Et,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"form chat-bubble agent",class:t.$dm("bg-white","dark:bg-slate-700")},[e("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[t._l(t.items,(function(n){return e("div",{key:n.key,staticClass:"form-block",class:{"has-submitted":t.hasSubmitted}},[e("label",{class:t.$dm("text-black-900","dark:text-slate-50")},[t._v(t._s(n.label))]),t._v(" "),"checkbox"===n.type&&"email"===n.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.formValues[n.name],expression:"formValues[item.name]"}],class:t.inputColor,attrs:{pattern:n.regex,title:n.title,required:n.required&&"required",name:n.name,placeholder:n.placeholder,disabled:!!t.submittedValues.length,type:"checkbox"},domProps:{checked:Array.isArray(t.formValues[n.name])?t._i(t.formValues[n.name],null)>-1:t.formValues[n.name]},on:{change:function(e){var r=t.formValues[n.name],s=e.target,a=!!s.checked;if(Array.isArray(r)){var i=t._i(r,null);s.checked?i<0&&t.$set(t.formValues,n.name,r.concat([null])):i>-1&&t.$set(t.formValues,n.name,r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.formValues,n.name,a)}}}):"radio"===n.type&&"email"===n.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.formValues[n.name],expression:"formValues[item.name]"}],class:t.inputColor,attrs:{pattern:n.regex,title:n.title,required:n.required&&"required",name:n.name,placeholder:n.placeholder,disabled:!!t.submittedValues.length,type:"radio"},domProps:{checked:t._q(t.formValues[n.name],null)},on:{change:function(e){return t.$set(t.formValues,n.name,null)}}}):"email"===n.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.formValues[n.name],expression:"formValues[item.name]"}],class:t.inputColor,attrs:{pattern:n.regex,title:n.title,required:n.required&&"required",name:n.name,placeholder:n.placeholder,disabled:!!t.submittedValues.length,type:n.type},domProps:{value:t.formValues[n.name]},on:{input:function(e){e.target.composing||t.$set(t.formValues,n.name,e.target.value)}}}):"text"===n.type?"checkbox"===n.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.formValues[n.name],expression:"formValues[item.name]"}],class:t.inputColor,attrs:{required:n.required&&"required",pattern:n.pattern,title:n.title,name:n.name,placeholder:n.placeholder,disabled:!!t.submittedValues.length,type:"checkbox"},domProps:{checked:Array.isArray(t.formValues[n.name])?t._i(t.formValues[n.name],null)>-1:t.formValues[n.name]},on:{change:function(e){var r=t.formValues[n.name],s=e.target,a=!!s.checked;if(Array.isArray(r)){var i=t._i(r,null);s.checked?i<0&&t.$set(t.formValues,n.name,r.concat([null])):i>-1&&t.$set(t.formValues,n.name,r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.formValues,n.name,a)}}}):"radio"===n.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.formValues[n.name],expression:"formValues[item.name]"}],class:t.inputColor,attrs:{required:n.required&&"required",pattern:n.pattern,title:n.title,name:n.name,placeholder:n.placeholder,disabled:!!t.submittedValues.length,type:"radio"},domProps:{checked:t._q(t.formValues[n.name],null)},on:{change:function(e){return t.$set(t.formValues,n.name,null)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.formValues[n.name],expression:"formValues[item.name]"}],class:t.inputColor,attrs:{required:n.required&&"required",pattern:n.pattern,title:n.title,name:n.name,placeholder:n.placeholder,disabled:!!t.submittedValues.length,type:n.type},domProps:{value:t.formValues[n.name]},on:{input:function(e){e.target.composing||t.$set(t.formValues,n.name,e.target.value)}}}):"text_area"===n.type?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formValues[n.name],expression:"formValues[item.name]"}],class:t.inputColor,attrs:{required:n.required&&"required",title:n.title,name:n.name,placeholder:n.placeholder,disabled:!!t.submittedValues.length},domProps:{value:t.formValues[n.name]},on:{input:function(e){e.target.composing||t.$set(t.formValues,n.name,e.target.value)}}}):"select"===n.type?e("select",{directives:[{name:"model",rawName:"v-model",value:t.formValues[n.name],expression:"formValues[item.name]"}],class:t.inputColor,attrs:{required:n.required&&"required"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.formValues,n.name,e.target.multiple?r:r[0])}}},t._l(n.options,(function(n){return e("option",{key:n.key,domProps:{value:n.value}},[t._v("\n          "+t._s(n.label)+"\n        ")])})),0):t._e(),t._v(" "),e("span",{staticClass:"error-message"},[t._v("\n        "+t._s(n.pattern_error||t.$t("CHAT_FORM.INVALID.FIELD"))+"\n      ")])])})),t._v(" "),t.submittedValues.length?t._e():e("button",{staticClass:"button block",style:{background:t.widgetColor,borderColor:t.widgetColor,color:t.textColor},attrs:{type:"submit"},on:{click:t.onSubmitClick}},[t._v("\n      "+t._s(t.buttonLabel||t.$t("COMPONENTS.FORM_BUBBLE.SUBMIT"))+"\n    ")])],2)])}),[],!1,null,"28b9fbb6",null)),Pt=At.exports;function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Rt={components:{},props:{action:{type:Object,default:function(){}},isSelected:{type:Boolean,default:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach((function(e){$t(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),methods:{onClick:function(){this.$emit("click",this.action)}}},Mt=Rt,Dt=(n(2100),{components:{ChatOption:Object(u.a)(Mt,(function(){var t=this,e=t._self._c;return e("li",{staticClass:"option",class:{"is-selected":t.isSelected},style:{borderColor:t.widgetColor}},[e("button",{staticClass:"option-button button",on:{click:t.onClick}},[e("span",{style:{color:t.widgetColor}},[t._v(t._s(t.action.title))])])])}),[],!1,null,"dddfa04c",null).exports},mixins:[X.a],props:{title:{type:String,default:""},options:{type:Array,default:function(){return[]}},selected:{type:String,default:""},hideFields:{type:Boolean,default:!1}},methods:{isSelected:function(t){return this.selected===t.id},onClick:function(t){this.$emit("click",t)}}}),Lt=(n(2101),n(2102),Object(u.a)(Dt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"options-message chat-bubble agent bg-white dark:bg-slate-700"},[e("div",{staticClass:"card-body"},[e("h4",{staticClass:"title text-black-900 dark:text-slate-50"},[e("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.formatMessage(t.title,!1),expression:"formatMessage(title, false)"}],staticClass:"message-content text-black-900 dark:text-slate-50"})]),t._v(" "),t.hideFields?t._e():e("ul",{staticClass:"options",class:{"has-selected":!!t.selected}},t._l(t.options,(function(n){return e("chat-option",{key:n.id,attrs:{action:n,"is-selected":t.isSelected(n)},on:{click:t.onClick}})})),1)])])}),[],!1,null,"323cba20",null).exports),Ft={components:{FluentIcon:i.a},mixins:[X.a,A.a],props:{items:{type:Array,default:function(){return[]}}}},Bt=(n(2103),Object(u.a)(Ft,(function(){var t=this,e=t._self._c;return t.items.length?e("div",{staticClass:"chat-bubble agent",class:t.$dm("bg-white","dark:bg-slate-700")},t._l(t.items,(function(n){return e("div",{key:n.link,staticClass:"article-item"},[e("a",{attrs:{href:n.link,target:"_blank",rel:"noopener noreferrer nofollow"}},[e("span",{staticClass:"title flex items-center text-black-900 font-medium"},[e("fluent-icon",{staticClass:"mr-1",class:t.$dm("text-black-900","dark:text-slate-50"),attrs:{icon:"link"}}),t._v(" "),e("span",{class:t.$dm("text-slate-900","dark:text-slate-50")},[t._v(t._s(n.title))])],1),t._v(" "),e("span",{staticClass:"description",class:t.$dm("text-slate-700","dark:text-slate-200")},[t._v("\n        "+t._s(t.truncateMessage(n.description))+"\n      ")])])])})),0):t._e()}),[],!1,null,"feefd62e",null).exports),Vt=n(129),Nt=n(69);function Ut(t,e,n,r,s,a,i){try{var o=t[a](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(r,s)}function zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(n),!0).forEach((function(e){qt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gt={components:{FluentIcon:i.a,Spinner:m.a},mixins:[A.a],props:{messageId:{type:Number,required:!0},messageContentAttributes:{type:Object,default:function(){}}},setup:function(){return{v$:Object(Vt.a)()}},data:function(){return{email:"",isUpdating:!1}},computed:Wt(Wt({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{textColor:function(){return Object(s.f)(this.widgetColor)},hasSubmitted:function(){return this.messageContentAttributes&&this.messageContentAttributes.submitted_email},inputColor:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600"),"\n        ").concat(this.$dm("text-black-900","dark:text-slate-50"),"\n        ").concat(this.$dm("border-black-200","dark:border-black-500"))},inputHasError:function(){return this.v$.email.$error?"".concat(this.inputColor," error"):"".concat(this.inputColor)}}),validations:{email:{required:Nt.f,email:Nt.b}},methods:{onSubmit:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.v$.$invalid){t.next=2;break}return t.abrupt("return");case 2:return e.isUpdating=!0,t.prev=3,t.next=6,e.$store.dispatch("message/update",{email:e.email,messageId:e.messageId});case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(3);case 10:return t.prev=10,e.isUpdating=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[3,8,10,13]])})),function(){var e=this,n=arguments;return new Promise((function(r,s){var a=t.apply(e,n);function i(t){Ut(a,r,s,i,o,"next",t)}function o(t){Ut(a,r,s,i,o,"throw",t)}i(void 0)}))})()}}},Ht=Gt,Xt=(n(2104),Object(u.a)(Ht,(function(){var t=this,e=t._self._c;return e("div",[t.hasSubmitted?t._e():e("form",{staticClass:"email-input-group",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email,expression:"email",modifiers:{trim:!0}}],staticClass:"form-input",class:t.inputHasError,attrs:{placeholder:t.$t("EMAIL_PLACEHOLDER")},domProps:{value:t.email},on:{input:[function(e){e.target.composing||(t.email=e.target.value.trim())},t.v$.email.$touch],keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit.apply(null,arguments)},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),e("button",{staticClass:"button small",style:{background:t.widgetColor,borderColor:t.widgetColor,color:t.textColor},attrs:{disabled:t.v$.email.$invalid}},[t.isUpdating?e("spinner",{staticClass:"mx-2"}):e("fluent-icon",{attrs:{icon:"chevron-right"}})],1)])])}),[],!1,null,"3baa0e42",null)),Yt=Xt.exports;function Kt(t,e,n,r,s,a,i){try{var o=t[a](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(r,s)}function Zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(n),!0).forEach((function(e){Qt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var te={components:{Spinner:m.a,FluentIcon:i.a},mixins:[A.a],props:{messageContentAttributes:{type:Object,default:function(){}},messageId:{type:Number,required:!0}},data:function(){return{email:"",ratings:g.i,selectedRating:null,isUpdating:!1,feedback:""}},computed:Jt(Jt({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{isRatingSubmitted:function(){var t,e;return null===(t=this.messageContentAttributes)||void 0===t||null===(e=t.csat_survey_response)||void 0===e?void 0:e.rating},isFeedbackSubmitted:function(){var t,e;return null===(t=this.messageContentAttributes)||void 0===t||null===(e=t.csat_survey_response)||void 0===e?void 0:e.feedback_message},isButtonDisabled:function(){return!(this.selectedRating&&this.feedback)},inputColor:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600"),"\n        ").concat(this.$dm("text-black-900","dark:text-slate-50"))},textColor:function(){return Object(s.f)(this.widgetColor)},title:function(){return this.isRatingSubmitted?this.$t("CSAT.SUBMITTED_TITLE"):this.$t("CSAT.TITLE")}}),mounted:function(){if(this.isRatingSubmitted){var t=this.messageContentAttributes.csat_survey_response,e=t.rating,n=t.feedback_message;this.selectedRating=e,this.feedback=n}},methods:{buttonClass:function(t){return[{selected:t.value===this.selectedRating},{disabled:this.isRatingSubmitted},{hover:this.isRatingSubmitted},"emoji-button"]},onSubmit:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isUpdating=!0,t.prev=1,t.next=4,e.$store.dispatch("message/update",{submittedValues:{csat_survey_response:{rating:e.selectedRating,feedback_message:e.feedback}},messageId:e.messageId});case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:return t.prev=8,e.isUpdating=!1,t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[1,6,8,11]])})),function(){var e=this,n=arguments;return new Promise((function(r,s){var a=t.apply(e,n);function i(t){Kt(a,r,s,i,o,"next",t)}function o(t){Kt(a,r,s,i,o,"throw",t)}i(void 0)}))})()},selectRating:function(t){this.selectedRating=t.value,this.onSubmit()}}},ee=te,ne=(n(2105),Object(u.a)(ee,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"customer-satisfaction",class:t.$dm("bg-white","dark:bg-slate-700"),style:{borderColor:t.widgetColor}},[e("h6",{staticClass:"title",class:t.$dm("text-slate-900","dark:text-slate-50")},[t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),e("div",{staticClass:"ratings"},t._l(t.ratings,(function(n){return e("button",{key:n.key,class:t.buttonClass(n),on:{click:function(e){return t.selectRating(n)}}},[t._v("\n      "+t._s(n.emoji)+"\n    ")])})),0),t._v(" "),t.isFeedbackSubmitted?t._e():e("form",{staticClass:"feedback-form",on:{submit:function(e){return e.preventDefault(),t.onSubmit()}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.feedback,expression:"feedback"}],staticClass:"form-input",class:t.inputColor,attrs:{placeholder:t.$t("CSAT.PLACEHOLDER")},domProps:{value:t.feedback},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit.apply(null,arguments)},input:function(e){e.target.composing||(t.feedback=e.target.value)}}}),t._v(" "),e("button",{staticClass:"button small",style:{background:t.widgetColor,borderColor:t.widgetColor,color:t.textColor},attrs:{disabled:t.isButtonDisabled}},[t.isUpdating&&t.feedback?e("spinner"):e("fluent-icon",{attrs:{icon:"chevron-right"}})],1)])])}),[],!1,null,"7b924d1d",null)),re=ne.exports,se=(n(52),n(280),n(90)),ae=n(246),ie=function(t){var e=Object(ae.b)(window.location.search),n={url:"/api/v1/widget/integrations/dyte/add_participant_to_meeting".concat(e)};return se.a.post(n.url,{message_id:t})},oe=n(1573);function ce(t,e,n,r,s,a,i){try{var o=t[a](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(r,s)}function le(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ue(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?le(Object(n),!0).forEach((function(e){de(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function de(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pe={components:{FluentIcon:i.a},props:{messageId:{type:Number,required:!0},meetingData:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1,dyteAuthToken:"",isSDKMounted:!1}},computed:ue(ue({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{textColor:function(){return Object(s.f)(this.widgetColor)},meetingLink:function(){return Object(oe.a)(this.meetingData.room_name,this.dyteAuthToken)}}),methods:{joinTheCall:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,r,s,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,t.next=4,ie(e.messageId);case 4:n=t.sent,r=n.data,s=(r=void 0===r?{}:r).authResponse,a=(s=void 0===s?{}:s).authToken,i=void 0===a?"":a,e.dyteAuthToken=i,t.next=15;break;case 13:t.prev=13,t.t0=t.catch(1);case 15:return t.prev=15,e.isLoading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,13,15,18]])})),function(){var e=this,n=arguments;return new Promise((function(r,s){var a=t.apply(e,n);function i(t){ce(a,r,s,i,o,"next",t)}function o(t){ce(a,r,s,i,o,"throw",t)}i(void 0)}))})()},leaveTheRoom:function(){this.dyteAuthToken=""}}},fe=pe,me=(n(2106),{name:"AgentMessageBubble",components:{ChatArticle:Bt,ChatCard:jt,ChatForm:Pt,ChatOptions:Lt,EmailInput:Yt,CustomerSatisfaction:re,IntegrationCard:Object(u.a)(fe,(function(){var t=this,e=t._self._c;return e("div",[e("button",{staticClass:"button join-call-button",style:{background:t.widgetColor,borderColor:t.widgetColor,color:t.textColor},attrs:{"color-scheme":"secondary","is-loading":t.isLoading},on:{click:t.joinTheCall}},[e("fluent-icon",{staticClass:"mr-2",attrs:{icon:"video-add"}}),t._v("\n    "+t._s(t.$t("INTEGRATIONS.DYTE.CLICK_HERE_TO_JOIN"))+"\n  ")],1),t._v(" "),t.dyteAuthToken?e("div",{staticClass:"video-call--container"},[e("iframe",{attrs:{src:t.meetingLink,allow:"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;"}}),t._v(" "),e("button",{staticClass:"button small join-call-button leave-room-button",on:{click:t.leaveTheRoom}},[t._v("\n      "+t._s(t.$t("INTEGRATIONS.DYTE.LEAVE_THE_ROOM"))+"\n    ")])]):t._e()])}),[],!1,null,"eb06e41e",null).exports},mixins:[X.a,A.a],props:{message:{type:String,default:null},contentType:{type:String,default:null},messageType:{type:Number,default:null},messageId:{type:Number,default:null},messageContentAttributes:{type:Object,default:function(){}}},computed:{isTemplate:function(){return 3===this.messageType},isTemplateEmail:function(){return"input_email"===this.contentType},isCards:function(){return"cards"===this.contentType},isOptions:function(){return"input_select"===this.contentType},isForm:function(){return"form"===this.contentType},isArticle:function(){return"article"===this.contentType},isCSAT:function(){return"input_csat"===this.contentType},isIntegrations:function(){return"integrations"===this.contentType}},methods:{onResponse:function(t){this.$store.dispatch("message/update",t)},onOptionSelect:function(t){this.onResponse({submittedValues:[t],messageId:this.messageId})},onFormSubmit:function(t){var e=Object.keys(t).map((function(e){return{name:e,value:t[e]}}));this.onResponse({submittedValues:e,messageId:this.messageId})}}}),he=Object(u.a)(me,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-bubble-wrap"},[t.isCards||t.isOptions||t.isForm||t.isArticle||t.isCards||t.isCSAT?t._e():e("div",{staticClass:"chat-bubble agent",class:t.$dm("bg-white","dark:bg-slate-700 has-dark-mode")},[e("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.formatMessage(t.message,!1),expression:"formatMessage(message, false)"}],staticClass:"message-content text-slate-900 dark:text-slate-50"}),t._v(" "),t.isTemplateEmail?e("email-input",{attrs:{"message-id":t.messageId,"message-content-attributes":t.messageContentAttributes}}):t._e(),t._v(" "),t.isIntegrations?e("integration-card",{attrs:{"message-id":t.messageId,"meeting-data":t.messageContentAttributes.data}}):t._e()],1),t._v(" "),t.isOptions?e("div",[e("chat-options",{attrs:{title:t.message,options:t.messageContentAttributes.items,"hide-fields":!!t.messageContentAttributes.submitted_values},on:{click:t.onOptionSelect}})],1):t._e(),t._v(" "),t.isForm&&!t.messageContentAttributes.submitted_values?e("chat-form",{attrs:{items:t.messageContentAttributes.items,"button-label":t.messageContentAttributes.button_label,"submitted-values":t.messageContentAttributes.submitted_values},on:{submit:t.onFormSubmit}}):t._e(),t._v(" "),t.isCards?e("div",t._l(t.messageContentAttributes.items,(function(t){return e("chat-card",{key:t.title,attrs:{"media-url":t.media_url,title:t.title,description:t.description,actions:t.actions}})})),1):t._e(),t._v(" "),t.isArticle?e("div",[e("chat-article",{attrs:{items:t.messageContentAttributes.items}})],1):t._e(),t._v(" "),t.isCSAT?e("customer-satisfaction",{attrs:{"message-content-attributes":t.messageContentAttributes.submitted_values,"message-id":t.messageId}}):t._e()],1)}),[],!1,null,null,null).exports,ge=n(270),be=n(203),ve=n(634),ye=n(55);function Oe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,s,a=[],i=!0,o=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(c){o=!0,s=c}finally{try{i||null==n.return||n.return()}finally{if(o)throw s}}return a}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return Ce(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _e={name:"AgentMessage",components:{AgentMessageBubble:he,ImageBubble:tt,VideoBubble:nt,Thumbnail:ge.a,UserMessage:yt,FileBubble:st,MessageReplyButton:J,ReplyToChip:ut},mixins:[T.a,it,A.a],props:{message:{type:Object,default:function(){}},replyTo:{type:Object,default:function(){}}},data:function(){return{hasImageError:!1,hasVideoError:!1}},computed:{shouldDisplayAgentMessage:function(){return!("input_select"===this.contentType&&this.messageContentAttributes.submitted_values&&!this.message.content)&&this.message.content},readableTime:function(){var t=this.message.created_at,e=void 0===t?"":t;return Object(at.c)(e,"LLL d yyyy, h:mm a")},messageType:function(){var t=this.message.message_type;return void 0===t?1:t},contentType:function(){var t=this.message.content_type;return void 0===t?"":t},agentName:function(){return this.message.sender?this.message.sender.available_name||this.message.sender.name:this.useInboxAvatarForBot?this.channelConfig.websiteName:this.$t("UNREAD_VIEW.BOT")},avatarUrl:function(){var t=n(1587),e=this.useInboxAvatarForBot?this.inboxAvatarUrl:t;return this.message.message_type===be.b.TEMPLATE?e:this.message.sender?this.message.sender.avatar_url:e},hasRecordedResponse:function(){return this.messageContentAttributes.submitted_email||this.messageContentAttributes.submitted_values&&!["form","input_csat"].includes(this.contentType)},responseMessage:function(){if(this.messageContentAttributes.submitted_email)return{content:this.messageContentAttributes.submitted_email};if(this.messageContentAttributes.submitted_values&&"input_select"===this.contentType){var t=Oe(this.messageContentAttributes.submitted_values,1)[0],e=void 0===t?{}:t;return{content:e.title||e.value}}return""},isASubmittedForm:function(){return Object(ve.b)(this.message)},submittedFormValues:function(){return this.messageContentAttributes.submitted_values.map((function(t){return{id:t.name,content:t.value}}))},wrapClass:function(){return{"has-text":this.shouldDisplayAgentMessage}},hasReplyTo:function(){return this.replyTo&&(this.replyTo.content||this.replyTo.attachments)}},watch:{message:function(){this.hasImageError=!1,this.hasVideoError=!1}},mounted:function(){this.hasImageError=!1,this.hasVideoError=!1},methods:{onImageLoadError:function(){this.hasImageError=!0},onVideoLoadError:function(){this.hasVideoError=!0},toggleReply:function(){ye.a.emit(b.a.TOGGLE_REPLY_TO_MESSAGE,this.message)}}};function we(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?we(Object(n),!0).forEach((function(e){je(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ke={components:{AgentMessage:Object(u.a)(_e,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"agent-message-wrap group",class:{"has-response":t.hasRecordedResponse||t.isASubmittedForm}},[t.isASubmittedForm?t._e():e("div",{staticClass:"agent-message"},[e("div",{staticClass:"avatar-wrap"},[t.message.showAvatar||t.hasRecordedResponse?e("thumbnail",{attrs:{src:t.avatarUrl,size:"24px",username:t.agentName}}):t._e()],1),t._v(" "),e("div",{staticClass:"message-wrap"},[t.hasReplyTo?e("div",{staticClass:"flex mt-2 mb-1 text-xs"},[e("reply-to-chip",{attrs:{"reply-to":t.replyTo}})],1):t._e(),t._v(" "),e("div",{staticClass:"flex gap-1"},[e("div",{staticClass:"space-y-2"},[t.shouldDisplayAgentMessage?e("AgentMessageBubble",{attrs:{"content-type":t.contentType,"message-content-attributes":t.messageContentAttributes,"message-id":t.message.id,"message-type":t.messageType,message:t.message.content}}):t._e(),t._v(" "),t.hasAttachments?e("div",{staticClass:"space-y-2 chat-bubble has-attachment agent",class:(t.wrapClass,t.$dm("bg-white","dark:bg-slate-700"))},t._l(t.message.attachments,(function(n){return e("div",{key:n.id},["image"!==n.file_type||t.hasImageError?t._e():e("image-bubble",{attrs:{url:n.data_url,thumb:n.data_url,"readable-time":t.readableTime},on:{error:t.onImageLoadError}}),t._v(" "),"video"!==n.file_type||t.hasVideoError?"audio"===n.file_type?e("audio",{attrs:{controls:""}},[e("source",{attrs:{src:n.data_url}})]):e("file-bubble",{attrs:{url:n.data_url}}):e("video-bubble",{attrs:{url:n.data_url,"readable-time":t.readableTime},on:{error:t.onVideoLoadError}})],1)})),0):t._e()],1),t._v(" "),e("div",{staticClass:"flex flex-col justify-end"},[e("message-reply-button",{staticClass:"transition-opacity delay-75 opacity-0 group-hover:opacity-100 sm:opacity-0",on:{click:t.toggleReply}})],1)]),t._v(" "),t.message.showAvatar||t.hasRecordedResponse?e("p",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.agentName,expression:"agentName"}],staticClass:"agent-name",class:t.$dm("text-slate-700","dark:text-slate-200")}):t._e()])]),t._v(" "),t.hasRecordedResponse?e("UserMessage",{attrs:{message:t.responseMessage}}):t._e(),t._v(" "),t.isASubmittedForm?e("div",t._l(t.submittedFormValues,(function(t){return e("UserMessage",{key:t.id,attrs:{message:t}})})),1):t._e()],1)}),[],!1,null,null,null).exports,UserMessage:yt},props:{message:{type:Object,default:function(){}}},computed:xe(xe({},Object(r.mapGetters)({allMessages:"conversation/getConversation"})),{},{isUserMessage:function(){return this.message.message_type===be.b.INCOMING},replyTo:function(){var t,e,n=null===(t=this.message)||void 0===t||null===(e=t.content_attributes)||void 0===e?void 0:e.in_reply_to;return n?this.allMessages[n]:null}})},Se=(n(2107),n(2108),Object(u.a)(ke,(function(){var t=this,e=t._self._c;return t.isUserMessage?e("UserMessage",{attrs:{id:`cwmsg-${t.message.id}`,message:t.message,"reply-to":t.replyTo}}):e("AgentMessage",{attrs:{id:`cwmsg-${t.message.id}`,message:t.message,"reply-to":t.replyTo}})}),[],!1,null,"ecf74328",null).exports),Te={name:"AgentTypingBubble",mixins:[A.a]},Ee=(n(2110),Object(u.a)(Te,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"agent-message-wrap"},[e("div",{staticClass:"agent-message"},[e("div",{staticClass:"avatar-wrap"}),t._v(" "),e("div",{staticClass:"message-wrap mt-2"},[e("div",{staticClass:"typing-bubble chat-bubble agent",class:t.$dm("bg-white","dark:bg-slate-700")},[e("img",{attrs:{src:n(2109),alt:"Agent is typing a message"}})])])])])}),[],!1,null,"154d6f74",null).exports),Ae=n(286),Pe={mixins:[A.a],props:{date:{type:String,required:!0}},computed:{formattedDate:function(){return Object(Ae.a)({date:this.date,todayText:this.$t("TODAY"),yesterdayText:this.$t("YESTERDAY")})}}};n(2111);function Ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $e(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(n),!0).forEach((function(e){Re(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Re(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Me={name:"ConversationWrap",components:{ChatMessage:Se,AgentTypingBubble:Ee,DateSeparator:Object(u.a)(Pe,(function(){var t=this;return(0,t._self._c)("div",{staticClass:"date--separator",class:t.$dm("text-slate-700","dark:text-slate-200")},[t._v("\n  "+t._s(t.formattedDate)+"\n")])}),[],!1,null,"0619d2c7",null).exports,Spinner:m.a},mixins:[A.a],props:{groupedMessages:{type:Array,default:function(){return[]}}},data:function(){return{previousScrollHeight:0,previousConversationSize:0}},computed:$e($e({},Object(r.mapGetters)({earliestMessage:"conversation/getEarliestMessage",lastMessage:"conversation/getLastMessage",allMessagesLoaded:"conversation/getAllMessagesLoaded",isFetchingList:"conversation/getIsFetchingList",conversationSize:"conversation/getConversationSize",isAgentTyping:"conversation/getIsAgentTyping",conversationAttributes:"conversationAttributes/getConversationParams"})),{},{colorSchemeClass:function(){return"".concat("dark"===this.darkMode?"dark-scheme":"light-scheme")},showStatusIndicator:function(){var t="pending"===this.conversationAttributes.status,e=this.lastMessage.message_type===g.m.INCOMING;return this.isAgentTyping||t&&e}}),watch:{allMessagesLoaded:function(){this.previousScrollHeight=0}},mounted:function(){this.$el.addEventListener("scroll",this.handleScroll),this.scrollToBottom()},updated:function(){this.previousConversationSize!==this.conversationSize&&(this.previousConversationSize=this.conversationSize,this.scrollToBottom())},unmounted:function(){this.$el.removeEventListener("scroll",this.handleScroll)},methods:$e($e({},Object(r.mapActions)("conversation",["fetchOldConversations"])),{},{scrollToBottom:function(){var t=this.$el;t.scrollTop=t.scrollHeight-this.previousScrollHeight,this.previousScrollHeight=0},handleScroll:function(){this.isFetchingList||this.allMessagesLoaded||!this.conversationSize||this.$el.scrollTop<100&&(this.fetchOldConversations({before:this.earliestMessage.id}),this.previousScrollHeight=this.$el.scrollHeight)}})};n(2112);function De(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Le(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Fe={components:{ChatFooter:H,ConversationWrap:Object(u.a)(Me,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"conversation--container",class:t.colorSchemeClass},[e("div",{staticClass:"conversation-wrap",class:{"is-typing":t.isAgentTyping}},[t.isFetchingList?e("div",{staticClass:"message--loader"},[e("spinner")],1):t._e(),t._v(" "),t._l(t.groupedMessages,(function(n){return e("div",{key:n.date,staticClass:"messages-wrap"},[e("date-separator",{attrs:{date:n.date}}),t._v(" "),t._l(n.messages,(function(t){return e("chat-message",{key:t.id,attrs:{message:t}})}))],2)})),t._v(" "),t.showStatusIndicator?e("agent-typing-bubble"):t._e()],2)])}),[],!1,null,"dd2501de",null).exports},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?De(Object(n),!0).forEach((function(e){Le(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(r.mapGetters)({groupedMessages:"conversation/getGroupedConversation"})),mounted:function(){this.$store.dispatch("conversation/setUserLastSeen")}},Be=Fe,Ve=Object(u.a)(Be,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col flex-1 overflow-hidden rounded-b-lg bg-slate-25 dark:bg-slate-800"},[e("div",{staticClass:"flex flex-1 overflow-auto"},[e("conversation-wrap",{attrs:{"grouped-messages":t.groupedMessages}})],1),t._v(" "),e("chat-footer",{staticClass:"px-5"})],1)}),[],!1,null,null,null);e.default=Ve.exports},231:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return u})),n.d(e,"b",(function(){return d})),n.d(e,"g",(function(){return p})),n.d(e,"d",(function(){return f})),n.d(e,"c",(function(){return m})),n.d(e,"h",(function(){return h}));n(52),n(73),n(762),n(691),n(51),n(600),n(320),n(23),n(89),n(243),n(44);var r=n(179),s=n(108),a="--";function i(t){try{t=t.replace(/^( *\* *){3,} *$/gm,"").replace(/^( *- *){3,} *$/gm,"").replace(/^( *_ *){3,} *$/gm,"");var e=new r.MessageMarkdownTransformer(r.messageSchema).parse(t);return r.MessageMarkdownSerializer.serialize(e)}catch(n){return console.warn(n),s.a(n),t}}function o(t,e){var n=t.trimEnd(),r=i(e);return n.endsWith(r)?t.lastIndexOf(r):-1}function c(t,e){var n=i(e);return o(t,n)>-1?t:"".concat(t.trimEnd(),"\n\n").concat(function(t){return"".concat(a,"\n\n").concat(i(t))}(n))}function l(t,e){var n=o(t,i(e)),r=t;n>-1&&(r=r.substring(0,n).trimEnd());var s=r.lastIndexOf(a);return-1!==s&&s===r.length-a.length&&(r=r.substring(0,s)),r}function u(t,e,n){return c(l(t,e),n)}function d(t){return t.replace(/```[\s\S]*?```/g,"").replace(/`.*?`/g,"").replace(/!\[.*?\]\(.*?\)/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/#+\s*|[*_-]{1,3}/g,"").split("\n").map((function(t){return t.trim()})).filter(Boolean).join("\n").replace(/\n{2,}/g,"\n").trim()}var p=function(t){var e=t.state.selection.head,n=t.domAtPos(e).node;n&&n.scrollIntoView&&n.scrollIntoView({behavior:"smooth",block:"center"})};function f(t,e,n,r){if(t){var s;"doc"===e.type.name&&1===e.childCount&&"paragraph"===e.firstChild.type.name&&(e=e.firstChild.content),s=r?t.state.tr.replaceWith(n,r,e).insertText(" "):t.state.tr.insert(n,e);var a=t.state.apply(s);return t.updateState(a),t.focus(),a}}var m=function(t,e){var n=t.selection,r=t.schema.nodes,s=n.$from.node(),a=s.type.name,i=s.content,o=i.size,c=i.content,l=r.image.create({src:e});if(!l)return null;var u="paragraph"===a,d=c.some((function(t){return"image"===t.type.name}))||0===o?0:1;return{node:u?l:r.paragraph.create({},l),pos:n.from+d}};function h(t,e,n){if(t){var r=n.state.tr.setNodeMarkup(n.state.selection.from,null,{src:t.src,height:e.height});r.docChanged&&n.dispatch(r)}}},270:function(t,e,n){"use strict";n(57),n(52),n(73),n(51);var r=n(753),s=n(604),a={components:{Avatar:r.a},props:{src:{type:String,default:""},size:{type:String,default:"40px"},badge:{type:String,default:""},username:{type:String,default:""},status:{type:String,default:""},hasBorder:{type:Boolean,default:!1},shouldShowStatusAlways:{type:Boolean,default:!1},title:{type:String,default:""},variant:{type:String,default:"circle"}},data:function(){return{hasImageLoaded:!1,imgError:!1}},computed:{userNameWithoutEmoji:function(){return Object(s.b)(this.username)},showStatusIndicator:function(){return!!this.shouldShowStatusAlways||("online"===this.status||"busy"===this.status)},avatarSize:function(){return Number(this.size.replace(/\D+/g,""))},badgeSrc:function(){return{instagram_direct_message:"instagram-dm",facebook:"messenger","twitter-tweet":"twitter-tweet","twitter-dm":"twitter-dm",whatsapp:"whatsapp",sms:"sms","Channel::Line":"line","Channel::Telegram":"telegram","Channel::WebWidget":""}[this.badge]},badgeStyle:function(){var t=Math.floor(this.avatarSize/3),e="".concat(t+2,"px");return{width:e,height:e,borderRadius:"".concat(t/2,"px")}},statusStyle:function(){var t="".concat(this.avatarSize/4,"px");return{width:t,height:t}},thumbnailClass:function(){var t=this.hasBorder?"border border-solid border-white dark:border-slate-700/50":"",e="circle"===this.variant?"thumbnail-rounded":"thumbnail-square";return"user-thumbnail ".concat(t," ").concat(e)},thumbnailBoxClass:function(){var t="circle"===this.variant?"is-rounded":"";return"user-thumbnail-box ".concat(t)},shouldShowImage:function(){return!!this.src&&(!!this.hasImageLoaded&&!this.imgError)}},watch:{src:function(t,e){t!==e&&this.imgError&&(this.imgError=!1)}},methods:{onImgError:function(){this.imgError=!0},onImgLoad:function(){this.hasImageLoaded=!0}}},i=(n(953),n(8)),o=Object(i.a)(a,(function(){var t=this,e=t._self._c;return e("div",{class:t.thumbnailBoxClass,style:{height:t.size,width:t.size},attrs:{title:t.title}},[t._t("default",(function(){return[e("img",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowImage,expression:"shouldShowImage"}],class:t.thumbnailClass,attrs:{src:t.src,draggable:"false"},on:{load:t.onImgLoad,error:t.onImgError}}),t._v(" "),e("Avatar",{directives:[{name:"show",rawName:"v-show",value:!t.shouldShowImage,expression:"!shouldShowImage"}],class:t.thumbnailClass,attrs:{username:t.userNameWithoutEmoji,size:t.avatarSize}})]})),t._v(" "),t.badgeSrc?e("img",{staticClass:"source-badge",style:t.badgeStyle,attrs:{src:`/integrations/channels/badges/${t.badgeSrc}.png`,alt:"Badge"}}):t._e(),t._v(" "),t.showStatusIndicator?e("div",{class:`source-badge user-online-status user-online-status--${t.status}`,style:t.statusStyle}):t._e()],2)}),[],!1,null,"3ea7931e",null);e.a=o.exports},604:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s}));n(600),n(52),n(73);var r=function(){var t=12*(window.devicePixelRatio||1),e=document.createElement("canvas");if(!e.getContext||!e.getContext("2d")||"function"!==typeof e.getContext("2d").fillText)return!1;var n=e.getContext("2d");return n.fillStyle="#f00",n.textBaseline="top",n.font="32px Arial",n.fillText("\ud83d\udc28",0,0),0!==n.getImageData(t,t,1,1).data[0]},s=function(t){return t?t.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"").replace(/\s+/g," ").trim():""}},736:function(t,e,n){"use strict";n(68),n(52),n(73),n(735),n(148),n(16),n(9),n(18),n(20),n(208),n(25);var r=n(738),s=n.n(r),a=(n(369),/mention:\/\/(user|team)\/(\d+)\/(.+)/gm);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(t){t.children.forEach((function(t){"image"===t.type&&function(t){var e=t.attrGet("src");if(e){var n=new URL(e).searchParams.get("cw_image_height");n&&t.attrSet("style","height: ".concat(n,";"))}}(t)}))},l=n(629)({html:!1,xhtmlOut:!0,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,quotes:"\u201c\u201d\u2018\u2019",maxNesting:20}).use((function(t){t.renderer.rules.mention=function(t,e){return'<span class="prosemirror-mention-node">'.concat(t[e].content,"</span>")},t.inline.ruler.before("link","mention",(function(t,e){var n,r,s,i,o,c,l="",u=t.posMax;return 91===t.src.charCodeAt(t.pos)&&(s=t.pos+1,!((r=t.md.helpers.parseLinkLabel(t,t.pos,!0))<0)&&(n=t.src.slice(s,r),(i=r+1)<u&&40===t.src.charCodeAt(i)&&(i+=1,(o=t.md.helpers.parseLinkDestination(t.src,i,t.posMax)).ok&&(l=t.md.normalizeLink(o.str),t.md.validateLink(l)?i=o.pos:l=""),i+=1),!!l.match(new RegExp(a))&&(e||(t.pos=s,t.posMax=r,(c=t.push("mention","")).href=l,c.content=n),t.pos=i,t.posMax=u,!0)))}))})).use((function(t){t.core.ruler.after("inline","add-image-height",(function(t){t.tokens.forEach((function(t){"inline"===t.type&&c(t)}))}))})).use(s.a,{attrs:{class:"link",rel:"noreferrer noopener nofollow",target:"_blank"}}),u=/(^|[^@\w])@(\w{1,15})\b/g,d=/(^|\s)#(\w+)/g,p=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,t),this.message=e||"",this.isAPrivateNote=r,this.isATweet=n}var e,n,r;return e=t,(n=[{key:"formatMessage",value:function(){var t=this.message;return this.isATweet&&!this.isAPrivateNote&&(t=(t=t.replace(u,"$1[@$2](http://twitter.com/$2)")).replace(d,"$1[#$2](https://twitter.com/hashtag/$2)")),l.render(t)}},{key:"formattedMessage",get:function(){return this.formatMessage()}},{key:"plainText",get:function(){return(new DOMParser).parseFromString(this.formattedMessage,"text/html").body.textContent||""}}])&&o(e.prototype,n),r&&o(e,r),t}(),f=p;e.a={methods:{formatMessage:function(t,e,n){return new f(t,e,n).formattedMessage},getPlainText:function(t,e){return new f(t,e).plainText},truncateMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.length<100?t:"".concat(t.slice(0,97),"...")},highlightContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this.getPlainText(t),s=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return r.replace(new RegExp("(".concat(s,")"),"ig"),'<span class="'.concat(n,'">$1</span>'))}}}},737:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return u})),n.d(e,"e",(function(){return d}));n(52),n(73);var r=n(195),s=n(287),a=n(1339),i=n(1425),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h:mm a",n=Object(r.a)(t);return Object(s.a)(n,e)},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMM d, yyyy",n=Object(r.a)(t),i=new Date,o=Object(s.a)(n,e);return Object(a.a)(n,i)?o:Object(s.a)(n,"LLL d y, h:mm a")},l=function(t){var e=Object(r.a)(t);return Object(i.a)(e,{addSuffix:!0})},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMM d, yyyy",n=Object(r.a)(t);return Object(s.a)(n,e)},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?" ago":"",r={"less than a minute ago":"now","a minute ago":"1m".concat(n),"an hour ago":"1h".concat(n),"a day ago":"1d".concat(n),"a month ago":"1mo".concat(n),"a year ago":"1y".concat(n)};if(r[t])return r[t];var s=t.replace(/about|over|almost|/g,"").replace(" minute ago","m".concat(n)).replace(" minutes ago","m".concat(n)).replace(" hour ago","h".concat(n)).replace(" hours ago","h".concat(n)).replace(" day ago","d".concat(n)).replace(" days ago","d".concat(n)).replace(" month ago","mo".concat(n)).replace(" months ago","mo".concat(n)).replace(" year ago","y".concat(n)).replace(" years ago","y".concat(n));return s}},741:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return s}));n(764);var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===t)return"0 Bytes";var n=1024,r=e<0?0:e,s=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(t)/Math.log(n));return parseFloat((t/Math.pow(n,a)).toFixed(r))+" "+s[a]},s=function(t,e){var n,r=(null===t||void 0===t||null===(n=t.file)||void 0===n?void 0:n.size)||(null===t||void 0===t?void 0:t.size);return r/1048576<=e}},746:function(t,e,n){},747:function(t,e,n){},753:function(t,e,n){"use strict";n(57),n(52),n(243),n(280),n(73);var r={name:"Avatar",props:{username:{type:String,default:""},size:{type:Number,default:40}},computed:{style:function(){return{fontSize:"".concat(Math.floor(this.size/2.5),"px")}},userInitial:function(){var t=this.username.split(/[ -]/).reduce((function(t,e){return t+e.charAt(0)}),"");return t.length>2&&-1!==t.search(/[A-Z]/)&&(t=t.replace(/[a-z]+/g,"")),t=t.substring(0,2).toUpperCase()}}},s=(n(952),n(8)),a=Object(s.a)(r,(function(){var t=this;return(0,t._self._c)("div",{staticClass:"avatar-container",style:t.style,attrs:{"aria-hidden":"true"}},[t._t("default",(function(){return[t._v(t._s(t.userInitial))]}))],2)}),[],!1,null,"139a08b4",null);e.a=a.exports},754:function(t,e,n){"use strict";n(57),n(762);var r=n(231),s=n(279),a={props:{placeholder:{type:String,default:""},value:{type:String,default:""},minHeight:{type:Number,default:2},signature:{type:String,default:""},rows:{type:Number,default:2},sendWithSignature:{type:Boolean,default:!1},allowSignature:{type:Boolean,default:!1}},data:function(){var t=this;return{typingIndicator:Object(s.b)((function(){t.$emit("typing-on")}),(function(){t.$emit("typing-off")}),4e3)}},computed:{cleanedSignature:function(){return Object(r.b)(this.signature)}},watch:{value:function(){var t=this;this.resizeTextarea(),document.activeElement!==this.$refs.textarea&&this.$nextTick((function(){t.setCursor()}))},sendWithSignature:function(t){this.allowSignature&&this.toggleSignatureInEditor(t)}},mounted:function(){var t=this;this.$nextTick((function(){t.value?(t.resizeTextarea(),t.setCursor()):t.focus()}))},methods:{resizeTextarea:function(){this.$el.style.height="auto",this.value?this.$el.style.height="".concat(this.$el.scrollHeight,"px"):this.$el.style.height="".concat(this.minHeight,"rem")},toggleSignatureInEditor:function(t){var e=this,n=t?Object(r.a)(this.value,this.cleanedSignature):Object(r.e)(this.value,this.cleanedSignature);this.$emit("input",n),this.$nextTick((function(){e.resizeTextarea(),e.setCursor()}))},setCursor:function(){var t=Object(r.e)(this.value,this.cleanedSignature).trimEnd().length,e=this.$refs.textarea;e&&(e.focus(),e.setSelectionRange(t,t))},onInput:function(t){this.$emit("input",t.target.value),this.resizeTextarea()},onKeyup:function(){this.typingIndicator.start()},onBlur:function(){this.typingIndicator.stop(),this.$emit("blur")},onFocus:function(){this.$emit("focus")},focus:function(){this.$refs.textarea&&this.$refs.textarea.focus()}}},i=n(8),o=Object(i.a)(a,(function(){var t=this;return(0,t._self._c)("textarea",{ref:"textarea",attrs:{placeholder:t.placeholder,rows:t.rows},domProps:{value:t.value},on:{input:t.onInput,focus:t.onFocus,keyup:t.onKeyup,blur:t.onBlur}})}),[],!1,null,null,null);e.a=o.exports},763:function(t,e,n){"use strict";n(26);var r={props:{block:{type:Boolean,default:!1},type:{type:String,default:"blue"},bgColor:{type:String,default:""},textColor:{type:String,default:""},disabled:{type:Boolean,default:!1}},computed:{buttonClassName:function(){var t="text-white py-3 px-4 rounded shadow-sm leading-4";return"clear"===this.type&&(t="flex mx-auto mt-4 text-xs leading-3 w-auto text-black-600"),"blue"!==this.type||Object.keys(this.buttonStyles).length||(t="".concat(t," bg-woot-500 hover:bg-woot-700")),this.block&&(t="".concat(t," w-full")),t},buttonStyles:function(){var t={};return this.bgColor&&(t.backgroundColor=this.bgColor),this.textColor&&(t.color=this.textColor),t}},methods:{onClick:function(t){this.$emit("click",t)}}},s=n(8),a=Object(s.a)(r,(function(){var t=this;return(0,t._self._c)("button",{class:t.buttonClassName,style:t.buttonStyles,attrs:{disabled:t.disabled},on:{click:t.onClick}},[t._t("default")],2)}),[],!1,null,null,null);e.a=a.exports},952:function(t,e,n){"use strict";n(746)},953:function(t,e,n){"use strict";n(747)}}]);
//# sourceMappingURL=38-27491cd7c99b1f1b1f0e.chunk.js.map