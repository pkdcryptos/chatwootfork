(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{2640:function(t,e,r){"use strict";r(57);var n=r(6),a={__name:"TableFooterResults",props:{firstIndex:{type:Number,default:0},lastIndex:{type:Number,default:0},totalCount:{type:Number,default:0}},setup:function(t){return{__sfc:!0}}},i=r(8),o=Object(i.a)(a,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("span",{staticClass:"text-sm text-slate-700 dark:text-slate-200 font-medium"},[t._v("\n  "+t._s(t.$t("GENERAL.SHOWING_RESULTS",{firstIndex:t.firstIndex,lastIndex:t.lastIndex,totalCount:t.totalCount}))+"\n")])}),[],!1,null,null,null).exports,s={__name:"TableFooterPagination",props:{currentPage:{type:Number,default:1},totalCount:{type:Number,default:0},totalPages:{type:Number,default:0}},emits:["page-change"],setup:function(t,e){var r=e.emit,a=t,i=Object(n.computed)((function(){return a.currentPage===a.totalPages||1===a.totalPages})),o=Object(n.computed)((function(){return 1===a.currentPage})),s=Object(n.computed)((function(){return a.currentPage===a.totalPages})),l=Object(n.computed)((function(){return 1===a.currentPage}));function c(t){r("page-change",t)}return{__sfc:!0,props:a,hasLastPage:i,hasFirstPage:o,hasNextPage:s,hasPrevPage:l,emit:r,buttonClass:function(t){return t?"hover:!bg-slate-50 dark:hover:!bg-slate-800":"dark:hover:!bg-slate-700/50"},onPageChange:c,onNextPage:function t(){t.value||c(a.currentPage+1)},onPrevPage:function(){l.value||c(a.currentPage-1)},onFirstPage:function(){o.value||c(1)},onLastPage:function(){i.value||c(a.totalPages)}}}},l=Object(i.a)(s,(function(){var t=this,e=t._self._c,r=t._self._setupProxy;return e("div",{staticClass:"flex items-center bg-slate-50 dark:bg-slate-800 h-8 rounded-lg"},[e("woot-button",{class:r.buttonClass(r.hasFirstPage),attrs:{size:"small",variant:"smooth","color-scheme":"secondary","is-disabled":r.hasFirstPage,"class-names":"dark:!bg-slate-800 !opacity-100 ltr:rounded-l-lg ltr:rounded-r-none rtl:rounded-r-lg rtl:rounded-l-none"},on:{click:r.onFirstPage}},[e("fluent-icon",{class:r.hasFirstPage&&"opacity-40",attrs:{icon:"chevrons-left",size:"20","icon-lib":"lucide"}})],1),t._v(" "),e("div",{staticClass:"bg-slate-75 dark:bg-slate-700/50 w-px rounded-sm h-4"}),t._v(" "),e("woot-button",{class:r.buttonClass(r.hasPrevPage),attrs:{size:"small",variant:"smooth","color-scheme":"secondary","is-disabled":r.hasPrevPage,"class-names":"dark:!bg-slate-800 !opacity-100 rounded-none"},on:{click:r.onPrevPage}},[e("fluent-icon",{class:r.hasPrevPage&&"opacity-40",attrs:{icon:"chevron-left-single",size:"20","icon-lib":"lucide"}})],1),t._v(" "),e("div",{staticClass:"flex px-3 items-center gap-3 tabular-nums bg-slate-50 dark:bg-slate-800 text-slate-700 dark:text-slate-100"},[e("span",{staticClass:"text-sm text-slate-800 dark:text-slate-75"},[t._v("\n      "+t._s(t.currentPage)+"\n    ")]),t._v(" "),e("span",{staticClass:"text-slate-600 dark:text-slate-500"},[t._v("/")]),t._v(" "),e("span",{staticClass:"text-sm text-slate-600 dark:text-slate-500"},[t._v("\n      "+t._s(t.totalPages)+"\n    ")])]),t._v(" "),e("woot-button",{class:r.buttonClass(r.hasNextPage),attrs:{size:"small",variant:"smooth","color-scheme":"secondary","is-disabled":r.hasNextPage,"class-names":"dark:!bg-slate-800 !opacity-100 rounded-none"},on:{click:r.onNextPage}},[e("fluent-icon",{class:r.hasNextPage&&"opacity-40",attrs:{icon:"chevron-right-single",size:"20","icon-lib":"lucide"}})],1),t._v(" "),e("div",{staticClass:"bg-slate-75 dark:bg-slate-700/50 w-px rounded-sm h-4"}),t._v(" "),e("woot-button",{class:r.buttonClass(r.hasLastPage),attrs:{size:"small",variant:"smooth","color-scheme":"secondary","class-names":"dark:!bg-slate-800 !opacity-100 ltr:rounded-r-lg ltr:rounded-l-none rtl:rounded-l-lg rtl:rounded-r-none","is-disabled":r.hasLastPage},on:{click:r.onLastPage}},[e("fluent-icon",{class:r.hasLastPage&&"opacity-40",attrs:{icon:"chevrons-right",size:"20","icon-lib":"lucide"}})],1)],1)}),[],!1,null,null,null).exports,c={__name:"TableFooter",props:{currentPage:{type:Number,default:1},pageSize:{type:Number,default:25},totalCount:{type:Number,default:0}},setup:function(t){var e=t,r=Object(n.computed)((function(){return Math.ceil(e.totalCount/e.pageSize)})),a=Object(n.computed)((function(){return e.pageSize*(e.currentPage-1)+1})),i=Object(n.computed)((function(){return Math.min(e.totalCount,e.pageSize*e.currentPage)})),s=Object(n.computed)((function(){return e.totalCount&&!(a.value>e.totalCount)}));return{__sfc:!0,props:e,totalPages:r,firstIndex:a,lastIndex:i,isFooterVisible:s,TableFooterResults:o,TableFooterPagination:l}}},u=Object(i.a)(c,(function(){var t=this,e=t._self._c,r=t._self._setupProxy;return r.isFooterVisible?e("footer",{staticClass:"h-12 flex items-center justify-between px-6"},[e(r.TableFooterResults,{attrs:{"first-index":r.firstIndex,"last-index":r.lastIndex,"total-count":t.totalCount}}),t._v(" "),t.totalCount?e(r.TableFooterPagination,{attrs:{"current-page":t.currentPage,"total-pages":r.totalPages,"total-count":t.totalCount,"page-size":t.pageSize},on:{"page-change":function(e){return t.$emit("page-change",e)}}}):t._e()],1):t._e()}),[],!1,null,null,null);e.a=u.exports},2647:function(t,e,r){},2692:function(t,e,r){"use strict";r.d(e,"c",(function(){return s})),r.d(e,"a",(function(){return l})),r.d(e,"b",(function(){return c}));r(21),r(10),r(25),r(12),r(68),r(80),r(13),r(9),r(11),r(15),r(16);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=function(t){return t.attribute_key?t.filter_operator?"is_present"!==t.filter_operator&&"is_not_present"!==t.filter_operator&&(!t.values||Array.isArray(t.values)&&0===t.values.length)?"VALUE_REQUIRED":"days_before"===t.filter_operator&&(parseInt(t.values,10)<=0||parseInt(t.values,10)>=999)?"VALUE_MUST_BE_BETWEEN_1_AND_998":null:"FILTER_OPERATOR_REQUIRED":"ATTRIBUTE_KEY_REQUIRED"},s=function(t){var e={};return t.forEach((function(t,r){var n=o(t);n&&(e["filter_".concat(r)]=n)})),e},l=function(t){return t&&0!==t.length?t.reduce((function(t,e,r){var n=function(t){return["mute_conversation","snooze_conversation","resolve_conversation","remove_assigned_team"].includes(t.action_name)||t.action_params&&0!==t.action_params.length?null:"ACTION_PARAMETERS_REQUIRED"}(e);return n&&(t["action_".concat(r)]=n),t}),{}):{actions:"ATLEAST_ONE_ACTION_REQUIRED"}},c=function(t){var e,r,n=function(t){var e={};return["name","description","event_name"].forEach((function(r){t[r]||(e[r]="".concat(r.charAt(0).toUpperCase()+r.slice(1)," is required"))})),e}(t),i=(e=t.conditions,r={},e&&0!==e.length?(e.forEach((function(t,e){var n=o(t);n&&(r["condition_".concat(e)]=n)})),r):(r.conditions="ATLEAST_ONE_CONDITION_REQUIRED",r)),s=l(t.actions);return a(a(a({},n),i),s)}},2699:function(t,e,r){"use strict";r(21),r(10),r(25),r(13),r(9),r(11),r(15),r(12),r(16);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o={props:{value:{type:Object,default:function(){return null}},filterAttributes:{type:Array,default:function(){return[]}},inputType:{type:String,default:"plain_text"},dataType:{type:String,default:"plain_text"},operators:{type:Array,default:function(){return[]}},dropdownValues:{type:Array,default:function(){return[]}},showQueryOperator:{type:Boolean,default:!1},showUserInput:{type:Boolean,default:!0},groupedFilters:{type:Boolean,default:!1},filterGroups:{type:Array,default:function(){return[]}},customAttributeType:{type:String,default:""},errorMessage:{type:String,default:""}},computed:{attributeKey:{get:function(){return this.value?this.value.attribute_key:null},set:function(t){var e=this.value||{};this.$emit("input",a(a({},e),{},{attribute_key:t}))}},filterOperator:{get:function(){return this.value?this.value.filter_operator:null},set:function(t){var e=this.value||{};this.$emit("input",a(a({},e),{},{filter_operator:t}))}},values:{get:function(){return this.value?this.value.values:null},set:function(t){var e=this.value||{};this.$emit("input",a(a({},e),{},{values:t}))}},query_operator:{get:function(){return this.value?this.value.query_operator:null},set:function(t){var e=this.value||{};this.$emit("input",a(a({},e),{},{query_operator:t}))}},custom_attribute_type:{get:function(){return this.customAttributeType?this.customAttributeType:""},set:function(){var t=this.value||{};this.$emit("input",a(a({},t),{},{custom_attribute_type:this.customAttributeType}))}}},watch:{customAttributeType:{handler:function(t){this.value.custom_attribute_type="conversation_attribute"===t||"contact_attribute"===t?this.customAttributeType:""},immediate:!0}},methods:{removeFilter:function(){this.$emit("removeFilter")},resetFilter:function(){this.$emit("resetFilter")},getInputErrorClass:function(t){return t?"bg-red-50 dark:bg-red-800/50 border-red-100 dark:border-red-700/50":"bg-slate-50 dark:bg-slate-800 border-slate-75 dark:border-slate-700/50"}}},s=(r(2705),r(8)),l=Object(s.a)(o,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"rounded-md p-2 border border-solid",class:t.getInputErrorClass(t.errorMessage)},[e("div",{staticClass:"flex"},[t.groupedFilters?e("select",{directives:[{name:"model",rawName:"v-model",value:t.attributeKey,expression:"attributeKey"}],staticClass:"bg-white max-w-[30%] dark:bg-slate-900 mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.attributeKey=e.target.multiple?r:r[0]},function(e){return t.resetFilter()}]}},t._l(t.filterGroups,(function(r,n){return e("optgroup",{key:n,attrs:{label:r.name}},t._l(r.attributes,(function(r){return e("option",{key:r.key,domProps:{value:r.key}},[t._v("\n            "+t._s(r.name)+"\n          ")])})),0)})),0):e("select",{directives:[{name:"model",rawName:"v-model",value:t.attributeKey,expression:"attributeKey"}],staticClass:"bg-white max-w-[30%] dark:bg-slate-900 mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.attributeKey=e.target.multiple?r:r[0]},function(e){return t.resetFilter()}]}},t._l(t.filterAttributes,(function(r){return e("option",{key:r.key,attrs:{disabled:r.disabled},domProps:{value:r.key}},[t._v("\n          "+t._s(r.name)+"\n        ")])})),0),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filterOperator,expression:"filterOperator"}],staticClass:"bg-white dark:bg-slate-900 max-w-[20%] mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.filterOperator=e.target.multiple?r:r[0]}}},t._l(t.operators,(function(r,n){return e("option",{key:n,domProps:{value:r.value}},[t._v("\n          "+t._s(t.$t(`FILTER.OPERATOR_LABELS.${r.value}`))+"\n        ")])})),0),t._v(" "),t.showUserInput?e("div",{staticClass:"filter__answer--wrap mr-1 flex-grow"},["multi_select"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:"Select",multiple:!0,"selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.dropdownValues,"allow-empty":!1},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}})],1):"search_select"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:"Select","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.dropdownValues,"allow-empty":!1,"option-height":104},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}})],1):"date"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.values,expression:"values"}],staticClass:"mb-0 datepicker",attrs:{type:"date",editable:!1},domProps:{value:t.values},on:{input:function(e){e.target.composing||(t.values=e.target.value)}}})]):e("input",{directives:[{name:"model",rawName:"v-model",value:t.values,expression:"values"}],staticClass:"mb-0",attrs:{type:"text",placeholder:"Enter value"},domProps:{value:t.values},on:{input:function(e){e.target.composing||(t.values=e.target.value)}}})]):t._e(),t._v(" "),e("woot-button",{attrs:{icon:"dismiss",variant:"clear","color-scheme":"secondary"},on:{click:t.removeFilter}})],1),t._v(" "),t.errorMessage?e("p",{staticClass:"filter-error"},[t._v("\n      "+t._s(t.errorMessage)+"\n    ")]):t._e()]),t._v(" "),t.showQueryOperator?e("div",{staticClass:"flex items-center justify-center relative my-2.5 mx-0"},[e("hr",{staticClass:"w-full absolute border-b border-solid border-slate-75 dark:border-slate-800"}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.query_operator,expression:"query_operator"}],staticClass:"bg-white dark:bg-slate-900 mb-0 w-auto relative text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.query_operator=e.target.multiple?r:r[0]}}},[e("option",{attrs:{value:"and"}},[t._v("\n        "+t._s(t.$t("FILTER.QUERY_DROPDOWN_LABELS.AND"))+"\n      ")]),t._v(" "),e("option",{attrs:{value:"or"}},[t._v("\n        "+t._s(t.$t("FILTER.QUERY_DROPDOWN_LABELS.OR"))+"\n      ")])])]):t._e()])}),[],!1,null,"d8032476",null);e.a=l.exports},2705:function(t,e,r){"use strict";r(2647)},2710:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return s}));var n=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"}],a=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"}],i=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"}],o=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"},{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"}],s=[{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"},{value:"days_before",label:"Is x days before"}]},2785:function(t,e,r){"use strict";r(89),r(51),r(44),r(9),r(36),r(10),r(39),r(21),r(23),r(25),r(72),r(68);var n=r(149);function a(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a={methods:{setFilterAttributes:function(){var t=this,e=this.$store.getters["attributes/getAttributesByModel"](this.attributeModel),r={name:this.$t("".concat(this.filtersFori18n,".GROUPS.CUSTOM_ATTRIBUTES")),attributes:e.map((function(t){return{key:t.attribute_key,name:t.attribute_display_name}}))},n=this.filterAttributeGroups.map((function(e){return{name:t.$t("".concat(t.filtersFori18n,".GROUPS.").concat(e.i18nGroup)),attributes:e.attributes.map((function(e){return{key:e.key,name:t.$t("".concat(t.filtersFori18n,".ATTRIBUTES.").concat(e.i18nKey))}}))}})),i=e.map((function(e){return{attributeKey:e.attribute_key,attributeI18nKey:"CUSTOM_ATTRIBUTE_".concat(e.attribute_display_type.toUpperCase()),inputType:t.customAttributeInputType(e.attribute_display_type),filterOperators:t.getOperatorTypes(e.attribute_display_type),attributeModel:"custom_attributes"}}));this.filterTypes=[].concat(a(this.filterTypes),a(i)),this.filterGroups=[].concat(a(n),[r])},initializeExistingFilterToModal:function(){this.initializeStatusAndAssigneeFilterToModal(),this.initializeInboxTeamAndLabelFilterToModal()},initializeStatusAndAssigneeFilterToModal:function(){""!==this.activeStatus&&this.appliedFilter.push({attribute_key:"status",attribute_model:"standard",filter_operator:"equal_to",values:[{id:this.activeStatus,name:this.$t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.".concat(this.activeStatus,".TEXT"))}],query_operator:"and",custom_attribute_type:""}),this.activeAssigneeTab===n.b.ASSIGNEE_TYPE.ME&&this.appliedFilter.push({attribute_key:"assignee_id",filter_operator:"equal_to",values:this.currentUserDetails,query_operator:"and",custom_attribute_type:""})},initializeInboxTeamAndLabelFilterToModal:function(){this.conversationInbox&&this.appliedFilter.push({attribute_key:"inbox_id",attribute_model:"standard",filter_operator:"equal_to",values:[{id:this.conversationInbox,name:this.inbox.name}],query_operator:"and",custom_attribute_type:""}),this.teamId&&this.appliedFilter.push({attribute_key:"team_id",attribute_model:"standard",filter_operator:"equal_to",values:this.activeTeam,query_operator:"and",custom_attribute_type:""}),this.label&&this.appliedFilter.push({attribute_key:"labels",attribute_model:"standard",filter_operator:"equal_to",values:[{id:this.label,name:this.label}],query_operator:"and",custom_attribute_type:""})}}}},2802:function(t,e,r){r(27)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},2805:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r(161),r(89),r(11),r(80),r(103),r(44),r(21),r(10),r(25),r(148);var n=function(t,e,r,n){var a=null===e||void 0===e?void 0:e.find((function(e){return e[r]===t[0]}));return{id:t[0],name:a?a[n]:t[0]}},a=function(t,e){var r=t.attribute_key,a=t.filter_operator,i=t.values,o=e.filterTypes,s=e.allCustomAttributes,l=function(t,e,r){if(("created_at"===t||"last_activity_at"===t)&&"days_before"===e)return"plain_text";var n=r.find((function(e){return e.attributeKey===t}));return null===n||void 0===n?void 0:n.inputType}(r,a,o);if(void 0===l){var c=function(t,e){return{text:"string",number:"string",date:"string",checkbox:"multi_select",list:"multi_select",link:"string"}[e.find((function(e){return e.attribute_key===t})).attribute_display_type]}(r,s);return"string"===c?i[0].toString():{id:i[0],name:i[0]}}return"multi_select"===l||"search_select"===l?function(t,e){var r=t.attribute_key,a=t.values,i=e.languages,o=e.countries,s=e.agents,l=e.inboxes,c=e.teams,u=e.campaigns,p=e.labels;switch(r){case"status":return function(t){return t.map((function(t){return{id:t,name:t}}))}(a);case"assignee_id":return n(a,s,"id","name");case"inbox_id":return n(a,l,"id","name");case"team_id":return n(a,c,"id","name");case"campaign_id":return n(a,u,"id","title");case"labels":return function(t,e){return e.filter((function(e){return t.includes(e.title)})).map((function(t){var e=t.title;return{id:e,name:e}}))}(a,p);case"browser_language":return function(t,e){return e.filter((function(e){return t.includes(e.id)})).map((function(t){var e=t.id,r=t.name;return{id:e.toLowerCase(),name:r}}))}(a,i);case"country_code":return function(t,e){return e.filter((function(e){return t.includes(e.id)})).map((function(t){return{id:t.id,name:t.name}}))}(a,o);default:return{id:a[0],name:a[0]}}}(t,e):i[0].toString()}},2863:function(t,e,r){"use strict";r(37),r(57),r(44),r(10),r(28);var n=r(129),a=r(69),i=r(67),o=r(95);function s(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(c){return void r(c)}s.done?e(l):Promise.resolve(l).then(n,a)}var l={props:{filterType:{type:Number,default:0},customViewsQuery:{type:Object,default:function(){}},openLastSavedItem:{type:Function,default:function(){}}},setup:function(){return{v$:Object(n.a)()}},data:function(){return{show:!0,name:""}},computed:{isButtonDisabled:function(){return this.v$.name.$invalid}},validations:{name:{required:a.f,minLength:Object(a.d)(1)}},methods:{onClose:function(){this.$emit("close")},saveCustomViews:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.v$.$touch(),!e.v$.$invalid){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,e.$store.dispatch("customViews/create",{name:e.name,filter_type:e.filterType,query:e.customViewsQuery});case 6:e.alertMessage=0===e.filterType?e.$t("FILTER.CUSTOM_VIEWS.ADD.API_FOLDERS.SUCCESS_MESSAGE"):e.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.SUCCESS_MESSAGE"),e.onClose(),e.$track(o.c.SAVE_FILTER,{type:0===e.filterType?"folder":"segment"}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),r=null===t.t0||void 0===t.t0?void 0:t.t0.message,e.alertMessage=r||0===e.filterType?r:e.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.ERROR_MESSAGE");case 15:return t.prev=15,Object(i.a)(e.alertMessage),t.finish(15);case 18:e.openLastSavedItem();case 19:case"end":return t.stop()}}),t,null,[[3,11,15,18]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){s(i,n,a,o,l,"next",t)}function l(t){s(i,n,a,o,l,"throw",t)}o(void 0)}))})()}}},c=l,u=r(8),p=Object(u.a)(c,(function(){var t=this,e=t._self._c;return e("woot-modal",{attrs:{show:t.show,"on-close":t.onClose},on:{"update:show":function(e){t.show=e}}},[e("woot-modal-header",{attrs:{"header-title":t.$t("FILTER.CUSTOM_VIEWS.ADD.TITLE")}}),t._v(" "),e("form",{staticClass:"w-full",on:{submit:function(e){return e.preventDefault(),t.saveCustomViews.apply(null,arguments)}}},[e("div",{staticClass:"w-full"},[e("woot-input",{class:{error:t.v$.name.$error},attrs:{label:t.$t("FILTER.CUSTOM_VIEWS.ADD.LABEL"),type:"text",error:t.v$.name.$error?t.$t("FILTER.CUSTOM_VIEWS.ADD.ERROR_MESSAGE"):"",placeholder:t.$t("FILTER.CUSTOM_VIEWS.ADD.PLACEHOLDER")},on:{blur:t.v$.name.$touch},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("woot-button",{attrs:{disabled:t.isButtonDisabled}},[t._v("\n          "+t._s(t.$t("FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON"))+"\n        ")]),t._v(" "),e("woot-button",{attrs:{variant:"clear"},on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n          "+t._s(t.$t("FILTER.CUSTOM_VIEWS.ADD.CANCEL_BUTTON"))+"\n        ")])],1)],1)])],1)}),[],!1,null,null,null);e.a=p.exports},2864:function(t,e,r){"use strict";r(37),r(57),r(44),r(10),r(28);var n=r(67),a=r(95);function i(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(c){return void r(c)}s.done?e(l):Promise.resolve(l).then(n,a)}var o={props:{showDeletePopup:{type:Boolean,default:!1},activeCustomView:{type:Object,default:function(){}},customViewsId:{type:[String,Number],default:0},activeFilterType:{type:Number,default:0},openLastItemAfterDelete:{type:Function,default:function(){}}},computed:{activeCustomViews:function(){return 0===this.activeFilterType?"conversation":1===this.activeFilterType?"contact":""},deleteMessage:function(){return" ".concat(this.activeCustomView&&this.activeCustomView.name,"?")},deleteConfirmText:function(){return"".concat(this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.YES"))},deleteRejectText:function(){return"".concat(this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.NO"))},isFolderSection:function(){return 0===this.activeFilterType&&"home"!==this.$route.name},isSegmentSection:function(){return 1===this.activeFilterType&&"contacts_dashboard"!==this.$route.name}},methods:{deleteSavedCustomViews:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var r,i,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=Number(e.customViewsId),i=e.activeCustomViews,t.next=5,e.$store.dispatch("customViews/delete",{id:r,filterType:i});case 5:e.closeDeletePopup(),Object(n.a)(0===e.activeFilterType?e.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):e.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE")),e.$track(a.c.DELETE_FILTER,{type:0===e.filterType?"folder":"segment"}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),s=null!==t.t0&&void 0!==t.t0&&null!==(o=t.t0.response)&&void 0!==o&&o.message||0===e.activeFilterType?e.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):e.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE"),Object(n.a)(s);case 14:e.openLastItemAfterDelete();case 15:case"end":return t.stop()}}),t,null,[[0,10]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function s(t){i(o,n,a,s,l,"next",t)}function l(t){i(o,n,a,s,l,"throw",t)}s(void 0)}))})()},closeDeletePopup:function(){this.$emit("close")}}},s=o,l=r(8),c=Object(l.a)(s,(function(){var t=this,e=t._self._c;return e("div",[t.showDeletePopup?e("woot-delete-modal",{attrs:{show:t.showDeletePopup,"on-close":t.closeDeletePopup,"on-confirm":t.deleteSavedCustomViews,title:t.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.TITLE"),message:t.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.MESSAGE"),"message-value":t.deleteMessage,"confirm-text":t.deleteConfirmText,"reject-text":t.deleteRejectText},on:{"update:show":function(e){t.showDeletePopup=e}}}):t._e()],1)}),[],!1,null,null,null);e.a=c.exports},2991:function(t,e,r){},2994:function(t,e,r){},3244:function(t,e,r){"use strict";r(2991)},3247:function(t,e,r){"use strict";r(2994)},3319:function(t,e,r){"use strict";r.r(e);r(57),r(89),r(44),r(161),r(2802),r(11),r(51),r(13),r(360),r(21),r(10),r(25),r(9),r(15),r(12),r(16),r(36),r(39),r(23),r(68),r(72);var n=r(34),a=r(67),i=(r(37),r(28),r(352));function o(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(c){return void r(c)}s.done?e(l):Promise.resolve(l).then(n,a)}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u={props:{headerTitle:{type:String,default:""},searchQuery:{type:String,default:""},segmentsId:{type:[String,Number],default:0}},setup:function(){return{isAdmin:Object(i.a)().isAdmin}},data:function(){return{showCreateModal:!1,showImportModal:!1}},computed:l(l({searchButtonClass:function(){return""!==this.searchQuery?"opacity-100 translate-x-0 visible":"-translate-x-px opacity-0 invisible"}},Object(n.mapGetters)({getAppliedContactFilters:"contacts/getAppliedContactFilters"})),{},{hasAppliedFilters:function(){return this.getAppliedContactFilters.length},hasActiveSegments:function(){return 0!==this.segmentsId},exportDescription:function(){return this.hasAppliedFilters?this.$t("EXPORT_CONTACTS.CONFIRM.FILTERED_MESSAGE"):this.$t("EXPORT_CONTACTS.CONFIRM.MESSAGE")}}),methods:{onToggleSegmentsModal:function(){this.$emit("on-toggle-save-filter")},onToggleEditSegmentsModal:function(){this.$emit("on-toggle-edit-filter")},onToggleDeleteSegmentsModal:function(){this.$emit("on-toggle-delete-filter")},toggleCreate:function(){this.$emit("on-toggle-create")},toggleFilter:function(){this.$emit("on-toggle-filter")},toggleImport:function(){this.$emit("on-toggle-import")},submitExport:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.confirmExportContactsDialog.showConfirmation();case 2:t.sent&&e.$emit("on-export-submit");case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(t){o(i,n,a,s,l,"next",t)}function l(t){o(i,n,a,s,l,"throw",t)}s(void 0)}))})()},submitSearch:function(){this.$emit("on-search-submit")},inputSearch:function(t){this.$emit("on-input-search",t)}}},p=u,d=r(8),f=Object(d.a)(p,(function(){var t=this,e=t._self._c;return e("header",{staticClass:"bg-white border-b dark:bg-slate-900 border-slate-50 dark:border-slate-800"},[e("div",{staticClass:"flex justify-between w-full px-4 py-2"},[e("div",{staticClass:"flex flex-col items-center w-full gap-2 md:flex-row"},[e("div",{staticClass:"flex justify-between w-full gap-2"},[e("div",{staticClass:"flex items-center justify-center max-w-full min-w-[6.25rem]"},[e("woot-sidemenu-icon"),t._v(" "),e("h1",{staticClass:"m-0 mx-2 my-0 overflow-hidden text-xl text-slate-900 dark:text-slate-100 whitespace-nowrap text-ellipsis"},[t._v("\n            "+t._s(t.headerTitle)+"\n          ")])],1),t._v(" "),e("div",{staticClass:"max-w-[400px] min-w-[100px] flex items-center relative mx-2"},[e("div",{staticClass:"flex items-center absolute h-full left-2.5"},[e("fluent-icon",{staticClass:"h-5 text-sm leading-9 text-slate-700 dark:text-slate-200",attrs:{icon:"search"}})],1),t._v(" "),e("input",{staticClass:"!pl-9 !pr-[3.75rem] !text-sm !w-full !h-[2.375rem] !m-0 border-slate-100 dark:border-slate-600",attrs:{type:"text",placeholder:t.$t("CONTACTS_PAGE.SEARCH_INPUT_PLACEHOLDER")},domProps:{value:t.searchQuery},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitSearch.apply(null,arguments)},input:t.inputSearch}}),t._v(" "),e("woot-button",{staticClass:"absolute h-8 px-2 py-0 ml-2 transition-transform duration-100 ease-linear clear right-1",attrs:{"is-loading":!1,"class-names":t.searchButtonClass},on:{click:t.submitSearch}},[t._v("\n            "+t._s(t.$t("CONTACTS_PAGE.SEARCH_BUTTON"))+"\n          ")])],1)]),t._v(" "),e("div",{staticClass:"flex gap-1"},[t.hasActiveSegments?e("div",{staticClass:"flex gap-2"},[e("woot-button",{staticClass:"clear [&>span]:hidden xs:[&>span]:block",attrs:{"color-scheme":"secondary",icon:"edit"},on:{click:t.onToggleEditSegmentsModal}},[t._v("\n            "+t._s(t.$t("CONTACTS_PAGE.FILTER_CONTACTS_EDIT"))+"\n          ")]),t._v(" "),e("woot-button",{staticClass:"clear [&>span]:hidden xs:[&>span]:block",attrs:{"color-scheme":"alert",icon:"delete"},on:{click:t.onToggleDeleteSegmentsModal}},[t._v("\n            "+t._s(t.$t("CONTACTS_PAGE.FILTER_CONTACTS_DELETE"))+"\n          ")])],1):t._e(),t._v(" "),t.hasActiveSegments?t._e():e("div",{staticClass:"relative"},[t.hasAppliedFilters?e("div",{staticClass:"absolute w-2 h-2 rounded-full top-1 right-3 bg-slate-500 dark:bg-slate-500"}):t._e(),t._v(" "),e("woot-button",{staticClass:"clear [&>span]:hidden xs:[&>span]:block",attrs:{"color-scheme":"secondary","data-testid":"create-new-contact",icon:"filter"},on:{click:t.toggleFilter}},[t._v("\n            "+t._s(t.$t("CONTACTS_PAGE.FILTER_CONTACTS"))+"\n          ")])],1),t._v(" "),t.hasAppliedFilters&&!t.hasActiveSegments?e("woot-button",{staticClass:"clear [&>span]:hidden xs:[&>span]:block",attrs:{"color-scheme":"alert",variant:"clear",icon:"save"},on:{click:t.onToggleSegmentsModal}},[t._v("\n          "+t._s(t.$t("CONTACTS_PAGE.FILTER_CONTACTS_SAVE"))+"\n        ")]):t._e(),t._v(" "),e("woot-button",{staticClass:"clear [&>span]:hidden xs:[&>span]:block",attrs:{"color-scheme":"success",icon:"person-add","data-testid":"create-new-contact"},on:{click:t.toggleCreate}},[t._v("\n          "+t._s(t.$t("CREATE_CONTACT.BUTTON_LABEL"))+"\n        ")]),t._v(" "),t.isAdmin?e("woot-button",{staticClass:"clear [&>span]:hidden xs:[&>span]:block",attrs:{"color-scheme":"info",icon:"upload"},on:{click:t.toggleImport}},[t._v("\n          "+t._s(t.$t("IMPORT_CONTACTS.BUTTON_LABEL"))+"\n        ")]):t._e(),t._v(" "),t.isAdmin?e("woot-button",{staticClass:"clear [&>span]:hidden xs:[&>span]:block",attrs:{"color-scheme":"info",icon:"download"},on:{click:t.submitExport}},[t._v("\n          "+t._s(t.$t("EXPORT_CONTACTS.BUTTON_LABEL"))+"\n        ")]):t._e()],1)])]),t._v(" "),e("woot-confirm-modal",{ref:"confirmExportContactsDialog",attrs:{title:t.$t("EXPORT_CONTACTS.CONFIRM.TITLE"),description:t.exportDescription,"confirm-label":t.$t("EXPORT_CONTACTS.CONFIRM.YES"),"cancel-label":t.$t("EXPORT_CONTACTS.CONFIRM.NO")}})],1)}),[],!1,null,null,null),h=f.exports,m=r(2796),b=r(2697),_=r(191),v=r(271),g=r(1923),y=r(1916),T=r(1786),C=r(535);function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){O(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var w={components:{EmptyState:g.a,Spinner:_.a,VeTable:m.VeTable},mixins:[T.a],props:{contacts:{type:Array,default:function(){return[]}},showSearchEmptyState:{type:Boolean,default:!1},onClickContact:{type:Function,default:function(){}},isLoading:{type:Boolean,default:!1},activeContactId:{type:[String,Number],default:""},sortParam:{type:String,default:"last_activity_at"},sortOrder:{type:String,default:"desc"}},data:function(){var t=this;return{sortConfig:{},sortOption:{sortAlways:!0,sortChange:function(e){return t.$emit("on-sort-change",e)}}}},computed:{tableData:function(){return this.isLoading?[]:this.contacts.map((function(t){var e=t.additional_attributes||{},r=t.last_activity_at,n=t.created_at;return E(E({},t),{},{phone_number:t.phone_number||"---",company:e.company_name||"---",profiles:e.social_profiles||{},city:e.city||"---",country:e.country,countryCode:e.country_code,conversationsCount:t.conversations_count||"---",last_activity_at:r?Object(y.b)(r):"---",created_at:n?Object(y.b)(n):"---"})}))},columns:function(){var t=this,e=this.$createElement;return[{field:"name",key:"name",title:this.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.NAME"),fixed:"left",align:this.isRTLView?"right":"left",sortBy:this.sortConfig.name||"",width:300,renderBodyCell:function(r){var n=r.row;return e("woot-button",{attrs:{variant:"clear"},on:{click:function(){return t.onClickContact(n.id)}}},[e("div",{class:"row--user-block"},[e(v.a,{attrs:{src:n.thumbnail,size:"32px",username:n.name,status:n.availability_status}}),e("div",{class:"user-block"},[e("h6",{class:"overflow-hidden text-base whitespace-nowrap text-ellipsis"},[e("router-link",{attrs:{to:"/app/accounts/".concat(t.$route.params.accountId,"/contacts/").concat(n.id)},class:"user-name"},[n.name])]),e("button",{class:"button clear small link view-details--button"},[t.$t("CONTACTS_PAGE.LIST.VIEW_DETAILS")])])])])}},{field:"email",key:"email",title:this.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.EMAIL_ADDRESS"),align:this.isRTLView?"right":"left",sortBy:this.sortConfig.email||"",width:240,renderBodyCell:function(t){var r=t.row;return r.email?e("div",{class:"overflow-hidden whitespace-nowrap text-ellipsis text-woot-500 dark:text-woot-500"},[e("a",{attrs:{target:"_blank",rel:"noopener noreferrer nofollow",href:"mailto:".concat(r.email)}},[r.email])]):"---"}},{field:"phone_number",key:"phone_number",sortBy:this.sortConfig.phone_number||"",title:this.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.PHONE_NUMBER"),align:this.isRTLView?"right":"left"},{field:"company",key:"company",sortBy:this.sortConfig.company_name||"",title:this.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.COMPANY"),align:this.isRTLView?"right":"left"},{field:"city",key:"city",sortBy:this.sortConfig.city||"",title:this.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.CITY"),align:this.isRTLView?"right":"left"},{field:"country",key:"country",title:this.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.COUNTRY"),align:this.isRTLView?"right":"left",sortBy:this.sortConfig.country||"",renderBodyCell:function(t){var r=t.row;return r.country?e("div",{class:"overflow-hidden whitespace-nowrap text-ellipsis"},["".concat(Object(b.a)(r.countryCode)," ").concat(r.country)]):"---"}},{field:"profiles",key:"profiles",title:this.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.SOCIAL_PROFILES"),align:this.isRTLView?"right":"left",renderBodyCell:function(t){var r=t.row.profiles,n=Object.keys(r);return n.length?e("div",{class:"cell--social-profiles flex gap-0.5 items-center"},[n.map((function(t){return r[t]&&e("a",{attrs:{target:"_blank",rel:"noopener noreferrer nofollow",href:"https://".concat(t,".com/").concat(r[t])}},[e(C.a,{attrs:{icon:"brand-".concat(t)}})])}))]):"---"}},{field:"last_activity_at",key:"last_activity_at",sortBy:this.sortConfig.last_activity_at||"",title:this.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.LAST_ACTIVITY"),align:this.isRTLView?"right":"left"},{field:"created_at",key:"created_at",sortBy:this.sortConfig.created_at||"",title:this.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.CREATED_AT"),align:this.isRTLView?"right":"left"}]}},watch:{sortOrder:function(){this.setSortConfig()},sortParam:function(){this.setSortConfig()}},mounted:function(){this.setSortConfig()},methods:{setSortConfig:function(){this.sortConfig=O({},this.sortParam,this.sortOrder)}}},A=(r(3244),Object(d.a)(w,(function(){var t=this,e=t._self._c;return e("section",{staticClass:"flex-1 h-full -mt-1 overflow-hidden bg-white contacts-table-wrap dark:bg-slate-900"},[e("ve-table",{attrs:{"fixed-header":!0,"max-height":"calc(100vh - 7.125rem)","scroll-width":"187rem",columns:t.columns,"table-data":t.tableData,"border-around":!1,"sort-option":t.sortOption}}),t._v(" "),t.showSearchEmptyState?e("empty-state",{attrs:{title:t.$t("CONTACTS_PAGE.LIST.404")}}):t.isLoading||t.contacts.length?t._e():e("empty-state",{attrs:{title:t.$t("CONTACTS_PAGE.LIST.NO_CONTACTS")}}),t._v(" "),t.isLoading?e("div",{staticClass:"flex items-center justify-center text-base"},[e("spinner"),t._v(" "),e("span",[t._v(t._s(t.$t("CONTACTS_PAGE.LIST.LOADING_MESSAGE")))])],1):t._e()],1)}),[],!1,null,"678853f6",null).exports),I=r(3036);function F(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(c){return void r(c)}s.done?e(l):Promise.resolve(l).then(n,a)}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var R={components:{ContactForm:r(2700).a},props:{show:{type:Boolean,default:!1},contact:{type:Object,default:function(){return{}}}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){x(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(n.mapGetters)({uiFlags:"contacts/getUIFlags"})),methods:{onCancel:function(){this.$emit("cancel")},onSuccess:function(){this.$emit("cancel")},onSubmit:function(t){var e,r=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.$store.dispatch("contacts/create",t);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(t){F(i,n,a,o,s,"next",t)}function s(t){F(i,n,a,o,s,"throw",t)}o(void 0)}))})()}}},L=R,N=Object(d.a)(L,(function(){var t=this,e=t._self._c;return e("woot-modal",{attrs:{show:t.show,"on-close":t.onCancel,"modal-type":"right-aligned"},on:{"update:show":function(e){t.show=e}}},[e("div",{staticClass:"h-auto overflow-auto flex flex-col"},[e("woot-modal-header",{attrs:{"header-title":t.$t("CREATE_CONTACT.TITLE"),"header-content":t.$t("CREATE_CONTACT.DESC")}}),t._v(" "),e("contact-form",{attrs:{"in-progress":t.uiFlags.isCreating,"on-submit":t.onSubmit},on:{success:t.onSuccess,cancel:t.onCancel}})],1)])}),[],!1,null,null,null).exports,k=r(2640),M=r(95);function j(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(c){return void r(c)}s.done?e(l):Promise.resolve(l).then(n,a)}function $(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(Object(r),!0).forEach((function(e){U(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function U(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var B={components:{Modal:r(315).a},props:{onClose:{type:Function,default:function(){}}},data:function(){return{show:!0,file:""}},computed:D(D({},Object(n.mapGetters)({uiFlags:"contacts/getUIFlags"})),{},{csvUrl:function(){return"/downloads/import-contacts-sample.csv"}}),mounted:function(){this.$track(M.c.IMPORT_MODAL_OPEN)},methods:{uploadFile:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.file){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$store.dispatch("contacts/import",e.file);case 5:e.onClose(),Object(a.a)(e.$t("IMPORT_CONTACTS.SUCCESS_MESSAGE")),e.$track(M.c.IMPORT_SUCCESS),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),Object(a.a)(t.t0.message||e.$t("IMPORT_CONTACTS.ERROR_MESSAGE")),e.$track(M.c.IMPORT_FAILURE);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){j(i,n,a,o,s,"next",t)}function s(t){j(i,n,a,o,s,"throw",t)}o(void 0)}))})()},handleFileUpload:function(){this.file=this.$refs.file.files[0]}}},V=B,G=Object(d.a)(V,(function(){var t=this,e=t._self._c;return e("modal",{attrs:{show:t.show,"on-close":t.onClose},on:{"update:show":function(e){t.show=e}}},[e("div",{staticClass:"flex flex-col h-auto overflow-auto"},[e("woot-modal-header",{attrs:{"header-title":t.$t("IMPORT_CONTACTS.TITLE")}},[e("p",[t._v("\n        "+t._s(t.$t("IMPORT_CONTACTS.DESC"))+"\n        "),e("a",{attrs:{href:t.csvUrl,download:"import-contacts-sample"}},[t._v(t._s(t.$t("IMPORT_CONTACTS.DOWNLOAD_LABEL")))])])]),t._v(" "),e("div",{staticClass:"flex flex-col p-8"},[e("div",{staticClass:"w-full"},[e("label",[e("span",[t._v(t._s(t.$t("IMPORT_CONTACTS.FORM.LABEL")))]),t._v(" "),e("input",{ref:"file",attrs:{id:"file",type:"file",accept:"text/csv"},on:{change:t.handleFileUpload}})])]),t._v(" "),e("div",{staticClass:"flex flex-row justify-end w-full gap-2 px-0 py-2"},[e("div",{staticClass:"w-full"},[e("woot-button",{attrs:{disabled:t.uiFlags.isCreating||!t.file,loading:t.uiFlags.isCreating},on:{click:t.uploadFile}},[t._v("\n            "+t._s(t.$t("IMPORT_CONTACTS.FORM.SUBMIT"))+"\n          ")]),t._v(" "),e("button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n            "+t._s(t.$t("IMPORT_CONTACTS.FORM.CANCEL"))+"\n          ")])],1)])])],1)])}),[],!1,null,null,null),q=G.exports,K=(r(359),r(2699)),Q=r(1922),z=r(2710),W=[{attributeKey:"name",attributeI18nKey:"NAME",inputType:"plain_text",dataType:"text",filterOperators:z.a,attribute_type:"standard"},{attributeKey:"email",attributeI18nKey:"EMAIL",inputType:"plain_text",dataType:"text",filterOperators:z.c,attribute_type:"standard"},{attributeKey:"phone_number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",dataType:"text",filterOperators:z.c,attribute_type:"standard"},{attributeKey:"identifier",attributeI18nKey:"IDENTIFIER",inputType:"plain_text",dataType:"number",filterOperators:z.a,attribute_type:"standard"},{attributeKey:"country_code",attributeI18nKey:"COUNTRY",inputType:"search_select",dataType:"number",filterOperators:z.a,attribute_type:"standard"},{attributeKey:"city",attributeI18nKey:"CITY",inputType:"plain_text",dataType:"Number",filterOperators:z.c,attribute_type:"standard"},{attributeKey:"created_at",attributeI18nKey:"CREATED_AT",inputType:"date",dataType:"text",filterOperators:z.e,attributeModel:"standard"},{attributeKey:"last_activity_at",attributeI18nKey:"LAST_ACTIVITY",inputType:"date",dataType:"text",filterOperators:z.e,attributeModel:"standard"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:z.e,attributeModel:"standard"},{attributeKey:"blocked",attributeI18nKey:"BLOCKED",inputType:"search_select",dataType:"text",filterOperators:z.a,attributeModel:"standard"}],H=[{name:"Standard Filters",i18nGroup:"STANDARD_FILTERS",attributes:[{key:"name",i18nKey:"NAME"},{key:"email",i18nKey:"EMAIL"},{key:"phone_number",i18nKey:"PHONE_NUMBER"},{key:"identifier",i18nKey:"IDENTIFIER"},{key:"country_code",i18nKey:"COUNTRY"},{key:"city",i18nKey:"CITY"},{key:"created_at",i18nKey:"CREATED_AT"},{key:"last_activity_at",i18nKey:"LAST_ACTIVITY"},{key:"blocked",i18nKey:"BLOCKED"}]}],Y=W,X=r(2785),J=r(2692);function Z(t){return function(t){if(Array.isArray(t))return tt(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return tt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function et(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function rt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?et(Object(r),!0).forEach((function(e){nt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function nt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var at={components:{FilterInputBox:K.a},mixins:[X.a],props:{onClose:{type:Function,default:function(){}},initialFilterTypes:{type:Array,default:function(){return[]}},initialAppliedFilters:{type:Array,default:function(){return[]}},isSegmentsView:{type:Boolean,default:!1},activeSegmentName:{type:String,default:""}},data:function(){return{show:!0,appliedFilters:this.initialAppliedFilters,activeSegmentNewName:this.activeSegmentName,filterTypes:this.initialFilterTypes,filterGroups:[],allCustomAttributes:[],filterAttributeGroups:H,attributeModel:"contact_attribute",filtersFori18n:"CONTACTS_FILTER",validationErrors:{}}},computed:rt(rt({},Object(n.mapGetters)({getAppliedContactFilters:"contacts/getAppliedContactFilters"})),{},{hasAppliedFilters:function(){return this.getAppliedContactFilters.length},filterModalHeaderTitle:function(){return this.isSegmentsView?this.$t("CONTACTS_FILTER.EDIT_CUSTOM_SEGMENT"):this.$t("CONTACTS_FILTER.TITLE")},filterModalSubTitle:function(){return this.isSegmentsView?this.$t("CONTACTS_FILTER.CUSTOM_VIEWS_SUBTITLE"):this.$t("CONTACTS_FILTER.SUBTITLE")}}),mounted:function(){this.setFilterAttributes(),this.getAppliedContactFilters.length?this.appliedFilters=Z(this.getAppliedContactFilters):this.isSegmentsView||this.appliedFilters.push({attribute_key:"name",filter_operator:"equal_to",values:"",query_operator:"and",attribute_model:"standard"})},methods:{getOperatorTypes:function(t){switch(t){case"list":case"number":case"link":case"checkbox":default:return z.a;case"text":return z.c;case"date":return z.d}},customAttributeInputType:function(t){switch(t){case"date":return"date";case"text":default:return"plain_text";case"list":case"checkbox":return"search_select"}},getAttributeModel:function(t){return this.filterTypes.find((function(e){return e.attributeKey===t})).attributeModel},getInputType:function(t,e){if(("created_at"===t||"last_activity_at"===t)&&"days_before"===e)return"plain_text";var r=this.filterTypes.find((function(e){return e.attributeKey===t}));return null===r||void 0===r?void 0:r.inputType},getOperators:function(t){var e=this.filterTypes.find((function(e){return e.attributeKey===t}));return null===e||void 0===e?void 0:e.filterOperators},getDropdownValues:function(t){var e=this.$store.getters["attributes/getAttributesByModel"](this.attributeModel);return e.find((function(e){return e.attribute_key===t&&"checkbox"===e.attribute_display_type}))||"blocked"===t?[{id:!0,name:this.$t("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:this.$t("FILTER.ATTRIBUTE_LABELS.FALSE")}]:e.find((function(e){return e.attribute_key===t&&"list"===e.attribute_display_type}))?e.find((function(e){return e.attribute_key===t})).attribute_values.map((function(t){return{id:t,name:t}})):"country_code"===t?Q.a:void 0},appendNewFilter:function(){this.isSegmentsView?this.setQueryOperatorOnLastQuery():this.appliedFilters.push({attribute_key:"name",filter_operator:"equal_to",values:"",query_operator:"and"})},setQueryOperatorOnLastQuery:function(){var t=this,e=this.appliedFilters.length-1;this.appliedFilters[e]=rt(rt({},this.appliedFilters[e]),{},{query_operator:"and"}),this.$nextTick((function(){t.appliedFilters.push({attribute_key:"name",filter_operator:"equal_to",values:"",query_operator:"and"})}))},removeFilter:function(t){this.appliedFilters.length<=1?Object(a.a)(this.$t("CONTACTS_FILTER.FILTER_DELETE_ERROR")):this.appliedFilters.splice(t,1)},submitFilterQuery:function(){this.validationErrors=Object(J.c)(this.appliedFilters),0===Object.keys(this.validationErrors).length&&(this.$store.dispatch("contacts/setContactFilters",JSON.parse(JSON.stringify(this.appliedFilters))),this.$emit("applyFilter",this.appliedFilters),this.$track(M.c.APPLY_FILTER,{applied_filters:this.appliedFilters.map((function(t){return{key:t.attribute_key,operator:t.filter_operator,query_operator:t.query_operator}}))}))},updateSegment:function(){this.$emit("updateSegment",this.appliedFilters,this.activeSegmentNewName)},resetFilter:function(t,e){this.appliedFilters[t].filter_operator=this.filterTypes.find((function(t){return t.attributeKey===e.attribute_key})).filterOperators[0].value,this.appliedFilters[t].values=""},showUserInput:function(t){return"is_present"!==t&&"is_not_present"!==t},clearFilters:function(){this.$emit("clearFilters"),this.onClose()}}},it=(r(3247),Object(d.a)(at,(function(){var t=this,e=t._self._c;return e("div",[e("woot-modal-header",{attrs:{"header-title":t.filterModalHeaderTitle}},[e("p",{staticClass:"text-slate-600 dark:text-slate-200"},[t._v("\n      "+t._s(t.filterModalSubTitle)+"\n    ")])]),t._v(" "),e("div",{staticClass:"p-8"},[t.isSegmentsView?e("div",[e("label",{staticClass:"input-label",class:{error:!t.activeSegmentNewName}},[t._v("\n        "+t._s(t.$t("CONTACTS_FILTER.SEGMENT_LABEL"))+"\n        "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeSegmentNewName,expression:"activeSegmentNewName"}],staticClass:"bg-white folder-input border-slate-75 dark:border-slate-600 dark:bg-slate-900 text-slate-900 dark:text-slate-100",attrs:{type:"text"},domProps:{value:t.activeSegmentNewName},on:{input:function(e){e.target.composing||(t.activeSegmentNewName=e.target.value)}}}),t._v(" "),t.activeSegmentNewName?t._e():e("span",{staticClass:"message"},[t._v("\n          "+t._s(t.$t("CONTACTS_FILTER.EMPTY_VALUE_ERROR"))+"\n        ")])]),t._v(" "),e("label",{staticClass:"input-label"},[t._v("\n        "+t._s(t.$t("CONTACTS_FILTER.SEGMENT_QUERY_LABEL"))+"\n      ")])]):t._e(),t._v(" "),e("div",{staticClass:"p-4 mb-4 border border-solid rounded-lg bg-slate-25 dark:bg-slate-900 border-slate-50 dark:border-slate-700/50"},[t._l(t.appliedFilters,(function(r,n){return e("filter-input-box",{key:n,attrs:{"filter-groups":t.filterGroups,"grouped-filters":!0,"input-type":t.getInputType(t.appliedFilters[n].attribute_key,t.appliedFilters[n].filter_operator),operators:t.getOperators(t.appliedFilters[n].attribute_key),"dropdown-values":t.getDropdownValues(t.appliedFilters[n].attribute_key),"show-query-operator":n!==t.appliedFilters.length-1,"show-user-input":t.showUserInput(t.appliedFilters[n].filter_operator),"error-message":t.validationErrors[`filter_${n}`]},on:{resetFilter:function(e){return t.resetFilter(n,t.appliedFilters[n])},removeFilter:function(e){return t.removeFilter(n)}},model:{value:t.appliedFilters[n],callback:function(e){t.$set(t.appliedFilters,n,e)},expression:"appliedFilters[i]"}})})),t._v(" "),e("div",{staticClass:"mt-4"},[e("woot-button",{attrs:{icon:"add","color-scheme":"success",variant:"smooth",size:"small"},on:{click:t.appendNewFilter}},[t._v("\n          "+t._s(t.$t("CONTACTS_FILTER.ADD_NEW_FILTER"))+"\n        ")]),t._v(" "),t.hasAppliedFilters&&!t.isSegmentsView?e("woot-button",{attrs:{icon:"subtract","color-scheme":"alert",variant:"smooth",size:"small"},on:{click:t.clearFilters}},[t._v("\n          "+t._s(t.$t("CONTACTS_FILTER.CLEAR_ALL_FILTERS"))+"\n        ")]):t._e()],1)],2),t._v(" "),e("div",{staticClass:"w-full"},[e("div",{staticClass:"flex flex-row justify-end w-full gap-2 px-0 py-2"},[e("woot-button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n          "+t._s(t.$t("CONTACTS_FILTER.CANCEL_BUTTON_LABEL"))+"\n        ")]),t._v(" "),t.isSegmentsView?e("woot-button",{attrs:{disabled:!t.activeSegmentNewName},on:{click:t.updateSegment}},[t._v("\n          "+t._s(t.$t("CONTACTS_FILTER.UPDATE_BUTTON_LABEL"))+"\n        ")]):e("woot-button",{on:{click:t.submitFilterQuery}},[t._v("\n          "+t._s(t.$t("CONTACTS_FILTER.SUBMIT_BUTTON_LABEL"))+"\n        ")])],1)])])],1)}),[],!1,null,"6a333280",null)),ot=it.exports,st=r(1944),lt=r(2863),ct=r(2864),ut=r(2805);function pt(t){return function(t){if(Array.isArray(t))return ht(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ft(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==r)return;var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(l){s=!0,a=l}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}(t,e)||ft(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(t,e){if(t){if("string"===typeof t)return ht(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ht(t,e):void 0}}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(r),!0).forEach((function(e){_t(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var vt={components:{ContactsHeader:h,ContactsTable:A,TableFooter:k.a,ContactInfoPanel:I.a,CreateContact:N,ImportContacts:q,ContactsAdvancedFilters:ot,AddCustomViews:lt.a,DeleteCustomViews:ct.a},props:{label:{type:String,default:""},segmentsId:{type:[String,Number],default:0}},data:function(){var t=this;return{searchQuery:"",showCreateModal:!1,showImportModal:!1,selectedContactId:"",sortConfig:{last_activity_at:"desc"},showFiltersModal:!1,contactFilterItems:Y.map((function(e){return bt(bt({},e),{},{attributeName:t.$t("CONTACTS_FILTER.ATTRIBUTES.".concat(e.attributeI18nKey))})})),segmentsQuery:{},filterType:1,showAddSegmentsModal:!1,showDeleteSegmentsModal:!1,appliedFilter:[]}},computed:bt(bt({},Object(n.mapGetters)({records:"contacts/getContacts",uiFlags:"contacts/getUIFlags",meta:"contacts/getMeta",segments:"customViews/getCustomViews",getAppliedContactFilters:"contacts/getAppliedContactFilters"})),{},{showEmptySearchResult:function(){return!!this.searchQuery&&0===this.records.length},hasAppliedFilters:function(){return this.getAppliedContactFilters.length},hasActiveSegments:function(){return this.activeSegment&&0!==this.segmentsId},isContactAndLabelDashboard:function(){return"contacts_dashboard"===this.$route.name||"contacts_labels_dashboard"===this.$route.name},pageTitle:function(){return this.hasActiveSegments?this.activeSegment.name:this.label?"#".concat(this.label):this.$t("CONTACTS_PAGE.HEADER")},selectedContact:function(){var t=this;if(this.selectedContactId)return this.records.find((function(e){return t.selectedContactId===e.id}))},showContactViewPane:function(){return""!==this.selectedContactId},wrapClass:function(){return this.showContactViewPane?"w-[75%]":"w-full"},pageParameter:function(){var t,e=Number(null===(t=this.$route.query)||void 0===t?void 0:t.page);return!Number.isNaN(e)&&e>=1?e:1},activeSegment:function(){var t=this;if(this.segmentsId)return dt(this.segments.filter((function(e){return e.id===Number(t.segmentsId)})),1)[0]},activeSegmentName:function(){var t;return null===(t=this.activeSegment)||void 0===t?void 0:t.name}}),watch:{label:function(){this.fetchContacts(1),this.hasAppliedFilters&&this.clearFilters()},activeSegment:function(){if(this.hasActiveSegments){var t=this.activeSegment.query;this.fetchSavedFilteredContact(t,1)}this.hasAppliedFilters&&"contacts_dashboard"===this.$route.name?this.fetchFilteredContacts(1):this.fetchContacts(1)}},mounted:function(){this.fetchContacts(this.pageParameter)},methods:{updatePageParam:function(t){window.history.pushState({},null,"".concat(this.$route.path,"?page=").concat(t))},getSortAttribute:function(){var t=this,e=Object.keys(this.sortConfig).reduce((function(e,r){var n=t.sortConfig[r];return n?"".concat("asc"===n?"":"-").concat(r):e}),"");return e||(this.sortConfig={last_activity_at:"desc"},e="-last_activity_at"),e},fetchContacts:function(t){if(this.isContactAndLabelDashboard){this.updatePageParam(t);var e="";e="+"===this.searchQuery.charAt(0)?this.searchQuery.substring(1):this.searchQuery;var r={page:t,sortAttr:this.getSortAttribute(),label:this.label};e?this.$store.dispatch("contacts/search",bt({search:encodeURIComponent(e)},r)):this.$store.dispatch("contacts/get",r)}},fetchSavedFilteredContact:function(t,e){this.hasActiveSegments&&(this.updatePageParam(e),this.$store.dispatch("contacts/filter",{queryPayload:t,page:e}))},fetchFilteredContacts:function(t){if(this.hasAppliedFilters){var e=this.segmentsQuery;this.updatePageParam(t),this.$store.dispatch("contacts/filter",{queryPayload:e,page:t})}},onInputSearch:function(t){var e=t.target.value,r=!!this.searchQuery&&""===e;this.searchQuery=e,r&&this.fetchContacts(1)},onSearchSubmit:function(){this.selectedContactId="",this.searchQuery&&this.fetchContacts(1)},onPageChange:function(t){if(this.selectedContactId="",0!==this.segmentsId){var e=this.activeSegment.query;this.fetchSavedFilteredContact(e,t)}this.hasAppliedFilters?this.fetchFilteredContacts(t):this.fetchContacts(t)},openContactInfoPanel:function(t){this.selectedContactId=t,this.showContactInfoPanelPane=!0},closeContactInfoPanel:function(){this.selectedContactId="",this.showContactInfoPanelPane=!1},onToggleCreate:function(){this.showCreateModal=!this.showCreateModal},onToggleSaveFilters:function(){this.showAddSegmentsModal=!0},onCloseAddSegmentsModal:function(){this.showAddSegmentsModal=!1},onToggleDeleteFilters:function(){this.showDeleteSegmentsModal=!0},onCloseDeleteSegmentsModal:function(){this.showDeleteSegmentsModal=!1},onToggleImport:function(){this.showImportModal=!this.showImportModal},onSortChange:function(t){this.sortConfig=t,this.fetchContacts(this.meta.currentPage);var e=Object.entries(t).find((function(t){return Boolean(t[1])}))||[];this.$track(M.c.APPLY_SORT,{appliedOn:e[0],order:e[1]})},onToggleFilters:function(){this.hasActiveSegments&&this.initializeSegmentToFilterModal(this.activeSegment),this.showFiltersModal=!0},closeAdvanceFiltersModal:function(){this.showFiltersModal=!1,this.appliedFilter=[]},onApplyFilter:function(t){this.closeContactInfoPanel(),this.segmentsQuery=Object(st.a)(t),this.$store.dispatch("contacts/filter",{queryPayload:Object(st.a)(t)}),this.showFiltersModal=!1},onUpdateSegment:function(t,e){var r=bt(bt({},this.activeSegment),{},{name:e,query:Object(st.a)(t)});this.$store.dispatch("customViews/update",r),this.closeAdvanceFiltersModal()},clearFilters:function(){this.$store.dispatch("contacts/clearContactFilters"),this.fetchContacts(this.pageParameter)},onExportSubmit:function(){var t={payload:[]};this.hasActiveSegments?t=this.activeSegment.query:this.hasAppliedFilters&&(t=Object(st.a)(this.getAppliedContactFilters));try{this.$store.dispatch("contacts/export",bt(bt({},t),{},{label:this.label})),Object(a.a)(this.$t("EXPORT_CONTACTS.SUCCESS_MESSAGE"))}catch(e){Object(a.a)(e.message||this.$t("EXPORT_CONTACTS.ERROR_MESSAGE"))}},setParamsForEditSegmentModal:function(){return{countries:Q.a,filterTypes:Y,allCustomAttributes:this.$store.getters["attributes/getAttributesByModel"]("contact_attribute")}},initializeSegmentToFilterModal:function(t){var e,r,n=this,a=null===t||void 0===t||null===(e=t.query)||void 0===e?void 0:e.payload;Array.isArray(a)&&(r=this.appliedFilter).push.apply(r,pt(a.map((function(t){return{attribute_key:t.attribute_key,attribute_model:t.attribute_model,filter_operator:t.filter_operator,values:Array.isArray(t.values)?Object(ut.a)(t,n.setParamsForEditSegmentModal()):[],query_operator:t.query_operator,custom_attribute_type:t.custom_attribute_type}}))))},openSavedItemInSegment:function(){var t=this.segments[this.segments.length-1].id;this.$router.push({name:"contacts_segments_dashboard",params:{id:t}})},openLastItemAfterDeleteInSegment:function(){this.segments.length>0?this.openSavedItemInSegment():(this.$router.push({name:"contacts_dashboard"}),this.fetchContacts(1))}}},gt=Object(d.a)(vt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-row w-full"},[e("div",{staticClass:"flex flex-col h-full",class:t.wrapClass},[e("contacts-header",{attrs:{"search-query":t.searchQuery,"header-title":t.pageTitle,"segments-id":t.segmentsId,"this-selected-contact-id":""},on:{"on-input-search":t.onInputSearch,"on-toggle-create":t.onToggleCreate,"on-toggle-filter":t.onToggleFilters,"on-search-submit":t.onSearchSubmit,"on-toggle-import":t.onToggleImport,"on-export-submit":t.onExportSubmit,"on-toggle-save-filter":t.onToggleSaveFilters,"on-toggle-delete-filter":t.onToggleDeleteFilters,"on-toggle-edit-filter":t.onToggleFilters}}),t._v(" "),e("contacts-table",{attrs:{contacts:t.records,"show-search-empty-state":t.showEmptySearchResult,"is-loading":t.uiFlags.isFetching,"on-click-contact":t.openContactInfoPanel,"active-contact-id":t.selectedContactId},on:{"on-sort-change":t.onSortChange}}),t._v(" "),e("table-footer",{staticClass:"border-t border-slate-75 dark:border-slate-700/50",attrs:{"current-page":Number(t.meta.currentPage),"total-count":t.meta.count,"page-size":15},on:{"page-change":t.onPageChange}})],1),t._v(" "),t.showAddSegmentsModal?e("add-custom-views",{attrs:{"custom-views-query":t.segmentsQuery,"filter-type":t.filterType,"open-last-saved-item":t.openSavedItemInSegment},on:{close:t.onCloseAddSegmentsModal}}):t._e(),t._v(" "),t.showDeleteSegmentsModal?e("delete-custom-views",{attrs:{"show-delete-popup":t.showDeleteSegmentsModal,"active-custom-view":t.activeSegment,"custom-views-id":t.segmentsId,"active-filter-type":t.filterType,"open-last-item-after-delete":t.openLastItemAfterDeleteInSegment},on:{"update:showDeletePopup":function(e){t.showDeleteSegmentsModal=e},"update:show-delete-popup":function(e){t.showDeleteSegmentsModal=e},close:t.onCloseDeleteSegmentsModal}}):t._e(),t._v(" "),t.showContactViewPane?e("contact-info-panel",{attrs:{contact:t.selectedContact,"on-close":t.closeContactInfoPanel}}):t._e(),t._v(" "),e("create-contact",{attrs:{show:t.showCreateModal},on:{cancel:t.onToggleCreate}}),t._v(" "),e("woot-modal",{attrs:{show:t.showImportModal,"on-close":t.onToggleImport},on:{"update:show":function(e){t.showImportModal=e}}},[t.showImportModal?e("import-contacts",{attrs:{"on-close":t.onToggleImport}}):t._e()],1),t._v(" "),e("woot-modal",{attrs:{show:t.showFiltersModal,"on-close":t.closeAdvanceFiltersModal,size:"medium"},on:{"update:show":function(e){t.showFiltersModal=e}}},[t.showFiltersModal?e("contacts-advanced-filters",{attrs:{"on-close":t.closeAdvanceFiltersModal,"initial-filter-types":t.contactFilterItems,"initial-applied-filters":t.appliedFilter,"active-segment-name":t.activeSegmentName,"is-segments-view":t.hasActiveSegments},on:{applyFilter:t.onApplyFilter,updateSegment:t.onUpdateSegment,clearFilters:t.clearFilters}}):t._e()],1)],1)}),[],!1,null,null,null);e.default=gt.exports}}]);
//# sourceMappingURL=45-861a77f06142c5438d12.chunk.js.map